"use strict";(self.webpackChunkcsgoroll=self.webpackChunkcsgoroll||[]).push([["default-libs_crash_src_index_ts"],{60679:(qt,at,s)=>{s.r(at),s.d(at,{CrashModule:()=>Ui,CrashSharedModule:()=>Te});var F=s(36822),O=s(99623),pt=s(75424),st=s(45990),Ct=s(5396),J=s(966),R=s(70655),L=s(41777),C=s(23600),E=s(93114),o=s(44987),rt=s(9124),T=s(94813),f=s(71884),h=s(54004),Q=s(68675),N=s(34782),St=s(54968),Et=s(78372),I=s(18505),ct=s(39300),K=s(78130),y=s(76973),t=s(5e3),d=s(69808);let Ft=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["cw-crash-busted"]],decls:1,vars:0,consts:[["src","assets/icons/crash/boom.png"]],template:function(e,a){1&e&&t._UZ(0,"img",0)},styles:[".no-scrollbar[_ngcontent-%COMP%]{scrollbar-width:none;-ms-overflow-style:none}.no-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}[_nghost-%COMP%]{display:flex;position:absolute;top:0;right:0;bottom:0;left:0;flex-direction:column;justify-content:center;align-items:center}[_nghost-%COMP%]   img[_ngcontent-%COMP%]{width:auto;height:30%}"],changeDetection:0}),i})();var $=s(77093),lt=s(23693),M=s(61135),Z=s(63900),At=s(39646),Zt=s(17445),V=s(70029),Dt=s(22529),ft=s(28746),D=s(20975);let Gt=(()=>{class i{constructor(e,a){this.crashService=e,this.performanceService=a,this.maxImageSize=200,this.transition$=new M.X("0"),this.rotate3d$=new M.X("360"),this.countdown$=this.crashService.gameStartedAt$.pipe((0,Z.w)(r=>{if(r<=0)return(0,At.of)(0);if(r>0){const g=r-(new Date).getTime();this.transition$.next(Math.floor(g).toString()),this.rotate3d$.next("0")}return(0,Zt.F)(0,V.Z).pipe((0,h.U)(()=>{const g=r-(new Date).getTime();return(g<0?0:g)/1e3}),(0,Dt.o)(g=>g>0,!0),(0,ft.x)(()=>{this.transition$.next("0"),this.rotate3d$.next("360")}))})),this.performanceClass$=this.performanceService.performanceClass$}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(y.e),t.Y36(lt.BK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["cw-crash-countdown"]],inputs:{maxImageSize:"maxImageSize"},decls:11,vars:21,consts:function(){let n;return n=$localize`:␟0348e4fa6fe0a5c0ca7d75e5e9daf4e2a86ff07b␟4917478086279049652:Next Round in...`,[[1,"next-round"],n,["loading","lazy",3,"src","width","height"],[1,"countdown"]]},template:function(e,a){1&e&&(t.TgZ(0,"div",0),t.SDv(1,1),t.qZA(),t.TgZ(2,"img",2),t.ALo(3,"push"),t.ALo(4,"push"),t.ALo(5,"push"),t.qZA(),t.TgZ(6,"div",3),t.TgZ(7,"span"),t._uU(8),t.ALo(9,"number"),t.ALo(10,"push"),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.Tol(t.lcZ(3,10,a.performanceClass$)),t.Udp("transition","transform "+t.lcZ(4,12,a.transition$)+"ms linear 0ms")("transform","rotate3d(0,0,1, -"+t.lcZ(5,14,a.rotate3d$)+"deg)"),t.Q6J("src","assets/icons/coins.svg",t.LSH)("width",a.maxImageSize)("height",a.maxImageSize),t.xp6(6),t.Oqu(t.xi3(9,16,t.lcZ(10,19,a.countdown$),"1.2-2")))},pipes:[D.f,d.JJ],styles:[".no-scrollbar[_ngcontent-%COMP%]{scrollbar-width:none;-ms-overflow-style:none}.no-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}[_nghost-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;position:relative;width:100%;height:100%}.next-round[_ngcontent-%COMP%]{text-transform:uppercase;color:#6c757d}img[_ngcontent-%COMP%]{margin:1rem;height:25%}.countdown[_ngcontent-%COMP%]{position:absolute;bottom:16%;font-weight:700;font-size:1.8rem;font-family:IndustryMonospace}"],changeDetection:0}),i})();var q=s(23322),P=s(39841),Rt=s(20820),Tt=s(31495),bt=s(96298),tt=s(35357),Qt=s(27737),xt=s(89847),Ht=s(30121);function k(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"span",5),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).cancel.next()}),t._UZ(1,"cw-icon",6),t.qZA()}if(2&i){t.oxw();const e=t.MAs(6);t.Q6J("ngbTooltip",e)}}function z(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"span",7),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).toggleManualObserve()}),t.ALo(1,"push"),t.ALo(2,"push"),t._UZ(3,"cw-icon",8),t.qZA()}if(2&i){t.oxw();const e=t.MAs(4),a=t.oxw(2);t.ekj("clickable",t.lcZ(1,3,a.canChangeObserve$)),t.Q6J("ngbTooltip",t.lcZ(2,5,a.isObserved$)?null:e)}}function mt(i,n){if(1&i&&(t._uU(0," Watch "),t._UZ(1,"br"),t.TgZ(2,"b"),t._uU(3),t.qZA(),t._uU(4,"'s "),t._UZ(5,"br"),t._uU(6," Crash ")),2&i){const e=t.oxw(2).$implicit;t.xp6(3),t.Oqu(e.user.name)}}function p(i,n){1&i&&t._uU(0,"Cancel Bet")}function _(i,n){if(1&i&&(t.ynx(0),t.TgZ(1,"img",21),t.ALo(2,"push"),t.qZA(),t.BQk()),2&i){const e=n.ngIf,a=t.oxw(5);t.xp6(1),t.Tol(t.lcZ(2,3,a.performanceClass$)),t.Q6J("src",e.node.itemVariant.iconUrl,t.LSH)}}function b(i,n){if(1&i&&(t.TgZ(0,"div",22),t._uU(1),t.qZA()),2&i){const e=t.oxw(4).$implicit;t.xp6(1),t.Oqu(e.items.edges.length)}}function Y(i,n){if(1&i&&(t.ynx(0),t.YNc(1,_,3,5,"ng-container",14),t.YNc(2,b,2,1,"div",20),t.BQk()),2&i){const e=t.oxw(3).$implicit;t.xp6(1),t.Q6J("ngIf",e.items.edges[0]),t.xp6(1),t.Q6J("ngIf",e.items.edges.length>1)}}function j(i,n){if(1&i&&(t.ynx(0),t.TgZ(1,"img",23),t.ALo(2,"push"),t.qZA(),t.BQk()),2&i){const e=t.oxw(3).$implicit,a=t.oxw();t.xp6(1),t.Tol(t.lcZ(2,3,a.performanceClass$)),t.Q6J("src",e.userItem.itemVariant.iconUrl,t.LSH)}}function X(i,n){if(1&i&&t._UZ(0,"cw-pretty-balance",24),2&i){const e=t.oxw(3).$implicit;t.Q6J("balance",e.totalBet)("currency",e.currency)}}function ut(i,n){if(1&i&&t._UZ(0,"cw-pretty-balance",24),2&i){const e=t.oxw(3).$implicit;t.Q6J("balance",e.totalBet)("currency",e.currency)}}function Mt(i,n){if(1&i&&(t.ynx(0),t._UZ(1,"cw-pretty-balance",25),t.BQk()),2&i){const e=t.oxw(3).$implicit;t.xp6(1),t.Q6J("balance",e.totalWinAmount)("currency",e.currency)}}function Nt(i,n){1&i&&t._UZ(0,"cw-icon",26)}function Ut(i,n){if(1&i&&t._UZ(0,"cw-pretty-balance",27),2&i){const e=t.oxw(3).$implicit;t.Q6J("balance",e.totalBet)("currency",e.currency)}}function m(i,n){if(1&i&&(t.ynx(0),t._UZ(1,"cw-pretty-balance",25),t.BQk()),2&i){const e=t.oxw(3).$implicit;t.xp6(1),t.Q6J("balance",e.totalWinAmount)("currency",e.currency)}}const c=function(i){return{invisible:i}};function u(i,n){if(1&i&&t._UZ(0,"cw-icon",28),2&i){const e=t.oxw().$implicit,a=t.oxw(2).$implicit;t.Q6J("ngClass",t.VKq(1,c,"STARTED"!==e||a.tick))}}function l(i,n){if(1&i&&(t.ynx(0),t.TgZ(1,"span",34),t._uU(2),t.ALo(3,"multiplierText"),t.qZA(),t.BQk()),2&i){const e=t.oxw(6).$implicit;t.xp6(2),t.Oqu(t.lcZ(3,1,e.maxTick/100))}}function S(i,n){1&i&&t._uU(0," LIVE ")}function H(i,n){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,l,4,3,"ng-container",32),t.YNc(2,S,1,0,"ng-template",null,33,t.W1O),t.qZA()),2&i){const e=t.MAs(3),a=t.oxw(5).$implicit;t.xp6(1),t.Q6J("ngIf",a.maxTick)("ngIfElse",e)}}function et(i,n){if(1&i&&(t.TgZ(0,"span",35),t._uU(1),t.ALo(2,"number"),t.qZA()),2&i){const e=t.oxw(5).$implicit;t.xp6(1),t.hij("",t.xi3(2,1,e.tick/100,"1.2-2"),"x")}}function gt(i,n){if(1&i&&(t.ynx(0),t.TgZ(1,"div",30),t.YNc(2,H,4,2,"span",14),t.YNc(3,et,3,4,"span",31),t.qZA(),t.BQk()),2&i){const e=t.oxw(4).$implicit;t.xp6(2),t.Q6J("ngIf",!e.tick),t.xp6(1),t.Q6J("ngIf",e.tick)}}function ie(i,n){if(1&i&&(t.ynx(0),t.YNc(1,gt,4,2,"ng-container",14),t._UZ(2,"img",29),t.BQk()),2&i){const e=n.rxLet;t.xp6(1),t.Q6J("ngIf",e),t.xp6(1),t.ekj("d-none",e)}}const Ot=function(i){return["/player",i]};function Yt(i,n){if(1&i&&(t.ynx(0),t.TgZ(1,"div",9),t.TgZ(2,"div",10),t.TgZ(3,"a",11),t._UZ(4,"cw-user-avatar-badge",12),t.qZA(),t.TgZ(5,"span",13),t.YNc(6,Y,3,2,"ng-container",14),t.YNc(7,j,3,5,"ng-container",14),t.qZA(),t.YNc(8,X,1,2,"cw-pretty-balance",15),t.YNc(9,ut,1,2,"cw-pretty-balance",15),t.YNc(10,Mt,2,2,"ng-container",14),t.YNc(11,Nt,1,0,"cw-icon",16),t.YNc(12,Ut,1,2,"cw-pretty-balance",17),t.YNc(13,m,2,2,"ng-container",14),t.YNc(14,u,1,3,"cw-icon",18),t.qZA(),t.qZA(),t.TgZ(15,"div",19),t.YNc(16,ie,3,3,"ng-container",0),t.qZA(),t.BQk()),2&i){const e=n.$implicit,a=t.oxw().$implicit,r=t.oxw().$implicit,g=t.oxw();t.xp6(3),t.Q6J("routerLink",t.VKq(14,Ot,r.user.id)),t.xp6(1),t.Q6J("animateXpGain",!1)("user",r.user)("small",!0),t.xp6(2),t.Q6J("ngIf",!r.userItem&&("CREATED"===e||"STARTED"===e)),t.xp6(1),t.Q6J("ngIf",r.userItem),t.xp6(1),t.Q6J("ngIf","CREATED"===e),t.xp6(1),t.Q6J("ngIf","STARTED"===e&&!r.tick),t.xp6(1),t.Q6J("ngIf","STARTED"===e&&r.tick),t.xp6(1),t.Q6J("ngIf",a),t.xp6(1),t.Q6J("ngIf","FINISHED"===e&&!r.tick),t.xp6(1),t.Q6J("ngIf","FINISHED"===e&&r.tick),t.xp6(1),t.Q6J("ngIf",!a),t.xp6(2),t.Q6J("rxLet",g.isBetAlive$)}}function Oe(i,n){if(1&i&&(t.ynx(0),t.YNc(1,k,2,1,"span",1),t.YNc(2,z,4,7,"span",2),t.YNc(3,mt,7,1,"ng-template",null,3,t.W1O),t.YNc(5,p,1,0,"ng-template",null,4,t.W1O),t.YNc(7,Yt,17,16,"ng-container",0),t.BQk()),2&i){const e=n.$implicit,a=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e),t.xp6(1),t.Q6J("ngIf",!e),t.xp6(5),t.Q6J("rxLet",a.gameStatus$)}}function Be(i,n){if(1&i&&(t.ynx(0),t.YNc(1,Oe,8,3,"ng-container",0),t.BQk()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("rxLet",e.isInQueue$)}}let ht=class{constructor(n,e){this.crashService=n,this.performanceService=e,this.gameStatus$=new M.X(null),this.crashBet$=new M.X(null),this.isInQueue$=new M.X(!1),this.isInLiveGame$=new M.X(!1),this.hasCashedOut$=new M.X(!1),this.floatingBet=!1,this.cancel=new t.vpe,this.isObserved$=new M.X(!1),this.hasCashed$=new M.X(!1),this.hasCrashed$=new M.X(!1),this.canChangeObserve$=new M.X(!1),this.leaveAnim=!0,this.isSelectedObserved$=new M.X(!1),this.isDefaultObserved$=new M.X(!1),this.isBetAlive$=new M.X(!1),this.performanceClass$=this.performanceService.performanceClass$}set _gameStatus(n){this.gameStatus$.next(n)}set _crashBet(n){this.crashBet$.next(n)}set _inQueue(n){this.isInQueue$.next(n)}set _inLiveGame(n){this.isInLiveGame$.next(n)}set _cashedOut(n){this.hasCashedOut$.next(n)}ngOnInit(){this.isInQueue$.getValue()||(0,P.a)([this.crashService.defaultObservedCrashBet$,this.crashService.selectedObservedCrashBet$,this.crashBet$.pipe((0,f.x)())]).pipe((0,o.t)(this)).subscribe(([n,e,a])=>{this.isDefaultObserved$.next((null==n?void 0:n.id)===a.id),this.isSelectedObserved$.next((null==e?void 0:e.id)===a.id)}),(0,P.a)([this.isInQueue$.pipe((0,f.x)()),this.gameStatus$.pipe((0,f.x)()),this.crashService.selectedObservedCrashBet$.pipe((0,f.x)())]).pipe((0,h.U)(([n,e,a])=>!(n||!["STARTED","CREATED"].includes(e))&&(a?this.isSelectedObserved$.getValue():this.isDefaultObserved$.getValue())),(0,f.x)(),(0,I.b)(n=>{this.isObserved$.next(n)}),(0,o.t)(this)).subscribe(),this.crashBet$.pipe((0,h.U)(({tick:n})=>!!n),(0,f.x)(),(0,I.b)(n=>this.hasCashed$.next(n)),(0,o.t)(this)).subscribe(),this.gameStatus$.pipe((0,h.U)(n=>"FINISHED"===n),(0,f.x)(),(0,I.b)(n=>this.hasCrashed$.next(n)),(0,o.t)(this)).subscribe(),(0,P.a)([this.gameStatus$.pipe((0,f.x)()),this.isInLiveGame$.pipe((0,f.x)())]).pipe((0,o.t)(this),(0,h.U)(([n,e])=>"STARTED"===n&&!e),(0,f.x)(),(0,I.b)(n=>{this.canChangeObserve$.next(n)})).subscribe(),(0,P.a)([this.crashBet$.pipe((0,f.x)()),this.gameStatus$.pipe((0,f.x)())]).pipe((0,h.U)(([{tick:n},e])=>"FINISHED"!==e||"FINISHED"===e&&n),(0,f.x)(),(0,I.b)(n=>this.isBetAlive$.next(n)),(0,o.t)(this)).subscribe()}toggleManualObserve(){if(this.canChangeObserve$.getValue()){if(this.isDefaultObserved$.getValue())return void(this.crashService.selectedObservedCrashBet$.getValue()&&this.crashService.selectedObservedCrashBet$.next(null));this.isSelectedObserved$.getValue()?this.crashService.selectedObservedCrashBet$.next(null):this.crashService.selectedObservedCrashBet$.next(this.crashBet$.getValue())}}};ht.\u0275fac=function(n){return new(n||ht)(t.Y36(y.e),t.Y36(lt.BK))},ht.\u0275cmp=t.Xpm({type:ht,selectors:[["cw-crash-bet"]],hostVars:6,hostBindings:function(n,e){1&n&&t.NdJ("$.class.observed",function(){return e.isObserved$()})("$.class.cashed",function(){return e.hasCashed$()})("$.class.crashed",function(){return e.hasCrashed$()}),2&n&&(t.Ikx("$.class.observed",e.isObserved$)("$.class.cashed",e.hasCashed$)("$.class.crashed",e.hasCrashed$),t.d8E("@leaveAnim",e.leaveAnim),t.ekj("floating-bet",e.floatingBet))},inputs:{_gameStatus:["gameStatus","_gameStatus"],_crashBet:["crashBet","_crashBet"],_inQueue:["inQueue","_inQueue"],_inLiveGame:["inLiveGame","_inLiveGame"],_cashedOut:["cashedOut","_cashedOut"],floatingBet:"floatingBet"},outputs:{cancel:"cancel"},decls:1,vars:1,consts:[[4,"rxLet"],["class","left-button clickable","placement","left","tooltipClass","crash-bet-tooltip","container","body",3,"ngbTooltip","click",4,"ngIf"],["class","left-button","placement","left","tooltipClass","crash-bet-tooltip","container","body",3,"clickable","ngbTooltip","click",4,"ngIf"],["observeTooltipContent",""],["cancelBetTooltipContent",""],["placement","left","tooltipClass","crash-bet-tooltip","container","body",1,"left-button","clickable",3,"ngbTooltip","click"],["inlineSVG","assets/icons/close-outline.svg"],["placement","left","tooltipClass","crash-bet-tooltip","container","body",1,"left-button",3,"ngbTooltip","click"],["inlineSVG","assets/icons/eye.svg"],["fxLayout","","fxLayoutAlign","start center",1,"left-side"],["fxLayout","","fxLayoutAlign","start center","fxLayoutGap","0.5vw",1,"bet"],[1,"avatar",3,"routerLink"],[3,"animateXpGain","user","small"],[1,"items"],[4,"ngIf"],[3,"balance","currency",4,"ngIf"],["inlineSVG","assets/icons/clock-outline.svg",4,"ngIf"],["class","text-danger",3,"balance","currency",4,"ngIf"],["class","animated text-success in-progress-arrow","inlineSVG","assets/icons/arrow.svg",3,"ngClass",4,"ngIf"],[1,"state"],["class","multiple-items",4,"ngIf"],[1,"crash-item",3,"src"],[1,"multiple-items"],[1,"crash-item","won",3,"src"],[3,"balance","currency"],[1,"text-success",3,"balance","currency"],["inlineSVG","assets/icons/clock-outline.svg"],[1,"text-danger",3,"balance","currency"],["inlineSVG","assets/icons/arrow.svg",1,"animated","text-success","in-progress-arrow",3,"ngClass"],["src","assets/icons/crash/boom.png",1,"lost-img"],[1,"state-label"],["class","tick",4,"ngIf"],[4,"ngIf","ngIfElse"],["liveTpl",""],[1,"max-tick"],[1,"tick"]],template:function(n,e){1&n&&t.YNc(0,Be,2,1,"ng-container",0),2&n&&t.Q6J("rxLet",e.crashBet$)},directives:[Rt.e,d.O5,J._L,Tt.o,bt.d$,$.xw,$.Wh,$.SQ,tt.yS,Qt.i,xt.q,d.mk,q.oO],pipes:[D.f,Ht.Y,d.JJ],styles:[".no-scrollbar[_ngcontent-%COMP%]{scrollbar-width:none;-ms-overflow-style:none}.no-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}[_nghost-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.1rem .5rem .1rem 1rem;font-size:.8rem;background-color:#31353d;border-radius:.3rem;margin-left:.74rem;position:relative;animation:betEnterAnim .5s}.observed[_nghost-%COMP%]{background-color:#3c414b}.observed[_nghost-%COMP%]   .left-button[_ngcontent-%COMP%]{background-color:#3c414b}.observed[_nghost-%COMP%]   .left-button[_ngcontent-%COMP%]   cw-icon[_ngcontent-%COMP%]{color:#ffe063}.cashed[_nghost-%COMP%]{background-color:#2d5347}.cashed[_nghost-%COMP%]   .left-button[_ngcontent-%COMP%]{background-color:#2d5347}.crashed[_nghost-%COMP%]{background-color:#523433}.floating-crash-bet[_nghost-%COMP%]{transform:translateZ(0);width:200px;padding-left:.5rem}.floating-crash-bet[_nghost-%COMP%]   .left-side[_ngcontent-%COMP%]{width:100%}.floating-crash-bet[_nghost-%COMP%]   .bet[_ngcontent-%COMP%]{justify-content:space-around!important;padding-right:.5vw}.floating-crash-bet[_nghost-%COMP%]   .left-button[_ngcontent-%COMP%], .floating-crash-bet[_nghost-%COMP%]   .items[_ngcontent-%COMP%], .floating-crash-bet[_nghost-%COMP%]   .in-progress-arrow[_ngcontent-%COMP%]{display:none!important}.floating-crash-bet[_nghost-%COMP%]   .avatar[_ngcontent-%COMP%], .floating-crash-bet[_nghost-%COMP%]   .state[_ngcontent-%COMP%]{animation:none!important}.floating-bet[_nghost-%COMP%]{animation:floatingBetAppearAnim 1.1s}.left-button[_ngcontent-%COMP%]{background-color:#31353d;border-radius:50%;position:absolute;left:-.75rem;width:1.5rem;height:1.5rem;display:flex;justify-content:center;align-items:center}.left-button[_ngcontent-%COMP%]   cw-icon[_ngcontent-%COMP%]{width:1rem;height:1rem}.left-button.clickable[_ngcontent-%COMP%]{cursor:pointer;transition:filter .2s}.left-button.clickable[_ngcontent-%COMP%]:hover{filter:brightness(1.25)}  .crash-bet-tooltip{font-size:14px}  .crash-bet-tooltip b{color:#fff;font-weight:400}  .crash-bet-tooltip .tooltip-inner{background-color:#31353d;border-radius:9px;padding:7px 14px;line-height:1.25;animation:tooltipEnterAnim .3s}  .crash-bet-tooltip .arrow{animation:tooltipEnterAnim .3s}  .crash-bet-tooltip .arrow:before{border-left-color:#31353d}.bet[_ngcontent-%COMP%]{flex:1}.bet[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:2rem;min-width:2rem;animation:avatarEnterAnim .5s}.bet[_ngcontent-%COMP%]   .items[_ngcontent-%COMP%]{display:inline-block;width:42px;height:42px;position:relative;text-align:center;margin-right:12px}.bet[_ngcontent-%COMP%]   .items[_ngcontent-%COMP%]   img.crash-item[_ngcontent-%COMP%]{position:absolute;top:0;right:0;bottom:0;left:0;margin:auto;width:70%}.bet[_ngcontent-%COMP%]   .items[_ngcontent-%COMP%]   img.crash-item.won[_ngcontent-%COMP%]{animation:scaleUpBig .16s 4 alternate}.bet[_ngcontent-%COMP%]   .items[_ngcontent-%COMP%]   .multiple-items[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;border-radius:.2rem;top:0;left:0;background-color:#0003;display:flex;justify-content:center;align-items:center;font-weight:700;font-size:1.1rem}.bet[_ngcontent-%COMP%]   cw-pretty-balance[_ngcontent-%COMP%]{color:#fff;font-size:.9rem}.bet[_ngcontent-%COMP%]   cw-pretty-balance.won[_ngcontent-%COMP%]{animation:scaleUpBig .16s 4 alternate}.bet[_ngcontent-%COMP%]   cw-icon[_ngcontent-%COMP%]{margin-left:8px;width:12px;vertical-align:middle}.bet[_ngcontent-%COMP%]   cw-icon.animated[_ngcontent-%COMP%]{animation:scaleUp .25s infinite alternate}.state[_ngcontent-%COMP%]{min-width:4rem;white-space:nowrap;display:inline-block;text-align:right;animation:stateEnterAnim .5s}.state[_ngcontent-%COMP%]   .state-label[_ngcontent-%COMP%]{width:3.8rem;text-align:center;font-size:.75rem;padding:4px 8px;border-radius:.2rem;background-color:var(--card-bg)}.state[_ngcontent-%COMP%]   .tick[_ngcontent-%COMP%]{font-size:.9rem;font-weight:700;color:#00c74d}.state[_ngcontent-%COMP%]   .max-tick[_ngcontent-%COMP%]{color:#ffe063;font-size:13px}.state[_ngcontent-%COMP%]   .lost-img[_ngcontent-%COMP%]{width:3rem;vertical-align:middle}.state[_ngcontent-%COMP%]   cw-coin-item[_ngcontent-%COMP%]{display:inline-flex;padding:0 10px}cw-pretty-balance[_ngcontent-%COMP%]{font-size:1.1rem}@keyframes stateEnterAnim{0%{transform:translate(100%)}to{transform:translate(0)}}@keyframes tooltipEnterAnim{0%{opacity:0;transform:translate(-20px)}to{opacity:1;transform:translate(0)}}@keyframes floatingBetAppearAnim{0%{opacity:0;transform:scale3d(.9,.9,.9) translateY(50%)}10%{opacity:1;transform:scale(1) translate(0)}to{opacity:0;transform:scale3d(.9,.9,.9) translateY(-150%)}}"],data:{animation:[(0,rt.QQ)({anchor:"leaveAnim",duration:200})]},changeDetection:0}),ht=(0,R.gn)([(0,o.c)(),(0,R.w6)("design:paramtypes",[y.e,lt.BK])],ht);var Kt=s(50457),$e=s(59468);const Ie=["video"];let Bt=class{constructor(n){this.crashService=n,this.videoUrl="assets/webm/coin2.webm"}ngAfterViewInit(){const r=this.video.nativeElement;(0,Kt.D)(fetch(this.videoUrl)).pipe((0,Z.w)(()=>(r.muted=!0,r.loop=!0,r.play())),(0,Z.w)(()=>this.crashService.multiplier$),(0,$e.p)(2e3),(0,o.t)(this)).subscribe(g=>{const v=(0,C.uZ5)((0,C.ii)(1,3,g),0,1),B=(0,C.t7z)(1,4,v);r.playbackRate=B})}};function ye(i,n){if(1&i&&(t.TgZ(0,"div",1),t._uU(1),t.ALo(2,"multiplierText"),t.qZA()),2&i){const e=n.ngIf;t.xp6(1),t.hij(" ",t.lcZ(2,1,e),"\n")}}Bt.\u0275fac=function(n){return new(n||Bt)(t.Y36(y.e))},Bt.\u0275cmp=t.Xpm({type:Bt,selectors:[["cw-crash-coin-animation"]],viewQuery:function(n,e){if(1&n&&t.Gf(Ie,5),2&n){let a;t.iGM(a=t.CRH())&&(e.video=a.first)}},decls:2,vars:1,consts:[["type","video/webm","playsinline","","preload","none",1,"coin-video",3,"src"],["video",""]],template:function(n,e){1&n&&t._UZ(0,"video",0,1),2&n&&t.Q6J("src",e.videoUrl,t.LSH)},styles:[".no-scrollbar[_ngcontent-%COMP%]{scrollbar-width:none;-ms-overflow-style:none}.no-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}[_nghost-%COMP%]{position:absolute;top:0;right:0;bottom:0;left:0;margin:auto;display:block;height:100%;width:100%}video[_ngcontent-%COMP%]{height:100%}"],changeDetection:0}),Bt=(0,R.gn)([(0,o.c)(),(0,R.w6)("design:paramtypes",[y.e])],Bt);let oe=(()=>{class i{constructor(e){this.crashService=e,this.multiplier$=this.crashService.multiplier$,this.isMed$=this.multiplier$.pipe((0,h.U)(a=>a>=2&&a<3),(0,f.x)()),this.isHigh$=this.multiplier$.pipe((0,h.U)(a=>a>=3),(0,f.x)()),this.crashed$=this.crashService.game$.pipe((0,h.U)(a=>"FINISHED"===a.status),(0,f.x)())}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(y.e))},i.\u0275cmp=t.Xpm({type:i,selectors:[["cw-crash-multiplier"]],hostVars:3,hostBindings:function(e,a){1&e&&t.NdJ("$.class.med",function(){return a.isMed$()})("$.class.high",function(){return a.isHigh$()})("$.class.crashed",function(){return a.crashed$()}),2&e&&t.Ikx("$.class.med",a.isMed$)("$.class.high",a.isHigh$)("$.class.crashed",a.crashed$)},decls:2,vars:3,consts:[["class","score",4,"ngIf"],[1,"score"]],template:function(e,a){1&e&&(t.YNc(0,ye,3,3,"div",0),t.ALo(1,"push")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,a.multiplier$))},directives:[d.O5],pipes:[D.f,Ht.Y],styles:["[_nghost-%COMP%]{display:block;width:100%;height:100%}.med[_nghost-%COMP%]   .score[_ngcontent-%COMP%]{color:var(--game-med)}.high[_nghost-%COMP%]   .score[_ngcontent-%COMP%]{color:var(--game-high)}.crashed[_nghost-%COMP%]{transform:scale3d(1.2,1.2,1.2);color:var(--danger)}.score[_ngcontent-%COMP%]{height:100%;display:flex;justify-content:center;align-items:center;font-weight:700;font-size:1.8rem;font-family:IndustryMonospace;transition:color .5s,transform .15s}"],changeDetection:0}),i})(),ae=(()=>{class i{transform(e){switch(e){case"leave":return"scale3d(0.75, 0.75, 0.75) translate3d(0, -25%, 0)";case"upcoming":return"scale3d(0.5, 0.5, 0.5) translate3d(0, 50%, 0)";default:return"scale3d(1, 1, 1) translate3d(0, 0, 0)"}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275pipe=t.Yjl({name:"animatePotentialWinItem",type:i,pure:!0}),i})();var we=s(81897);function Le(i,n){1&i&&t.GkF(0)}function Pe(i,n){1&i&&t.GkF(0)}function Ee(i,n){if(1&i&&t._UZ(0,"cw-crash-bet",12),2&i){const e=t.oxw().$implicit,a=t.oxw(2).ngIf;t.Q6J("gameStatus",a)("crashBet",e.bet)("cashedOut",!0)("floatingBet",!0)}}const Ze=function(i,n){return{left:i,top:n}};function Re(i,n){if(1&i&&(t.TgZ(0,"div",10),t.YNc(1,Ee,1,4,"cw-crash-bet",11),t.qZA()),2&i){const e=n.$implicit,a=t.oxw().spawneryIndex;t.Q6J("ngStyle",t.WLB(2,Ze,e.x+"%",e.y+"%")),t.xp6(1),t.Q6J("ngIf",e.spawneryIndex==a&&e.bet)}}function Ne(i,n){if(1&i&&t.YNc(0,Re,2,5,"div",9),2&i){const e=t.oxw(2);t.Q6J("ngForOf",e.betPopupsCache)}}function Fe(i,n){if(1&i&&(t.ynx(0),t.TgZ(1,"img",20),t.ALo(2,"push"),t.ALo(3,"steamImageSize"),t.qZA(),t.BQk()),2&i){const e=t.oxw().$implicit,a=t.oxw(5);t.xp6(1),t.Udp("animation",t.lcZ(2,5,a.scaleProgress$)),t.Q6J("@itemLeave",void 0)("src",t.xi3(3,7,null==e.itemVariant?null:e.itemVariant.iconUrl,a.maxImageSize),t.LSH)("sizes",a.maxImageSize)}}function De(i,n){if(1&i&&(t._UZ(0,"img",20),t.ALo(1,"steamImageSize")),2&i){const e=t.oxw().$implicit,a=t.oxw(5);t.Q6J("src",t.xi3(1,2,null==e.itemVariant?null:e.itemVariant.iconUrl,a.maxImageSize),t.LSH)("sizes",a.maxImageSize)}}function Ge(i,n){if(1&i&&(t.TgZ(0,"div",17),t.TgZ(1,"div",18),t.ALo(2,"animatePotentialWinItem"),t.ALo(3,"push"),t.YNc(4,Fe,4,10,"ng-container",13),t.YNc(5,De,2,5,"ng-template",null,19,t.W1O),t.qZA(),t.qZA()),2&i){const e=n.$implicit,a=t.MAs(6),r=t.oxw(5);t.xp6(1),t.Udp("transform",t.lcZ(2,8,e.state))("opacity","leave"===e.state?"0":"1"),t.ekj("idle",!t.lcZ(3,10,r.observedCrashBet$)),t.xp6(3),t.Q6J("ngIf","upcoming"===e.state)("ngIfElse",a)}}function Qe(i,n){if(1&i&&(t.ynx(0),t._UZ(1,"div",15),t.ALo(2,"push"),t.YNc(3,Ge,7,12,"div",16),t.BQk()),2&i){const e=n.ngIf,a=t.oxw(4);t.xp6(1),t.Q6J("ngClass",t.lcZ(2,3,a.observedCrashBet$)?"text-"+(null==e[0]?null:e[0].rarity):"idle"),t.xp6(2),t.Q6J("ngForOf",a.itemsVisualStates)("ngForTrackBy",a.trackByIndex)}}function He(i,n){if(1&i&&(t.ynx(0),t.YNc(1,Qe,4,5,"ng-container",1),t.ALo(2,"push"),t.BQk()),2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,e.potential$))}}function Ue(i,n){1&i&&t._UZ(0,"cw-crash-coin-animation")}function Je(i,n){if(1&i&&(t.ynx(0),t.YNc(1,He,3,3,"ng-container",13),t.ALo(2,"push"),t.YNc(3,Ue,1,0,"ng-template",null,14,t.W1O),t.BQk()),2&i){const e=t.MAs(4),a=t.oxw(2);t.xp6(1),t.Q6J("ngIf",t.lcZ(2,2,a.skinReward$))("ngIfElse",e)}}function Ve(i,n){1&i&&t._UZ(0,"cw-crash-multiplier")}const ke=function(){return{spawneryIndex:0}},Ye=function(){return{spawneryIndex:1}};function je(i,n){if(1&i&&(t.ynx(0),t.TgZ(1,"div",2),t.TgZ(2,"div",3),t.YNc(3,Le,1,0,"ng-container",4),t.qZA(),t.TgZ(4,"div",5),t.YNc(5,Pe,1,0,"ng-container",4),t.qZA(),t.YNc(6,Ne,1,1,"ng-template",null,6,t.W1O),t.TgZ(8,"div",7),t.YNc(9,Je,5,4,"ng-container",1),t._UZ(10,"cw-crash-busted"),t.YNc(11,Ve,1,0,"cw-crash-multiplier",1),t.qZA(),t.qZA(),t.TgZ(12,"div",8),t.ALo(13,"push"),t._UZ(14,"cw-crash-countdown"),t.qZA(),t.BQk()),2&i){const e=n.ngIf,a=t.MAs(7),r=t.oxw();t.xp6(3),t.Q6J("ngTemplateOutlet",a)("ngTemplateOutletContext",t.DdM(13,ke)),t.xp6(2),t.Q6J("ngTemplateOutlet",a)("ngTemplateOutletContext",t.DdM(14,Ye)),t.xp6(4),t.Q6J("ngIf","STARTED"===e),t.xp6(1),t.ekj("invisible","FINISHED"!==e),t.Q6J("@bustedShowAnim","FINISHED"===e),t.xp6(1),t.Q6J("ngIf","CREATED"!==e),t.xp6(1),t.Udp("animation",t.lcZ(13,11,r.crashCountdownAnimation$))}}let $t=class extends((0,E.A)(E.t)){constructor(n,e,a){super(),this.userService=n,this.crashService=e,this.appConfig=a,this.status$=this.crashService.game$.pipe((0,T.j)("status"),(0,f.x)()),this.currency$=this.userService.currency$,this.skinReward$=this.crashService.crashBetMode$.pipe((0,h.U)(r=>r===K.C.ITEMS_AND_COINS)),this.observedCrashBet$=this.crashService.observedCrashBet$.pipe((0,Q.O)(null),(0,N.d)({bufferSize:1,refCount:!0})),this.paths=this.appConfig.crash.animationPaths,this.itemFillsVisualStates=[],this.itemsVisualStates=[],this.betPopupsCache=[],this.betPopupsCacheSize=8,this.betPopupsCacheIndex=0,this.maxImageSize=200,this.multiplierRelativeSize=.1888,(0,St.R)(window,"resize").pipe((0,o.t)(this),(0,Et.b)(500),(0,I.b)(()=>this.setSizeImages())).subscribe(),this.potential$=this.crashService.potential$;for(let r=0;r<2;r++)this.itemFillsVisualStates.push({itemVariant:null,state:"leave"});for(let r=0;r<3;r++)this.itemsVisualStates.push({itemVariant:null,state:"leave"});this.crashService.crashBets$.pipe((0,o.t)(this)).subscribe(r=>{if(!r.length||this.betPopupsCache.length)return;const g=Object.assign({},r[0]),v=[];for(let B=0;B<this.betPopupsCacheSize;B++)v.push({x:0,y:0,spawneryIndex:B%2,bet:g});this.betPopupsCache=[...this.betPopupsCache,...v]}),this.cashedOutCrashBetUpdate$=this.crashService.betUpdate$.pipe((0,ct.h)(r=>!!r.tick)),this.cashedOutCrashBetUpdate$.pipe((0,o.t)(this)).subscribe(this.onNewCashedOutBet.bind(this)),this.scaleProgress$=this.crashService.timeBetweenPotentials.pipe((0,h.U)(r=>`imageScaleUp ${Math.floor(r)}ms forwards`)),this.crashCountdownAnimation$=this.status$.pipe((0,h.U)(r=>"CREATED"===r?"countdownFadeIn 150ms forwards":"countdownFadeOut 300ms forwards"),(0,f.x)())}onNewCashedOutBet(n){!this.betPopupsCache.length||(this.betPopupsCacheIndex=(this.betPopupsCacheIndex+1)%this.betPopupsCache.length,this.betPopupsCache=[...this.betPopupsCache.slice(0,this.betPopupsCacheIndex),Object.assign(Object.assign({},this.betPopupsCache[this.betPopupsCacheIndex]),{x:100*Math.random(),y:100*Math.random(),bet:n}),...this.betPopupsCache.slice(this.betPopupsCacheIndex+1)])}ngOnInit(){this.potential$.pipe((0,o.t)(this)).subscribe(n=>{n.forEach((a,r)=>{!this.itemFillsVisualStates[r]||(this.itemFillsVisualStates[r].itemVariant=a)});const e=[...this.itemsVisualStates];n.forEach((a,r)=>{const g=0===r?"current":"upcoming",v=e.find(x=>x.itemVariant===a),B=e.find(x=>"leave"===x.state);let A;A=v||B||e[0],A.itemVariant=a,A.state=g,e.splice(e.indexOf(A),1)}),e.forEach(a=>a.state="leave")}),this.setSizeImages()}getIndex(n){return n}setSizeImages(){this.maxImageSize=Math.round(window.innerHeight*this.multiplierRelativeSize)}};$t.\u0275fac=function(n){return new(n||$t)(t.Y36(C.KDu),t.Y36(y.e),t.Y36(C.qBz))},$t.\u0275cmp=t.Xpm({type:$t,selectors:[["cw-crash-animation"]],inputs:{startDate:"startDate",game:"game"},features:[t.qOj],decls:3,vars:3,consts:[[1,"animation-container"],[4,"ngIf"],[1,"animation-bg"],[1,"bet-popup-spawnery","left-spawnery"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"bet-popup-spawnery","right-spawnery"],["betPopupsTemplate",""],[1,"circle-button-container"],["fxLayout","column","fxLayoutAlign","center center",1,"countdown-container"],["class","floating-crash-bet-offset-wrap",3,"ngStyle",4,"ngFor","ngForOf"],[1,"floating-crash-bet-offset-wrap",3,"ngStyle"],["class","floating-crash-bet",3,"gameStatus","crashBet","cashedOut","floatingBet",4,"ngIf"],[1,"floating-crash-bet",3,"gameStatus","crashBet","cashedOut","floatingBet"],[4,"ngIf","ngIfElse"],["coinTpl",""],[1,"inner-hexagon-container",3,"ngClass"],["class","potential-win-wrapper",4,"ngFor","ngForOf","ngForTrackBy"],[1,"potential-win-wrapper"],[1,"potential-win"],["imageNoTransformTpl",""],["loading","lazy",3,"src","sizes"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0),t.YNc(1,je,15,15,"ng-container",1),t.ALo(2,"push"),t.qZA()),2&n&&(t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,e.status$)))},directives:[d.O5,d.tP,Ft,$.xw,$.Wh,Gt,d.sg,d.PC,q.Zl,ht,d.mk,q.oO,Bt,oe],pipes:[D.f,ae,we.M],styles:[".no-scrollbar[_ngcontent-%COMP%]{scrollbar-width:none;-ms-overflow-style:none}.no-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}[_nghost-%COMP%]{display:block;font-weight:600;color:#fff;text-align:center;height:100%}.animation-container[_ngcontent-%COMP%]{position:relative;width:100%;height:42%}.animation-container[_ngcontent-%COMP%]   .animation-bg[_ngcontent-%COMP%]{width:100%;height:100%;margin:auto;background-image:url(/assets/icons/crash/crash-bg.png);background-size:contain;background-repeat:no-repeat;background-position:center;box-sizing:content-box}.animation-container[_ngcontent-%COMP%]   .bet-pupup-spawnery[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;width:7.5%;z-index:-1}.animation-container[_ngcontent-%COMP%]   .bet-pupup-spawnery.left-spawnery[_ngcontent-%COMP%]{right:calc(50% + 200px)}.animation-container[_ngcontent-%COMP%]   .bet-pupup-spawnery.right-spawnery[_ngcontent-%COMP%]{left:calc(50% + 200px)}.animation-container[_ngcontent-%COMP%]   .floating-crash-bet-offset-wrap[_ngcontent-%COMP%]{position:absolute;transform:translate(-50%,-50%)}.animation-container[_ngcontent-%COMP%]   .floating-crash-bet-offset-wrap[_ngcontent-%COMP%]   cw-crash-bet[_ngcontent-%COMP%]{opacity:0}.animation-container[_ngcontent-%COMP%]   .circle-button-container[_ngcontent-%COMP%]{position:absolute;top:0;right:0;bottom:0;left:0;margin:auto;width:84%}.animation-container[_ngcontent-%COMP%]   .circle-button-container[_ngcontent-%COMP%]   cw-crash-multiplier[_ngcontent-%COMP%]{position:absolute;top:17.5%;right:0;left:0;height:2rem}.animation-container[_ngcontent-%COMP%]   .inner-hexagon-container[_ngcontent-%COMP%]{position:absolute;top:8%;right:0;bottom:8%;left:0}.animation-container[_ngcontent-%COMP%]   .inner-hexagon-container[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:100%;height:100%}.animation-container[_ngcontent-%COMP%]   .inner-hexagon-container[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   .item-fill[_ngcontent-%COMP%]{opacity:.5;transform:translateZ(0)}.animation-container[_ngcontent-%COMP%]   .inner-hexagon-container[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   .item-color-fill[_ngcontent-%COMP%]{transition:fill .2s}.animation-container[_ngcontent-%COMP%]   .inner-hexagon-container[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   .item-fill-patch[_ngcontent-%COMP%]{transform:scale(1);transform-origin:50% 50%;fill:#21252b}.animation-container[_ngcontent-%COMP%]   .inner-hexagon-container.idle[_ngcontent-%COMP%]{color:gray!important}.animation-container[_ngcontent-%COMP%]   .potential-win-wrapper[_ngcontent-%COMP%]{position:absolute;top:0;right:0;bottom:0;left:0}.animation-container[_ngcontent-%COMP%]   .potential-win[_ngcontent-%COMP%]{position:absolute;top:0;right:0;bottom:0;left:0;filter:drop-shadow(8px 8px 12px rgba(0,0,0,.8));transition:transform .3s,opacity .3s}.animation-container[_ngcontent-%COMP%]   .potential-win[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;top:0;right:0;bottom:0;left:0;height:38%;transform:translateZ(0);margin:auto}.animation-container[_ngcontent-%COMP%]   .potential-win.idle[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{filter:grayscale(90%)}.animation-container[_ngcontent-%COMP%]   .join-next[_ngcontent-%COMP%]{position:absolute;top:0;right:0;bottom:0;left:0;margin:auto;font-size:1.2rem;text-transform:uppercase;display:flex;color:#8e8e99;flex-direction:column;justify-content:center;align-items:center}.animation-container[_ngcontent-%COMP%]   .countdown-container[_ngcontent-%COMP%]{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;margin:auto}.animation-container[_ngcontent-%COMP%]   .countdown-container[_ngcontent-%COMP%]   cw-pretty-balance[_ngcontent-%COMP%]{font-size:1.2rem;position:absolute;top:3rem}.bottom-box[_ngcontent-%COMP%]{height:8rem;color:#8e8e99;margin-top:2rem;font-size:1em;display:inline-block;text-transform:uppercase}.bottom-box[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]{min-width:14rem;overflow:hidden;white-space:nowrap}.bottom-box[_ngcontent-%COMP%]   .balance[_ngcontent-%COMP%]{margin-top:1rem;font-size:1.6rem;color:#fff}@keyframes imageScaleUp{0%{transform:scale3d(.25,.25,.25)}to{transform:scale(1)}}@keyframes countdownFadeIn{0%{opacity:0}to{opacity:1}}@keyframes countdownFadeOut{0%{opacity:1}to{opacity:0}}",".no-scrollbar[_ngcontent-%COMP%]{scrollbar-width:none;-ms-overflow-style:none}.no-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}@keyframes tutorial-pointer{to{transform:translateY(2rem)}}.box[_ngcontent-%COMP%]{padding:1rem;overflow:hidden;border-radius:.5rem;background:var(--card-bg)}.tutorial-overlay[_ngcontent-%COMP%]{z-index:1100}.tutorial-button-container[_ngcontent-%COMP%]{position:relative}.tutorial-button-container[_ngcontent-%COMP%]   .tutorial-pointer[_ngcontent-%COMP%]{pointer-events:none;position:absolute;top:-5.5rem;left:0;right:0;margin:auto;animation:tutorial-pointer .5s infinite alternate;cursor:pointer}.tutorial-button-container[_ngcontent-%COMP%]   .tutorial-pointer.bottom[_ngcontent-%COMP%]{top:0}.tutorial-button-container[_ngcontent-%COMP%]   .tutorial-pointer.bottom[_ngcontent-%COMP%]   cw-icon[_ngcontent-%COMP%]{transform:rotate(90deg);margin-left:-1rem}.tutorial-button-container[_ngcontent-%COMP%]   .tutorial-pointer[_ngcontent-%COMP%]   cw-icon[_ngcontent-%COMP%]{transform:rotate(-90deg);margin-left:1rem;width:6rem;height:6rem}"],data:{animation:[(0,L.X$)("itemLeave",[(0,L.eR)(":leave",(0,L.jt)("300ms"))]),(0,rt.ub)({anchor:"bustedShowAnim",duration:500})]},changeDetection:0}),$t=(0,R.gn)([(0,o.c)(),(0,R.w6)("design:paramtypes",[C.KDu,y.e,Object])],$t);var se=s(69718),Xe=s(56451),qe=s(17007),ze=s(18174),We=s(16984),Ke=s(65124);function tn(i,n){if(1&i&&(t.ynx(0),t.TgZ(1,"div"),t.GkF(2,12),t.TgZ(3,"span",13),t.SDv(4,14),t.ALo(5,"push"),t.qZA(),t.qZA(),t.BQk()),2&i){const e=t.oxw(),a=t.MAs(22);t.xp6(2),t.Q6J("ngTemplateOutlet",a),t.xp6(3),t.pQV(t.lcZ(5,2,e.queuedBetsCount$)),t.QtT(4)}}function en(i,n){if(1&i&&(t.TgZ(0,"div"),t.GkF(1,12),t.TgZ(2,"span",13),t.SDv(3,15),t.ALo(4,"push"),t.qZA(),t.qZA()),2&i){const e=t.oxw(),a=t.MAs(22);let r;t.xp6(1),t.Q6J("ngTemplateOutlet",a),t.xp6(3),t.pQV(null==(r=t.lcZ(4,2,e.crashBetsInGame$))?null:r.length),t.QtT(3)}}function nn(i,n){if(1&i&&(t.ynx(0),t.TgZ(1,"span",16),t._uU(2),t.ALo(3,"currencySymbol"),t.ALo(4,"push"),t.qZA(),t.BQk()),2&i){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,1,t.lcZ(4,3,e.userCurrency$)))}}function on(i,n){1&i&&t._UZ(0,"span",17)}function an(i,n){if(1&i&&(t.ynx(0),t._uU(1),t.ALo(2,"number"),t.BQk()),2&i){const e=t.oxw().rxLet;t.xp6(1),t.hij(" ",t.xi3(2,1,e,"1.2-2")," ")}}function sn(i,n){if(1&i&&(t._uU(0),t.ALo(1,"number"),t.ALo(2,"push"),t.ALo(3,"ticker")),2&i){const e=t.oxw().rxLet;t.hij(" ",t.xi3(1,1,t.lcZ(2,4,t.xi3(3,6,e,"crashTotalBets")),"1.2-2")," ")}}function rn(i,n){if(1&i&&(t.ynx(0),t.TgZ(1,"span",18),t.YNc(2,an,3,4,"ng-container",1),t.ALo(3,"push"),t.YNc(4,sn,4,9,"ng-template",null,19,t.W1O),t.qZA(),t.BQk()),2&i){const e=t.MAs(5),a=t.oxw();t.xp6(1),t.Q6J("cwTemporalClass","updated")("cwTemporalClassTrigger",a.betTotal$)("cwTemporalClassTimeout",750),t.xp6(1),t.Q6J("ngIf",t.lcZ(3,5,a.isGameRunning$))("ngIfElse",e)}}function cn(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"cw-crash-bet",20),t.NdJ("cancel",function(){const g=t.CHM(e).ngIf;return t.oxw().cancelQueuedManualBet(g)}),t.qZA()}if(2&i){const e=n.ngIf;t.Q6J("gameStatus","CREATED")("inQueue",!0)("crashBet",e)}}function ln(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"cw-crash-bet",20),t.NdJ("cancel",function(){const g=t.CHM(e).$implicit;return t.oxw().cancelQueuedAutoBet(g)}),t.qZA()}if(2&i){const e=n.$implicit;t.Q6J("gameStatus","CREATED")("inQueue",!0)("crashBet",e)}}function mn(i,n){if(1&i&&(t.TgZ(0,"header",21),t.TgZ(1,"span",13),t.SDv(2,22),t.ALo(3,"push"),t.qZA(),t.qZA()),2&i){const e=t.oxw();let a;t.xp6(3),t.pQV((null==(a=t.lcZ(3,1,e.crashBetsInGame$))?null:a.length)||0),t.QtT(2)}}const un=function(i){return{opacity:i}};function gn(i,n){if(1&i&&t._UZ(0,"div",28),2&i){const e=n.index,a=t.oxw(3);t.Q6J("ngStyle",t.VKq(1,un,1-e/a.betPlaceholdersAmountArr.length))}}function hn(i,n){if(1&i&&(t.TgZ(0,"div",26),t.YNc(1,gn,1,3,"div",27),t.qZA()),2&i){const e=t.oxw(2);t.Q6J("@placeholdersLeaveAnim",void 0),t.xp6(1),t.Q6J("ngForOf",e.betPlaceholdersAmountArr)}}function _n(i,n){if(1&i&&t._UZ(0,"cw-crash-bet",29),2&i){const e=n.$implicit,a=t.oxw().$implicit,r=t.oxw();t.Q6J("gameStatus",r.game.status)("crashBet",e)("inLiveGame",a)}}function dn(i,n){if(1&i&&(t.TgZ(0,"header",21),t.TgZ(1,"span",13),t.SDv(2,30),t.ALo(3,"push"),t.qZA(),t.qZA()),2&i){const e=t.oxw(2);let a;t.xp6(3),t.pQV(null==(a=t.lcZ(3,1,e.cashedOutCrashBets$))?null:a.length),t.QtT(2)}}function pn(i,n){if(1&i&&t._UZ(0,"cw-crash-bet",31),2&i){const e=n.$implicit,a=t.oxw().$implicit,r=t.oxw();t.Q6J("gameStatus",r.game.status)("crashBet",e)("cashedOut",!0)("inLiveGame",a)}}function Cn(i,n){if(1&i&&(t.ynx(0),t.YNc(1,hn,2,2,"div",23),t.ALo(2,"push"),t.ALo(3,"push"),t.ALo(4,"push"),t.YNc(5,_n,1,3,"cw-crash-bet",24),t.ALo(6,"push"),t.YNc(7,dn,4,3,"header",10),t.ALo(8,"push"),t.YNc(9,pn,1,4,"cw-crash-bet",25),t.ALo(10,"push"),t.BQk()),2&i){const e=t.oxw();let a,r;t.xp6(1),t.Q6J("ngIf",!(t.lcZ(2,6,e.crashBetsInGame$).length||null!=(a=t.lcZ(3,8,e.cashedOutCrashBets$))&&a.length||0!=t.lcZ(4,10,e.queuedBetsCount$))),t.xp6(4),t.Q6J("ngForOf",t.lcZ(6,12,e.crashBetsInGame$))("ngForTrackBy",e.trackById),t.xp6(2),t.Q6J("ngIf",(null==(r=t.lcZ(8,14,e.cashedOutCrashBets$))?null:r.length)>0),t.xp6(2),t.Q6J("ngForOf",t.lcZ(10,16,e.cashedOutCrashBets$))("ngForTrackBy",e.trackById)}}function fn(i,n){if(1&i&&t._UZ(0,"span",33),2&i){const e=n.ngIf;t.ekj("bg-green",e.connected)("bg-red",!e.connected),t.Q6J("ngbTooltip",e.connected?"Connected":"Reconnecting")}}function bn(i,n){if(1&i&&(t.YNc(0,fn,1,5,"span",32),t.ALo(1,"push")),2&i){const e=t.oxw();t.Q6J("ngIf",t.lcZ(1,1,e.status$))}}let re=(()=>{class i extends((0,E.A)(E.t)){constructor(e,a,r,g,v){super(),this.appConfig=e,this.crashService=a,this.userItemService=r,this.userService=g,this.manualCrashBetQueue$=this.crashService.manualCrashBetQueue$,this.autoCrashBetsQueue$=this.crashService.autoCrashBetsQueue$.items$,this.queuedBetsCount$=this.crashService.queuedBetsCount$,this.betTotal$=this.crashService.betTotal$,this.isGameRunning$=this.crashService.game$.pipe((0,T.j)("status"),(0,h.U)(x=>"STARTED"===x||"FINISHED"===x),(0,f.x)()),this.inLiveGame$=this.crashService.userLiveBet$.pipe((0,h.U)(x=>x&&!x.tick)),this.visibleBetsLimit=20,this.betPlaceholdersAmount=10,this.betPlaceholdersAmountArr=new Array(this.betPlaceholdersAmount),this.useCurrency=this.appConfig.useCurrency,this.userCurrency$=this.userService.currency$,this.distinctUntilChangedHelper=()=>((0,h.U)(x=>x.slice(0,this.visibleBetsLimit)),(0,f.x)((x,U)=>{const dt=x.map((W,Pt)=>this.trackById(Pt,W)),it=U.map((W,Pt)=>this.trackById(Pt,W));return JSON.stringify(dt)===JSON.stringify(it)})),this.crashBetsInGame$=this.crashService.crashBets$.pipe((0,h.U)(x=>x.filter(U=>!U.tick)),this.distinctUntilChangedHelper(),(0,N.d)({bufferSize:1,refCount:!0})),this.cashedOutCrashBets$=this.crashService.crashBets$.pipe((0,h.U)(x=>x.filter(U=>U.tick)),this.distinctUntilChangedHelper(),(0,N.d)({bufferSize:1,refCount:!0}));const B=(0,St.R)(v.document,"CW_WEB_SOCKET_RECONNECTED").pipe((0,se.h)({connected:!0})),A=(0,St.R)(v.document,"CW_WEB_SOCKET_DISCONNECTED").pipe((0,se.h)({connected:!1}));this.status$=(0,Xe.T)(B,A,(0,At.of)({connected:!0})).pipe((0,N.d)({refCount:!0,bufferSize:1}))}cancelQueuedManualBet(e){this.crashService.manualCrashBetQueue$.next(null),this.removeReservedUserItems(e)}cancelQueuedAutoBet(e){this.crashService.autoCrashBetsQueue$.remove(e),this.removeReservedUserItems(e)}removeReservedUserItems(e){e.items.edges.forEach(a=>this.userItemService.reservedCollection.removeByKey("id",a.node.id))}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(C.qBz),t.Y36(y.e),t.Y36(C.mNQ),t.Y36(C.KDu),t.Y36(C.mix))},i.\u0275cmp=t.Xpm({type:i,selectors:[["cw-crash-bet-list"]],inputs:{game:"game"},features:[t.qOj],decls:23,vars:25,consts:function(){let n,e,a,r;return n=$localize`:␟f379c928ab29e331e8b908aa92915a213069980b␟4242707921519167103:${"\ufffd0\ufffd"}:INTERPOLATION: In Queue`,e=$localize`:␟18647381eb8f6936cf61f94fe06effbf326af944␟4899057427637736914:${"\ufffd0\ufffd"}:INTERPOLATION: Playing`,a=$localize`:␟8c40bb3a830e8a5de91fd7ad509c2f52cd3b7eaa␟8231656492009064654:${"\ufffd0\ufffd"}:INTERPOLATION: Playing`,r=$localize`:␟568bc54249724d5a9c761a529c8e338c455182ab␟797692665955500896:${"\ufffd0\ufffd"}:INTERPOLATION: Cashed Out`,[["fxLayout","","fxLayoutAlign","space-between end",1,"summary"],[4,"ngIf","ngIfElse"],["playersTpl",""],[1,"amount"],["coinsImg",""],[4,"rxLet"],[1,"bets"],[3,"scrollY","betList"],[3,"gameStatus","inQueue","crashBet","cancel",4,"ngIf"],[3,"gameStatus","inQueue","crashBet","cancel",4,"ngFor","ngForOf"],["class","summary mt-3",4,"ngIf"],["status",""],[3,"ngTemplateOutlet"],[1,"count"],n,e,[1,"amount-number"],[1,"amount-img"],[1,"amount-number",3,"cwTemporalClass","cwTemporalClassTrigger","cwTemporalClassTimeout"],["crashTotalBetsTpl",""],[3,"gameStatus","inQueue","crashBet","cancel"],[1,"summary","mt-3"],a,["class","bet-placeholders",4,"ngIf"],[3,"gameStatus","crashBet","inLiveGame",4,"ngFor","ngForOf","ngForTrackBy"],[3,"gameStatus","crashBet","cashedOut","inLiveGame",4,"ngFor","ngForOf","ngForTrackBy"],[1,"bet-placeholders"],["class","bet-placeholder",3,"ngStyle",4,"ngFor","ngForOf"],[1,"bet-placeholder",3,"ngStyle"],[3,"gameStatus","crashBet","inLiveGame"],r,[3,"gameStatus","crashBet","cashedOut","inLiveGame"],["class","dot mr-3","placement","left",3,"bg-green","bg-red","ngbTooltip",4,"ngIf"],["placement","left",1,"dot","mr-3",3,"ngbTooltip"]]},template:function(e,a){if(1&e&&(t.TgZ(0,"header",0),t.YNc(1,tn,6,4,"ng-container",1),t.ALo(2,"push"),t.YNc(3,en,5,4,"ng-template",null,2,t.W1O),t.TgZ(5,"div",3),t.YNc(6,nn,5,5,"ng-container",1),t.YNc(7,on,1,0,"ng-template",null,4,t.W1O),t.YNc(9,rn,6,7,"ng-container",5),t.qZA(),t.qZA(),t.TgZ(10,"div",6),t.TgZ(11,"cw-scroll",7),t.YNc(12,cn,1,3,"cw-crash-bet",8),t.ALo(13,"push"),t.YNc(14,ln,1,3,"cw-crash-bet",9),t.ALo(15,"slice"),t.ALo(16,"push"),t.YNc(17,mn,4,3,"header",10),t.ALo(18,"push"),t.ALo(19,"push"),t.YNc(20,Cn,11,18,"ng-container",5),t.qZA(),t.qZA(),t.YNc(21,bn,2,3,"ng-template",null,11,t.W1O)),2&e){const r=t.MAs(4),g=t.MAs(8);let v;t.xp6(1),t.Q6J("ngIf",t.lcZ(2,11,a.queuedBetsCount$)>0)("ngIfElse",r),t.xp6(5),t.Q6J("ngIf",a.useCurrency)("ngIfElse",g),t.xp6(3),t.Q6J("rxLet",a.betTotal$),t.xp6(2),t.Q6J("scrollY",!0)("betList",!0),t.xp6(1),t.Q6J("ngIf",t.lcZ(13,13,a.manualCrashBetQueue$)),t.xp6(2),t.Q6J("ngForOf",t.Dn7(15,15,t.lcZ(16,19,a.autoCrashBetsQueue$),0,a.visibleBetsLimit)),t.xp6(3),t.Q6J("ngIf",t.lcZ(18,21,a.queuedBetsCount$)>0&&(null==(v=t.lcZ(19,23,a.crashBetsInGame$))?null:v.length)>0),t.xp6(3),t.Q6J("rxLet",a.inLiveGame$)}},directives:[$.xw,$.Wh,d.O5,Rt.e,qe.l,d.sg,d.tP,ze.L,ht,d.PC,q.Zl,J._L],pipes:[D.f,d.OU,We.G,d.JJ,Ke.t],styles:['.no-scrollbar[_ngcontent-%COMP%]{scrollbar-width:none;-ms-overflow-style:none}.no-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}@keyframes disconnected{0%{opacity:100%}to{opacity:10%}}[_nghost-%COMP%]{height:100%;display:flex;flex-direction:column}.summary[_ngcontent-%COMP%]{padding:0 .5rem;margin-bottom:1rem;font-size:.9rem}.summary[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{font-weight:600;color:#fff;text-transform:uppercase}.summary[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{min-width:7rem}.summary[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]   .amount-img[_ngcontent-%COMP%]{display:inline-block;margin-right:8px;width:40px;height:40px;vertical-align:bottom;background-size:contain;background-image:url(/assets/icons/gold-pile.png);background-repeat:no-repeat}.summary[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]   .amount-number[_ngcontent-%COMP%]{font-weight:700;color:#fff;font-size:1.3rem;transition:color .5s}.summary[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]   .amount-number.updated[_ngcontent-%COMP%]{transition:color .2s;color:#ecce75}cw-pretty-balance[_ngcontent-%COMP%]{font-size:1.4rem}.bet-placeholders[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;overflow:hidden}cw-crash-bet[_ngcontent-%COMP%], .bet-placeholder[_ngcontent-%COMP%]{border-bottom:1px solid rgba(0,0,0,.05);margin-bottom:4px}.bet-placeholder[_ngcontent-%COMP%]{background-color:#31353d;border-radius:.3rem;height:46px}.bets[_ngcontent-%COMP%]{flex:1;overflow-y:scroll}.bets[_ngcontent-%COMP%]::-webkit-scrollbar{width:9px;height:"auto"}.bets[_ngcontent-%COMP%]::-webkit-scrollbar-track{border-radius:5px;background:none}.bets[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:5px;background:rgba(0,0,0,.3)}.bets[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:rgba(0,0,0,.4)}.bets[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:window-inactive{background:rgba(0,0,0,.1)}.dot[_ngcontent-%COMP%]{display:inline-block;width:10px;height:10px;border-radius:50%}.dot.bg-red[_ngcontent-%COMP%]{animation:flash .75s infinite}'],data:{animation:[(0,rt.QQ)({anchor:"placeholdersLeaveAnim",duration:300})]},changeDetection:0}),i})();s(29939);var Jt=s(57994),ce=s(47423),le=s(79586);function Sn(i,n){if(1&i&&(t.ynx(0),t.tHW(1,5),t.TgZ(2,"span"),t._UZ(3,"span"),t._UZ(4,"cw-pretty-balance",6),t.ALo(5,"push"),t.qZA(),t.N_p(),t.BQk()),2&i){const e=t.oxw();t.xp6(4),t.Q6J("balance",t.lcZ(5,2,e.coinsTotalValue$))("currency",e.currency)}}function An(i,n){if(1&i&&(t.TgZ(0,"span"),t.TgZ(1,"span"),t._uU(2),t.qZA(),t.TgZ(3,"span",9),t._uU(4),t.qZA(),t.qZA()),2&i){const e=t.oxw(2);t.xp6(2),t.Oqu(" @ "),t.xp6(2),t.hij("x",e.multiplier,"")}}function Tn(i,n){if(1&i&&(t.ynx(0),t.TgZ(1,"span"),t.TgZ(2,"span"),t.SDv(3,7),t.qZA(),t._UZ(4,"cw-pretty-balance",6),t.TgZ(5,"span"),t.SDv(6,8),t.qZA(),t.YNc(7,An,5,2,"span",4),t.qZA(),t.BQk()),2&i){const e=t.oxw();t.xp6(4),t.Q6J("balance",e.totalBetAmount)("currency",e.currency),t.xp6(3),t.Q6J("ngIf",e.multiplier)}}let me=(()=>{class i{constructor(e){this.crashService=e,this.cwSubmit=new t.vpe,this.transition$=new M.X("0"),this.scaleX$=new M.X("1"),this.showLoader$=this.crashService.gameStartedAt$.pipe((0,I.b)(a=>{if(a>0){const r=a-(new Date).getTime();this.transition$.next(Math.floor(r).toString()),this.scaleX$.next("0")}else this.transition$.next("0"),this.scaleX$.next("1")}),(0,h.U)(a=>a>0),(0,f.x)()),this.coinsTotalValue$=(0,P.a)([this.crashService.userLiveBet$,this.crashService.multiplier$]).pipe((0,h.U)(([a,r])=>a.totalWinAmount?a.totalWinAmount:+(0,Jt.Big)(a.totalBet).times(r).toFixed(2)))}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(y.e))},i.\u0275cmp=t.Xpm({type:i,selectors:[["cw-crash-form-button"]],inputs:{canCashOut:"canCashOut",currency:"currency",disabled:"disabled",loading:"loading",totalBetAmount:"totalBetAmount",multiplier:"multiplier"},outputs:{cwSubmit:"cwSubmit"},decls:9,vars:16,consts:function(){let n,e,a;return n=$localize`:␟7715ab872c444b07cdcd6af5ae3a966e16187d10␟7536607147392448654:${"[\ufffd#2\ufffd|\ufffd#3\ufffd]"}:START_TAG_SPAN:${"[\ufffd#2\ufffd|\ufffd#3\ufffd]"}:START_TAG_SPAN:Cash out${"[\ufffd/#3\ufffd|\ufffd/#2\ufffd]"}:CLOSE_TAG_SPAN:${"\ufffd#4\ufffd"}:START_TAG_CW_PRETTY_BALANCE:${"\ufffd/#4\ufffd"}:CLOSE_TAG_CW_PRETTY_BALANCE:${"[\ufffd/#3\ufffd|\ufffd/#2\ufffd]"}:CLOSE_TAG_SPAN:`,n=t.Zx4(n),e=$localize`:␟81d400b008d0f6bd04b506531fd2bd82c6103c78␟7127864144505863678:Place`,a=$localize`:␟3611e207614b2c2b82dffc027ba08b92b20a92fb␟449928999286346224:Bet`,[["mat-button","","mat-flat-button","","color","accent",1,"crash-button","mat-button-3d",3,"disabled","click"],[3,"loading"],[1,"overlay"],[1,"text"],[4,"ngIf"],n,[3,"balance","currency"],e,a,[1,"multiplier-label","yellow"]]},template:function(e,a){1&e&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return a.cwSubmit.next()}),t.TgZ(1,"cw-loader",1),t._UZ(2,"div",2),t.ALo(3,"push"),t.ALo(4,"push"),t.ALo(5,"push"),t.TgZ(6,"div",3),t.YNc(7,Sn,6,4,"ng-container",4),t.YNc(8,Tn,8,3,"ng-container",4),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.Q6J("disabled",a.disabled),t.xp6(1),t.Q6J("loading",a.loading),t.xp6(1),t.Udp("transition","transform "+t.lcZ(3,10,a.transition$)+"ms linear 0ms")("transform","scale3d("+t.lcZ(4,12,a.scaleX$)+", 1, 1)"),t.ekj("invisible",!1===t.lcZ(5,14,a.showLoader$)),t.xp6(5),t.Q6J("ngIf",a.canCashOut),t.xp6(1),t.Q6J("ngIf",!a.canCashOut))},directives:[ce.lW,le.R,d.O5,xt.q],pipes:[D.f],styles:[".no-scrollbar[_ngcontent-%COMP%]{scrollbar-width:none;-ms-overflow-style:none}.no-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.crash-button[_ngcontent-%COMP%]{line-height:14px!important;padding:0 .75rem;min-width:13rem;height:4rem;border-radius:10px!important}.crash-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-transform:uppercase}.crash-button[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;border-radius:10px 0 0 10px;height:100%;width:100%;transform-origin:0 50%;background-color:#0101014d}.crash-button[_ngcontent-%COMP%]   cw-pretty-balance[_ngcontent-%COMP%]{font-size:18px;margin-left:.5rem;margin-right:.5rem;position:relative;font-weight:600;vertical-align:middle}.crash-button[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}.crash-button[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%] > span[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{vertical-align:middle}.crash-button[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   .multiplier-label[_ngcontent-%COMP%]{font-size:1.1rem;text-transform:lowercase}"],changeDetection:0}),i})();var ue=s(91314),xn=s(47429),vt=s(93075),nt=s(48966),ge=s(24750),he=s(361),_e=s(52457),jt=s(77579),de=s(11365),_t=s(95698),Mn=s(50590);function On(i,n){return e=>null===e.value||""===e.value||e.value>=i&&e.value<=n?null:{multiplier:`Multiplier must be greater than ${i}`}}var Bn=s(35684),$n=s(35286);let pe=(()=>{class i{constructor(e){this.dialogRef=e,this.selectedCollection=new C.Vnp,this.selectedCollection.items$.pipe((0,Bn.T)(1),(0,_t.q)(1),(0,h.U)(a=>a[0])).subscribe(a=>this.dialogRef.close(a))}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(nt.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["cw-crash-objective-modal"]],inputs:{objective:"objective"},decls:5,vars:7,consts:function(){let n;return n=$localize`:␟42daf87f19836ef3d1b8f58a5cf93e2c43b82c1c␟8325381706328570325:Select Item`,[["mat-dialog-title",""],n,[3,"showStockDetails","banned","minValue","selectedCollection","distinctValues"]]},template:function(e,a){1&e&&(t.TgZ(0,"h4",0),t.SDv(1,1),t.qZA(),t.TgZ(2,"mat-dialog-content"),t._UZ(3,"cw-item-variant-search-grid",2),t.ALo(4,"push"),t.qZA()),2&e&&(t.xp6(3),t.Q6J("showStockDetails",!1)("banned",!1)("minValue",t.lcZ(4,5,a.minValue$))("selectedCollection",a.selectedCollection)("distinctValues",!0))},directives:[nt.uh,nt.xY,$n.F],pipes:[D.f],styles:["cw-item-variant-search-grid[_ngcontent-%COMP%]{min-height:30rem}"],changeDetection:0}),i})();var In=s(50727),Ce=s(62650),yn=s(32368);let fe=(()=>{class i{constructor(e,a){this.crashService=e,this.localWebStorageService=a,this.CrashBetMode=K.C,this.crashBetMode$=this.crashService.crashBetMode$,this.animationsEnabled$=this.crashService.animationsEnabled$,this.subscription=new In.w0}set overlayRef(e){this._overlayRef=e,this.subscription=this._overlayRef.backdropClick().subscribe(()=>this.close())}get overlayRef(){return this._overlayRef}toggleReward(e){const a=e.checked?K.C.ITEMS_AND_COINS:K.C.COINS_ONLY;this.crashService.crashBetMode$.next(a),this.localWebStorageService.set(Ce.F.CRASH_REWARD_TYPE,a)}toggleAnimations(e){this.crashService.animationsEnabled$.next(e.checked),localStorage.setItem(Ce.F.CRASH_ANIMATIONS,e.checked.toString())}close(){this.subscription.unsubscribe(),this.overlayRef.dispose()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(y.e),t.Y36(C.Vtq))},i.\u0275cmp=t.Xpm({type:i,selectors:[["cw-crash-options"]],decls:11,vars:9,consts:[[1,"mt-0","mb-3","text-center","text-uppercase"],[1,"toggle-container","always-active"],["labelPosition","before",3,"checked","change"],[1,"toggle-container"]],template:function(e,a){1&e&&(t.TgZ(0,"h6",0),t._uU(1,"Crash Settings"),t.qZA(),t.TgZ(2,"div",1),t.TgZ(3,"mat-slide-toggle",2),t.NdJ("change",function(g){return a.toggleReward(g)}),t.ALo(4,"push"),t._uU(5),t.ALo(6,"push"),t.qZA(),t.qZA(),t.TgZ(7,"div",3),t.TgZ(8,"mat-slide-toggle",2),t.NdJ("change",function(g){return a.toggleAnimations(g)}),t.ALo(9,"push"),t._uU(10," Animations "),t.qZA(),t.qZA()),2&e&&(t.xp6(3),t.Q6J("checked",t.lcZ(4,3,a.crashBetMode$)===a.CrashBetMode.ITEMS_AND_COINS),t.xp6(2),t.hij(" ",t.lcZ(6,5,a.crashBetMode$)===a.CrashBetMode.ITEMS_AND_COINS?"Item Reward":"Coins Reward"," "),t.xp6(3),t.Q6J("checked",t.lcZ(9,7,a.animationsEnabled$)))},directives:[yn.Rr],pipes:[D.f],styles:["[_nghost-%COMP%]{margin-top:.5rem;background-color:var(--portable-inventory-bg);border-radius:.3rem;display:flex;flex-direction:column;color:var(--portable-inventory-color);font-size:.875rem;position:relative;padding:1rem;width:10rem}.toggle-container[_ngcontent-%COMP%]{margin-bottom:1rem}.toggle-container.always-active[_ngcontent-%COMP%]     .mat-slide-toggle-bar{background-color:#009439}.toggle-container.always-active[_ngcontent-%COMP%]     .mat-slide-toggle-thumb{background-color:#00c74d!important}.toggle-container[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]{display:block;font-size:.75rem}.toggle-container[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]     .mat-slide-toggle-content{opacity:.65}.toggle-container[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]     .mat-slide-toggle-label{justify-content:space-between}"],changeDetection:0}),i})();var wn=s(63393),Ln=s(29772);function Pn(i,n){1&i&&(t.TgZ(0,"span",30),t.tHW(1,31),t._UZ(2,"cw-icon",32),t.N_p(),t.qZA()),2&i&&t.Q6J("@fade",void 0)}function En(i,n){if(1&i&&(t.ynx(0),t._UZ(1,"div",33),t.TgZ(2,"img",34),t.ALo(3,"push"),t.qZA(),t.BQk()),2&i){const e=t.oxw().ngIf,a=t.oxw();t.xp6(1),t.Q6J("ngClass","bg-gradient-to-bottom-"+(null==e.itemVariant?null:e.itemVariant.rarity)),t.xp6(1),t.Tol(t.lcZ(3,5,a.performanceClass$)),t.Q6J("src",null==e.itemVariant?null:e.itemVariant.iconUrl,t.LSH)("matTooltip",null==e.itemVariant?null:e.itemVariant.name)}}function Zn(i,n){if(1&i&&(t.ynx(0),t.YNc(1,En,4,7,"ng-container",6),t.ALo(2,"push"),t.BQk()),2&i){const e=t.oxw(),a=t.MAs(16);t.xp6(1),t.Q6J("ngIf",t.lcZ(2,2,e.crashBetMode$)===e.CrashBetMode.ITEMS_AND_COINS)("ngIfElse",a)}}function Rn(i,n){if(1&i&&(t.TgZ(0,"div",35),t._UZ(1,"cw-pretty-balance",36),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("balance",e.form.controls.multiplier.value*e.form.controls.amount.value)}}function Nn(i,n){1&i&&(t.TgZ(0,"div",35),t._UZ(1,"cw-icon",37),t.qZA())}const Fn=function(i){return[i]};function Dn(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"span",38),t.NdJ("click",function(){const g=t.CHM(e).$implicit;return t.oxw().toggleItem(g)}),t._UZ(1,"span",39),t.TgZ(2,"img",40),t.ALo(3,"push"),t.qZA(),t.qZA()}if(2&i){const e=n.$implicit,a=t.oxw();t.ekj("selected",e.selected),t.xp6(1),t.Q6J("ngClass",t.VKq(12,Fn,"bg-"+e.itemVariant.rarity)),t.xp6(1),t.Tol(t.lcZ(3,10,a.performanceClass$)),t.Q6J("src",e.itemVariant.iconUrl,t.LSH)("alt",e.itemVariant.name)("matTooltip",null==e.itemVariant?null:e.itemVariant.name)("width",32)("height",32)}}const Gn=function(i,n){return{"text-danger":i,yellow:n}},Qn=function(){return[.1,1]},Hn=function(){return[1,10]};let It=class{constructor(n,e,a,r,g,v,B,A,x,U,dt,it,W,Pt,zt){this.authDialogService=n,this.changeRef=e,this.crashService=a,this.dialog=r,this.fb=g,this.objectiveService=v,this.overlay=B,this.layoutService=A,this.soundService=x,this.toastrService=U,this.userService=dt,this.portableInventoryService=it,this.userItemService=W,this.performanceService=Pt,this.dynamicLoader=zt,this.game$=new M.X(null),this.lastAmount=0,this.minMultiplier=1.01,this.maxMultiplier=1e6,this.minAmount=.01,this.maxPayout=1e5,this.mostValuableUserItems$=(0,P.a)([this.crashService.userItems$,this.selectedItemsCollection.pipe((0,Z.w)(({items$:w})=>w))]).pipe((0,h.U)(([w,ot])=>w.sort((kt,Xt)=>Xt.itemVariant.value-kt.itemVariant.value).map(kt=>Object.assign(Object.assign({},kt),{selected:!!ot.find(Xt=>Xt.id===kt.id)})))),this.selectedItemsValue$=this.selectedItemsCollection.pipe((0,Z.w)(({items$:w})=>w),(0,h.U)(w=>w.reduce((ot,Wt)=>ot+Wt.itemVariant.value,0))),this.creating$=new jt.x,this.exiting$=new jt.x,this.loading$=(0,P.a)([this.creating$,this.exiting$]).pipe((0,Q.O)([!1,!1]),(0,h.U)(w=>w.some(Boolean))),this.form=this.fb.group({amount:[.01,[],this.amountFormValidator()],multiplier:["",[On(this.minMultiplier,this.maxMultiplier)]],userItemIds:[]}),this.CrashBetMode=K.C,this.objective$=this.objectiveService.objective$,this.currency$=this.userService.currency$,this.crashBetMode$=this.crashService.crashBetMode$,this.observingOtherBet$=this.crashService.observedCrashBet$.pipe((0,de.M)(this.crashService.userLiveBet$),(0,h.U)(([w,ot])=>Boolean(ot&&w&&!ot.tick&&w.id!==ot.id))),this.canCashout$=(0,P.a)([this.crashService.userLiveBet$,this.crashService.game$]).pipe((0,h.U)(([w,ot])=>this.canCashout(w,ot))),this.refreshSubmitDisabledObservable$=new M.X(null),this.performanceClass$=this.performanceService.performanceClass$;const G=this.form.get("multiplier"),xe=this.form.get("amount");this.isSubmitDisabled$=(0,P.a)([G.valueChanges.pipe((0,Q.O)(G.value)),this.crashService.manualCrashBetQueue$,this.crashService.userLiveBet$,this.crashService.game$,this.canCashout$,this.loading$,this.observingOtherBet$,this.refreshSubmitDisabledObservable$,xe.valueChanges.pipe((0,Q.O)(xe.value))]).pipe((0,h.U)(([w,ot,Wt,Me,kt,Xt,Ji])=>{if(Ji)return!0;if(kt)return!1;const Vi=this.form.get("multiplier").value>=this.minMultiplier,ki=this.isManualBetActive(ot,Wt,Me)&&!Vi;return this.form.updateValueAndValidity(),Xt||this.form.invalid||ki})),this.form.get("amount").valueChanges.pipe((0,o.t)(this)).subscribe(w=>{w<this.lastAmount&&this.soundService.playSound("CRASH_BET_DECREASE"),w>this.lastAmount&&this.soundService.playSound("CRASH_BET_INCREASE"),this.lastAmount=w,this.crashService.betAmount$.next(+w)})}set game(n){this.game$.next(n),this.creating$.next(!1),this.exiting$.next(!1),"CREATED"===n.status&&this.crashService.hasBetsInQueue$.pipe((0,_t.q)(1)).subscribe(e=>{e&&this.createBets()})}get selectedItemsCollection(){return this.crashService.isLoadingSelectedItemsCollection$.pipe((0,Mn.P)(n=>!n),(0,h.U)(()=>this.crashService.selectedItemsCollection))}ngOnInit(){this.crashService.betAmount$.next(this.form.get("amount").value),this.selectedItemsCollection.pipe((0,Z.w)(({items$:n})=>n),(0,o.t)(this)).subscribe(n=>{this.form.get("userItemIds").setValue(n.map(e=>e.id)),this.form.get("amount").updateValueAndValidity()}),this.totalBetAmount$=(0,P.a)([this.crashService.betAmount$,this.selectedItemsCollection.pipe((0,Z.w)(({items$:n})=>n),(0,h.U)(n=>n.reduce((e,a)=>e+a.consumeValue,0)))]).pipe((0,h.U)(([n,e])=>n+e)),(0,P.a)([this.selectedItemsValue$.pipe((0,f.x)()),this.crashService.betAmount$.pipe((0,f.x)()),this.form.get("multiplier").valueChanges.pipe((0,f.x)(),(0,ct.h)(()=>this.form.get("multiplier").valid))]).pipe((0,o.t)(this)).subscribe(([n,e,a])=>{if(a>1){const r=e+n,g=Math.floor(+(0,Jt.Big)(a).times(100));this.objectiveService.find$.next({amount:r,maxTick:g})}else this.objective$.next(null)})}focusAmount(){this.amountInput.setFocus()}isManualBetActive(n,e,a){return!!n||"CREATED"===a.status&&null!==e}canCashout(n,e){return"STARTED"===e.status&&!!n&&!n.tick}onSubmit(){(0,P.a)([this.userService.user$,this.selectedItemsCollection.pipe((0,Z.w)(({items$:n})=>n)),this.totalBetAmount$,this.crashService.userLiveBet$]).pipe((0,_t.q)(1)).subscribe(([n,e,a,r])=>{var g,v;if(!n)return this.authDialogService.openAuthModal();if("STARTED"===(null===(g=this.game$.getValue())||void 0===g?void 0:g.status)&&r&&!r.tick)return void this.exitCrash(r);const B=this.userService.getBalance(n),{amount:A,multiplier:x}=this.form.getRawValue();if(B<A)return this.dynamicLoader.openDialog(Promise.all([s.e("default-libs_new-payment_src_index_ts"),s.e("default-libs_wallet_src_index_ts")]).then(s.bind(s,60766)).then(U=>[U.WalletModule,U.NoBalanceModalComponent])).subscribe();if(this.form.valid){const U=this.objectiveService.objective$.getValue();let dt={};!U&&x?dt.maxTick=100*x:dt=U;const it=this.createQueuedCrashBet(n,dt,e);if(!this.validateMaxPayout(a))return void this.toastrService.info("Your bet exceeds the maximum payout");"CREATED"===(null===(v=this.game$.getValue())||void 0===v?void 0:v.status)?this.createBet(it):x?this.crashService.autoCrashBetsQueue$.add(it):this.crashService.manualCrashBetQueue$.next(it),x&&this.clearObjective(),it.items.edges.forEach(W=>this.userItemService.reservedCollection.add(W.node)),this.selectedItemsCollection.pipe((0,o.t)(this),(0,I.b)(W=>W.clear())).subscribe(),this.changeRef.detectChanges()}})}createQueuedCrashBet(n,e,a){var r;const v=this.form.getRawValue().amount||0,B=+a.reduce((A,x)=>A.plus(x.consumeValue),(0,Jt.Big)(v));return Object.assign(Object.assign({},this.form.getRawValue()),{totalBet:B,desiredItemVariantId:null===(r=null==e?void 0:e.itemVariant)||void 0===r?void 0:r.id,maxTick:null==e?void 0:e.maxTick,mode:this.crashService.crashBetMode$.getValue(),user:{id:n.id,avatar:n.avatar,userProgress:n.userProgress},items:{edges:a.map(A=>({node:A}))}})}createBets(){this.crashService.autoCrashBetsQueue$.items$.pipe((0,_t.q)(1)).subscribe(n=>n.forEach(e=>this.createBet(e))),this.crashService.manualCrashBetQueue$.getValue()&&this.createBet(this.crashService.manualCrashBetQueue$.getValue()),this.crashService.clearQueues(),this.soundService.playSound("CRASH_START")}createBet(n){return this.creating$.next(!0),this.crashService.createCrashBet({amount:+n.amount,desiredItemVariantId:n.desiredItemVariantId,maxTick:n.maxTick,mode:n.mode,userItemIds:n.userItemIds||[]}).pipe((0,ft.x)(()=>this.creating$.next(!1)),(0,I.b)(()=>this.form.get("userItemIds").reset()),(0,_t.q)(1)).subscribe()}exitCrash(n){return this.exiting$.next(!0),this.crashService.exitCrash(n.id).pipe((0,ft.x)(()=>this.exiting$.next(!1))).subscribe()}selectObjective(){this.userService.user$.pipe((0,_t.q)(1)).subscribe(n=>n?this.crashService.betAmount$.getValue()<=0?void this.focusAmount():this.openObjectiveModal():this.authDialogService.openAuthModal())}toggleItem(n){n.selected?this.selectedItemsCollection.pipe((0,o.t)(this),(0,I.b)(e=>e.removeByKey("id",n.id))).subscribe():this.selectedItemsCollection.pipe((0,o.t)(this),(0,I.b)(e=>e.add(Object.assign(Object.assign({},n),{selected:!n.selected})))).subscribe()}togglePortableInventory(n){this.userService.user$.pipe((0,_t.q)(1)).subscribe(e=>{e?this.portableInventoryService.togglePortableInventory(n).pipe((0,_t.q)(1)).subscribe(a=>{a.hasActionsFooter=!1}):this.authDialogService.openAuthModal()})}openObjectiveModal(){this.soundService.playSound("CRASH_CHOOSE_ITEM");const n=this.dialog.open(pe,{width:"1140px"});n.componentInstance.objective=this.objectiveService.objective$.value,n.componentInstance.minValue$=this.totalBetAmount$,n.afterClosed().pipe((0,_t.q)(1),(0,de.M)(this.totalBetAmount$)).subscribe(([e,a])=>{if(!e)return;const r=+(0,Jt.Big)(e.value).div(a).toFixed(2);if(r<this.minMultiplier)return this.toastrService.info("The selected item is worth less than your bet. Choose a more expensive item or lower your bet"),void this.clearObjective();const g=+(0,Jt.Big)(r).times(100).toFixed(2);this.objectiveService.objective$.next({itemVariant:e,maxTick:g}),this.form.get("multiplier").setValue(r,{emitEvent:!1}),this.refreshSubmitDisabledObservable$.next()})}openCrashOptions(n){const e=this.overlay.create(this.layoutService.getOverlayConfig(n)),a=new xn.C5(fe);e.attach(a).instance.overlayRef=e}validateMaxPayout(n){return+(0,Jt.Big)(n).times(this.form.get("multiplier").value||1).toFixed(2)<=this.maxPayout}clearObjective(){this.form.get("multiplier").setValue(null),this.objectiveService.objective$.next(null)}amountFormValidator(){return n=>this.selectedItemsValue$.pipe((0,_t.q)(1),(0,h.U)(e=>e>0||n.value>=this.minAmount?null:{amount:"Bet some coins or items"}))}ngOnDestroy(){this.clearObjective()}};It.\u0275fac=function(n){return new(n||It)(t.Y36(ge.AuthDialogService),t.Y36(t.sBO),t.Y36(y.e),t.Y36(nt.uw),t.Y36(vt.qu),t.Y36(C.vmI),t.Y36(ue.aV),t.Y36(C.Pb3),t.Y36(C.yu5),t.Y36(_e._W),t.Y36(C.KDu),t.Y36(Ct.PortableInventoryService),t.Y36(C.mNQ),t.Y36(lt.BK),t.Y36(st.tC))},It.\u0275cmp=t.Xpm({type:It,selectors:[["cw-crash-form"]],viewQuery:function(n,e){if(1&n&&t.Gf(st.ln,5),2&n){let a;t.iGM(a=t.CRH())&&(e.amountInput=a.first)}},inputs:{game:"game"},decls:46,vars:64,consts:function(){let i,n,e;return i=$localize`:␟8e853ca13051b19ecc6de41df7a262d0d150d357␟2986893075351718211: FIXED MULTIPLIER `,n=$localize`:␟41397f34e157dd4a100c93d6d2f28454d97bffda␟642250844117975457:BET`,e=$localize`:␟aeaca579f337ea378053fcc005affc03f21c9a75␟7368942109879478434:${"\ufffd#2\ufffd"}:START_TAG_CW_ICON:${"\ufffd/#2\ufffd"}:CLOSE_TAG_CW_ICON: OBSERVING OTHER BET `,[[1,"text-center","position-relative"],["class","observing-label",4,"ngIf"],[3,"loading","disabled","canCashOut","currency","multiplier","totalBetAmount","cwSubmit"],["fxLayout","","fxLayout.lt-md","column-reverse","fxLayoutGap","1rem","fxLayoutAlign","center end","fxLayoutAlign.lt-md","start stretch"],["fxLayout","",3,"ngClass.lt-md","ngClass.gt-sm"],[1,"objective-icon",3,"click"],[4,"ngIf","ngIfElse"],["inlineSVG","assets/icons/objective.svg",1,"objective-icon"],["coinsRewardObjectiveTpl",""],["emptyObjItemTpl",""],[3,"ngClass"],i,[1,"multiplier-input"],["icon","assets/icons/crash/times-multiplier.svg","placeholder","NOT SET",3,"ctrl","smallButtons","options","label","hideWhenLTLG","addAndSubtractButton","clearButton","lastButton","clearValue","maxButton","doubleAndHalfButton","clear"],["fxLayout","","fxLayout.xs","column","fxLayoutAlign","start end","fxLayoutAlign.xs","start stretch"],[1,"mr-2",3,"ngClass.xs"],n,["novalidate","",1,"amount-form",3,"ngClass.lt-md","formGroup","ngSubmit"],[3,"ctrl","smallButtons","options","hideWhenLTLG","label","addAndSubtractButton","clearButton","maxButton","lastButton","doubleAndHalfButton","showErrors"],["fxLayout","","fxLayoutAlign","space-between end"],["matTooltip","Crash Settings","matTooltipPosition","above",3,"click"],["optionsTrigger",""],["inlineSVG","assets/icons/settings.svg",1,"settings-icon","pointer"],["fxLayout","","fxLayoutAlign","space-between center",1,"selected-items-container",3,"ngClass.lt-md"],["fxFlex","",1,"selected-items"],["class","item-icon",3,"selected","click",4,"ngFor","ngForOf"],[1,"separator"],[1,"inventory-trigger","mat-icon-button",3,"click"],["inventoryTrigger",""],["inlineSVG","assets/icons/backpack.svg"],[1,"observing-label"],e,["inlineSVG","assets/icons/eye.svg"],[1,"selected-icon",3,"ngClass"],["matTooltipPosition","above",3,"src","matTooltip"],[1,"empty-icon"],[3,"balance"],["inlineSVG","assets/icons/item-bg.svg"],[1,"item-icon",3,"click"],[1,"bullet",3,"ngClass"],["matTooltipPosition","below",3,"src","alt","matTooltip","width","height"]]},template:function(n,e){if(1&n){const a=t.EpF();t.TgZ(0,"div",0),t.YNc(1,Pn,3,1,"span",1),t.ALo(2,"push"),t.TgZ(3,"cw-crash-form-button",2),t.NdJ("cwSubmit",function(){return e.onSubmit()}),t.ALo(4,"push"),t.ALo(5,"push"),t.ALo(6,"push"),t.ALo(7,"push"),t.ALo(8,"push"),t.qZA(),t.qZA(),t.TgZ(9,"div",3),t.TgZ(10,"div",4),t.TgZ(11,"div",5),t.NdJ("click",function(){return e.selectObjective()}),t.YNc(12,Zn,3,4,"ng-container",6),t.ALo(13,"push"),t._UZ(14,"cw-icon",7),t.YNc(15,Rn,2,1,"ng-template",null,8,t.W1O),t.YNc(17,Nn,2,0,"ng-template",null,9,t.W1O),t.qZA(),t.TgZ(19,"div"),t.TgZ(20,"h6",10),t.SDv(21,11),t.qZA(),t.TgZ(22,"div",12),t.TgZ(23,"cw-amount-input",13),t.NdJ("clear",function(){return e.clearObjective()}),t.ALo(24,"push"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(25,"div",14),t.TgZ(26,"div",15),t.TgZ(27,"h6"),t.SDv(28,16),t.qZA(),t.TgZ(29,"form",17),t.NdJ("ngSubmit",function(){return e.onSubmit()}),t._UZ(30,"cw-amount-input",18),t.qZA(),t.qZA(),t.TgZ(31,"div"),t.TgZ(32,"h6",19),t.TgZ(33,"span"),t._uU(34,"BET ITEMS"),t.qZA(),t.TgZ(35,"span",20,21),t.NdJ("click",function(){t.CHM(a);const g=t.MAs(36);return e.openCrashOptions(g)}),t._UZ(37,"cw-icon",22),t.qZA(),t.qZA(),t.TgZ(38,"div",23),t.TgZ(39,"div",24),t.YNc(40,Dn,4,14,"span",25),t.ALo(41,"push"),t.qZA(),t._UZ(42,"div",26),t.TgZ(43,"button",27,28),t.NdJ("click",function(){t.CHM(a);const g=t.MAs(44);return e.togglePortableInventory(g)}),t._UZ(45,"cw-icon",29),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){const a=t.MAs(18);t.xp6(1),t.Q6J("ngIf",t.lcZ(2,41,e.observingOtherBet$)),t.xp6(2),t.Q6J("loading",t.lcZ(4,43,e.loading$))("disabled",t.lcZ(5,45,e.isSubmitDisabled$))("canCashOut",t.lcZ(6,47,e.canCashout$))("currency",t.lcZ(7,49,e.currency$))("multiplier",e.form.controls.multiplier.valid&&e.form.controls.multiplier.value)("totalBetAmount",t.lcZ(8,51,e.totalBetAmount$)),t.xp6(7),t.Q6J("ngClass.lt-md","mt-4")("ngClass.gt-sm","mt-3"),t.xp6(2),t.Q6J("ngIf",t.lcZ(13,53,e.objective$))("ngIfElse",a),t.xp6(8),t.Q6J("ngClass",t.WLB(59,Gn,e.form.controls.multiplier.invalid,e.form.controls.multiplier.valid&&e.form.controls.multiplier.value)),t.xp6(3),t.Q6J("ctrl",e.form.controls.multiplier)("smallButtons",!0)("options",t.DdM(62,Qn))("label",!1)("hideWhenLTLG",!1)("addAndSubtractButton",!1)("clearButton",null!==t.lcZ(24,55,e.objective$))("lastButton",!1)("clearValue",null)("maxButton",!1)("doubleAndHalfButton",!1),t.xp6(3),t.Q6J("ngClass.xs","mb-3"),t.xp6(1),t.ekj("text-danger",e.form.controls.amount.invalid),t.xp6(2),t.Q6J("ngClass.lt-md","lt-md")("formGroup",e.form),t.xp6(1),t.Q6J("ctrl",e.form.controls.amount)("smallButtons",!0)("options",t.DdM(63,Hn))("hideWhenLTLG",!1)("label",!1)("addAndSubtractButton",!1)("clearButton",!1)("maxButton",!1)("lastButton",!1)("doubleAndHalfButton",!1)("showErrors",!1),t.xp6(8),t.Q6J("ngClass.lt-md","lt-md"),t.xp6(2),t.Q6J("ngForOf",t.lcZ(41,57,e.mostValuableUserItems$))}},directives:[d.O5,me,$.xw,$.SQ,$.Wh,q.oO,Tt.o,bt.d$,d.mk,wn.l,vt._Y,vt.JL,vt.sg,Ln.gM,$.yH,d.sg,xt.q],pipes:[D.f],styles:[".no-scrollbar[_ngcontent-%COMP%]{scrollbar-width:none;-ms-overflow-style:none}.no-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}[_nghost-%COMP%]{display:contents}[_nghost-%COMP%]     .mat-form-field-wrapper{padding-bottom:0;margin:0!important}.yellow[_ngcontent-%COMP%]{color:#ffe063}cw-icon[_ngcontent-%COMP%]{color:inherit}.amount[_ngcontent-%COMP%]{margin-bottom:-1.5rem!important}cw-amount-input[_ngcontent-%COMP%]{width:100%}.auto-bet-link[_ngcontent-%COMP%]{margin-bottom:18px}.auto-bet-link[_ngcontent-%COMP%]   cw-icon[_ngcontent-%COMP%]{cursor:pointer}.settings-icon[_ngcontent-%COMP%]{opacity:.4}.multiplier-input[_ngcontent-%COMP%]{width:13rem}.multiplier-input[_ngcontent-%COMP%]     cw-amount-input input{color:#ffe063}.multiplier-input[_ngcontent-%COMP%]     cw-amount-input cw-icon{color:#ffe063;position:relative;left:8px;top:2px}.amount-form[_ngcontent-%COMP%]{width:13rem}.amount-form.lt-md[_ngcontent-%COMP%]{width:18rem}.objective-icon[_ngcontent-%COMP%]{margin-right:.5rem;position:relative;cursor:pointer}.objective-icon[_ngcontent-%COMP%]   .selected-icon[_ngcontent-%COMP%], .objective-icon[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{width:4.5rem;height:4.5rem;border-radius:8px}.objective-icon[_ngcontent-%COMP%]   .selected-icon[_ngcontent-%COMP%]{opacity:.5}.objective-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80%;position:absolute;top:0;bottom:0;left:0;right:0;margin:auto}.objective-icon[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;border:1px solid rgba(255,255,255,.1);color:#ffffff1a}.objective-icon[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]   cw-icon[_ngcontent-%COMP%]{width:2rem;height:2rem}.objective-icon[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]   cw-pretty-balance[_ngcontent-%COMP%]{color:#ffe063}.objective-icon[_ngcontent-%COMP%]   .objective-icon[_ngcontent-%COMP%]{position:absolute;bottom:.5rem;width:1.25rem;left:.25rem}.inventory-trigger[_ngcontent-%COMP%]{cursor:pointer}.inventory-trigger[_ngcontent-%COMP%]:hover{filter:brightness(1.25)}.selected-items-container[_ngcontent-%COMP%]{border-radius:6px;background-color:var(--form-field-bg);padding:.35rem;width:15rem}.selected-items-container.lt-md[_ngcontent-%COMP%]{width:18rem}.selected-items-container[_ngcontent-%COMP%]   .selected-items[_ngcontent-%COMP%]{overflow-x:auto;scrollbar-width:none;-ms-overflow-style:none;width:0;white-space:nowrap}.selected-items-container[_ngcontent-%COMP%]   .selected-items[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.selected-items-container[_ngcontent-%COMP%]   .selected-items[_ngcontent-%COMP%]   .item-icon[_ngcontent-%COMP%]{cursor:pointer;display:inline-block;width:2.5rem;height:2.5rem;margin-right:.25rem;border-radius:4px;background-color:#262a30;line-height:2rem;position:relative}.selected-items-container[_ngcontent-%COMP%]   .selected-items[_ngcontent-%COMP%]   .item-icon[_ngcontent-%COMP%]:hover{filter:brightness(1.5)}.selected-items-container[_ngcontent-%COMP%]   .selected-items[_ngcontent-%COMP%]   .item-icon.selected[_ngcontent-%COMP%]{background-color:#00c74d4d}.selected-items-container[_ngcontent-%COMP%]   .selected-items[_ngcontent-%COMP%]   .item-icon[_ngcontent-%COMP%]   .bullet[_ngcontent-%COMP%]{width:.375rem;height:.375rem;position:absolute;top:.25rem;right:.25rem}.selected-items-container[_ngcontent-%COMP%]   .selected-items[_ngcontent-%COMP%]   .item-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{vertical-align:middle;width:100%;padding:.25rem}.selected-items-container[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{width:1px;margin:0 .5rem;height:2.5rem;background-color:#262a30}.selected-items-container[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]{background-color:#262a30;border-radius:6px}.observing-label[_ngcontent-%COMP%]{position:absolute;top:-1.7rem;right:0;left:0;width:12rem;color:#fff;padding:.5rem;font-weight:700;font-size:.75rem;margin:auto;background-color:rgba(var(--form-field-bg),.2);border-radius:4px}.observing-label[_ngcontent-%COMP%]   cw-icon[_ngcontent-%COMP%]{margin-right:.2rem}"],data:{animation:[(0,L.X$)("fade",[(0,L.eR)(":enter",(0,L._7)(he.eu,{params:{fromOpacity:0,timing:.1}})),(0,L.eR)(":leave",(0,L._7)(he.U6,{params:{timing:.075}}))])]},changeDetection:0}),It=(0,R.gn)([(0,o.c)(),(0,R.w6)("design:paramtypes",[ge.AuthDialogService,t.sBO,y.e,nt.uw,vt.qu,C.vmI,ue.aV,C.Pb3,C.yu5,_e._W,C.KDu,Ct.PortableInventoryService,C.mNQ,lt.BK,st.tC])],It);var te=s(39478),Un=s(93678);const Jn=te.Ps`
  fragment CrashGameDetails on CrashGame {
    id
    scheduledAt
    status
    roll
    seed
    bets {
      edges {
        node {
          ...CrashBet
        }
      }
    }
  }

  ${Un.q}
`,Vn=te.Ps`
  query CrashGameSummary($previousId: ID!, $id: ID!, $nextId: ID!) {
    previousCrashGame: crashGame(id: $previousId) {
      id
      seed
      roll
    }
    crashGame(id: $id) {
      ...CrashGameDetails
    }
    nextCrashGame: crashGame(id: $nextId) {
      id
      seed
      roll
    }
  }

  ${Jn}
`;var ee=s(13302),be=s(67322),kn=s(98833);function Yn(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"tr",42),t.TgZ(1,"td",38),t.TgZ(2,"button",43),t.NdJ("click",function(){return t.CHM(e),t.oxw(4).next()}),t._uU(3),t.qZA(),t.qZA(),t.TgZ(4,"td",40),t._uU(5),t.qZA(),t.TgZ(6,"td",41),t._uU(7),t.ALo(8,"number"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw(3).ngIf,a=t.oxw();t.xp6(2),t.Q6J("disabled",!e.nextCrashGame.roll),t.xp6(1),t.hij(" ",a.getGameNumber(e.nextCrashGame.id)," "),t.xp6(2),t.Oqu(e.nextCrashGame.seed||"Seed revealed when game finishes"),t.xp6(2),t.hij("",t.xi3(8,4,e.nextCrashGame.roll/100,"1.2-2"),"x")}}function jn(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"tr",42),t.TgZ(1,"td",38),t.TgZ(2,"button",44),t.NdJ("click",function(){return t.CHM(e),t.oxw(4).previous()}),t._uU(3),t.qZA(),t.qZA(),t.TgZ(4,"td",40),t._uU(5),t.qZA(),t.TgZ(6,"td",41),t._uU(7),t.ALo(8,"number"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw(3).ngIf,a=t.oxw();t.xp6(3),t.hij(" ",a.getGameNumber(e.previousCrashGame.id)," "),t.xp6(2),t.Oqu(e.previousCrashGame.seed),t.xp6(2),t.hij("",t.xi3(8,3,e.previousCrashGame.roll/100,"1.2-2"),"x")}}const Xn=function(){return["/info/provably-fair"]};function qn(i,n){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",21),t.TgZ(2,"h6"),t.SDv(3,30),t.qZA(),t._uU(4),t.ALo(5,"number"),t.ALo(6,"date"),t.qZA(),t._UZ(7,"hr",19),t.TgZ(8,"h5"),t.SDv(9,31),t.qZA(),t.TgZ(10,"p",32),t._uU(11," All hashes are pre-generated and fed into one another through SHA256. Running a game hash through any "),t.TgZ(12,"a",33),t._uU(13,"online SHA256 encoder"),t.qZA(),t._uU(14," will equal the previous game hash. For more information visit our "),t.TgZ(15,"a",34),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).dialogRef.close()}),t._uU(16,"Provably Fair"),t.qZA(),t._uU(17," page "),t.qZA(),t.TgZ(18,"table",2),t.TgZ(19,"thead"),t.TgZ(20,"tr"),t.TgZ(21,"th"),t.SDv(22,35),t.qZA(),t.TgZ(23,"th"),t.SDv(24,36),t.qZA(),t.TgZ(25,"th"),t.SDv(26,37),t.qZA(),t.qZA(),t.qZA(),t.TgZ(27,"tbody"),t.YNc(28,Yn,9,7,"tr",29),t.TgZ(29,"tr"),t.TgZ(30,"td",38),t.SDv(31,39),t.qZA(),t.TgZ(32,"td",40),t._uU(33),t.qZA(),t.TgZ(34,"td",41),t._uU(35),t.ALo(36,"number"),t.qZA(),t.qZA(),t.YNc(37,jn,9,6,"tr",29),t.qZA(),t.qZA(),t.BQk()}if(2&i){const e=t.oxw(2).ngIf,a=t.oxw();t.xp6(4),t.AsE(" ",t.xi3(5,8,e.crashGame.roll/100,"1.2-2"),"x @ ",t.xi3(6,11,e.crashGame.scheduledAt,"medium")," "),t.xp6(11),t.Q6J("routerLink",t.DdM(17,Xn)),t.xp6(13),t.Q6J("ngIf",e.nextCrashGame),t.xp6(3),t.pQV(a.getGameNumber(e.crashGame.id)),t.QtT(31),t.xp6(2),t.Oqu(e.crashGame.seed),t.xp6(2),t.hij("",t.xi3(36,14,e.crashGame.roll/100,"1.2-2"),"x"),t.xp6(2),t.Q6J("ngIf",e.previousCrashGame)}}function zn(i,n){1&i&&(t.ynx(0),t.TgZ(1,"p",42),t.SDv(2,45),t.qZA(),t.BQk())}function Wn(i,n){if(1&i&&t._UZ(0,"cw-crash-bet",46),2&i){const e=n.$implicit,a=t.oxw(2).ngIf;t.Q6J("gameStatus",a.crashGame.status)("crashBet",e.node)}}function Kn(i,n){1&i&&(t.TgZ(0,"div",42),t.SDv(1,47),t.qZA())}function ti(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"section",13),t.TgZ(2,"button",14),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).next()}),t.tHW(3,15),t._UZ(4,"cw-icon",16),t.N_p(),t.qZA(),t.TgZ(5,"button",14),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).previous()}),t.tHW(6,17),t._UZ(7,"cw-icon",18),t.N_p(),t.qZA(),t.qZA(),t._UZ(8,"hr",19),t.TgZ(9,"section",20),t.TgZ(10,"div",21),t.TgZ(11,"h6"),t.SDv(12,22),t.qZA(),t._uU(13),t.qZA(),t.ynx(14,23),t.YNc(15,qn,38,18,"ng-container",24),t.YNc(16,zn,3,0,"ng-container",25),t.BQk(),t.qZA(),t._UZ(17,"hr",19),t.TgZ(18,"h5"),t.SDv(19,26),t.qZA(),t.TgZ(20,"div",27),t.YNc(21,Wn,1,2,"cw-crash-bet",28),t.YNc(22,Kn,2,0,"div",29),t.qZA(),t.qZA()}if(2&i){const e=t.oxw().ngIf,a=t.oxw();t.xp6(2),t.Q6J("disabled",!e.nextCrashGame||"FINISHED"!==e.crashGame.status),t.xp6(3),t.Q6J("disabled",1===a.id),t.xp6(8),t.AsE(" ",a.gameId," (number ",a.getGameNumber(e.crashGame.id),") "),t.xp6(1),t.Q6J("ngSwitch",e.crashGame.status),t.xp6(1),t.Q6J("ngSwitchCase","FINISHED"),t.xp6(6),t.Q6J("ngForOf",e.crashGame.bets.edges)("ngForTrackBy",a.trackById),t.xp6(1),t.Q6J("ngIf",!e.crashGame.bets.edges.length)}}function ei(i,n){1&i&&(t.TgZ(0,"div"),t._uU(1,"There is no game with this ID in our system."),t.qZA())}function ni(i,n){if(1&i&&(t.ynx(0),t.YNc(1,ti,23,9,"div",12),t.YNc(2,ei,2,0,"div",12),t.BQk()),2&i){const e=n.ngIf;t.xp6(1),t.Q6J("ngIf",e.crashGame),t.xp6(1),t.Q6J("ngIf",!e.crashGame)}}function ii(i,n){1&i&&t._UZ(0,"cw-loader",48),2&i&&t.Q6J("loading",!0)("type","view")}const Vt="CrashGame";let ne=(()=>{class i extends((0,E.A)(E.t)){constructor(e,a){super(),this.apollo=e,this.dialogRef=a,this.ctrl=new vt.NI}set gameId(e){e?(e="string"==typeof e?e:(0,C.AWy)(+e,Vt),this._gameId=e):this.dialogRef.close()}get gameId(){return this._gameId}get id(){return+atob(this.gameId).split(":")[1]}ngOnInit(){const e=this.getVariables();this.queryRef=this.apollo.watchQuery({query:Vn,variables:e,fetchPolicy:"cache-and-network"}),this.data$=this.queryRef.valueChanges.pipe((0,T.j)("data"))}ngOnDestroy(){this.data$=null}find(){if(!this.ctrl.value)return;const e=+this.ctrl.value?(0,C.AWy)(this.ctrl.value,Vt):this.ctrl.value;this.refetch(e)}previous(){this.refetch((0,C.Q7A)(this.gameId,Vt))}next(){this.refetch((0,C.YN5)(this.gameId,Vt))}getGameNumber(e){return(0,C.Qz5)(e)}getVariables(){return{id:this.gameId,previousId:(0,C.Q7A)(this.gameId,Vt),nextId:(0,C.YN5)(this.gameId,Vt)}}refetch(e){e&&(this.gameId=e,this.queryRef.setVariables(this.getVariables()),this.queryRef.refetch())}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(ee._M),t.Y36(nt.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["cw-crash-game-modal"]],inputs:{gameId:"gameId"},features:[t.qOj],decls:15,vars:5,consts:function(){let n,e,a,r,g,v,B,A,x,U,dt,it,W,Pt,zt;return n=$localize`:␟6498086affa9771c408515b774533215962254db␟7790661815484685146:Game information`,e=$localize`:␟67507e3470c375ff7e266557ffe8de4e8d0d36da␟1996778472776563388:Find game by ID ${"\ufffd#6\ufffd"}:START_TAG_CW_ICON:${"\ufffd/#6\ufffd"}:CLOSE_TAG_CW_ICON:`,a=$localize`:␟4f3d848c4237324e3aeb49dfe5eb3567b3829bcd␟1195280733202193781:FIND`,r=$localize`:␟ba9c9a3174aaaccf0a62fe8f7bb0914801d3ef3d␟1015188645761913700:${"\ufffd#4\ufffd"}:START_TAG_CW_ICON:${"\ufffd/#4\ufffd"}:CLOSE_TAG_CW_ICON: Next game `,g=$localize`:␟6dcbca35ba5840c105b0e942cc9ab37611ae31da␟154842268477848182: Previous game ${"\ufffd#7\ufffd"}:START_TAG_CW_ICON:${"\ufffd/#7\ufffd"}:CLOSE_TAG_CW_ICON:`,v=$localize`:␟c5f8766dd4e5fc7b90c776be8bd08f70db30de85␟2729314918455412771:Game ID:`,B=$localize`:␟41adabbb19eff37580a8d90131baace8dc09274e␟610651800997652993:Bets`,A=$localize`:␟868103577fba04a9002b5f31be74779f806dd13c␟833440453918337050:Crashed:`,x=$localize`:␟a90b89a42fedf37f170c2fc72f5379616e6bf5f2␟3617959979821832:Seed Chain`,U=$localize`:␟0e6a93b6d39a899de3abb0cb10c51f19057fa547␟4643591148728960560:Game`,dt=$localize`:␟a6c09c3b932b35a552020c24b37d5f517e2d4c3b␟1819215007804875232:Seed`,it=$localize`:␟2b43549b813b90101f4e1c364880352a2743d10d␟2734213108907937736:Roll`,W=$localize`:␟d5e1d51b707c9e95090884a792e909671a1a6798␟4883537492597731573:${"\ufffd0\ufffd"}:INTERPOLATION:`,Pt=$localize`:␟6a1035c7e961bd4cee04631c33921bcb81adcf86␟8047705234321520096:Game has not yet finished. The crash and seed will be revealed later.`,zt=$localize`:␟c0a0954ff90f71227db0872e7b0633720bbff963␟7360784442352972151:There were no bets made during this round...`,[["mat-dialog-title",""],n,[1,"w-100"],[1,"bet-amount"],e,["inlineSVG","assets/icons/search.svg"],["matInput","","type","text","autoComplete","off",3,"formControl"],["fxLayoutGap",".2rem",1,"form-field-buttons"],["type","button","mat-flat-button","","color","dark",3,"click"],a,[4,"ngIf","ngIfElse"],["loadingTpl",""],[4,"ngIf"],["fxLayout","","fxLayoutAlign","space-between center"],["type","button","mat-flat-button","","color","primary",3,"disabled","click"],r,["inlineSVG","assets/icons/chevron-left.svg"],g,["inlineSVG","assets/icons/chevron-right.svg"],[1,"my-4"],[1,"info"],[1,"mb-3"],v,[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],B,[1,"bets"],[3,"gameStatus","crashBet",4,"ngFor","ngForOf","ngForTrackBy"],["class","text-muted",4,"ngIf"],A,x,[1,"small"],["href","https://xorbin.com/tools/sha256-hash-calculator","target","_blank"],[3,"routerLink","click"],U,dt,it,[1,"text-center"],W,[1,"seed"],[1,"roll"],[1,"text-muted"],["mat-flat-button","","color","primary",1,"w-100",3,"disabled","click"],["mat-flat-button","","color","primary",1,"w-100",3,"click"],Pt,[3,"gameStatus","crashBet"],zt,[1,"m-6",3,"loading","type"]]},template:function(e,a){if(1&e&&(t.TgZ(0,"h4",0),t.SDv(1,1),t.qZA(),t.TgZ(2,"mat-dialog-content"),t.TgZ(3,"mat-form-field",2),t.TgZ(4,"mat-label",3),t.tHW(5,4),t._UZ(6,"cw-icon",5),t.N_p(),t.qZA(),t._UZ(7,"input",6),t.TgZ(8,"div",7),t.TgZ(9,"button",8),t.NdJ("click",function(){return a.find()}),t.SDv(10,9),t.qZA(),t.qZA(),t.qZA(),t.YNc(11,ni,3,2,"ng-container",10),t.ALo(12,"push"),t.YNc(13,ii,1,2,"ng-template",null,11,t.W1O),t.qZA()),2&e){const r=t.MAs(14);t.xp6(7),t.Q6J("formControl",a.ctrl),t.xp6(4),t.Q6J("ngIf",t.lcZ(12,3,a.data$))("ngIfElse",r)}},directives:[nt.uh,nt.xY,be.KE,be.hX,Tt.o,bt.d$,kn.Nt,vt.Fj,vt.JJ,vt.oH,$.SQ,ce.lW,d.O5,$.xw,$.Wh,d.RF,d.n9,d.ED,d.sg,tt.yS,ht,le.R],pipes:[D.f,d.JJ,d.uU],styles:[".seed[_ngcontent-%COMP%]{font-size:1.1rem;font-family:monospace;letter-spacing:.5px;word-break:break-all}.roll[_ngcontent-%COMP%]{white-space:nowrap}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-top:0}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle}"],changeDetection:0}),i})();function si(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"div",2),t.NdJ("click",function(){const g=t.CHM(e).$implicit;return t.oxw().openGameModal(g)}),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"number"),t.qZA(),t.qZA()}if(2&i){const e=n.$implicit;t.ekj("low",e.roll<200)("med",e.roll>=200&&e.roll<300)("high",e.roll>=300),t.xp6(2),t.Oqu(t.xi3(3,7,e.roll/100,"1.2-2"))}}let ve=(()=>{class i extends((0,E.A)(E.t)){constructor(e){super(),this.dialog=e,this._games=[],this.initialised=!1}set games(e){!e||(this._games=e.slice(0,100),setTimeout(()=>this.initialised=!0))}get games(){return this._games}openGameModal(e){this.dialog.open(ne,{width:"800px"}).componentInstance.gameId=e.id}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(nt.uw))},i.\u0275cmp=t.Xpm({type:i,selectors:[["cw-crash-games"]],inputs:{games:"games"},features:[t.qOj],decls:3,vars:6,consts:[["fxLayout","","fxLayoutAlign","start center",1,"games"],["class","game",3,"low","med","high","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"game",3,"click"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0),t.YNc(1,si,4,10,"div",1),t.ALo(2,"slice"),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngForOf",t.Dn7(2,2,a.games,0,10))("ngForTrackBy",a.trackById))},directives:[$.xw,$.Wh,d.sg],pipes:[d.OU,d.JJ],styles:[".no-scrollbar[_ngcontent-%COMP%]{scrollbar-width:none;-ms-overflow-style:none}.no-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}[_nghost-%COMP%]{width:100%;display:flex;align-items:center;border-radius:.5rem}.label[_ngcontent-%COMP%]{white-space:nowrap;font-weight:700;margin-right:1rem}.games[_ngcontent-%COMP%]{scrollbar-width:none;-ms-overflow-style:none;overflow:auto;white-space:nowrap;max-width:100%;margin:auto;padding:2px 0}.games[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.game[_ngcontent-%COMP%]{margin:0 .2rem;min-width:3.2rem;padding:.3rem .5rem;border-radius:.5rem;background-color:var(--card-bg);text-align:center;font-size:85%;font-weight:500;cursor:pointer;transition:transform .1s}.game[_ngcontent-%COMP%]:hover{transform:translateY(-2px);filter:brightness(1.15)}.game.med[_ngcontent-%COMP%]{background-color:var(--game-med-bg);border-color:var(--game-med);color:var(--game-med)}.game.high[_ngcontent-%COMP%]{background-color:var(--game-high-bg);border-color:var(--game-high);color:var(--game-high)}"],data:{animation:[(0,L.X$)("appear",[(0,L.eR)(":leave",[(0,L.jt)("300ms ease-out",(0,L.oB)({marginRight:"-2.25rem"}))])])]},changeDetection:0}),i})();var ri=s(36129),ci=s(49770);const li=te.Ps`
  query PotentialWins($first: PaginationAmount, $after: String, $marketId: ID!, $minValue: Float!) {
    crashBetItemVariants(first: $first, after: $after, marketId: $marketId, minValue: $minValue) {
      pageInfo {
        hasNextPage
        endCursor
      }
      edges {
        node {
          ...ItemVariant
        }
      }
    }
  }

  ${C.xp8}
`;var mi=s(60515),ui=s(46590),Se=s(4128),gi=s(69751);let hi=(()=>{class i{static preloadImages(e){return e.length?(0,At.of)([]):mi.E.pipe((0,ui.d)(void 0),(0,I.b)(()=>{i.imagesPlaceholder=[]}),(0,Z.w)(()=>(0,Se.D)(e.map(i.preloadImage)).pipe((0,I.b)(a=>{i.imagesPlaceholder=a}))))}}return i.imagesPlaceholder=[],i.preloadImage=n=>new gi.y(e=>{const a=new Image;a.onload=function(){e.next(a),e.complete()},a.src=n}),i})();function _i(i,n){if(1&i&&t._UZ(0,"cw-pretty-balance",4),2&i){const e=t.oxw().$implicit;t.Q6J("balance",e.totalBet)("currency",e.currency)}}const di=function(i){return[i]};function pi(i,n){if(1&i&&(t.ynx(0),t.TgZ(1,"div",5),t._uU(2),t.qZA(),t.TgZ(3,"div",6),t._UZ(4,"span",7),t.TgZ(5,"span"),t._uU(6),t.qZA(),t.qZA(),t.BQk()),2&i){const e=n.ngIf,a=t.oxw(2);t.xp6(2),t.Oqu(e.color||e.size),t.xp6(2),t.Q6J("ngClass",t.VKq(3,di,"bg-"+e.rarity)),t.xp6(2),t.Oqu(a.getName(e))}}const Ci=function(i){return{"text-success":i}};function fi(i,n){if(1&i&&(t.ynx(0),t._UZ(1,"cw-pretty-balance",8),t.ALo(2,"push"),t.BQk()),2&i){const e=t.oxw().$implicit,a=t.oxw();t.xp6(1),t.Q6J("ngClass",t.VKq(5,Ci,e.totalWinAmount))("balance",t.lcZ(2,3,a.totalCoinWin$))("currency",e.currency)}}function bi(i,n){if(1&i&&(t.ynx(0),t.YNc(1,_i,1,2,"cw-pretty-balance",2),t.YNc(2,pi,7,5,"ng-container",3),t.ALo(3,"push"),t.ALo(4,"push"),t.YNc(5,fi,3,7,"ng-container",3),t.ALo(6,"push"),t.BQk()),2&i){const e=n.$implicit,a=t.oxw();t.xp6(1),t.Q6J("ngIf","CREATED"===a.game.status&&e),t.xp6(1),t.Q6J("ngIf",!0===t.lcZ(3,3,a.itemGameStarted$)&&t.lcZ(4,5,a.potential$)[0]),t.xp6(3),t.Q6J("ngIf",!0===t.lcZ(6,7,a.inCoinGame$))}}let yt=class{constructor(n,e,a){this.crashService=n,this.apollo=e,this.userService=a,this.pageInfo=this.getEmptyPageInfo(),this.preloads$=new M.X([]),this.crashBet$=new M.X(null),this._multiplier=1,this.fetchMore$=new jt.x,this.preloadCount=80,this.fetchMoreWhenLeft=30,this.forwardPreloads=2,this.potential$=this.crashService.potential$}set crashBet(n){this.crashBet$.next(n),this.insertObjectiveItem(null==n?void 0:n.desiredItemVariant)}get multiplier(){return this._multiplier}get currentValue(){return this.crashBet$.getValue()?this.crashBet$.getValue().totalBet*this.multiplier:this.crashService.fakeBetAmount*this.multiplier}ngOnInit(){this.crashBet$.pipe((0,f.x)(),(0,Z.w)(()=>this.userService.market$),(0,Z.w)(n=>{var e;return this.queryRef=this.apollo.watchQuery({query:li,variables:{first:this.preloadCount,minValue:(null===(e=this.crashBet$.getValue())||void 0===e?void 0:e.amount)||this.crashService.fakeBetAmount,marketId:n.id}}),this.queryRef.valueChanges}),(0,o.t)(this)).subscribe(({data:n})=>{var e;!n||(this.variants=n.crashBetItemVariants.edges.map(a=>a.node),this.pageInfo=n.crashBetItemVariants.pageInfo,this.insertObjectiveItem(null===(e=this.crashBet)||void 0===e?void 0:e.desiredItemVariant),this.calculate())}),this.crashService.multiplier$.pipe((0,I.b)(n=>{this._multiplier=n,this.potential$.getValue()&&this.potential$.getValue()[0]&&this.potential$.getValue()}),(0,h.U)(n=>n.toFixed(2)),(0,f.x)(),(0,o.t)(this)).subscribe(()=>this.calculate()),this.potential$.pipe((0,ct.h)(n=>{if(n&&n.length>=2){const[e,a]=n;return!!e&&!!a}return!1}),(0,I.b)(([{value:n},{value:e}])=>{const a=this.crashService.growthReverseFn(n),r=this.crashService.growthReverseFn(e);this.crashService.timeBetweenPotentials.next(r-a)}),(0,o.t)(this)).subscribe(),this.fetchMore$.pipe((0,ri.z)(()=>{const n={after:this.pageInfo.endCursor,minValue:this.currentValue};return(0,ci.P)(()=>this.queryRef.fetchMore({variables:n}))}),(0,o.t)(this)).subscribe(),this.totalCoinWin$=(0,P.a)([this.crashService.userLiveBet$,this.crashService.multiplier$]).pipe((0,h.U)(([n,e])=>n.totalWinAmount?n.totalWinAmount:n.totalBet*e)),this.itemGameStarted$=(0,P.a)([this.crashService.game$,this.crashService.crashBetMode$]).pipe((0,h.U)(([n,e])=>"STARTED"===n.status&&e===K.C.ITEMS_AND_COINS)),this.inCoinGame$=(0,P.a)([this.crashService.userLiveBet$,this.crashService.game$,this.crashService.crashBetMode$]).pipe((0,h.U)(([n,e,a])=>n&&"STARTED"===e.status&&a===K.C.COINS_ONLY)),this.preloads$.pipe((0,ct.h)(n=>!!n.length),(0,Z.w)(n=>{const e=n.map(({iconUrl:a})=>a);return hi.preloadImages(e)}),(0,o.t)(this)).subscribe()}getName(n){return[n.brand,n.name].filter(Boolean).join(" | ")}insertObjectiveItem(n){if(!n||!this.variants)return;let e=null;for(let a=this.variants.length-1;a>1;a--)if(n.value>this.variants[a].value){if(this.pageInfo.hasNextPage&&a===this.variants.length-1)break;e=a+1;break}null!==e&&this.variants.splice(e,0,n)}calculate(){if(!this.variants)return;const n=this.currentValue;let e,a;for(let A=this.variants.length-1;A>=0;A--)if(n>=this.variants[A].value){a=this.variants[A],e=A;break}if(!a)return;const[r]=this.potential$.getValue();if(a===r)return;this.pageInfo.hasNextPage&&e+1>=this.variants.length-this.fetchMoreWhenLeft&&this.fetchMore$.next();const g=this.preloads$.getValue();let v=!1;if(this.forwardPreloads)for(let A=e+1;A<=e+this.forwardPreloads;A++)this.variants[A]&&(g.push(this.variants[A]),v=!0);v&&this.preloads$.next(g.slice(0,5)),this.potential$.next([a,this.variants[e+1]])}getEmptyPageInfo(){return{hasNextPage:!1,endCursor:null}}};yt.\u0275fac=function(n){return new(n||yt)(t.Y36(y.e),t.Y36(ee._M),t.Y36(C.KDu))},yt.\u0275cmp=t.Xpm({type:yt,selectors:[["cw-crash-potential-win"]],inputs:{game:"game",crashBet:"crashBet"},decls:2,vars:2,consts:[[1,"potential-data",3,"ngClass.lt-md"],[4,"rxLet"],[3,"balance","currency",4,"ngIf"],[4,"ngIf"],[3,"balance","currency"],[1,"variant-text"],[1,"item-name"],[1,"bullet",3,"ngClass"],[3,"ngClass","balance","currency"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0),t.YNc(1,bi,7,9,"ng-container",1),t.qZA()),2&n&&(t.Q6J("ngClass.lt-md","lt-md"),t.xp6(1),t.Q6J("rxLet",e.crashBet$))},directives:[q.oO,Rt.e,d.O5,xt.q,d.mk],pipes:[D.f],styles:[".no-scrollbar[_ngcontent-%COMP%]{scrollbar-width:none;-ms-overflow-style:none}.no-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.potential-data[_ngcontent-%COMP%]{text-align:center;height:7vh;margin-bottom:2vh}.potential-data[_ngcontent-%COMP%]   .variant-text[_ngcontent-%COMP%]{height:1.5rem;color:#6c757d;letter-spacing:1.25px;font-size:.85rem;font-weight:700;text-transform:uppercase}.potential-data[_ngcontent-%COMP%]   .bullet[_ngcontent-%COMP%]{display:inline-block;width:14px;height:14px;vertical-align:baseline;border-radius:2px;margin-right:10px;transition:background-color .2s}.potential-data[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{display:inline-block;max-width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;word-wrap:normal;width:100%;font-size:1.25rem;text-transform:uppercase;color:#dee2e6;font-weight:700}.potential-data[_ngcontent-%COMP%]   cw-pretty-balance[_ngcontent-%COMP%]{margin-top:.75rem;display:block;font-size:1.3rem;font-weight:700}"],changeDetection:0}),yt=(0,R.gn)([(0,o.c)(),(0,R.w6)("design:paramtypes",[y.e,ee._M,C.KDu])],yt);var Si=s(4326);const Ai=["crashVideo"],Ti=["loops"],Ae=function(i){return{invisible:i}};function xi(i,n){if(1&i&&(t._UZ(0,"video",4,5),t.ALo(2,"push")),2&i){const e=n.$implicit,a=t.oxw(2);t.Q6J("ngClass",t.VKq(4,Ae,"STARTED"!==t.lcZ(2,2,a.status$)))("src",e,t.LSH)}}function Mi(i,n){if(1&i&&(t.ynx(0),t.ynx(1),t.YNc(2,xi,3,6,"video",1),t.BQk(),t._UZ(3,"video",2,3),t.ALo(5,"push"),t.BQk()),2&i){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.loopVideoUrls),t.xp6(1),t.Q6J("ngClass",t.VKq(5,Ae,!t.lcZ(5,3,e.crashVideoVisible$)))("src",e.crashVideoUrl,t.LSH)}}let wt=class{constructor(n,e,a){this.crashService=n,this.cdr=e,this.appConfig=a,this.status$=this.crashService.game$.pipe((0,h.U)(r=>r.status)),this.crashVideoVisible$=new M.X(!1),this.animationsEnabled$=this.crashService.animationsEnabled$.pipe((0,h.U)(r=>this.appConfig.crash.videoAnimations&&r)),this.loopVideoUrls=["assets/webm/loop1.webm","assets/webm/loop2.webm","assets/webm/loop3.webm"],this.crashVideoUrl="assets/webm/crash.webm",this.videosPreloaded$=new jt.x,this.loopTransition$=new jt.x,this.loopsViewReady$=new M.X(!1),this.crashViewReady$=new M.X(!1),this.preloadVideos(),this.loopTransition$.pipe((0,Z.w)(r=>{const g=this.loopVideoElements.filter((v,B)=>B+1!==r);return g.forEach(v=>{v.nativeElement.classList.remove("active")}),this.cdr.detectChanges(),(0,At.of)(g).pipe((0,Si.g)(500))}),(0,o.t)(this)).subscribe(r=>{r.forEach(g=>{g.nativeElement.paused||g.nativeElement.pause()}),this.cdr.detectChanges()}),this.videosPreloaded$.pipe((0,Z.w)(()=>this.crashViewReady$),(0,ct.h)(r=>r),(0,Z.w)(()=>this.status$),(0,o.t)(this)).subscribe(r=>{const g=this.crashVideoElement.nativeElement;switch(r){case"FINISHED":document.hidden||g.play().then(()=>{this.crashVideoVisible$.next(!0),this.cdr.detectChanges()});break;case"STARTED":g.paused||g.pause(),this.crashVideoVisible$.next(!1)}}),this.videosPreloaded$.pipe((0,Z.w)(()=>(0,P.a)([this.loopsViewReady$,this.crashService.multiplier$.pipe((0,h.U)(r=>r>3?3:r>2?2:r>1?1:0),(0,f.x)())])),(0,o.t)(this)).subscribe(([r,g])=>{r&&this.toggleVideos(g)})}set loopVideoElements(n){null!==n&&0!==n.length?(n.forEach(e=>{const a=e.nativeElement;a.muted=!0,a.loop=!0,a.load()}),this._loopVideoElements=n,this.loopsViewReady$.next(!0)):this.loopsViewReady$.next(!1)}get loopVideoElements(){return this._loopVideoElements}set crashVideoElement(n){if(!n)return void this.crashViewReady$.next(!1);const e=n.nativeElement;e.muted=!0,e.load(),this._crashVideoElement=n,this.crashViewReady$.next(!0)}get crashVideoElement(){return this._crashVideoElement}preloadVideos(){const n=this.loopVideoUrls.map(a=>(0,Kt.D)(fetch(a))),e=(0,Kt.D)(fetch(this.crashVideoUrl));(0,Se.D)([...n,e]).subscribe(()=>this.videosPreloaded$.next())}toggleVideos(n){const e=this.loopVideoElements.filter((a,r)=>r+1===n)[0];if(e){const a=e.nativeElement;return a.play().then(()=>{a.classList.add("active"),this.loopTransition$.next(n)}),void this.cdr.detectChanges()}this.loopVideoElements.forEach(a=>{const r=a.nativeElement;r.classList.remove("active"),r.paused||r.pause()})}};wt.\u0275fac=function(n){return new(n||wt)(t.Y36(y.e),t.Y36(t.sBO),t.Y36(C.qBz))},wt.\u0275cmp=t.Xpm({type:wt,selectors:[["cw-crash-video-background"]],viewQuery:function(n,e){if(1&n&&(t.Gf(Ai,5),t.Gf(Ti,5)),2&n){let a;t.iGM(a=t.CRH())&&(e.crashVideoElement=a.first),t.iGM(a=t.CRH())&&(e.loopVideoElements=a)}},ngContentSelectors:["*"],decls:3,vars:3,consts:[[4,"ngIf"],["class","loop","preload","none","playsinline","","type","video/webm",3,"ngClass","src",4,"ngFor","ngForOf"],["preload","none","playsinline","","type","video/webm",3,"ngClass","src"],["crashVideo",""],["preload","none","playsinline","","type","video/webm",1,"loop",3,"ngClass","src"],["loops",""]],template:function(n,e){1&n&&(t.F$t(),t.YNc(0,Mi,6,7,"ng-container",0),t.ALo(1,"push"),t.Hsn(2)),2&n&&t.Q6J("ngIf",t.lcZ(1,1,e.animationsEnabled$))},directives:[d.O5,d.sg,d.mk,q.oO],pipes:[D.f],styles:["[_nghost-%COMP%]{pointer-events:none}video[_ngcontent-%COMP%]{z-index:-10;position:absolute;margin-left:50%;height:110vh}video.loop[_ngcontent-%COMP%]{transition:opacity .5s;opacity:0}video.loop.active[_ngcontent-%COMP%]{opacity:1}[_nghost-%COMP%]     cw-crash-animation{transform:translateY(3vh)}video[_ngcontent-%COMP%]{transform:translate(-50%,-33vh)}@media screen and (min-width: 960px){[_nghost-%COMP%]     cw-crash-animation{transform:translateY(15vh)}video[_ngcontent-%COMP%]{transform:translate(-50%,-20vh)}}"],changeDetection:0}),wt=(0,R.gn)([(0,o.c)(),(0,R.w6)("design:paramtypes",[y.e,t.sBO,Object])],wt);let Te=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[st.vY,pt.SharedUserModule,Ct.UserItemSharedModule,O.$M,F.Fc,J.HK]]}),i})();var Bi=s(29782),$i=s(17371),Ii=s(89979),yi=s(10215);function wi(i,n){1&i&&t._UZ(0,"cw-game-in-maintenance",2)}const Li=function(i){return["/player",i]};function Pi(i,n){if(1&i&&(t.ynx(0),t.TgZ(1,"a",17),t._UZ(2,"cw-user-avatar-badge",18),t.qZA(),t.TgZ(3,"span"),t.TgZ(4,"span",19),t._uU(5),t.qZA(),t._uU(6,"'s Crash"),t.qZA(),t.BQk()),2&i){const e=t.oxw().ngIf;t.xp6(1),t.Q6J("routerLink",t.VKq(4,Li,e.user.id)),t.xp6(1),t.Q6J("animateXpGain",!1)("user",e.user),t.xp6(3),t.Oqu(e.user.name)}}function Ei(i,n){1&i&&(t.ynx(0),t.TgZ(1,"span"),t.TgZ(2,"span",19),t._uU(3,"your own"),t.qZA(),t._uU(4," Crash"),t.qZA(),t.BQk())}function Zi(i,n){if(1&i&&(t.ynx(0),t.TgZ(1,"div",13),t._UZ(2,"cw-icon",14),t.TgZ(3,"span"),t._uU(4,"Now watching "),t.qZA(),t.ynx(5,15),t.ALo(6,"push"),t.YNc(7,Pi,7,6,"ng-container",16),t.YNc(8,Ei,5,0,"ng-container",16),t.BQk(),t.qZA(),t.BQk()),2&i){const e=n.ngIf,a=t.oxw(2);let r;t.xp6(1),t.Q6J("@watchedUserEnterAnim",void 0)("@watchedUserLeaveAnim",void 0),t.xp6(4),t.Q6J("ngSwitch",(null==(r=t.lcZ(6,5,a.user$))?null:r.id)===e.user.id),t.xp6(2),t.Q6J("ngSwitchCase",!1),t.xp6(1),t.Q6J("ngSwitchCase",!0)}}function Ri(i,n){if(1&i&&t._UZ(0,"cw-emoticon-buttons",21),2&i){const e=t.oxw(3);t.Q6J("emoticons",e.emojis)("gameId",e.emojiRoom)("micVisible",!1)}}function Ni(i,n){1&i&&(t.ynx(0),t.YNc(1,Ri,1,3,"cw-emoticon-buttons",20),t.BQk()),2&i&&(t.xp6(1),t.Q6J("cwMediaIf","gt-sm"))}const Fi=function(i,n){return{"tutorial-overlay":i,"chat-enabled":n}},Di=function(){return["h-100"]},Gi=function(){return["h-100","px-4"]},Qi=function(){return["mt-3","mb-4"]};function Hi(i,n){if(1&i&&(t.ynx(0),t.TgZ(1,"cw-crash-video-background",3),t.ALo(2,"push"),t.ALo(3,"push"),t._UZ(4,"cw-crash-animation",4),t.qZA(),t.TgZ(5,"div",5),t.TgZ(6,"section",6),t._UZ(7,"cw-crash-games",7),t.ALo(8,"push"),t.TgZ(9,"div",8),t.YNc(10,Zi,9,7,"ng-container",1),t.ALo(11,"push"),t._UZ(12,"cw-crash-potential-win",9,10),t.ALo(14,"push"),t._UZ(15,"cw-crash-form",11),t.qZA(),t.qZA(),t.TgZ(16,"section",12),t.YNc(17,Ni,2,1,"ng-container",1),t.ALo(18,"push"),t._UZ(19,"cw-crash-bet-list",11),t.qZA(),t.qZA(),t.BQk()),2&i){const e=n.ngIf,a=t.oxw();t.xp6(1),t.Q6J("ngClass.lt-md","lt-md")("ngClass",t.WLB(28,Fi,t.lcZ(2,16,a.highlightedAnimation$),t.lcZ(3,18,a.chatEnabled$))),t.xp6(3),t.Q6J("game",e)("startDate",e.startedAt),t.xp6(1),t.Q6J("ngClass.gt-sm",t.DdM(31,Di)),t.xp6(1),t.Q6J("ngClass.gt-sm",t.DdM(32,Gi)),t.xp6(1),t.Q6J("games",t.lcZ(8,20,a.games$))("ngClass.lt-md",t.DdM(33,Qi)),t.xp6(2),t.Q6J("ngClass.lt-md","lt-md"),t.xp6(1),t.Q6J("ngIf",t.lcZ(11,22,a.observedCrashBet$)),t.xp6(2),t.Q6J("game",e)("crashBet",t.lcZ(14,24,a.observedCrashBet$)),t.xp6(3),t.Q6J("game",e),t.xp6(1),t.Q6J("ngClass.lt-md","lt-md"),t.xp6(1),t.Q6J("ngIf",t.lcZ(18,26,a.user$)),t.xp6(2),t.Q6J("game",e)}}let Lt=class{constructor(n,e,a,r,g,v){this.appConfig=n,this.crashService=e,this.userService=a,this.layoutService=r,this.dialog=g,this.route=v,this.emojiRoom="CRASH_GAME",this.game$=this.crashService.game$,this.games$=this.crashService.games$,this.chatEnabled$=this.layoutService.splitPaneEnable$,this.observedCrashBet$=this.crashService.observedCrashBet$,this.maintenanceSettingKey="maintenance:crash",this.emojis=this.appConfig.crash.emojis,this.user$=this.userService.user$;const{id:B}=this.route.snapshot.params;B&&this.openGameModal(B),this.layoutService.isMediaSize("lt-md").pipe((0,o.t)(this),(0,f.x)()).subscribe(A=>{this.ltmdClass=A})}ngOnInit(){this.crashService.initializeGameQueryRef()}openGameModal(n){this.dialog.open(ne,{width:"800px"}).componentInstance.gameId=n}};Lt.\u0275fac=function(n){return new(n||Lt)(t.Y36(C.qBz),t.Y36(y.e),t.Y36(C.KDu),t.Y36(C.Pb3),t.Y36(nt.uw),t.Y36(tt.gz))},Lt.\u0275cmp=t.Xpm({type:Lt,selectors:[["cw-crash"]],hostVars:2,hostBindings:function(n,e){2&n&&t.ekj("lt-md",e.ltmdClass)},decls:3,vars:4,consts:[["gameName","Crash",4,"cwGameInMaintenance"],[4,"ngIf"],["gameName","Crash"],[3,"ngClass.lt-md","ngClass"],[3,"game","startDate"],["fxLayout","row wrap","fxLayout.lt-md","column","fxLayoutAlign","start stretch","fxLayoutGap.lt-md","1rem",3,"ngClass.gt-sm"],["fxLayout","column","fxLayoutAlign","space-between stretch","fxLayoutGap","0.75rem","fxFlex.gt-sm","75",3,"ngClass.gt-sm"],["fxFlexOrder","-1","fxFlexOrder.lt-md","1",3,"games","ngClass.lt-md"],[1,"crash-footer",3,"ngClass.lt-md"],[3,"game","crashBet"],["potentialWinComponent",""],[3,"game"],["fxFlex.gt-sm","25",1,"d-flex","flex-column",3,"ngClass.lt-md"],[1,"observed-user"],["inlineSVG","assets/icons/eye.svg"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"avatar",3,"routerLink"],[3,"animateXpGain","user"],[1,"username"],["class","mb-3 d-block text-center",3,"emoticons","gameId","micVisible",4,"cwMediaIf"],[1,"mb-3","d-block","text-center",3,"emoticons","gameId","micVisible"]],template:function(n,e){1&n&&(t.YNc(0,wi,1,0,"cw-game-in-maintenance",0),t.YNc(1,Hi,20,34,"ng-container",1),t.ALo(2,"push")),2&n&&(t.Q6J("cwGameInMaintenance",e.maintenanceSettingKey),t.xp6(1),t.Q6J("ngIf",t.lcZ(2,2,e.game$)))},directives:[Bi.d,d.O5,$i.K,wt,q.oO,d.mk,$t,$.xw,$.Wh,$.SQ,$.yH,ve,$.r7,yt,It,re,Tt.o,bt.d$,d.RF,d.n9,tt.yS,Qt.i,Ii.h,yi.H],pipes:[D.f],styles:[".no-scrollbar[_ngcontent-%COMP%]{scrollbar-width:none;-ms-overflow-style:none}.no-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}[_nghost-%COMP%]{display:block}[_nghost-%COMP%]:not(.lt-md){height:calc(100vh - 4.375rem - (var(--vertical-spacing) * 2) - var(--alert-list-height, 0px))}cw-alert[_ngcontent-%COMP%]{position:absolute;width:12rem;left:0;right:0;margin:auto;z-index:2000}cw-crash-video-background[_ngcontent-%COMP%]{position:absolute;right:0;left:0;overflow:hidden;top:4.375rem;height:calc(100vh - 4.375rem)}cw-crash-video-background.chat-enabled[_ngcontent-%COMP%]{left:-24.5%}cw-crash-video-background.lt-md[_ngcontent-%COMP%]{top:max(var(--alert-list-height) - .5rem,1rem);height:calc(100vh - 1rem - var(--vertical-spacing))}h6[_ngcontent-%COMP%]{color:#adb5bd;text-transform:uppercase;margin-bottom:.5rem}.crash-bets.lt-md[_ngcontent-%COMP%]{height:60vh;margin-bottom:2rem}cw-crash-games[_ngcontent-%COMP%]{height:1.8rem}.crash-footer.lt-md[_ngcontent-%COMP%]{margin-top:45vh}.observed-user[_ngcontent-%COMP%]{font-weight:500;color:#6c757d;font-size:16px;text-align:center;margin-bottom:20px}.observed-user[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{vertical-align:middle}.observed-user[_ngcontent-%COMP%]   cw-icon[_ngcontent-%COMP%]{color:#ffe063;margin-right:5px}.observed-user[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{display:inline-block;margin:0 5px 0 3px}.observed-user[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{color:#fff}",".no-scrollbar[_ngcontent-%COMP%]{scrollbar-width:none;-ms-overflow-style:none}.no-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}@keyframes tutorial-pointer{to{transform:translateY(2rem)}}.box[_ngcontent-%COMP%]{padding:1rem;overflow:hidden;border-radius:.5rem;background:var(--card-bg)}.tutorial-overlay[_ngcontent-%COMP%]{z-index:1100}.tutorial-button-container[_ngcontent-%COMP%]{position:relative}.tutorial-button-container[_ngcontent-%COMP%]   .tutorial-pointer[_ngcontent-%COMP%]{pointer-events:none;position:absolute;top:-5.5rem;left:0;right:0;margin:auto;animation:tutorial-pointer .5s infinite alternate;cursor:pointer}.tutorial-button-container[_ngcontent-%COMP%]   .tutorial-pointer.bottom[_ngcontent-%COMP%]{top:0}.tutorial-button-container[_ngcontent-%COMP%]   .tutorial-pointer.bottom[_ngcontent-%COMP%]   cw-icon[_ngcontent-%COMP%]{transform:rotate(90deg);margin-left:-1rem}.tutorial-button-container[_ngcontent-%COMP%]   .tutorial-pointer[_ngcontent-%COMP%]   cw-icon[_ngcontent-%COMP%]{transform:rotate(-90deg);margin-left:1rem;width:6rem;height:6rem}"],data:{animation:[(0,rt.cI)({anchor:"watchedUserEnterAnim",duration:300,translate:"25px"}),(0,rt.dH)({anchor:"watchedUserLeaveAnim",duration:300,translate:"25px"})]},changeDetection:0}),Lt=(0,R.gn)([(0,o.c)(),(0,R.w6)("design:paramtypes",[Object,y.e,C.KDu,C.Pb3,nt.uw,tt.gz])],Lt);let Ui=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[st.vY,F.Fc,Te,tt.Bz.forChild([{path:"",component:Lt,data:{title:"Crash"}},{path:":id",component:Lt,data:{title:"Crash"}}])]]}),i})()},78130:(qt,at,s)=>{s.d(at,{C:()=>F});var F=(()=>{return(O=F||(F={})).COINS_ONLY="COINS_ONLY",O.ITEMS_AND_COINS="ITEMS_AND_COINS",F;var O})()},29939:(qt,at,s)=>{s.d(at,{X:()=>m});var F=s(23600),O=s(93114),pt=s(61135),st=s(54004),Ct=s(13099),J=s(28746),R=s(76973),L=s(39478);const C=L.Ps`
  fragment UserCrashBet on CrashBet {
    amount
    createdAt
    currency
    id
    game {
      id
      roll
    }
    items {
      edges {
        node {
          id
          itemVariant {
            ...ItemVariant
          }
        }
      }
    }
    maxTick
    remainderWinAmount
    tick
    totalBet
    totalWinAmount
    userItem {
      ...UserItemSimple
    }
  }
`,E=L.Ps`
  query CrashBetTable($first: PaginationAmount, $after: String, $orderBy: [CrashBetOrderBy], $userId: ID) {
    crashBets(first: $first, after: $after, orderBy: $orderBy, userId: $userId) {
      pageInfo {
        hasNextPage
        endCursor
      }
      edges {
        node {
          ...UserCrashBet
        }
      }
    }
  }

  ${C}
  ${F.akE}
  ${F.xp8}
`;var o=s(5e3),rt=s(13302),T=s(93075),f=s(69808),h=s(88279),Q=s(4807),N=s(77093),St=s(67322),Et=s(74107),I=s(90508),ct=s(47423),K=s(79586),y=s(98833),t=s(89847),d=s(966),Ft=s(30765),$=s(35357),lt=s(20975);function M(c,u){1&c&&(o.TgZ(0,"mat-form-field"),o.TgZ(1,"mat-label"),o.SDv(2,25),o.qZA(),o._UZ(3,"input",26),o.qZA())}function Z(c,u){if(1&c){const l=o.EpF();o.ynx(0),o.TgZ(1,"form",17),o.NdJ("ngSubmit",function(){return o.CHM(l),o.oxw().filter()}),o.YNc(2,M,4,0,"mat-form-field",2),o.TgZ(3,"mat-form-field"),o.TgZ(4,"mat-label"),o.SDv(5,18),o.qZA(),o.TgZ(6,"mat-select",19),o.TgZ(7,"mat-option",20),o._uU(8,"Created"),o.qZA(),o.TgZ(9,"mat-option",21),o._uU(10,"Created DESC"),o.qZA(),o.qZA(),o.qZA(),o.TgZ(11,"button",22),o.TgZ(12,"cw-loader",23),o.SDv(13,24),o.ALo(14,"push"),o.qZA(),o.qZA(),o.qZA(),o.BQk()}if(2&c){const l=o.oxw();o.xp6(1),o.Q6J("formGroup",l.form),o.xp6(1),o.Q6J("ngIf",!l.userId),o.xp6(10),o.Q6J("loading",o.lcZ(14,3,l.dataSource.loading$))}}function At(c,u){1&c&&(o.TgZ(0,"th",27),o._uU(1,"ID"),o.qZA())}function Zt(c,u){if(1&c&&(o.TgZ(0,"td",28),o._uU(1),o.qZA()),2&c){const l=u.$implicit;o.xp6(1),o.Oqu(l.id)}}function V(c,u){1&c&&(o.TgZ(0,"th",27),o._uU(1,"When"),o.qZA())}function Dt(c,u){if(1&c&&(o.TgZ(0,"td",28),o.TgZ(1,"div"),o.TgZ(2,"div"),o._uU(3),o.ALo(4,"date"),o.qZA(),o.TgZ(5,"small"),o._uU(6),o.ALo(7,"date"),o.qZA(),o.qZA(),o.qZA()),2&c){const l=u.$implicit;o.xp6(3),o.Oqu(o.xi3(4,2,l.createdAt,"mediumDate")),o.xp6(3),o.Oqu(o.xi3(7,5,l.createdAt,"mediumTime"))}}function ft(c,u){1&c&&(o.TgZ(0,"th",27),o._uU(1,"Multiplier"),o.qZA())}function D(c,u){if(1&c&&(o.TgZ(0,"td",28),o._uU(1),o.qZA()),2&c){const l=u.$implicit;o.xp6(1),o.hij("",l.tick/100,"x")}}function Gt(c,u){1&c&&(o.TgZ(0,"th",27),o._uU(1,"Auto Exit"),o.qZA())}function q(c,u){if(1&c&&(o.TgZ(0,"td",28),o._uU(1),o.qZA()),2&c){const l=u.$implicit;o.xp6(1),o.AsE("",l.maxTick?l.maxTick/100:"-","",l.maxTick?"x":"","")}}function P(c,u){1&c&&(o.TgZ(0,"th",27),o._uU(1,"Bet"),o.qZA())}function Rt(c,u){if(1&c&&(o.TgZ(0,"div",34),o._uU(1," Total bet: "),o._UZ(2,"cw-pretty-balance",35),o.qZA()),2&c){const l=o.oxw().$implicit;o.xp6(2),o.Q6J("balance",l.amount)("currency",l.currency)}}function Tt(c,u){if(1&c&&o._UZ(0,"cw-user-item-simple",38),2&c){const l=o.oxw().$implicit;o.Q6J("userItem",l.node)}}function bt(c,u){if(1&c&&(o.ynx(0),o.YNc(1,Tt,1,1,"ng-template",null,36,o.W1O),o._UZ(3,"img",37),o.BQk()),2&c){const l=u.$implicit,S=o.MAs(2);o.xp6(3),o.Q6J("ngbTooltip",S)("src",l.node.itemVariant.iconUrl,o.LSH)}}function tt(c,u){if(1&c&&(o.TgZ(0,"div",39),o._uU(1),o.qZA()),2&c){const l=o.oxw().$implicit;o.xp6(1),o.hij("+ ",l.items.edges.length-3,"")}}function Qt(c,u){if(1&c&&o._UZ(0,"cw-pretty-balance",35),2&c){const l=o.oxw().$implicit;o.Q6J("balance",l.remainder)("currency",l.currency)}}function xt(c,u){if(1&c&&(o.TgZ(0,"td",28),o.YNc(1,Rt,3,2,"div",29),o.TgZ(2,"div",30),o.YNc(3,bt,4,2,"ng-container",31),o.YNc(4,tt,2,1,"div",32),o.YNc(5,Qt,1,2,"cw-pretty-balance",33),o.qZA(),o.qZA()),2&c){const l=u.$implicit;o.xp6(1),o.Q6J("ngIf",l.items.edges.length>0),o.xp6(2),o.Q6J("ngForOf",l.items.edges.slice(0,3)),o.xp6(1),o.Q6J("ngIf",l.items.edges.length>3),o.xp6(1),o.Q6J("ngIf",l.remainder>0)}}function Ht(c,u){1&c&&(o.TgZ(0,"th",27),o._uU(1,"Won"),o.qZA())}function k(c,u){if(1&c&&(o.TgZ(0,"div",34),o._uU(1," Total won: "),o._UZ(2,"cw-pretty-balance",35),o.qZA()),2&c){const l=o.oxw().$implicit;o.xp6(2),o.Q6J("balance",l.totalWinAmount)("currency",l.currency)}}function z(c,u){if(1&c&&o._UZ(0,"cw-user-item-simple",38),2&c){const l=o.oxw(2).$implicit;o.Q6J("userItem",l.userItem)}}function mt(c,u){if(1&c&&o.YNc(0,z,1,1,"cw-user-item-simple",42),2&c){const l=o.oxw().$implicit;o.Q6J("ngIf",l.userItem)}}function p(c,u){if(1&c&&o._UZ(0,"img",37),2&c){const l=o.oxw().$implicit,S=o.MAs(4);o.Q6J("ngbTooltip",S)("src",l.userItem.itemVariant.iconUrl,o.LSH)}}function _(c,u){if(1&c&&(o.TgZ(0,"td",28),o.YNc(1,k,3,2,"div",29),o.TgZ(2,"div",30),o.YNc(3,mt,1,1,"ng-template",null,40,o.W1O),o.YNc(5,p,1,2,"img",41),o._UZ(6,"cw-pretty-balance",35),o.qZA(),o.qZA()),2&c){const l=u.$implicit;o.xp6(1),o.Q6J("ngIf",l.userItem),o.xp6(4),o.Q6J("ngIf",l.userItem),o.xp6(1),o.Q6J("balance",l.remainderWinAmount)("currency",l.currency)}}function b(c,u){1&c&&(o.TgZ(0,"th",27),o._uU(1,"Game"),o.qZA())}const Y=function(c){return["/crash",c]};function j(c,u){if(1&c&&(o.TgZ(0,"td",28),o.TgZ(1,"a",43),o._uU(2,"View"),o.qZA(),o.qZA()),2&c){const l=u.$implicit;o.xp6(1),o.Q6J("routerLink",o.VKq(1,Y,l.game.id))}}function X(c,u){1&c&&o._UZ(0,"th",27)}function ut(c,u){if(1&c){const l=o.EpF();o.ynx(0),o.TgZ(1,"button",44),o.NdJ("click",function(){o.CHM(l);const H=o.oxw().$implicit;return o.oxw().cashout(H)}),o.ALo(2,"push"),o.TgZ(3,"cw-loader",23),o.SDv(4,45),o.ALo(5,"push"),o.qZA(),o.qZA(),o.BQk()}if(2&c){const l=o.oxw().$implicit,S=o.oxw();o.xp6(1),o.Q6J("disabled",o.lcZ(2,2,S.cashingOut$)),o.xp6(2),o.Q6J("loading",o.lcZ(5,4,S.cashingOut$)===l)}}function Mt(c,u){if(1&c&&(o.TgZ(0,"td",28),o.YNc(1,ut,6,6,"ng-container",2),o.qZA()),2&c){const l=u.$implicit,S=o.oxw();o.xp6(1),o.Q6J("ngIf",S.canCashout(l))}}function Nt(c,u){1&c&&o._UZ(0,"tr",46)}function Ut(c,u){1&c&&o._UZ(0,"tr",47)}let m=(()=>{class c extends((0,O.A)(O.t)){constructor(l,S,H){super(),this.apollo=l,this.crashService=S,this.fb=H,this.userId="",this.showFilters=!1,this.columns=["createdAt","tick","maxTick","amount","userItem","gameId","actions"],this.cashingOut$=new pt.X(null)}ngOnInit(){this.form=this.fb.group({userId:this.userId,orderBy:"ID_DESC"}),this.dataSource=new F.g3E(this.apollo,{query:E,field:"crashBets",variables:this.getVariables()}),this.data$=this.dataSource.connect().pipe((0,st.U)(l=>l.map(S=>Object.assign(Object.assign({},S),{remainder:(S.totalBet-S.items.edges.reduce((H,{node:et})=>et.itemVariant.value+H,0)).toFixed(2)})),(0,Ct.B)()))}ngOnDestroy(){this.dataSource=null,this.data$=null}filter(){this.dataSource.filter(this.getVariables())}canCashout(l){return!l.tick&&l.maxTick&&l.game.roll>l.maxTick}cashout(l){this.cashingOut$.next(l),this.crashService.exitCrash(l.id).pipe((0,J.x)(()=>this.cashingOut$.next(null))).subscribe()}getVariables(){return Object.assign({first:F.UZ},this.form.value)}}return c.\u0275fac=function(l){return new(l||c)(o.Y36(rt._M),o.Y36(R.e),o.Y36(T.qu))},c.\u0275cmp=o.Xpm({type:c,selectors:[["cw-crash-bet-table"]],inputs:{userId:"userId",showFilters:"showFilters"},features:[o.qOj],decls:34,vars:14,consts:function(){let u,l,S,H,et;return u=$localize`:␟400c30183b9b6cf5b3decf8491a929e10fa21a3b␟3951121764366844614:Order by`,l=$localize`:␟5ca707824ab93066c7d9b44e1b8bf216725c2c22␟8829497237648100098:Filter`,S=$localize`:␟83c4d4d764d2e2725ab8e919ec16ac400e1f290a␟2128755808672960949:User ID`,H=$localize`:␟eee0ffe01fd8c3f50ef18ba3e923efae0382d5f8␟8543535162971154127:VXNlcjox or 1`,et=$localize`:␟f08341df0e31049e71b2b6edf2fd1e84eac1ba8a␟7723938526066899665:Cashout`,[[1,"card"],[1,"card-body"],[4,"ngIf"],["mat-table","",1,"w-100",3,"dataSource","trackBy"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","createdAt"],["matColumnDef","tick"],["matColumnDef","maxTick"],["matColumnDef","amount"],["matColumnDef","userItem"],["matColumnDef","gameId"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"dataSource","loading","data"],["fxLayout","row wrap","fxLayoutAlign","start center","fxLayoutGap",".5rem",3,"formGroup","ngSubmit"],u,["formControlName","orderBy"],["value","ID"],["value","ID_DESC"],["type","submit","mat-flat-button","","color","primary"],[3,"loading"],l,S,["matInput","","type","text","placeholder",H,"formControlName","userId"],["mat-header-cell",""],["mat-cell",""],["class","total",4,"ngIf"],[1,"crash-items"],[4,"ngFor","ngForOf"],["class","remaining",4,"ngIf"],[3,"balance","currency",4,"ngIf"],[1,"total"],[3,"balance","currency"],["betItem",""],["loading","lazy",1,"crash-item",3,"ngbTooltip","src"],[3,"userItem"],[1,"remaining"],["userItem",""],["loading","lazy","class","crash-item",3,"ngbTooltip","src",4,"ngIf"],[3,"userItem",4,"ngIf"],["mat-flat-button","","color","primary",3,"routerLink"],["type","button","mat-flat-button","","color","primary",3,"disabled","click"],et,["mat-header-row",""],["mat-row",""]]},template:function(l,S){1&l&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.YNc(2,Z,15,5,"ng-container",2),o.TgZ(3,"table",3),o.ALo(4,"push"),o.ynx(5,4),o.YNc(6,At,2,0,"th",5),o.YNc(7,Zt,2,1,"td",6),o.BQk(),o.ynx(8,7),o.YNc(9,V,2,0,"th",5),o.YNc(10,Dt,8,8,"td",6),o.BQk(),o.ynx(11,8),o.YNc(12,ft,2,0,"th",5),o.YNc(13,D,2,1,"td",6),o.BQk(),o.ynx(14,9),o.YNc(15,Gt,2,0,"th",5),o.YNc(16,q,2,2,"td",6),o.BQk(),o.ynx(17,10),o.YNc(18,P,2,0,"th",5),o.YNc(19,xt,6,4,"td",6),o.BQk(),o.ynx(20,11),o.YNc(21,Ht,2,0,"th",5),o.YNc(22,_,7,4,"td",6),o.BQk(),o.ynx(23,12),o.YNc(24,b,2,0,"th",5),o.YNc(25,j,3,3,"td",6),o.BQk(),o.ynx(26,13),o.YNc(27,X,1,0,"th",5),o.YNc(28,Mt,2,1,"td",6),o.BQk(),o.YNc(29,Nt,1,0,"tr",14),o.YNc(30,Ut,1,0,"tr",15),o.qZA(),o._UZ(31,"cw-table-footer",16),o.ALo(32,"push"),o.ALo(33,"push"),o.qZA(),o.qZA()),2&l&&(o.xp6(2),o.Q6J("ngIf",S.showFilters),o.xp6(1),o.Q6J("dataSource",o.lcZ(4,8,S.data$))("trackBy",S.trackById),o.xp6(26),o.Q6J("matHeaderRowDef",S.columns),o.xp6(1),o.Q6J("matRowDefColumns",S.columns),o.xp6(1),o.Q6J("dataSource",S.dataSource)("loading",o.lcZ(32,10,S.dataSource.loading$))("data",o.lcZ(33,12,S.data$)))},directives:[f.O5,h.BZ,h.w1,h.fO,h.Dz,h.as,h.nj,Q.G,T._Y,T.JL,N.xw,N.Wh,N.SQ,T.sg,St.KE,St.hX,Et.gD,T.JJ,T.u,I.ey,ct.lW,K.R,y.Nt,T.Fj,h.ge,h.ev,f.sg,t.q,d._L,Ft.M,ct.zs,$.yS,h.XQ,h.Gk],pipes:[lt.f,f.uU],styles:["cw-item[_ngcontent-%COMP%], cw-user-item-simple[_ngcontent-%COMP%]{display:block;max-width:150px;width:150px}.crash-items[_ngcontent-%COMP%]{white-space:nowrap;display:inline-flex;align-items:center}.crash-items[_ngcontent-%COMP%]   cw-pretty-balance[_ngcontent-%COMP%]{display:inline-flex;padding:0 .5rem;font-size:1.1rem}.total[_ngcontent-%COMP%]{margin:5px 0}.total[_ngcontent-%COMP%]   cw-pretty-balance[_ngcontent-%COMP%]{margin-left:5px}.crash-item[_ngcontent-%COMP%]{width:4.5rem;padding:0 .5rem;border-right:1px solid rgba(0,0,0,.05)}.crash-item[_ngcontent-%COMP%]:last-child{border-right:none}"],changeDetection:0}),c})()},93678:(qt,at,s)=>{s.d(at,{q:()=>pt});var F=s(75424);const pt=s(39478).Ps`
  fragment CrashBet on CrashBet {
    amount
    currency
    desiredItemVariantId
    desiredItemVariant {
      id
      iconUrl
      name
      brand
      value
      rarity
    }
    gameId
    id
    maxTick
    mode
    tick
    totalBet
    totalWinAmount
    userItem {
      id
      consumeValue
      itemVariant {
        id
        iconUrl
        value
      }
    }
    user {
      ...UserBadge
    }
    items {
      edges {
        node {
          id
          userItem {
            id
            consumeValue
          }
          itemVariant {
            currency
            iconUrl
            id
            name
            value
          }
        }
      }
    }
  }
  ${F.userBadgeFragment}
`},76973:(qt,at,s)=>{s.d(at,{e:()=>z});var F=s(70655),O=s(23600),pt=s(62650),st=s(28617),Ct=s(23693),J=s(44987),R=s(13302),L=s(71884),E=s(61135),o=s(77579),rt=s(11365),T=s(54004),f=s(39841),h=s(63900),Q=s(34782),N=s(39300),St=s(5963),Et=s(56451),I=s(39646),ct=s(17445),K=s(70029),y=s(68675),t=s(22940),d=s(95698),Ft=s(4128),$=s(94813),lt=s(18505),M=s(95577),Z=s(65097),At=s(54968),Zt=s(75424),V=s(39478),Dt=s(93678);const ft=V.Ps`
  query CrashBetList($gameId: ID!) {
    crashBets(gameId: $gameId) {
      edges {
        node {
          ...CrashBet
        }
      }
    }
  }

  ${Dt.q}
  ${Zt.userBadgeFragment}
`,D=V.Ps`
  subscription OnCreateCrashBet {
    createCrashBet {
      crashBet {
        ...CrashBet
      }
    }
  }

  ${Dt.q}
  ${Zt.userBadgeFragment}
`,Gt=V.Ps`
  subscription OnUpdateCrashBet {
    updateCrashBet {
      crashBet {
        id
        maxTick
        tick
        totalWinAmount
        user {
          ...UserBadge
        }
        userItem {
          id
          consumeValue
          itemVariant {
            exchangeRate
            iconUrl
            id
            value
          }
          status
        }
      }
    }
  }

  ${Zt.userBadgeFragment}
`;var q=s(78130);const P=V.Ps`
  fragment FormCrashBet on CrashBet {
    amount
    currency
    desiredItemVariantId
    gameId
    id
    maxTick
    mode
    tick
    totalBet
    totalWinAmount
    userItem {
      id
      consumeValue
      itemVariant {
        color
        iconUrl
        id
        name
        externalId
        rarity
        size
        value
      }
    }
  }
`,Rt=V.Ps`
  mutation CreateCrashBet($input: CreateCrashBetInput!) {
    createCrashBet(input: $input) {
      crashBet {
        ...FormCrashBet
      }
    }
  }

  ${P}
`,Tt=V.Ps`
  mutation ExitCrash($input: ExitCrashInput!) {
    exitCrash(input: $input) {
      crashBet {
        ...FormCrashBet
      }
    }
  }

  ${P}
`,bt=V.Ps`
  fragment CrashGame on CrashGame {
    id
    createdAt
    startedAt
    scheduledAt
    status
    roll
    seed
    bets {
      edges {
        node {
          id
        }
      }
    }
  }
`,tt=V.Ps`
  query CurrentCrashGame {
    crashGames(last: 1) {
      edges {
        node {
          ...CrashGame
        }
      }
    }
  }

  ${bt}
`,Qt=V.Ps`
  query CrashGameHistory($last: PaginationAmount) {
    crashGames(last: $last) {
      edges {
        node {
          id
          roll
        }
      }
    }
  }
`,xt=V.Ps`
  subscription OnCrashCreateGame {
    createCrashGame {
      crashGame {
        ...CrashGame
      }
    }
  }

  ${bt}
`,Ht=V.Ps`
  subscription OnCrashUpdateGame {
    updateCrashGame {
      crashGame {
        id
        status
        scheduledAt
        roll
        seed
      }
    }
  }
`;var k=s(5e3);let z=class{constructor(p,_,b,Y,j,X,ut,Mt,Nt){this.apiService=p,this.apollo=_,this.exchangeRateService=b,this.localWebStorageService=Y,this.userItemService=j,this.userService=X,this.trackingService=ut,this.performanceService=Mt,this.betAmount$=new E.X(0),this.selectedObservedCrashBet$=new E.X(null),this.fakeBetAmount=50,this.timeBetweenPotentials=new E.X(0),this.potential$=new E.X([]),this.createCrash$=new o.x,this.startCrash$=new o.x,this.finishCrash$=new o.x,this.cashOut$=new o.x,this.isLoadingSelectedItemsCollection$=new E.X(!0),this.manualCrashBetQueue$=new E.X(null),this.autoCrashBetsQueue$=new O.Vnp,this.hasBetsInQueue$=this.manualCrashBetQueue$.pipe((0,rt.M)(this.autoCrashBetsQueue$.items$),(0,T.U)(([m,c])=>!!m||c.length>0)),this.queuedBetsCount$=(0,f.a)([this.manualCrashBetQueue$,this.autoCrashBetsQueue$.items$]).pipe((0,T.U)(([m,c])=>c.length+(m?1:0))),this.crashBetMode$=new E.X(q.C.ITEMS_AND_COINS),this.animationsEnabled$=new E.X(!0),this.testGame$=new E.X(null),this.gameQueryRef=this.apollo.watchQuery({query:tt}),this.gameValue$=this.apiService.lag$.pipe((0,h.w)(m=>this.gameQueryRef.valueChanges.pipe((0,T.U)(({data:c})=>{const u=c.crashGames.edges.map(l=>l.node)[0];return Object.assign(Object.assign({},u),{createdAt:this.apiService.getLaggedDateISO(u.createdAt,m),startedAt:this.apiService.getLaggedDateISO(u.startedAt,m)})}))),(0,Q.d)(1)),this.startedGame$=this.gameValue$.pipe((0,N.h)(m=>"CREATED"===m.status),(0,h.w)(m=>{const c=Object.assign(Object.assign({},m),{status:"STARTED"}),u=new Date(m.startedAt).getTime()-Date.now();return(0,St.H)(u).pipe((0,T.U)(()=>c))})),this.game$=(0,f.a)([this.testGame$,(0,Et.T)(this.gameValue$,this.startedGame$).pipe((0,L.x)((m,c)=>m.status===c.status))]).pipe((0,T.U)(([m,c])=>m||c),(0,Q.d)(1)),this.gameStartedAt$=this.game$.pipe((0,N.h)(m=>["CREATED","STARTED"].includes(m.status)),(0,h.w)(m=>(0,I.of)("STARTED"===m.status?0:new Date(m.startedAt).getTime()))),this.multiplier$=this.game$.pipe((0,N.h)(m=>["CREATED","STARTED","FINISHED"].includes(m.status)),(0,h.w)(m=>{if("CREATED"===m.status)return(0,I.of)(1);if("FINISHED"===m.status)return(0,I.of)(m.roll/100);const c=new Date(m.startedAt).getTime();return(0,ct.F)(0,K.Z).pipe((0,T.U)(()=>+this.growthFn(Date.now()-c).toFixed(3)),(0,L.x)(),(0,N.h)(u=>u>=1))}),(0,y.O)(1),(0,Q.d)(1)),this.historyAmount=11,this.gamesHistoryQueryRef=this.apollo.watchQuery({query:Qt,variables:{last:this.historyAmount}}),this.gamesHistoryApi$=this.gamesHistoryQueryRef.valueChanges.pipe((0,T.U)(({data:m})=>m.crashGames.edges.map(c=>c.node).slice(0,this.historyAmount))),this.games$=(0,Et.T)(this.gamesHistoryApi$,this.game$.pipe((0,N.h)(m=>"FINISHED"===m.status),(0,T.U)(m=>[{id:m.id,roll:m.roll}]))).pipe((0,t.R)((m,c)=>{var u,l;return[...c.filter(et=>!m.find(gt=>gt.id===et.id)),...(null===(u=m[0])||void 0===u?void 0:u.id)===(null===(l=c[0])||void 0===l?void 0:l.id)?[c[0],...m.slice(1)]:m]},[]),(0,T.U)(m=>m.filter(c=>!!c.roll)),(0,Q.d)(1)),this._betUpdate$=new o.x,this.betUpdate$=this._betUpdate$.asObservable(),this.crashBets$=this.game$.pipe((0,d.q)(1),(0,h.w)(m=>{this.initialCrashGameId=m.id;const c=this.apollo.watchQuery({query:ft,variables:{gameId:m.id}});return this.subscribeToNewBets(c),this.subscribeToBetUpdates(c),c.valueChanges.pipe((0,rt.M)(this.userService.user$),(0,T.U)(([{data:u},l])=>(u.crashBets?u.crashBets.edges:[]).map(S=>S.node).sort(this.sortBets(l))))}),(0,y.O)([]),(0,Q.d)(1)),this.userCrashBets$=this.userService.userId$.pipe((0,h.w)(m=>this.crashBets$.pipe((0,T.U)(c=>c.filter(u=>u.user.id===m)))),(0,Q.d)(1)),this.userLiveBet$=this.userCrashBets$.pipe((0,T.U)(m=>m.find(c=>!c.maxTick)||null),(0,Q.d)(1)),this.betTotal$=(0,f.a)([this.userService.currency$,this.crashBets$]).pipe((0,h.w)(([m,c])=>{if(0===c.length)return(0,I.of)([]);const u=c.map(l=>m===l.currency?(0,I.of)(l.amount):this.exchangeRateService.convert(m,l.amount,l.currency));return(0,Ft.D)(u)}),(0,T.U)(m=>m.reduce((c,u)=>c+u,0)),(0,Q.d)(1)),this.game$.pipe((0,$.j)("status"),(0,L.x)(),(0,lt.b)(()=>this.selectedObservedCrashBet$.next(null)),(0,J.t)(this)).subscribe(m=>{switch(m){case"CREATED":this.createCrash$.next();break;case"STARTED":this.startCrash$.next();break;case"FINISHED":this.finishCrash$.next()}}),this.defaultObservedCrashBet$=this.crashBets$.pipe((0,J.t)(this),(0,T.U)(m=>m?m.find(u=>!u.tick)||m[0]:void 0),(0,L.x)((m,c)=>!!(m===c||m&&c&&m.id===c.id)),(0,Q.d)(1)),this.observedCrashBet$=(0,f.a)([this.selectedObservedCrashBet$,this.defaultObservedCrashBet$]).pipe((0,T.U)(([m,c])=>m||c)),(0,Et.T)(this.userCrashBets$.pipe((0,M.z)(m=>m),(0,N.h)(m=>!!m.maxTick),(0,Z.v)(m=>m.id),(0,M.z)(m=>{return m.pipe((mt="tick",(0,L.x)((_,b)=>_[mt]===b[mt])));var mt}),(0,N.h)(m=>!!m.userItem)),this.cashOut$.pipe((0,N.h)(m=>!!m.userItem))).pipe((0,J.t)(this)).subscribe(m=>{this.trackingService.trackAffiliateCommission("crash",m.totalBet)}),this.subscribeToNewGames(),this.subscribeToGameUpdates(),(0,At.R)(Nt.document,"CW_WEB_SOCKET_RECONNECTED").pipe((0,J.t)(this)).subscribe(()=>{this.gameQueryRef.refetch()}),this.userItems$=this.userService.user$.pipe((0,N.h)(O.$KD),(0,d.q)(1),(0,T.U)(m=>m.id),(0,h.w)(m=>{const c=[st.s0.AVAILABLE],u={first:50,userId:m,name:"",orderBy:st.I_.VALUE_DESC,status:c},{dataSource$:l,selectedUserItems:S}=this.userItemService.subscribeToUserItems(u);return this.selectedItemsCollection=S,this.isLoadingSelectedItemsCollection$.next(!1),(0,f.a)([l.pipe((0,J.t)(this)),this.selectedItemsCollection.items$,this.userItemService.reservedCollection.items$]).pipe((0,J.t)(this),(0,T.U)(([H,et,gt])=>(c.length?H.filter(({status:Ot})=>c.includes(Ot)):H).filter(Ot=>!gt.some(({id:Yt})=>Yt===Ot.id)).map(Ot=>Object.assign(Object.assign({},Ot),{selected:et.some(({id:Yt})=>Yt===Ot.id)}))))}));const Ut=this.localWebStorageService.get(pt.F.CRASH_REWARD_TYPE);null!==Ut&&this.crashBetMode$.next(Ut),this.performanceService.performanceSetting$.pipe((0,J.t)(this)).subscribe(m=>{const c=localStorage.getItem(pt.F.CRASH_ANIMATIONS);null===c&&localStorage.setItem(pt.F.CRASH_ANIMATIONS,(m===Ct.j2.HIGH)+""),this.animationsEnabled$.next("true"===c)}),this.games$.pipe((0,J.t)(this)).subscribe()}initializeGameQueryRef(){this.gameQueryRef=this.apollo.watchQuery({query:tt})}createCrashBet(p){return this.apollo.mutate({mutation:Rt,variables:{input:p}})}exitCrash(p){return this.apollo.mutate({mutation:Tt,variables:{input:{betId:p}}}).pipe((0,T.U)(({data:b})=>b.exitCrash.crashBet),(0,lt.b)(b=>this.cashOut$.next(b)))}growthFn(p){return Math.pow(Math.E,6e-5*p)}growthReverseFn(p){return Math.log(p)/6e-5}clearQueues(){const p=this.manualCrashBetQueue$.value;p&&this.removeReservedUserItems(p),this.autoCrashBetsQueue$.items$.pipe((0,d.q)(1)).subscribe(_=>_.forEach(b=>this.removeReservedUserItems(b))),this.manualCrashBetQueue$.next(null),this.autoCrashBetsQueue$.clear()}removeReservedUserItems(p){p.items.edges.forEach(_=>this.userItemService.reservedCollection.removeByKey("id",_.node.id))}subscribeToNewBets(p){return p.subscribeToMore({document:D,updateQuery:(_,{subscriptionData:b})=>{if((!_||!_.crashBets)&&(_=Object.assign({},_,{crashBets:{__typename:"CrashBetConnection",edges:[]}})),!b.data)return _;const j={__typename:"CrashBetEdge",node:b.data.createCrashBet.crashBet};return Object.assign({},_,{crashBets:Object.assign(Object.assign({},_.crashBets),{edges:[j,..._.crashBets.edges]})})}})}subscribeToBetUpdates(p){return p.subscribeToMore({document:Gt,updateQuery:(_,{subscriptionData:b})=>{var Y,j,X;if(!b.data)return _;(!_||!_.crashBets)&&(_=Object.assign({},_,{crashBets:{__typename:"CrashBetConnection",edges:[]}}));const ut=null===(j=null===(Y=null==b?void 0:b.data)||void 0===Y?void 0:Y.updateCrashBet)||void 0===j?void 0:j.crashBet;if(ut){const Mt=null===(X=null==_?void 0:_.crashBets.edges.find(Nt=>ut.id===Nt.node.id))||void 0===X?void 0:X.node;Mt&&this._betUpdate$.next(Mt)}return Object.assign({},_,Object.assign({},_))}})}subscribeToNewGames(){this.gameQueryRef.subscribeToMore({document:xt,updateQuery:(p,{subscriptionData:_})=>{var b;if(!_.data)return p;(!p||!p.crashGames)&&(p=Object.assign({},p,{crashBets:{__typename:"CrashGameConnection",edges:[]}}));const Y=this.apollo.client,j={gameId:this.initialCrashGameId},X=Y.readQuery({query:ft,variables:j});Y.writeQuery({query:ft,data:Object.assign(Object.assign({},X),{crashBets:Object.assign(Object.assign({},(null==X?void 0:X.crashBets)||{}),{edges:[]})}),variables:j});const ut={__typename:"CrashGameEdge",node:_.data.createCrashGame.crashGame};return Object.assign({},p,{crashGames:Object.assign(Object.assign({},p.crashGames),{edges:[ut,...(null===(b=p.crashGames)||void 0===b?void 0:b.edges.slice(-100))||[]]})})}})}subscribeToGameUpdates(){this.gameQueryRef.subscribeToMore({document:Ht})}sortBets(p){return(_,b)=>{if(p){if(_.user.id===p.id&&b.user.id!==p.id)return-1;if(b.user.id===p.id&&_.user.id!==p.id)return 1;if(_.user.id===p.id&&b.user.id===p.id){if(!_.maxTick)return-1;if(_.maxTick>b.maxTick)return 1;if(b.maxTick>_.maxTick)return-1}}return _.totalWinAmount>b.totalWinAmount?-1:_.totalWinAmount<b.totalWinAmount?1:_.amount>b.amount?-1:_.amount<b.amount||b.user.id>_.user.id?1:-1}}};z.\u0275fac=function(p){return new(p||z)(k.LFG(O.sMs),k.LFG(R._M),k.LFG(O.UsA),k.LFG(O.Vtq),k.LFG(O.mNQ),k.LFG(O.KDu),k.LFG(O.e2C),k.LFG(Ct.BK),k.LFG(O.mix))},z.\u0275prov=k.Yz7({token:z,factory:z.\u0275fac,providedIn:"root"}),z=(0,F.gn)([(0,J.c)(),(0,F.w6)("design:paramtypes",[O.sMs,R._M,O.UsA,O.Vtq,O.mNQ,O.KDu,O.e2C,Ct.BK,O.mix])],z)}}]);