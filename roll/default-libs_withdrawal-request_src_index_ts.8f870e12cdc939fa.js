"use strict";(self.webpackChunkcsgoroll=self.webpackChunkcsgoroll||[]).push([["default-libs_withdrawal-request_src_index_ts"],{9318:(Be,x,o)=>{o.r(x),o.d(x,{WithdrawRequestTableComponent:()=>j.W,WithdrawalLimitReachedDialogComponent:()=>R,WithdrawalRequestApprovedDialogComponent:()=>S,WithdrawalRequestDeniedDialogComponent:()=>$,WithdrawalRequestModule:()=>Qe,WithdrawalRequestPendingDialogComponent:()=>K,WithdrawalRequireDepositDialogComponent:()=>_e,WithdrawalSteamOfferAvailableDialogComponent:()=>B,WithdrawalSteamOfferDialogComponent:()=>ae,WithdrawalSteamOfferUnavailableDialogComponent:()=>M});var e=o(5e3),s=o(48966),L=o(69808),c=o(47423),H=o(79586),P=o(31495),r=o(966),F=o(96298),N=o(23837),h=o(89847);function X(a,n){1&a&&(e.TgZ(0,"h4",6),e.SDv(1,7),e.qZA())}function _(a,n){1&a&&(e.TgZ(0,"h4",8),e.SDv(1,9),e.qZA())}function v(a,n){1&a&&(e.ynx(0),e.TgZ(1,"p"),e.SDv(2,10),e.qZA(),e.TgZ(3,"p"),e.tHW(4,11),e._UZ(5,"em"),e._UZ(6,"cw-icon",12),e.N_p(),e.qZA(),e.BQk())}function d(a,n){if(1&a&&(e.TgZ(0,"p",18),e._uU(1," Remaining withdrawal allowance: "),e._UZ(2,"br"),e._UZ(3,"cw-pretty-balance",19),e._UZ(4,"br"),e.TgZ(5,"small"),e._uU(6,"This allowance will be reset tomorrow"),e.qZA(),e.qZA()),2&a){const t=e.oxw(2);e.xp6(3),e.Q6J("balance",t.dailyWithdrawalRemainder.amount)}}function b(a,n){if(1&a&&(e.ynx(0),e.TgZ(1,"p"),e.SDv(2,13),e.qZA(),e.TgZ(3,"p"),e.SDv(4,14),e.qZA(),e.TgZ(5,"p"),e.tHW(6,15),e._UZ(7,"a",16),e.N_p(),e.qZA(),e.YNc(8,d,7,1,"p",17),e.BQk()),2&a){const t=e.oxw();e.xp6(8),e.Q6J("ngIf",t.dailyWithdrawalRemainder.amount>0)}}let R=(()=>{class a{constructor(t){this.dialogRef=t}close(){this.dialogRef.close()}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(s.so))},a.\u0275cmp=e.Xpm({type:a,selectors:[["cw-withdrawal-limit-reached-dialog"]],inputs:{dailyWithdrawalRemainder:"dailyWithdrawalRemainder"},decls:9,vars:4,consts:function(){let n,t,T,E,m,p,W,z;return n=$localize`:␟3f552b0539e386d778586180526ecf1aa124be74␟5433873022008615023:I understand`,t=$localize`:␟e23a67cd96964331b1a9894bf685817a02b0b5d1␟2412732981062298766:Approval Still Pending`,T=$localize`:␟5616ed7cc6d9a7d0f095b5dd8d55d55bd000a758␟3397570801752745807: Daily Withdrawal Limit Exceeded
`,E=$localize`:␟eb8386422414c192f3bcff6562e0582203aa4193␟3353803071266762122:Please wait for your pending withdrawal request to be approved.`,m=$localize`:␟1c43b676ad9c07cc18bef58d9e60cdb0d7852b1c␟8515839006877190218:${"\ufffd#5\ufffd"}:START_EMPHASISED_TEXT:A member of staff will approve your withdrawal shortly. This usually takes less than 10 minutes during peak times. ${"\ufffd/#5\ufffd"}:CLOSE_EMPHASISED_TEXT:${"\ufffd#6\ufffd"}:START_TAG_CW_ICON:${"\ufffd/#6\ufffd"}:CLOSE_TAG_CW_ICON:`,p=$localize`:␟dd66385c27d1aa56ba7da795ec6f5aceeea53068␟6483856264030628909: This withdrawal exceeds your daily withdrawal limit. You have already requested for a withdrawal limit increase today, but unfortunately your request was denied by our Anti-Fraud team. `,W=$localize`:␟973b4a308177fc66c45163564f8c82c343d7de5b␟9071346322340453581:You can submit a new request tomorrow.`,z=$localize`:␟76da657f6ab007339ad124ee8ad271d401602b41␟6661195487951320146: If you think that the decision to deny your request was a mistake, please ${"\ufffd#7\ufffd"}:START_LINK:contact support${"\ufffd/#7\ufffd"}:CLOSE_LINK:`,[["mat-dialog-title","",4,"ngIf"],["class","text-danger","mat-dialog-title","",4,"ngIf"],[4,"ngIf"],["align","end",1,"mt-3"],["type","button","cdkFocusInitial","","mat-flat-button","","color","primary",1,"mat-button-3d",3,"click"],n,["mat-dialog-title",""],t,["mat-dialog-title","",1,"text-danger"],T,E,m,["ngbTooltip","Peak times are between 10AM - 10PM GMT","inlineSVG","assets/icons/q-mark.svg",1,"info-icon"],p,W,z,["tabindex","-1","cwOpenZendesk","",1,"pointer"],["class","message-block text-center mat-h3",4,"ngIf"],[1,"message-block","text-center","mat-h3"],[3,"balance"]]},template:function(t,T){1&t&&(e.YNc(0,X,2,0,"h4",0),e.YNc(1,_,2,0,"h4",1),e.TgZ(2,"mat-dialog-content"),e.YNc(3,v,7,0,"ng-container",2),e.YNc(4,b,9,1,"ng-container",2),e.qZA(),e.TgZ(5,"mat-dialog-actions",3),e.TgZ(6,"button",4),e.NdJ("click",function(){return T.close()}),e.TgZ(7,"cw-loader"),e.SDv(8,5),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.Q6J("ngIf",T.dailyWithdrawalRemainder.hasPendingRequest),e.xp6(1),e.Q6J("ngIf",!T.dailyWithdrawalRemainder.hasPendingRequest),e.xp6(2),e.Q6J("ngIf",T.dailyWithdrawalRemainder.hasPendingRequest),e.xp6(1),e.Q6J("ngIf",!T.dailyWithdrawalRemainder.hasPendingRequest))},directives:[L.O5,s.xY,s.H8,c.lW,H.R,s.uh,P.o,r._L,F.d$,N.n,h.q],styles:[".message-block[_ngcontent-%COMP%]{padding:1rem .5rem;background:var(--item-bg);border-radius:.375rem}.info-icon[_ngcontent-%COMP%]{fill:currentColor}"],changeDetection:0}),a})(),S=(()=>{class a{constructor(t){this.dialogRef=t}close(){this.dialogRef.close()}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(s.so))},a.\u0275cmp=e.Xpm({type:a,selectors:[["cw-withdrawal-request-approved-dialog"]],inputs:{increasedAmount:"increasedAmount",dailyWithdrawalRemainder:"dailyWithdrawalRemainder"},decls:15,vars:2,consts:function(){let n,t;return n=$localize`:␟c864c2b3e0e01f5965ca1a1a6c205ff9aaaa34a3␟7347532936249255883:Withdrawal Approved`,t=$localize`:␟8a9608cf463a32afbd7338e1276015339cef6934␟5096908874639930974:Awesome!`,[["mat-dialog-title","",1,"text-success"],n,[3,"balance"],[1,"message-block","mat-h4","text-center"],["align","end",1,"mt-3"],["type","button","cdkFocusInitial","","mat-flat-button","","color","accent",1,"mat-button-3d",3,"click"],t]},template:function(t,T){1&t&&(e.TgZ(0,"h4",0),e.SDv(1,1),e.qZA(),e.TgZ(2,"mat-dialog-content"),e.TgZ(3,"p"),e._uU(4," Your request to withdraw "),e._UZ(5,"cw-pretty-balance",2),e._uU(6," was approved. You may now try again to withdraw the items you had requested. "),e.qZA(),e.TgZ(7,"p",3),e._uU(8," You can withdraw "),e._UZ(9,"cw-pretty-balance",2),e._uU(10," more today "),e.qZA(),e.qZA(),e.TgZ(11,"mat-dialog-actions",4),e.TgZ(12,"button",5),e.NdJ("click",function(){return T.close()}),e.TgZ(13,"cw-loader"),e.SDv(14,6),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(5),e.Q6J("balance",T.increasedAmount),e.xp6(4),e.Q6J("balance",T.dailyWithdrawalRemainder.amount))},directives:[s.uh,s.xY,h.q,s.H8,c.lW,H.R],styles:[".message-block[_ngcontent-%COMP%]{padding:1rem .5rem;background:var(--item-bg);border-radius:.375rem}"],changeDetection:0}),a})();function w(a,n){if(1&a&&(e.TgZ(0,"p",8),e._uU(1," You are still able to withdraw "),e._UZ(2,"cw-pretty-balance",9),e._uU(3," more today "),e.qZA()),2&a){const t=e.oxw();e.xp6(2),e.Q6J("balance",t.dailyWithdrawalRemainder.amount)}}let $=(()=>{class a{constructor(t){this.dialogRef=t}close(){this.dialogRef.close()}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(s.so))},a.\u0275cmp=e.Xpm({type:a,selectors:[["cw-withdrawal-request-denied-dialog"]],inputs:{increasedAmount:"increasedAmount",dailyWithdrawalRemainder:"dailyWithdrawalRemainder"},decls:13,vars:1,consts:function(){let n,t,T;return n=$localize`:␟f4301269dec945ffe8679ea92e609737de0c2a05␟1844406005739301512:Your withdrawal request was denied`,t=$localize`:␟cc390268b815a1c2c58e09e8ba1ca838751270ee␟5398372810909345675: If you think that the decision to deny your request was a mistake, please ${"\ufffd#7\ufffd"}:START_LINK:contact support${"\ufffd/#7\ufffd"}:CLOSE_LINK:`,T=$localize`:␟3f552b0539e386d778586180526ecf1aa124be74␟5433873022008615023:I understand`,[["mat-dialog-title","",1,"text-danger"],n,t,["tabindex","-1","cwOpenZendesk","",1,"pointer"],["class","message-block mat-h4 text-center",4,"ngIf"],["align","end",1,"mt-3"],["type","button","cdkFocusInitial","","mat-flat-button","","color","primary",1,"mat-button-3d",3,"click"],T,[1,"message-block","mat-h4","text-center"],[3,"balance"]]},template:function(t,T){1&t&&(e.TgZ(0,"h4",0),e.SDv(1,1),e.qZA(),e.TgZ(2,"mat-dialog-content"),e.TgZ(3,"p"),e._uU(4,"Your request to withdraw was denied by a member of staff. You can make a new request again tomorrow."),e.qZA(),e.TgZ(5,"p"),e.tHW(6,2),e._UZ(7,"a",3),e.N_p(),e.qZA(),e.YNc(8,w,4,1,"p",4),e.qZA(),e.TgZ(9,"mat-dialog-actions",5),e.TgZ(10,"button",6),e.NdJ("click",function(){return T.close()}),e.TgZ(11,"cw-loader"),e.SDv(12,7),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(8),e.Q6J("ngIf",T.dailyWithdrawalRemainder.amount>0))},directives:[s.uh,s.xY,N.n,L.O5,s.H8,c.lW,H.R,h.q],styles:[".message-block[_ngcontent-%COMP%]{padding:1rem .5rem;background:var(--item-bg);border-radius:.375rem}"],changeDetection:0}),a})();var D=o(23600),O=o(54004),C=o(88634),Ie=o(43343);let K=(()=>{class a{constructor(t,T){this.dialogRef=t,this.settingService=T,this.approvalRequiredAmount$=this.settingService.getSetting("trade:max_daily_tkn_withdrawals_per_user").pipe((0,O.U)(E=>+(null==E?void 0:E.value)||0))}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(s.so),e.Y36(D.RCL))},a.\u0275cmp=e.Xpm({type:a,selectors:[["cw-withdrawal-request-pending-dialog"]],inputs:{withdrawalRequest:"withdrawalRequest"},decls:21,vars:10,consts:function(){let n,t,T,E,m,p;return n=$localize`:␟a0ae1a01bcfe977b6769d6ad15e1df3d0ad122a2␟8777987012270360758:Manual Approval Required`,t=$localize`:␟1c43011b969844ef93f66004dbb4eb951030b6c9␟6386272749201560201:Your request to withdraw has been sent for manual approval.`,T=$localize`:␟6198cfeefe3f2978aa1768c655b296edd5a58181␟1297116462774212550: You may withdraw any amount without limit, however any withdrawal above ${"\ufffd#8\ufffd"}:START_TAG_CW_PRETTY_BALANCE:${"\ufffd/#8\ufffd"}:CLOSE_TAG_CW_PRETTY_BALANCE: will require a member of staff to review your transactions to ensure everything is fine. `,E=$localize`:␟d662dafa35756bf054334b658d9164b7f31451b8␟3624840649821842474: This usually happens within 10 minutes during peak times. ${"\ufffd#12\ufffd"}:START_TAG_CW_ICON:${"\ufffd/#12\ufffd"}:CLOSE_TAG_CW_ICON:`,m=$localize`:␟ab6172cd047d98b045abe0db9c6c3c5bc2056222␟3211751083102972420: If you have any questions, feel free to email us at ${"\ufffd#15\ufffd"}:START_LINK:${"\ufffd0\ufffd"}:INTERPOLATION:${"\ufffd/#15\ufffd"}:CLOSE_LINK:`,p=$localize`:␟7e6c975ebea8b5f8b120905ca7acf9f8edf59d8e␟8998179362936748717:OK`,[["mat-dialog-title","",1,"text-center"],n,[1,"text-center","message-block"],t,T,[3,"balance"],E,["ngbTooltip","Peak times are between 10AM - 10PM UTC","inlineSVG","assets/icons/q-mark.svg",1,"info-icon"],[1,"mb-0"],m,[3,"href"],["align","end"],["mat-flat-button","","color","accent",1,"mat-button-3d",3,"mat-dialog-close"],p]},template:function(t,T){1&t&&(e.TgZ(0,"h1",0),e.SDv(1,1),e.qZA(),e.TgZ(2,"mat-dialog-content"),e.TgZ(3,"div",2),e.TgZ(4,"p"),e.SDv(5,3),e.qZA(),e.TgZ(6,"p"),e.tHW(7,4),e._UZ(8,"cw-pretty-balance",5),e.ALo(9,"asyncInner"),e.N_p(),e.qZA(),e.TgZ(10,"p"),e.tHW(11,6),e._UZ(12,"cw-icon",7),e.N_p(),e.qZA(),e.TgZ(13,"p",8),e.tHW(14,9),e._UZ(15,"a",10),e.ALo(16,"appConfig"),e.ALo(17,"appConfig"),e.N_p(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(18,"mat-dialog-actions",11),e.TgZ(19,"button",12),e.SDv(20,13),e.qZA(),e.qZA()),2&t&&(e.xp6(8),e.Q6J("balance",e.lcZ(9,4,T.approvalRequiredAmount$)),e.xp6(7),e.MGl("href","mailto:",e.lcZ(16,6,"SUPPORT_EMAIL"),"",e.LSH),e.xp6(2),e.pQV(e.lcZ(17,8,"SUPPORT_EMAIL")),e.QtT(14),e.xp6(2),e.Q6J("mat-dialog-close",!0))},directives:[s.uh,s.xY,h.q,P.o,r._L,F.d$,s.H8,c.lW,s.ZT],pipes:[C.d,Ie.O],styles:[".message-block[_ngcontent-%COMP%]{padding:1rem .5rem;background:var(--item-bg);border-radius:.375rem}.info-icon[_ngcontent-%COMP%]{fill:currentColor}"],changeDetection:0}),a})();var j=o(77893),Z=o(99623),ee=o(45990);o(2690);let _e=(()=>{class a{constructor(t){this.dialogRef=t}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(s.so))},a.\u0275cmp=e.Xpm({type:a,selectors:[["cw-withdrawal-require-deposit-dialog"]],decls:9,vars:2,consts:function(){let n,t,T;return n=$localize`:␟6080b77234e92ad41bb52653b239c4c4f851317d␟1519954996184640001:Error`,t=$localize`:␟70bcbe096c46bb1307aafadd8b23b85be6c6f8d4␟2130668362961673245: You must deposit at least ${"\ufffd#5\ufffd"}:START_TAG_CW_PRETTY_BALANCE:${"\ufffd/#5\ufffd"}:CLOSE_TAG_CW_PRETTY_BALANCE: before withdrawing. `,T=$localize`:␟7e6c975ebea8b5f8b120905ca7acf9f8edf59d8e␟8998179362936748717:OK`,[["mat-dialog-title","",1,"text-uppercase","text-center"],n,[1,"text-center"],t,[3,"balance"],["align","center"],["mat-flat-button","","color","warn",1,"mat-button-3d","w-100",3,"mat-dialog-close"],T]},template:function(t,T){1&t&&(e.TgZ(0,"h1",0),e.SDv(1,1),e.qZA(),e.TgZ(2,"mat-dialog-content"),e.TgZ(3,"p",2),e.tHW(4,3),e._UZ(5,"cw-pretty-balance",4),e.N_p(),e.qZA(),e.qZA(),e.TgZ(6,"mat-dialog-actions",5),e.TgZ(7,"button",6),e.SDv(8,7),e.qZA(),e.qZA()),2&t&&(e.xp6(5),e.Q6J("balance",1),e.xp6(2),e.Q6J("mat-dialog-close",!0))},directives:[s.uh,s.xY,h.q,s.H8,c.lW,s.ZT],styles:[""],changeDetection:0}),a})();var q=o(70655),y=o(44987),te=o(28617),Y=o(46907);function Le(a,n){if(1&a&&(e.TgZ(0,"div",9),e._UZ(1,"cw-item",10),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("itemVariant",t.userItem.itemVariant)("horizontal",!0)("allowOverlay",!1)("rarityRadialBackground",!0)}}let B=class{constructor(n,t){this.dialogRef=n,this.userItemService=t}ngOnInit(){this.availableIn$=this.userItemService.getAvailableIn(this.userItem.steamOffer.availableAt)}onOk(){this.dialogRef.close()}onCancel(){return this.userItemService.update({userItemId:this.userItem.id,status:te.s0.AVAILABLE}).pipe((0,y.t)(this)).subscribe(()=>this.dialogRef.close())}};B.\u0275fac=function(n){return new(n||B)(e.Y36(s.so),e.Y36(D.mNQ))},B.\u0275cmp=e.Xpm({type:B,selectors:[["cw-withdrawal-steam-offer-available-dialog"]],inputs:{userItem:"userItem"},decls:13,vars:8,consts:function(){let a,n,t,T;return a=$localize`:␟0cf2881ca20b3e025bf6b089a6569b803aff94c9␟3201034745387532206:Item In Escrow`,n=$localize`:␟d1cbbc4abf3867c4bc90cd2eddb385b9d3307fa1␟1647483673285472869: Your item is currently in Steam’s escrow and will be available to withdraw in ${"\ufffd0\ufffd"}:INTERPOLATION: on ${"\ufffd1\ufffd"}:INTERPOLATION_1: `,t=$localize`:␟d7b35c384aecd25a516200d6921836374613dfe7␟2159130950882492111:Cancel`,T=$localize`:␟7e6c975ebea8b5f8b120905ca7acf9f8edf59d8e␟8998179362936748717:OK`,[["mat-dialog-title",""],a,["class","mb-3",4,"ngIf"],n,["align","end",1,"mb-2"],["mat-flat-button","","color","warn",3,"click"],t,["mat-flat-button","","color","accent",1,"ml-2",3,"click"],T,[1,"mb-3"],[3,"itemVariant","horizontal","allowOverlay","rarityRadialBackground"]]},template:function(n,t){1&n&&(e.TgZ(0,"h4",0),e.SDv(1,1),e.qZA(),e.TgZ(2,"mat-dialog-content"),e.YNc(3,Le,2,4,"div",2),e.TgZ(4,"p"),e.SDv(5,3),e.ALo(6,"async"),e.ALo(7,"date"),e.qZA(),e.qZA(),e.TgZ(8,"mat-dialog-actions",4),e.TgZ(9,"button",5),e.NdJ("click",function(){return t.onCancel()}),e.SDv(10,6),e.qZA(),e.TgZ(11,"button",7),e.NdJ("click",function(){return t.onOk()}),e.SDv(12,8),e.qZA(),e.qZA()),2&n&&(e.xp6(3),e.Q6J("ngIf",t.userItem.itemVariant),e.xp6(4),e.pQV(e.lcZ(6,3,t.availableIn$))(e.xi3(7,5,t.userItem.steamOffer.availableAt,"medium")),e.QtT(5))},directives:[s.uh,s.xY,L.O5,s.H8,c.lW,Y.P],pipes:[L.Ov,L.uU],styles:[""],changeDetection:0}),B=(0,q.gn)([(0,y.c)(),(0,q.w6)("design:paramtypes",[s.so,D.mNQ])],B);var de=o(95698),Re=o(48194);function ue(a,n){1&a&&e.SDv(0,8,1)}function Se(a,n){1&a&&e.SDv(0,8,2)}function De(a,n){if(1&a&&e._UZ(0,"cw-item",13),2&a){const t=e.oxw(2);e.Q6J("itemVariant",t.takeItemVariants[0])("horizontal",!0)("allowOverlay",!1)("showCopyToClipboard",!0)("rarityRadialBackground",!0)}}function ge(a,n){if(1&a&&e._UZ(0,"cw-item-bundle",14),2&a){const t=e.oxw(2);e.Q6J("itemVariants",t.takeItemVariants)("horizontal",!0)("showCopyToClipboard",!0)}}function We(a,n){if(1&a&&(e.TgZ(0,"div",6),e.TgZ(1,"p",7),e.tHW(2,8),e._UZ(3,"strong"),e.YNc(4,ue,1,0,"ng-template",9),e.YNc(5,Se,1,0,"ng-template",10),e.N_p(),e.qZA(),e.YNc(6,De,1,5,"cw-item",11),e.YNc(7,ge,1,3,"cw-item-bundle",12),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngPlural",t.takeItemVariants.length),e.xp6(5),e.Q6J("ngIf",1===t.takeItemVariants.length),e.xp6(1),e.Q6J("ngIf",t.takeItemVariants.length>1)}}function me(a,n){1&a&&e.SDv(0,15,1)}function fe(a,n){1&a&&e.SDv(0,15,2)}function Oe(a,n){if(1&a&&e._UZ(0,"cw-item",13),2&a){const t=e.oxw(2);e.Q6J("itemVariant",t.giveItemVariants[0])("horizontal",!0)("allowOverlay",!1)("showCopyToClipboard",!0)("rarityRadialBackground",!0)}}function pe(a,n){if(1&a&&e._UZ(0,"cw-item-bundle",14),2&a){const t=e.oxw(2);e.Q6J("itemVariants",t.giveItemVariants)("horizontal",!0)("showCopyToClipboard",!0)}}function Fe(a,n){if(1&a&&(e.TgZ(0,"div",6),e.TgZ(1,"p",7),e.tHW(2,15),e._UZ(3,"strong"),e.YNc(4,me,1,0,"ng-template",9),e.YNc(5,fe,1,0,"ng-template",10),e.N_p(),e.qZA(),e.YNc(6,Oe,1,5,"cw-item",11),e.YNc(7,pe,1,3,"cw-item-bundle",12),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngPlural",t.giveItemVariants.length),e.xp6(5),e.Q6J("ngIf",1===t.giveItemVariants.length),e.xp6(1),e.Q6J("ngIf",t.giveItemVariants.length>1)}}let ae=(()=>{class a{constructor(t,T,E){this.dialogRef=t,this.platformService=T,this.steamOfferService=E,this.loading=!1}set steamOffer(t){this.takeItemVariants=this.getItemVariants(t,"TAKE"),this.giveItemVariants=this.getItemVariants(t,"GIVE"),this._steamOffer=t}get steamOffer(){return this._steamOffer}get steamTradeUrl(){return this.steamOffer.steamTradeUrl}readySteamOffer(){this.loading=!0,this.platformService.window.open(this.steamOffer.steamTradeUrl,"_blank"),this.steamOfferService.readySteamOffer({steamOfferId:this.steamOffer.id}).pipe((0,de.q)(1)).subscribe(()=>{this.loading=!1,this.dialogRef.close()})}getItemVariants(t,T){return t.steamOfferItemVariants.edges.map(E=>E.node).filter(E=>E.direction===T).map(E=>E.itemVariant)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(s.so),e.Y36(D.mix),e.Y36(D.khI))},a.\u0275cmp=e.Xpm({type:a,selectors:[["cw-withdrawal-steam-offer-dialog"]],inputs:{steamOffer:"steamOffer"},decls:12,vars:3,consts:function(){let n,t,T,E;return n=$localize`:␟266c32876039b42a4234eb3d479706c471a6b554␟5967766422214860088:Trade Ready`,t=$localize`:␟58ff4edd741f9f7eab3697bac3343cb761145a54␟105343659864177601: Send Offer`,T=$localize`:␟f417d4a734e9b8f283879d71cbce791490e83869␟4959241252792819374: Please ${"\ufffd#3\ufffd"}:START_TAG_STRONG:send${"\ufffd/#3\ufffd"}:CLOSE_TAG_STRONG: us a Trade Offer on Steam containing ${"\ufffd*4:1\ufffd"}:START_TAG_NG_TEMPLATE: this item:${"[\ufffd/*4:1\ufffd|\ufffd/*5:2\ufffd]"}:CLOSE_TAG_NG_TEMPLATE:${"\ufffd*5:2\ufffd"}:START_TAG_NG_TEMPLATE_1: these items:${"[\ufffd/*4:1\ufffd|\ufffd/*5:2\ufffd]"}:CLOSE_TAG_NG_TEMPLATE:`,T=e.Zx4(T),E=$localize`:␟5bf3b070c73355f3315ee2224c3588c5ae904ba8␟3007311838283709181: Please send us a Trade Offer on Steam ${"\ufffd#3\ufffd"}:START_TAG_STRONG:requesting${"\ufffd/#3\ufffd"}:CLOSE_TAG_STRONG:${"\ufffd*4:1\ufffd"}:START_TAG_NG_TEMPLATE: this item:${"[\ufffd/*4:1\ufffd|\ufffd/*5:2\ufffd]"}:CLOSE_TAG_NG_TEMPLATE:${"\ufffd*5:2\ufffd"}:START_TAG_NG_TEMPLATE_1: these items:${"[\ufffd/*4:1\ufffd|\ufffd/*5:2\ufffd]"}:CLOSE_TAG_NG_TEMPLATE:`,E=e.Zx4(E),[["mat-dialog-title",""],n,["class","mb-3",4,"ngIf"],["mat-flat-button","","color","accent","cdkFocusInitial","",1,"w-100","mat-button-3d","mat-button-lg","mb-2",3,"disabled","click"],["inlineSVG","assets/icons/steam.svg"],t,[1,"mb-3"],[1,"mb-3",3,"ngPlural"],T,["ngPluralCase","one"],["ngPluralCase","other"],[3,"itemVariant","horizontal","allowOverlay","showCopyToClipboard","rarityRadialBackground",4,"ngIf"],[3,"itemVariants","horizontal","showCopyToClipboard",4,"ngIf"],[3,"itemVariant","horizontal","allowOverlay","showCopyToClipboard","rarityRadialBackground"],[3,"itemVariants","horizontal","showCopyToClipboard"],E]},template:function(t,T){1&t&&(e.TgZ(0,"h4",0),e.SDv(1,1),e.qZA(),e.TgZ(2,"mat-dialog-content"),e.TgZ(3,"p"),e._uU(4,"Your trade is ready!"),e.qZA(),e.YNc(5,We,8,3,"div",2),e.YNc(6,Fe,8,3,"div",2),e.qZA(),e.TgZ(7,"mat-dialog-actions"),e.TgZ(8,"a",3),e.NdJ("click",function(){return T.readySteamOffer()}),e._UZ(9,"cw-icon",4),e.TgZ(10,"span"),e.SDv(11,5),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(5),e.Q6J("ngIf",T.takeItemVariants.length>0),e.xp6(1),e.Q6J("ngIf",T.giveItemVariants.length>0),e.xp6(2),e.Q6J("disabled",T.loading))},directives:[s.uh,s.xY,L.O5,s.H8,c.zs,P.o,F.d$,L.iq,L.zE,Y.P,Re._],styles:[""],changeDetection:0}),a})();var Ce=o(97443),Me=o(63900),k=o(77093),Ne=o(1497);function he(a,n){1&a&&(e.TgZ(0,"h4",6),e.SDv(1,7),e.qZA())}function we(a,n){1&a&&(e.TgZ(0,"h4",8),e.SDv(1,9),e.qZA())}function G(a,n){if(1&a&&(e.TgZ(0,"div",10),e._UZ(1,"cw-item",11),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("itemVariant",t.userItem.itemVariant)("horizontal",!0)("allowOverlay",!1)("rarityRadialBackground",!0)}}function A(a,n){1&a&&(e.ynx(0),e.TgZ(1,"p"),e.tHW(2,20),e._UZ(3,"strong",21),e._UZ(4,"strong"),e.N_p(),e.qZA(),e.BQk())}function l(a,n){1&a&&(e.ynx(0),e.TgZ(1,"p"),e.SDv(2,22),e.qZA(),e.TgZ(3,"p"),e.tHW(4,23),e._UZ(5,"strong",21),e._UZ(6,"strong"),e.N_p(),e.qZA(),e.BQk())}const i=function(a){return[a]};function I(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"cw-user-item-sell-button",24),e.NdJ("sold",function(){return e.CHM(t),e.oxw(2).onSold()}),e.qZA()}if(2&a){const t=e.oxw(2);e.Q6J("userItemStatusAsAvailable",!0)("userItems",e.VKq(2,i,t.userItem))}}function g(a,n){if(1&a){const t=e.EpF();e.ynx(0),e.YNc(1,A,5,0,"ng-container",3),e.YNc(2,l,7,0,"ng-container",3),e.TgZ(3,"p"),e.tHW(4,12),e._UZ(5,"strong"),e.N_p(),e.qZA(),e.TgZ(6,"div",13),e.TgZ(7,"div",14),e.YNc(8,I,1,4,"cw-user-item-sell-button",15),e.ALo(9,"asyncInner"),e.TgZ(10,"p",16),e.TgZ(11,"em"),e._uU(12,"This balance can be used to instantly withdraw items listed on the P2P Section"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"div",17),e.TgZ(14,"button",18),e.NdJ("click",function(){return e.CHM(t),e.oxw().onInitiateSwap()}),e.SDv(15,19),e.qZA(),e.TgZ(16,"p",16),e.TgZ(17,"em"),e._uU(18,"Choose from a list of in-stock items, which you will receive much sooner."),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.BQk()}if(2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.isPurchasable),e.xp6(1),e.Q6J("ngIf",t.isPurchasable),e.xp6(6),e.Q6J("ngIf",e.lcZ(9,3,t.canSellItems$))}}function Q(a,n){if(1&a&&(e.TgZ(0,"div"),e._UZ(1,"cw-item",11),e.qZA()),2&a){const t=n.$implicit;e.xp6(1),e.Q6J("itemVariant",t)("horizontal",!0)("allowOverlay",!1)("rarityRadialBackground",!0)}}function V(a,n){if(1&a&&(e.TgZ(0,"p",30),e.tHW(1,31),e._UZ(2,"cw-pretty-balance",32),e.N_p(),e.qZA()),2&a){const t=n.ngIf;e.xp6(2),e.Q6J("balance",t)}}function ne(a,n){if(1&a&&(e.TgZ(0,"p",30),e.tHW(1,33),e._UZ(2,"cw-pretty-balance",32),e.N_p(),e.qZA()),2&a){const t=n.ngIf;e.xp6(2),e.Q6J("balance",t)}}function oe(a,n){if(1&a&&(e.ynx(0),e.YNc(1,V,3,1,"p",29),e.ALo(2,"asyncInner"),e.YNc(3,ne,3,1,"p",29),e.ALo(4,"asyncInner"),e.BQk()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",e.lcZ(2,2,t.amountToBeRemovedFromBalance$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(4,4,t.amountToBeAddedToBalance$))}}function ie(a,n){1&a&&(e.ynx(0),e.TgZ(1,"p",30),e.SDv(2,34),e.qZA(),e.BQk())}function Ae(a,n){if(1&a&&(e.ynx(0),e.TgZ(1,"p"),e.SDv(2,25),e.qZA(),e.YNc(3,Q,2,4,"div",26),e.ynx(4,27),e.ALo(5,"asyncInner"),e.YNc(6,oe,5,6,"ng-container",28),e.YNc(7,ie,3,0,"ng-container",28),e.BQk(),e.BQk()),2&a){const t=e.oxw();e.xp6(3),e.Q6J("ngForOf",t.itemVariantsForSwap),e.xp6(1),e.Q6J("ngSwitch",e.lcZ(5,4,t.isSwappable)),e.xp6(2),e.Q6J("ngSwitchCase",!0),e.xp6(1),e.Q6J("ngSwitchCase",!1)}}function le(a,n){if(1&a){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",36),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).onWait()}),e.SDv(2,37),e.qZA(),e.BQk()}}function Te(a,n){if(1&a){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",36),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).onWait()}),e.SDv(2,38),e.qZA(),e.BQk()}}function se(a,n){if(1&a&&(e.TgZ(0,"div",35),e.YNc(1,le,3,0,"ng-container",3),e.YNc(2,Te,3,0,"ng-container",3),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.isPurchasable),e.xp6(1),e.Q6J("ngIf",t.isPurchasable)}}function re(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"div",35),e.TgZ(1,"button",39),e.NdJ("click",function(){return e.CHM(t),e.oxw().onCancelSwap()}),e.SDv(2,40),e.qZA(),e.TgZ(3,"button",41),e.NdJ("click",function(){return e.CHM(t),e.oxw().onConfirmSwap()}),e.SDv(4,42),e.ALo(5,"asyncInner"),e.qZA(),e.qZA()}if(2&a){const t=e.oxw();e.xp6(3),e.Q6J("disabled",!e.lcZ(5,1,t.isSwappable))}}let M=class{constructor(n,t,T,E,m,p){this.userService=n,this.userItemService=t,this.exchangeService=T,this.dialog=E,this.changeRef=m,this.dialogRef=p,this.sold=new e.vpe,this.step=1,this.canSellItems$=this.userService.user$.pipe((0,O.U)(W=>!!W&&(W.roles.includes(Ce.i.OWNER)||this.userItem.userId===W.id)))}ngOnInit(){this.userService.balance$.pipe((0,y.t)(this)).subscribe(n=>this.maxValue=n+this.userItem.consumeValue)}onInitiateSwap(){const n=this.dialog.open(Z.MZ,{width:"1140px"});n.componentInstance.showAvailableAtDetails=!0,n.componentInstance.maxValue=this.maxValue,n.componentInstance.purchasableItems=!0,n.afterClosed().pipe((0,y.t)(this)).subscribe(t=>{t&&(this.itemVariantsForSwap=t,this.step=2,this.changeRef.markForCheck())})}get isSwappable(){return this.userService.balance$.pipe((0,O.U)(n=>!!this.userCanAffordSwap(n)))}get amountToBeRemovedFromBalance$(){return this.userService.balance$.pipe((0,O.U)(n=>this.userCanAffordSwap(n)&&this.userItem.consumeValue<this.totalCostOfSwap?this.totalCostOfSwap-this.userItem.consumeValue:null))}get amountToBeAddedToBalance$(){return this.userService.balance$.pipe((0,O.U)(n=>this.userCanAffordSwap(n)&&this.userItem.consumeValue>this.totalCostOfSwap?this.userItem.consumeValue-this.totalCostOfSwap:null))}userCanAffordSwap(n){return n+this.userItem.consumeValue>=this.totalCostOfSwap}get isPurchasable(){return"PURCHASABLE"===this.userItem.itemVariant.purchasable||"PURCHASABLE_WHEN_IN_STOCK"===this.userItem.itemVariant.purchasable&&(this.userItem.itemVariant.availableAssets.length>0||!(0,D.UAF)(this.userItem.itemVariant.type))}onSold(){this.sold.next(this.userItem),this.dialogRef.close()}get totalCostOfSwap(){return this.itemVariantsForSwap.map(n=>n.value).reduce((n,t)=>n+t)}onCancelSwap(){this.itemVariantsForSwap=[],this.step=1}onConfirmSwap(){return this.userItemService.update({userItemId:this.userItem.id,status:te.s0.AVAILABLE}).pipe((0,Me.w)(()=>this.exchangeService.create({userItemIds:[this.userItem.id],itemVariantIds:this.itemVariantsForSwap.map(({id:n})=>n)})),(0,y.t)(this)).subscribe(()=>this.dialogRef.close())}onWait(){this.dialogRef.close()}};M.\u0275fac=function(n){return new(n||M)(e.Y36(D.KDu),e.Y36(D.mNQ),e.Y36(Z.Oq),e.Y36(s.uw),e.Y36(e.sBO),e.Y36(s.so))},M.\u0275cmp=e.Xpm({type:M,selectors:[["cw-withdrawal-steam-offer-unavailable-dialog"]],inputs:{userItem:"userItem"},outputs:{sold:"sold"},decls:9,vars:7,consts:function(){let a,n,t,T,E,m,p,W,z,U,Ue,He,be,$e,Ge;return a=$localize`:␟f778417d691bb2cb2f9e3f68bd721d34eec31610␟5209759698330192739:Item Requested`,n=$localize`:␟c275ef61be7ba101d4b7d71afa9890d0218392b6␟8383383593023646666:Item Not In Stock`,t=$localize`:␟8fa74fcde018a49ed5ffb6fe5810d0d8ea0e9ec5␟1138595912840172193: However, by selling or swapping your item, you can choose other items which you will receive ${"\ufffd#5\ufffd"}:START_TAG_STRONG:much sooner${"\ufffd/#5\ufffd"}:CLOSE_TAG_STRONG:. `,T=$localize`:␟c5399280786f6960371ba12b196d7833ccc97ab0␟7630311720051337024: Swap this item `,E=$localize`:␟3474acd893e71a93b802cd3a818459bf925adb48␟547471574056745598:${"\ufffd#3\ufffd"}:START_TAG_STRONG:Reminder:${"[\ufffd/#3\ufffd|\ufffd/#4\ufffd]"}:CLOSE_TAG_STRONG: It may take a ${"\ufffd#4\ufffd"}:START_TAG_STRONG_1:very long time${"[\ufffd/#3\ufffd|\ufffd/#4\ufffd]"}:CLOSE_TAG_STRONG: (at least 8 days) for you to receive this item. We are not currently refilling our stock for this particular item, the only way your request will be fulfilled is if another user deposits this item to us. `,E=e.Zx4(E),m=$localize`:␟cdb322415bfb3555d8b250be486dafddb8784075␟3712174605191409699:We have received your request and it is being processed.`,p=$localize`:␟caa83478d1991421e1c0b24ee10101c0e8d73181␟8697197981245846548:${"\ufffd#5\ufffd"}:START_TAG_STRONG:Reminder:${"[\ufffd/#5\ufffd|\ufffd/#6\ufffd]"}:CLOSE_TAG_STRONG: It will take ${"\ufffd#6\ufffd"}:START_TAG_STRONG_1:between 8-30 days${"[\ufffd/#5\ufffd|\ufffd/#6\ufffd]"}:CLOSE_TAG_STRONG: for you to receive it, since the item is not currently in stock, `,p=e.Zx4(p),W=$localize`:␟6a9e02f681d6c51dfaa379e487bbf54006de83e3␟8400708580667682659:You are about to make a swap for the item below.`,z=$localize`:␟3706f5befc8ba9024d815c1fb1b92cbdbe0e68ac␟2458523646363057294:${"\ufffd#2\ufffd"}:START_TAG_CW_PRETTY_BALANCE:${"\ufffd/#2\ufffd"}:CLOSE_TAG_CW_PRETTY_BALANCE: will be taken from your balance when making this swap. `,U=$localize`:␟11285006d4438d9028fffe055a13097eb72516a3␟2008596954032529931:${"\ufffd#2\ufffd"}:START_TAG_CW_PRETTY_BALANCE:${"\ufffd/#2\ufffd"}:CLOSE_TAG_CW_PRETTY_BALANCE: will be added to your balance when making this swap. `,Ue=$localize`:␟bbe88f109ad0b356e99c0dcecf5c949478c7cca3␟5256225179508728567:You can not complete this swap because you do not have enough balance.`,He=$localize`:␟a4947e64dda46552e03f7984cc1161659f05a5fc␟1355949814453769770:I'll wait 8+ days`,be=$localize`:␟2c747c507b8711cdc5cb907715dff662e2a1a775␟7384312085658389296:I'll wait 8-30 days`,$e=$localize`:␟fceeb8ea8b355b26cc087ea968f1583b2819a637␟7381817875028728077:No thanks`,Ge=$localize`:␟b88a0e244eb914477f234a4543e87e3cadac0463␟2600058979848883284: Make this swap `,[["mat-dialog-title","",4,"ngIf"],["class","text-danger","mat-dialog-title","",4,"ngIf"],["class","mb-3",4,"ngIf"],[4,"ngIf"],["align","end"],["class","mt-1 mb-2",4,"ngIf"],["mat-dialog-title",""],a,["mat-dialog-title","",1,"text-danger"],n,[1,"mb-3"],[3,"itemVariant","horizontal","allowOverlay","rarityRadialBackground"],t,["fxLayout","column","fxLayoutAlign","center start",1,"mb-3"],["fxLayout","row","fxLayoutAlign","start center",1,"mb-3"],["fxFlex","1 0 160px","class","mr-3","cw-size","sm",3,"userItemStatusAsAvailable","userItems","sold",4,"ngIf"],[1,"mb-0"],["fxLayout","row","fxLayoutAlign","start center"],["fxFlex","1 0 160px","mat-flat-button","","color","accent",1,"mr-3",3,"click"],T,E,[1,"text-danger"],m,p,["fxFlex","1 0 160px","cw-size","sm",1,"mr-3",3,"userItemStatusAsAvailable","userItems","sold"],W,[4,"ngFor","ngForOf"],[3,"ngSwitch"],[4,"ngSwitchCase"],["class","mt-2",4,"ngIf"],[1,"mt-2"],z,[3,"balance"],U,Ue,[1,"mt-1","mb-2"],["mat-flat-button","","color","primary",3,"click"],He,be,["mat-flat-button","","color","warn",3,"click"],$e,["mat-flat-button","","color","accent",1,"ml-2",3,"disabled","click"],Ge]},template:function(n,t){1&n&&(e.YNc(0,he,2,0,"h4",0),e.YNc(1,we,2,0,"h4",1),e.TgZ(2,"mat-dialog-content"),e.YNc(3,G,2,4,"div",2),e.YNc(4,g,19,5,"ng-container",3),e.YNc(5,Ae,8,6,"ng-container",3),e.qZA(),e.TgZ(6,"mat-dialog-actions",4),e.YNc(7,se,3,2,"div",5),e.YNc(8,re,6,3,"div",5),e.qZA()),2&n&&(e.Q6J("ngIf",t.isPurchasable),e.xp6(1),e.Q6J("ngIf",!t.isPurchasable),e.xp6(2),e.Q6J("ngIf",t.userItem.itemVariant),e.xp6(1),e.Q6J("ngIf",1===t.step),e.xp6(1),e.Q6J("ngIf",2===t.step),e.xp6(2),e.Q6J("ngIf",1===t.step),e.xp6(1),e.Q6J("ngIf",2===t.step))},directives:[L.O5,s.xY,s.H8,s.uh,Y.P,k.xw,k.Wh,c.lW,k.yH,Ne.m,L.sg,L.RF,L.n9,h.q],pipes:[C.d],styles:[""],changeDetection:0}),M=(0,q.gn)([(0,y.c)(),(0,q.w6)("design:paramtypes",[D.KDu,D.mNQ,Z.Oq,s.uw,e.sBO,s.so])],M);var J=o(88279);const Ee=[ee.vY,Z.$M,J.p0];let Qe=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[Ee,ee.vY,Z.$M,J.p0]}),a})()},2690:(Be,x,o)=>{o.d(x,{I:()=>d});var e=o(70655),s=o(93075),L=o(48966),c=o(23600),H=o(44987),P=o(28746),r=o(5e3),F=o(77093),N=o(67322),h=o(98833),X=o(30446),_=o(47423),v=o(79586);let d=class{constructor(R,S,w,$){this.fb=R,this.dialogRef=S,this.withdrawalService=w,this.validators=$}ngOnInit(){this.form=this.fb.group({amount:["",this.validators.withdrawalRequest]})}approve(){this.form.valid&&this.withdrawalService.updateWithdrawalRequest(this.wId,this.form.value.amount,"APPROVED").pipe((0,P.x)(()=>{this.close()}),(0,H.t)(this)).subscribe()}close(){this.dialogRef.close()}};d.\u0275fac=function(R){return new(R||d)(r.Y36(s.qu),r.Y36(L.so),r.Y36(c.tQx),r.Y36(c.oPl))},d.\u0275cmp=r.Xpm({type:d,selectors:[["cw-withdrawal-custom-request-dialog"]],inputs:{wId:"wId"},decls:20,vars:3,consts:function(){let b,R,S,w,$,D,O;return b=$localize`:␟2ef101bb9d4818ef2ccd0b1658106059e7530d4f␟6045921096536367981:Custom Approval Amount`,R=$localize`:␟2cf42f665858dd9fcea52525a9f87e144e2ce12f␟2260368086828630367:Input custom balance:`,S=$localize`:␟dfc2fb58e2a04ed944a4bd80f0a2087775134068␟6533918067030990396:Amount`,w=$localize`:␟d1f32d3237f67965c406cf57e3a454a75a659fab␟1091035500963040202:enter withdrawal amount`,$=$localize`:␟3f61e0de80b155e8857a1fa032cbafad310c85f1␟8539713802104294834: * If you think the requested amount is too much or too little, you can approve a custom value instead. `,D=$localize`:␟d7b35c384aecd25a516200d6921836374613dfe7␟2159130950882492111:Cancel`,O=$localize`:␟73a83c0db2dbf61230eba62e1d22a6da3d190c4c␟3821661153451769620:Approve`,[["mat-dialog-title",""],b,R,["fxLayout","row wrap","fxLayoutAlign","start center","fxLayoutGap",".5rem",3,"formGroup"],[1,"w-100"],S,["matInput","","type","number","placeholder",w,"formControlName","amount"],["align","start"],$,[3,"control","show"],["align","end",1,"mt-3"],["type","button","mat-flat-button","","color","warn",1,"mat-button-lg",3,"click"],D,["type","button","cdkFocusInitial","","mat-flat-button","","color","accent",1,"mat-button-3d","mat-button-lg",3,"click"],O]},template:function(R,S){1&R&&(r.TgZ(0,"h4",0),r.SDv(1,1),r.qZA(),r.TgZ(2,"mat-dialog-content"),r.TgZ(3,"h5"),r.SDv(4,2),r.qZA(),r.TgZ(5,"form",3),r.TgZ(6,"mat-form-field",4),r.TgZ(7,"mat-label"),r.SDv(8,5),r.qZA(),r._UZ(9,"input",6),r.TgZ(10,"mat-hint",7),r.SDv(11,8),r.qZA(),r.TgZ(12,"mat-error"),r._UZ(13,"cw-form-errors",9),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(14,"mat-dialog-actions",10),r.TgZ(15,"button",11),r.NdJ("click",function(){return S.close()}),r.SDv(16,12),r.qZA(),r.TgZ(17,"button",13),r.NdJ("click",function(){return S.approve()}),r.TgZ(18,"cw-loader"),r.SDv(19,14),r.qZA(),r.qZA(),r.qZA()),2&R&&(r.xp6(5),r.Q6J("formGroup",S.form),r.xp6(8),r.Q6J("control",S.form.controls.amount)("show",S.form.get("amount").invalid))},directives:[L.uh,L.xY,s._Y,s.JL,F.xw,F.Wh,F.SQ,s.sg,N.KE,N.hX,h.Nt,s.wV,s.Fj,s.JJ,s.u,N.bx,N.TO,X.A,L.H8,_.lW,v.R],styles:[""],changeDetection:0}),d=(0,e.gn)([(0,H.c)(),(0,e.w6)("design:paramtypes",[s.qu,L.so,c.tQx,c.oPl])],d)},77893:(Be,x,o)=>{o.d(x,{W:()=>G});var e=o(70655),s=o(93075),L=o(48966),c=o(23600),H=o(93114),P=o(97443),r=o(45990),F=o(44987),N=o(13302),h=o(95698),X=o(2690),_=o(5e3),v=o(69808),d=o(88279),b=o(4807),R=o(77093),S=o(67322),w=o(74107),$=o(90508),D=o(98833),O=o(86856),C=o(31495),Ie=o(96298),K=o(47423),j=o(79586),Z=o(6908),ee=o(78644),ce=o(88634),_e=o(20975);function q(A,l){1&A&&(_.TgZ(0,"mat-form-field"),_.TgZ(1,"mat-label"),_.SDv(2,35),_.qZA(),_._UZ(3,"input",36),_.qZA())}function y(A,l){if(1&A){const i=_.EpF();_.ynx(0),_.TgZ(1,"form",16),_.NdJ("ngSubmit",function(){return _.CHM(i),_.oxw().filter()}),_.YNc(2,q,4,0,"mat-form-field",2),_.TgZ(3,"mat-form-field"),_.TgZ(4,"mat-label"),_.SDv(5,17),_.qZA(),_.TgZ(6,"mat-select",18),_.TgZ(7,"mat-option",19),_._uU(8,"ALL"),_.qZA(),_.TgZ(9,"mat-option",20),_._uU(10,"Pending"),_.qZA(),_.TgZ(11,"mat-option",21),_._uU(12,"Approved"),_.qZA(),_.TgZ(13,"mat-option",22),_._uU(14,"Denied"),_.qZA(),_.qZA(),_.qZA(),_.TgZ(15,"mat-form-field"),_.TgZ(16,"mat-label"),_.SDv(17,23),_.qZA(),_._UZ(18,"input",24),_.TgZ(19,"mat-datepicker-toggle",25),_._UZ(20,"cw-icon",26),_.qZA(),_._UZ(21,"mat-datepicker",null,27),_.qZA(),_.TgZ(23,"mat-form-field"),_.TgZ(24,"mat-label"),_.SDv(25,28),_.qZA(),_.TgZ(26,"mat-select",29),_.TgZ(27,"mat-option",30),_._uU(28,"Oldest first"),_.qZA(),_.TgZ(29,"mat-option",31),_._uU(30,"Newest first"),_.qZA(),_.TgZ(31,"mat-option",30),_._uU(32,"By Id"),_.qZA(),_.qZA(),_.qZA(),_.TgZ(33,"button",32),_.ALo(34,"push"),_.TgZ(35,"cw-loader",33),_.SDv(36,34),_.ALo(37,"push"),_.qZA(),_.qZA(),_.qZA(),_.BQk()}if(2&A){const i=_.MAs(22),I=_.oxw();_.xp6(1),_.Q6J("formGroup",I.form),_.xp6(1),_.Q6J("ngIf",!I.userId),_.xp6(5),_.Q6J("value",null),_.xp6(11),_.Q6J("matDatepicker",i)("max",I.today),_.xp6(1),_.Q6J("for",i),_.xp6(14),_.Q6J("disabled",_.lcZ(34,8,I.dataSource.loading$)),_.xp6(2),_.Q6J("loading",_.lcZ(37,10,I.dataSource.loading$))}}function te(A,l){1&A&&(_.TgZ(0,"th",37),_.SDv(1,38),_.qZA())}function Y(A,l){if(1&A&&(_.TgZ(0,"td",39),_._UZ(1,"cw-username-row-view",40),_.qZA()),2&A){const i=l.$implicit;_.xp6(1),_.Q6J("user",i.user)("link",!0)}}function Le(A,l){1&A&&(_.TgZ(0,"th",37),_.SDv(1,41),_.qZA())}function B(A,l){if(1&A&&(_.TgZ(0,"td",39),_._uU(1),_.qZA()),2&A){const i=l.$implicit;_.xp6(1),_.Oqu(i.amount)}}function de(A,l){1&A&&(_.TgZ(0,"th",37),_.SDv(1,42),_.qZA())}function Re(A,l){if(1&A&&(_.TgZ(0,"span"),_.SDv(1,44),_.ALo(2,"lowercase"),_.ALo(3,"titlecase"),_.qZA()),2&A){const i=_.oxw().$implicit;_.Tol(_.lcZ(2,4,i.status)),_.xp6(3),_.pQV(_.lcZ(3,6,i.status)),_.QtT(1)}}function ue(A,l){if(1&A&&(_.TgZ(0,"span"),_.SDv(1,45),_.ALo(2,"lowercase"),_.qZA()),2&A){const i=_.oxw().$implicit;_.Tol(_.lcZ(2,3,i.status))}}function Se(A,l){if(1&A){const i=_.EpF();_.ynx(0),_.TgZ(1,"button",46),_.NdJ("click",function(){_.CHM(i);const g=_.oxw().$implicit;return _.oxw().approve(g.id,g.amount)}),_.SDv(2,47),_.qZA(),_.TgZ(3,"button",46),_.NdJ("click",function(){_.CHM(i);const g=_.oxw().$implicit;return _.oxw().openCustomAmountDialog(g.id)}),_.SDv(4,48),_.qZA(),_.TgZ(5,"button",49),_.NdJ("click",function(){_.CHM(i);const g=_.oxw().$implicit;return _.oxw().openDenyModal(g.id,g.amount)}),_.SDv(6,50),_.qZA(),_.BQk()}}function De(A,l){if(1&A&&(_.TgZ(0,"td",39),_.YNc(1,Re,4,8,"span",43),_.YNc(2,ue,3,5,"span",43),_.YNc(3,Se,7,0,"ng-container",2),_.qZA()),2&A){const i=l.$implicit,I=_.oxw();_.xp6(1),_.Q6J("ngIf","PENDING"!=i.status),_.xp6(1),_.Q6J("ngIf","PENDING"==i.status&&!I.isListedToday(i.createdAt)),_.xp6(1),_.Q6J("ngIf","PENDING"==i.status&&I.isListedToday(i.createdAt))}}function ge(A,l){1&A&&(_.TgZ(0,"th",37),_.SDv(1,51),_.qZA())}function We(A,l){if(1&A&&(_.TgZ(0,"span",55),_._uU(1),_.qZA()),2&A){const i=_.oxw().$implicit;_.xp6(1),_.AsE(" \u2713 (",i.approvedHistory.count,") ",i.approvedHistory.sum," ")}}function me(A,l){if(1&A&&(_.TgZ(0,"span",56),_._uU(1),_.qZA()),2&A){const i=_.oxw().$implicit;_.xp6(1),_.AsE(" \u2713 (",i.approvedHistory.count,") ",i.approvedHistory.sum," ")}}function fe(A,l){1&A&&(_.TgZ(0,"span",57),_._uU(1," \u2717 "),_.qZA())}function Oe(A,l){if(1&A&&(_.TgZ(0,"td",39),_.TgZ(1,"div"),_.TgZ(2,"div"),_._uU(3),_.qZA(),_.TgZ(4,"small"),_.YNc(5,We,2,2,"span",52),_.YNc(6,me,2,2,"span",53),_.YNc(7,fe,2,0,"span",54),_.qZA(),_.qZA(),_.qZA()),2&A){const i=l.$implicit;_.xp6(3),_.Oqu(i.approvedHistory.sum),_.xp6(2),_.Q6J("ngIf",(i.approvedHistory.count||0)>5),_.xp6(1),_.Q6J("ngIf",(i.approvedHistory.count||0)>0&&i.approvedHistory.count<=5),_.xp6(1),_.Q6J("ngIf",0==(i.approvedHistory.count||0))}}function pe(A,l){1&A&&(_.TgZ(0,"th",37),_.SDv(1,58),_.qZA())}function Fe(A,l){if(1&A&&(_.TgZ(0,"td",39),_.TgZ(1,"div"),_.TgZ(2,"div"),_._uU(3),_.ALo(4,"date"),_.qZA(),_.TgZ(5,"small"),_._uU(6),_.ALo(7,"date"),_.qZA(),_.qZA(),_.qZA()),2&A){const i=l.$implicit;_.xp6(3),_.Oqu(_.xi3(4,2,i.createdAt,"mediumDate")),_.xp6(3),_.Oqu(_.xi3(7,5,i.createdAt,"mediumTime"))}}function ae(A,l){1&A&&(_.TgZ(0,"th",37),_.SDv(1,59),_.qZA())}function Ce(A,l){if(1&A&&(_.ynx(0),_._UZ(1,"cw-username-row-view",40),_.BQk()),2&A){const i=_.oxw().$implicit;_.xp6(1),_.Q6J("user",i.processor)("link",!0)}}function Me(A,l){if(1&A&&(_.TgZ(0,"td",39),_.YNc(1,Ce,2,2,"ng-container",2),_.qZA()),2&A){const i=l.$implicit;_.xp6(1),_.Q6J("ngIf",i.processor)}}function k(A,l){1&A&&(_.TgZ(0,"th",37),_.SDv(1,60),_.qZA())}function Ne(A,l){if(1&A&&(_.TgZ(0,"td",39),_._UZ(1,"cw-id-field",61),_.qZA()),2&A){const i=l.$implicit;_.xp6(1),_.Q6J("id",i.id)}}function he(A,l){1&A&&_._UZ(0,"tr",62)}function we(A,l){1&A&&_._UZ(0,"tr",63)}let G=class extends((0,H.A)(H.t)){constructor(l,i,I,g,Q,V){super(),this.apollo=l,this.fb=i,this.withdrawalService=I,this.dialog=g,this.userService=Q,this.confirmService=V,this.showFilters=!1,this.today=new Date,this.columns=["user","amount","status","processor","createdAt","id"]}ngOnInit(){this.userService.user$.pipe((0,h.q)(1)).subscribe(({roles:i})=>{i.includes(P.i.SUPPORT_PLUS)&&(this.columns=["user","amount","status","history","processor","createdAt","id"])});const l=new Date;l.setHours(0,0,0,0),this.form=this.fb.group({first:c.UZ,userId:"",createdFrom:l,orderBy:"ID",status:null}),this.dataSource=new c.g3E(this.apollo,{field:"withdrawalRequests",query:c.d6k,variables:this.getVariables()}),this.data$=this.dataSource.connect(),this.subscribeToMore()}filter(){this.dataSource.filter(this.getVariables())}approve(l,i){this.updateWithdrawalRequest(l,i,"APPROVED")}deny(l,i){this.updateWithdrawalRequest(l,i,"DENIED")}openCustomAmountDialog(l){const i=this.dialog.open(X.I,{width:"500px"});i.componentInstance.wId=l,i.afterClosed()}updateWithdrawalRequest(l,i,I){this.withdrawalService.updateWithdrawalRequest(l,i,I).pipe((0,F.t)(this)).subscribe(()=>this.filter())}getVariables(){const l=this.form.getRawValue();return{first:l.first,orderBy:l.orderBy,createdFrom:l.createdFrom,status:l.status,userId:l.userId}}subscribeToMore(){this.dataSource.queryRef.subscribeToMore({document:c.nCp,updateQuery:(l,{subscriptionData:i})=>{if(!i.data||!l.withdrawalRequests)return l;const I={__typename:"WithdrawalRequestEdge",node:i.data.createWithdrawalRequest.withdrawalRequest};return Object.assign({},l,{withdrawalRequests:Object.assign(Object.assign({},l.withdrawalRequests),{edges:[I,...l.withdrawalRequests.edges.slice(-100)]})})}})}isListedToday(l){return l.split("T")[0]===(new Date).toISOString().split("T")[0]}openDenyModal(l,i){this.confirmService.confirm({title:"Deny Request?"}).pipe((0,F.t)(this)).subscribe(I=>{I&&this.deny(l,i)})}};G.\u0275fac=function(l){return new(l||G)(_.Y36(N._M),_.Y36(s.qu),_.Y36(c.tQx),_.Y36(L.uw),_.Y36(c.KDu),_.Y36(r.zM))},G.\u0275cmp=_.Xpm({type:G,selectors:[["cw-withdrawal-request-table"]],inputs:{userId:"userId",showFilters:"showFilters"},features:[_.qOj],decls:31,vars:14,consts:function(){let A,l,i,I,g,Q,V,ne,oe,ie,Ae,le,Te,se,re,M,J,Ee;return A=$localize`:␟81b97b8ea996ad1e4f9fca8415021850214884b1␟5611592591303869712:Status`,l=$localize`:␟b437a956151bddbc529343ef384a507527d7bdcf␟7120781274846803553:Date Created`,i=$localize`:␟400c30183b9b6cf5b3decf8491a929e10fa21a3b␟3951121764366844614:Order by`,I=$localize`:␟5ca707824ab93066c7d9b44e1b8bf216725c2c22␟8829497237648100098:Filter`,g=$localize`:␟83c4d4d764d2e2725ab8e919ec16ac400e1f290a␟2128755808672960949:User ID`,Q=$localize`:␟eee0ffe01fd8c3f50ef18ba3e923efae0382d5f8␟8543535162971154127:VXNlcjox or 1`,V=$localize`:␟e08a77594f3d89311cdf6da5090044270909c194␟2392488717875840729:User`,ne=$localize`:␟dfc2fb58e2a04ed944a4bd80f0a2087775134068␟6533918067030990396:Amount`,oe=$localize`:␟81b97b8ea996ad1e4f9fca8415021850214884b1␟5611592591303869712:Status`,ie=$localize`:␟81dd73233a7f9556fc8071d5dd66273020f24f31␟8741659780493331443:${"\ufffd0\ufffd"}:INTERPOLATION:`,Ae=$localize`:␟ffde7468d7b5cad6990095ed68ddee3d67cd02f8␟464749780222721589:Expired`,le=$localize`:␟14820f1725bdf46c322a9994142ac32174ff8a57␟5207506083887334262: Approve `,Te=$localize`:␟3579ba78620d2e3ce95a95861edb05ac807b86da␟2440603070728873400: Approve Custom Amount `,se=$localize`:␟68918a99ca207d3f0748da8082995883be54fb91␟2606504085855050004: Deny `,re=$localize`:␟efac3af0b32e953279c25b6519cae256811e0fe8␟186236568870281953:History`,M=$localize`:␟1b051734b0ee9021991c91b3ed4e81c244322462␟4207916966377787111:Created`,J=$localize`:␟abe42fc943e4839ed823272708ba91d90d68ae0a␟4101293580168054630:Processor`,Ee=$localize`:␟45cc8ca94b5a50842a9a8ef804a5ab089a38ae5c␟8040881171107393560:ID`,[[1,"card"],[1,"card-body"],[4,"ngIf"],["mat-table","",1,"w-100",3,"dataSource","trackBy"],["matColumnDef","user"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","amount"],["matColumnDef","status"],["matColumnDef","history"],["matColumnDef","createdAt"],["matColumnDef","processor"],["matColumnDef","id"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"dataSource","loading","data"],["fxLayout","row wrap","fxLayoutAlign","start center","fxLayoutGap",".5rem",3,"formGroup","ngSubmit"],A,["formControlName","status"],[3,"value"],["value","PENDING"],["value","APPROVED"],["value","DENIED"],l,["matInput","","formControlName","createdFrom",3,"matDatepicker","max"],["matSuffix","",3,"for"],["inlineSVG","assets/icons/calendar.svg"],["createdFrom",""],i,["formControlName","orderBy"],["value","ID"],["value","ID_DESC"],["type","submit","mat-flat-button","","color","primary",3,"disabled"],[3,"loading"],I,g,["matInput","","type","text","placeholder",Q,"formControlName","userId"],["mat-header-cell",""],V,["mat-cell",""],[3,"user","link"],ne,oe,[3,"class",4,"ngIf"],ie,Ae,["type","button","mat-flat-button","","color","accent",1,"mr-1",3,"click"],le,Te,["type","button","mat-flat-button","","color","warn",1,"mr-1",3,"click"],se,re,["class","text-green",4,"ngIf"],["class","text-yellow",4,"ngIf"],["class","text-red",4,"ngIf"],[1,"text-green"],[1,"text-yellow"],[1,"text-red"],M,J,Ee,[3,"id"],["mat-header-row",""],["mat-row",""]]},template:function(l,i){1&l&&(_.TgZ(0,"div",0),_.TgZ(1,"div",1),_.YNc(2,y,38,12,"ng-container",2),_.TgZ(3,"table",3),_.ALo(4,"asyncInner"),_.ynx(5,4),_.YNc(6,te,2,0,"th",5),_.YNc(7,Y,2,2,"td",6),_.BQk(),_.ynx(8,7),_.YNc(9,Le,2,0,"th",5),_.YNc(10,B,2,1,"td",6),_.BQk(),_.ynx(11,8),_.YNc(12,de,2,0,"th",5),_.YNc(13,De,4,3,"td",6),_.BQk(),_.ynx(14,9),_.YNc(15,ge,2,0,"th",5),_.YNc(16,Oe,8,4,"td",6),_.BQk(),_.ynx(17,10),_.YNc(18,pe,2,0,"th",5),_.YNc(19,Fe,8,8,"td",6),_.BQk(),_.ynx(20,11),_.YNc(21,ae,2,0,"th",5),_.YNc(22,Me,2,1,"td",6),_.BQk(),_.ynx(23,12),_.YNc(24,k,2,0,"th",5),_.YNc(25,Ne,2,1,"td",6),_.BQk(),_.YNc(26,he,1,0,"tr",13),_.YNc(27,we,1,0,"tr",14),_.qZA(),_._UZ(28,"cw-table-footer",15),_.ALo(29,"push"),_.ALo(30,"asyncInner"),_.qZA(),_.qZA()),2&l&&(_.xp6(2),_.Q6J("ngIf",i.showFilters),_.xp6(1),_.Q6J("dataSource",_.lcZ(4,8,i.data$))("trackBy",i.trackById),_.xp6(23),_.Q6J("matHeaderRowDef",i.columns),_.xp6(1),_.Q6J("matRowDefColumns",i.columns),_.xp6(1),_.Q6J("dataSource",i.dataSource)("loading",_.lcZ(29,10,i.dataSource.loading$))("data",_.lcZ(30,12,i.data$)))},directives:[v.O5,d.BZ,d.w1,d.fO,d.Dz,d.as,d.nj,b.G,s._Y,s.JL,R.xw,R.Wh,R.SQ,s.sg,S.KE,S.hX,w.gD,s.JJ,s.u,$.ey,D.Nt,s.Fj,O.hl,O.nW,S.R9,C.o,Ie.d$,O.Mq,K.lW,j.R,d.ge,d.ev,Z.M,ee.m,d.XQ,d.Gk],pipes:[ce.d,_e.f,v.i8,v.rS,v.uU],styles:[".approved[_ngcontent-%COMP%]{font-weight:700;color:#00c74d}.denied[_ngcontent-%COMP%]{font-weight:700;color:#de4c41}.pending[_ngcontent-%COMP%]{font-weight:700;color:#639ad5}"],changeDetection:0}),G=(0,e.gn)([(0,F.c)(),(0,e.w6)("design:paramtypes",[N._M,s.qu,c.tQx,L.uw,c.KDu,r.zM])],G)}}]);