(self.webpackChunkcsgoroll=self.webpackChunkcsgoroll||[]).push([["default-libs_plinko_src_index_ts"],{79788:(Lt,lt,y)=>{"use strict";y.r(lt),y.d(lt,{PlinkoBetOrderBy:()=>bt.dd,PlinkoBetOrderByOptions:()=>L.Yj,PlinkoBetPath:()=>bt.Qo,PlinkoBetPayoutType:()=>bt.lB,PlinkoBetRiskMode:()=>bt.Z_,PlinkoConfig:()=>L.UX,PlinkoModule:()=>Ov,PlinkoSharedModule:()=>th,recentBetsVariables:()=>L.YM,topWinsVariables:()=>L.Gr});var V=y(72222),w=y(85094),ft=y(62650),tt=y(18505),K=y(36129),E=y(63900),q=y(11365),Y=y(54004),X=y(70655),Q=y(23600),et=y(44987),T=y(13302),At=y(77579),z=y(39300);const Xt=(0,w.PH)("plinko/current-board-size/change",(0,w.Ky)()),Ct=(0,w.PH)("plinko/current-risk/change",(0,w.Ky)()),Pt=(0,w.PH)("plinko/recent-wins/fetch"),gt=(0,w.PH)("plinko/top-wins/fetch"),kt=(0,w.PH)("plinko/recent-wins/fetch/success",(0,w.Ky)()),te=(0,w.PH)("plinko/top-wins/fetch/success",(0,w.Ky)()),Yt=(0,w.PH)("plinko/lists/add-bet",(0,w.Ky)()),ee=(0,w.PH)("plinko/add-bet-recent-wins",(0,w.Ky)()),me=(0,w.PH)("plinko/add-bet-top-wins",(0,w.Ky)()),D=(0,w.PH)("plinko/sound/toggle"),ct=(0,w.PH)("plinko/show-other-player-bets/change",(0,w.Ky)()),x=(0,w.PH)("plinko/payout-type/toggle",(0,w.Ky)());var bt=y(36787);const ot="plinko",Rt={currentBoardSize:+localStorage.getItem(ft.F.PLINKO_ROWS)||12,currentRisk:localStorage.getItem(ft.F.PLINKO_RISK)||bt.Z_.MEDIUM,recentWins:[],topWins:[],soundEnabled:"true"!==localStorage.getItem(ft.F.PLINKO_SOUNDS_DISABLED),showOtherPlayerBets:"false"!==localStorage.getItem(ft.F.PLINKO_SHOW_OTHER_BETS),payoutType:localStorage.getItem(ft.F.PLINKO_PAYOUT_TYPE)||bt.lB.COINS_ONLY},Z=(0,w.ZF)(ot),p=(0,w.P1)(Z,i=>i.currentBoardSize),O=(0,w.P1)(Z,i=>i.currentRisk),S=(0,w.P1)(Z,i=>i.recentWins),M=(0,w.P1)(Z,i=>i.topWins),b=(0,w.P1)(Z,i=>i.soundEnabled),A=(0,w.P1)(Z,i=>i.showOtherPlayerBets),P=(0,w.P1)(Z,i=>i.payoutType);var u=y(5e3);let U=(()=>{class i{constructor(t){this.store=t,this.payoutType$=this.store.select(P),this.showOtherPlayerBets$=this.store.select(A),this.currentBoardSize$=this.store.select(p),this.currentRisk$=this.store.select(O),this.soundEnabled$=this.store.select(b),this.recentWins$=this.store.select(S),this.topWins$=this.store.select(M)}togglePayoutType(t){this.store.dispatch(x({payoutType:t}))}toggleShowOtherBets(t){this.store.dispatch(ct({showOtherPlayerBets:t}))}toggleSound(){this.store.dispatch(D())}changePinAmount(t){this.store.dispatch(Xt({size:t}))}addBetToList(t){this.store.dispatch(Yt({plinkoBet:t}))}changeRisk(t){this.store.dispatch(Ct({risk:t}))}fetchRecentWins(){this.store.dispatch(Pt())}fetchTopWins(){this.store.dispatch(gt())}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(w.yh))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})();var L=y(81727),Et=y(39478);const F=Et.Ps`
  query PlinkoBetSlots {
    plinkoBetSlots {
      pinsMin
      pinsMax
      slots {
        pins
        riskMode
        slotIndex
        slotMultiplier
      }
    }
  }
`,it=Et.Ps`
  fragment PlinkoBet on PlinkoBet {
    id
    currency
    user {
      id
      avatar
      userProgress {
        id
        level
      }
    }
    totalPayout
    winItemVariant {
      id
      iconUrl
    }
    multiplier
    bigWin
  }
`,rt=Et.Ps`
  query PlinkoBets(
    $after: String
    $before: String
    $first: PaginationAmount
    $last: PaginationAmount
    $bigWin: Boolean
    $orderBy: [PlinkoBetOrderBy]
    $userIds: [ID!]
  ) {
    plinkoBets(
      after: $after
      before: $before
      first: $first
      last: $last
      bigWin: $bigWin
      orderBy: $orderBy
      userIds: $userIds
    ) {
      pageInfo {
        startCursor
        endCursor
        hasNextPage
        hasPreviousPage
      }
      edges {
        node {
          ...PlinkoBet
          path
          riskMode
          pins
        }
      }
    }
  }
  ${it}
`;let k=class{constructor(e,t,r){this.soundService=e,this.plinkoFacade=t,this.apollo=r,this._liveBet$=new At.x,this.liveBet$=this._liveBet$.pipe(),this.betResolver$=new At.x,this.playSound$=new At.x,this.playSound$.pipe((0,et.t)(this),(0,q.M)(this.plinkoFacade.soundEnabled$),(0,z.h)(([,n])=>n)).subscribe(([n])=>{this.soundService.playSound(n)})}addLiveBet(e){this._liveBet$.next(e)}fetchTopWins(){return this.apollo.query({query:rt,variables:L.Gr}).pipe((0,Y.U)(({data:e})=>e.plinkoBets.edges.map(({node:t})=>t)))}fetchRecentWins(){return this.apollo.query({query:rt,variables:L.YM}).pipe((0,Y.U)(({data:e})=>e.plinkoBets.edges.map(({node:t})=>t)))}};k.\u0275fac=function(e){return new(e||k)(u.LFG(Q.yu5),u.LFG(U),u.LFG(T._M))},k.\u0275prov=u.Yz7({token:k,factory:k.\u0275fac}),k=(0,X.gn)([(0,et.c)(),(0,X.w6)("design:paramtypes",[Q.yu5,U,T._M])],k);let Tt=(()=>{class i{constructor(t,r,n){this.actions$=t,this.store=r,this.plinkoService=n,this.changeCurrentBoardSize$=(0,V.GW)(()=>this.actions$.pipe((0,V.l4)(Xt),(0,tt.b)(({size:o})=>localStorage.setItem(ft.F.PLINKO_ROWS,o.toString()))),{dispatch:!1}),this.changeCurrentRisk$=(0,V.GW)(()=>this.actions$.pipe((0,V.l4)(Ct),(0,tt.b)(({risk:o})=>localStorage.setItem(ft.F.PLINKO_RISK,o))),{dispatch:!1}),this.fetchRecentWins$=(0,V.GW)(()=>this.actions$.pipe((0,V.l4)(Pt),(0,K.z)(()=>this.plinkoService.fetchRecentWins().pipe((0,Y.U)(o=>kt({plinkoBets:o})))))),this.fetchTopWins$=(0,V.GW)(()=>this.actions$.pipe((0,V.l4)(gt),(0,K.z)(()=>this.plinkoService.fetchTopWins().pipe((0,Y.U)(o=>te({plinkoBets:o})))))),this.addBetToLists$=(0,V.GW)(()=>this.actions$.pipe((0,V.l4)(Yt),(0,E.w)(({plinkoBet:o})=>{const a=[ee({plinkoBet:o})];return o.bigWin&&a.push(me({plinkoBet:o})),a}))),this.toggleSound$=(0,V.GW)(()=>this.actions$.pipe((0,V.l4)(D),(0,q.M)(this.store),(0,tt.b)(([,o])=>{o[ot].soundEnabled?localStorage.removeItem(ft.F.PLINKO_SOUNDS_DISABLED):localStorage.setItem(ft.F.PLINKO_SOUNDS_DISABLED,"true")})),{dispatch:!1}),this.changePayoutType$=(0,V.GW)(()=>this.actions$.pipe((0,V.l4)(x),(0,tt.b)(({payoutType:o})=>localStorage.setItem(ft.F.PLINKO_PAYOUT_TYPE,o))),{dispatch:!1}),this.changeShowOtherPlayerBets$=(0,V.GW)(()=>this.actions$.pipe((0,V.l4)(ct),(0,tt.b)(({showOtherPlayerBets:o})=>{o?localStorage.removeItem(ft.F.PLINKO_SHOW_OTHER_BETS):localStorage.setItem(ft.F.PLINKO_SHOW_OTHER_BETS,"false")})),{dispatch:!1})}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(V.eX),u.LFG(w.yh),u.LFG(k))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac}),i})();const Ht=(0,w.Lq)(Rt,(0,w.on)(Xt,(i,{size:e})=>Object.assign(Object.assign({},i),{currentBoardSize:e})),(0,w.on)(Ct,(i,{risk:e})=>Object.assign(Object.assign({},i),{currentRisk:e})),(0,w.on)(kt,(i,{plinkoBets:e})=>Object.assign(Object.assign({},i),{recentWins:e})),(0,w.on)(te,(i,{plinkoBets:e})=>Object.assign(Object.assign({},i),{topWins:e})),(0,w.on)(ee,(i,{plinkoBet:e})=>Object.assign(Object.assign({},i),{recentWins:[e,...i.recentWins].slice(0,L.UX.maxBetCountInLists)})),(0,w.on)(me,(i,{plinkoBet:e})=>Object.assign(Object.assign({},i),{topWins:[e,...i.topWins].slice(0,L.UX.maxBetCountInLists)})),(0,w.on)(D,i=>Object.assign(Object.assign({},i),{soundEnabled:!i.soundEnabled})),(0,w.on)(ct,(i,{showOtherPlayerBets:e})=>Object.assign(Object.assign({},i),{showOtherPlayerBets:e})),(0,w.on)(x,(i,{payoutType:e})=>Object.assign(Object.assign({},i),{payoutType:e})));function Ut(i,e){return Ht(i,e)}var Bt=y(35357),W=y(46082),vt=y(69270),nt=y(61135);const Vt=Et.Ps`
  mutation createPlinkoBet($input: CreatePlinkoBetInput!) {
    createPlinkoBet(input: $input) {
      plinkoBet {
        id
      }
    }
  }
`,ce=Et.Ps`
  subscription createPlinkoBet {
    createPlinkoBet {
      plinkoBet {
        ...PlinkoBet
        path
        riskMode
        pins
        slot {
          slotIndex
        }
      }
    }
  }
  ${it}
`;var Jt=y(69177),he=y(91314),qi=y(47429),ge=y(93075),Lo=y(24750),Qi=y(93114),Ji=y(5396),oh=y(4707),tn=y(95698),Co=y(39841),ah=y(68675),sh=y(60515),Bo=y(28746),en=y(23457),hh=y(32368);function lh(i,e){if(1&i){const t=u.EpF();u.TgZ(0,"div",5),u.TgZ(1,"mat-slide-toggle",4),u.NdJ("change",function(n){return u.CHM(t),u.oxw().togglePayoutType(n)}),u._uU(2),u.qZA(),u.qZA()}if(2&i){const t=e.$implicit,r=u.oxw();u.xp6(1),u.Q6J("checked",t===r.PlinkoBetPayoutType.ITEMS_AND_COINS),u.xp6(1),u.hij(" ",t===r.PlinkoBetPayoutType.ITEMS_AND_COINS?"Item Reward":"Coins Reward"," ")}}let je=class{constructor(e){this.plinkoFacade=e,this.PlinkoBetPayoutType=bt.lB}set overlayRef(e){this._overlayRef=e,this._overlayRef.backdropClick().pipe((0,et.t)(this)).subscribe(()=>this.overlayRef.dispose())}get overlayRef(){return this._overlayRef}ngOnInit(){this.payoutType$=this.plinkoFacade.payoutType$,this.showOtherPlayerBets$=this.plinkoFacade.showOtherPlayerBets$}togglePayoutType(e){this.plinkoFacade.togglePayoutType(e.checked?bt.lB.ITEMS_AND_COINS:bt.lB.COINS_ONLY)}toggleShowOtherBets(e){this.plinkoFacade.toggleShowOtherBets(e.checked)}};je.\u0275fac=function(e){return new(e||je)(u.Y36(U))},je.\u0275cmp=u.Xpm({type:je,selectors:[["cw-plinko-options"]],decls:7,vars:4,consts:function(){let i;return i=$localize`:␟120d166a4122c3f4ab7f195a5ecdd3fb351684a6␟2858429995092056569:Plinko Settings`,[[1,"mt-0","mb-3","text-center","text-uppercase"],i,["class","toggle-container always-active",4,"ngrxLet"],[1,"toggle-container"],["labelPosition","before",3,"checked","change"],[1,"toggle-container","always-active"]]},template:function(e,t){1&e&&(u.TgZ(0,"h6",0),u.SDv(1,1),u.qZA(),u.YNc(2,lh,3,2,"div",2),u.TgZ(3,"div",3),u.TgZ(4,"mat-slide-toggle",4),u.NdJ("change",function(n){return t.toggleShowOtherBets(n)}),u.ALo(5,"ngrxPush"),u._uU(6," Show other bets "),u.qZA(),u.qZA()),2&e&&(u.xp6(2),u.Q6J("ngrxLet",t.payoutType$),u.xp6(2),u.Q6J("checked",u.lcZ(5,2,t.showOtherPlayerBets$)))},directives:[Jt.eJ,hh.Rr],pipes:[Jt.fM],styles:["[_nghost-%COMP%]{margin-top:.5rem;background-color:var(--portable-inventory-bg);border-radius:.3rem;display:flex;flex-direction:column;color:var(--portable-inventory-color);font-size:.875rem;padding:1.5rem;text-align:center}.toggle-container[_ngcontent-%COMP%]{margin-top:1rem}.toggle-container.always-active[_ngcontent-%COMP%]     .mat-slide-toggle-bar{background-color:#009439}.toggle-container.always-active[_ngcontent-%COMP%]     .mat-slide-toggle-thumb{background-color:#00c74d!important}.toggle-container[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]{display:block;font-size:.85rem}.toggle-container[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]     .mat-slide-toggle-content{opacity:.65}.toggle-container[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]     .mat-slide-toggle-label{justify-content:space-between}"],changeDetection:0}),je=(0,X.gn)([(0,et.c)(),(0,X.w6)("design:paramtypes",[U])],je);var Ie=y(69808),rn=y(23322),Fo=y(966),uh=y(31495),wo=y(96298),fh=y(63393),ch=y(67322),_h=y(74107),Uo=y(69832),dh=y(47423),Go=y(79586),nn=y(89847),ph=y(90508),vh=y(20773);function Eh(i,e){if(1&i){const t=u.EpF();u.TgZ(0,"button",29),u.NdJ("click",function(){return u.CHM(t),u.oxw(2).submit()}),u.TgZ(1,"cw-loader",30),u.TgZ(2,"span"),u.SDv(3,31),u.qZA(),u._UZ(4,"cw-pretty-balance",32),u.qZA(),u.qZA()}if(2&i){const t=e.$implicit,r=u.oxw(2);u.Q6J("disabled",r.form.invalid||t),u.xp6(1),u.Q6J("loading",t),u.xp6(3),u.Q6J("balance",r.totalAmount)}}function mh(i,e){if(1&i&&(u.TgZ(0,"mat-option",33),u._uU(1),u.qZA()),2&i){const t=e.$implicit;u.Q6J("value",t),u.xp6(1),u.Oqu(t)}}function gh(i,e){if(1&i&&(u.TgZ(0,"mat-button-toggle",34),u._uU(1),u.qZA()),2&i){const t=e.$implicit;u.Q6J("value",t),u.xp6(1),u.hij(" ",t," ")}}const Th=function(){return[1,10]};function Sh(i,e){if(1&i){const t=u.EpF();u.ynx(0),u.TgZ(1,"div",2),u._UZ(2,"div",3),u.TgZ(3,"div",4),u.TgZ(4,"div",5),u.YNc(5,Eh,5,3,"button",6),u.qZA(),u.qZA(),u._UZ(6,"div",7),u.qZA(),u.TgZ(7,"form",8),u.TgZ(8,"div",9),u.TgZ(9,"div",10),u.tHW(10,11),u._UZ(11,"span"),u.TgZ(12,"span",12,13),u.NdJ("click",function(){u.CHM(t);const n=u.MAs(13);return u.oxw().openPlinkoOptions(n)}),u._UZ(14,"cw-icon",14),u.qZA(),u.N_p(),u.qZA(),u.TgZ(15,"cw-amount-input",15),u.NdJ("clear",function(){return u.CHM(t),u.oxw().clearForm()}),u.TgZ(16,"span",16),u.NdJ("click",function(){u.CHM(t);const n=u.MAs(20);return u.oxw().togglePortableInventory(n)}),u.TgZ(17,"span",17),u._uU(18),u.qZA(),u.TgZ(19,"button",18,19),u._UZ(21,"cw-icon",20),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(22,"div"),u.TgZ(23,"div",21),u.SDv(24,22),u.qZA(),u.TgZ(25,"mat-form-field",23),u.TgZ(26,"mat-select",24),u.YNc(27,mh,2,2,"mat-option",25),u.ALo(28,"ngrxPush"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(29,"div"),u.TgZ(30,"div",21),u.SDv(31,26),u.qZA(),u.TgZ(32,"mat-button-toggle-group",27),u.YNc(33,gh,2,2,"mat-button-toggle",28),u.qZA(),u.qZA(),u.qZA(),u.BQk()}if(2&i){const t=u.oxw();u.xp6(5),u.Q6J("ngrxLet",t.loading$),u.xp6(2),u.Q6J("formGroup",t.form),u.xp6(8),u.Q6J("ctrl",t.form.get("amount"))("options",u.DdM(18,Th))("label",!1)("hideWhenLTLG",!0)("lastButton",!1)("clearButton",!0)("maxButton",!1)("minButton",!1)("doubleAndHalfButton",!1),u.xp6(3),u.Oqu(t.form.get("userItemIds").value.length),u.xp6(9),u.Q6J("ngForOf",u.lcZ(28,16,t.availableSizes$))("ngForTrackBy",t.trackByIndex),u.xp6(6),u.Q6J("ngForOf",t.risks)("ngForTrackBy",t.trackByIndex)}}function yh(i,e){1&i&&u._UZ(0,"mat-spinner",35),2&i&&u.Q6J("diameter",32)}let $e=class extends((0,en.AF)(Qi.t)){constructor(e,t,r,n,o,a,s,h,l,f,_,c){super(),this.appConfig=e,this.fb=t,this.userService=r,this.overlay=n,this.portableInventoryService=o,this.authDialogService=a,this.plinkoService=s,this.apollo=h,this.layoutService=l,this.settingService=f,this.plinkoFacade=_,this.cdr=c,this.risks=Object.keys(bt.Z_),this.loading$=new nt.X(!1),this.selectedItemsCollection=new Q.Vnp([]),this.pinAmountChange=new u.vpe,this.riskChange=new u.vpe,this.initialValues={amount:0,userItemIds:[],userItemsValue:0},this.availableSizes$=new oh.t(0)}set availableSizes(e){this.availableSizes$.next(e)}ngOnInit(){this.availableSizes$.pipe((0,E.w)(()=>this.settingService.getSetting("plinko:minimum_bet_amount")),(0,tn.q)(1),(0,q.M)(this.plinkoFacade.currentBoardSize$,this.plinkoFacade.currentRisk$)).subscribe(([{value:e},t,r])=>{this.initForm(+e,t,r),this.subscribeToAmountOrItems()})}clearForm(){this.selectedItemsCollection.clear(),this.form.patchValue(this.initialValues)}initForm(e,t,r){this.form=this.fb.group({amount:[1,ge.kI.min(0)],userItemsValue:[this.initialValues.userItemsValue,[ge.kI.min(0)]],userItemIds:[this.initialValues.userItemIds,[]],rows:[t,ge.kI.required],riskMode:[r,ge.kI.required]},{validators:[n=>this.totalAmount>=e?null:{amount:`You must enter a bet greater than ${e}`}]}),this.form.get("rows").valueChanges.pipe((0,et.t)(this)).subscribe(n=>this.pinAmountChange.next(n)),this.form.get("riskMode").valueChanges.pipe((0,et.t)(this)).subscribe(n=>this.riskChange.next(n))}get totalAmount(){return this.form?+this.form.controls.amount.value+ +this.form.controls.userItemsValue.value:0}togglePortableInventory(e){this.portableInventoryService.togglePortableInventory(e).subscribe(t=>{t.hasActionsFooter=!1,t.selectedUserItemsCollection=this.selectedItemsCollection})}subscribeToAmountOrItems(){(0,Co.a)([this.form.get("amount").valueChanges.pipe((0,ah.O)(0)),this.selectedItemsCollection.items$]).pipe((0,et.t)(this)).subscribe(([e,t])=>{const r=t.map(o=>o.id),n=t.reduce((o,a)=>o+a.itemVariant.value,0);this.form.get("userItemIds").setValue(r),this.form.get("userItemsValue").setValue(n),this.cdr.markForCheck()})}submit(){this.loading$.next(!0),this.userService.user$.pipe((0,tn.q)(1),(0,q.M)(this.plinkoFacade.payoutType$),(0,E.w)(([e,t])=>{if(!e)return this.authDialogService.openAuthModal(),sh.E;const{amount:r,rows:n,riskMode:o}=this.form.value;return this.apollo.mutate({mutation:Vt,variables:{input:{payoutType:t,amount:null!=r?r:0,feVersion:this.appConfig.plinko.feVersion,pins:n,riskMode:o,userItemIds:this.form.get("userItemIds").value}}})}),(0,Bo.x)(()=>{this.loading$.next(!1),this.selectedItemsCollection.clear()})).subscribe(()=>this.plinkoService.playSound$.next("PLINKO_BET"))}openPlinkoOptions(e){const t=this.overlay.create(this.layoutService.getOverlayConfig(e)),r=new qi.C5(je);t.attach(r).instance.overlayRef=t}};$e.\u0275fac=function(e){return new(e||$e)(u.Y36(Q.qBz),u.Y36(ge.qu),u.Y36(Q.KDu),u.Y36(he.aV),u.Y36(Ji.PortableInventoryService),u.Y36(Lo.AuthDialogService),u.Y36(k),u.Y36(T._M),u.Y36(Q.Pb3),u.Y36(Q.RCL),u.Y36(U),u.Y36(u.sBO))},$e.\u0275cmp=u.Xpm({type:$e,selectors:[["cw-plinko-bet-form"]],inputs:{availableSizes:"availableSizes"},outputs:{pinAmountChange:"pinAmountChange",riskChange:"riskChange"},features:[u.qOj],decls:3,vars:2,consts:function(){let i,e,t,r;return i=$localize`:␟527dd18579b7f6d02b11025ba185ddc0e24c4137␟2560929585512419351:${"\ufffd#11\ufffd"}:START_TAG_SPAN:Bet Amount${"[\ufffd/#11\ufffd|\ufffd/#12\ufffd]"}:CLOSE_TAG_SPAN:${"\ufffd#12\ufffd"}:START_TAG_SPAN_1:${"\ufffd#14\ufffd"}:START_TAG_CW_ICON:${"\ufffd/#14\ufffd"}:CLOSE_TAG_CW_ICON:${"[\ufffd/#11\ufffd|\ufffd/#12\ufffd]"}:CLOSE_TAG_SPAN:`,i=u.Zx4(i),e=$localize`:␟79765b4b2ed87b05e0fd5d6937cec32d1995645f␟5727110993298059160:Rows`,t=$localize`:␟ecc4296bcef63f8fc3bb154d929470c0d22bc4a9␟8327774829254044404:Risk payouts`,r=$localize`:␟24687fe22c6fc8a9e273e5854eee40ab1372103d␟2879188871063056328:Place Bet`,[[4,"ngIf","ngIfElse"],["spinnerTpl",""],[1,"d-flex","justify-content-center"],[1,"shape-l"],[1,"shape-c"],[1,"btn-container"],["mat-flat-button","","color","accent","class","mat-button-3d big-button px-5 mx-auto d-block",3,"disabled","click",4,"ngrxLet"],[1,"shape-r"],["ngClass.gt-md","gap-1",1,"d-flex","flex-column","flex-xl-row","justify-content-between","mt-3","mt-sm-4",3,"formGroup"],["ngClass.gt-md","flex-50"],[1,"mt-2","text-uppercase","d-flex","justify-content-between"],i,["ngbTooltip","Plinko Settings",3,"click"],["optionsTrigger",""],["inlineSVG","assets/icons/settings.svg",1,"opacity-50","pointer"],[1,"d-block","mt-2",3,"ctrl","options","label","hideWhenLTLG","lastButton","clearButton","maxButton","minButton","doubleAndHalfButton","clear"],[3,"click"],[1,"items-icon"],["type","button",1,"inventory-trigger","mat-icon-button"],["inventoryTrigger",""],["inlineSVG","assets/icons/backpack.svg",1,"align-text-bottom"],[1,"mt-2","text-uppercase"],e,[1,"mt-2","rows"],["formControlName","rows"],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],t,["formControlName","riskMode",1,"w-100","justify-content-between"],["class","flex-1",3,"value",4,"ngFor","ngForOf","ngForTrackBy"],["mat-flat-button","","color","accent",1,"mat-button-3d","big-button","px-5","mx-auto","d-block",3,"disabled","click"],[3,"loading"],r,[1,"ml-2",3,"balance"],[3,"value"],[1,"flex-1",3,"value"],[3,"diameter"]]},template:function(e,t){if(1&e&&(u.YNc(0,Sh,34,19,"ng-container",0),u.YNc(1,yh,1,1,"ng-template",null,1,u.W1O)),2&e){const r=u.MAs(2);u.Q6J("ngIf",t.form)("ngIfElse",r)}},directives:[Ie.O5,Jt.eJ,ge._Y,ge.JL,rn.oO,ge.sg,Fo._L,uh.o,wo.d$,fh.l,ch.KE,_h.gD,ge.JJ,ge.u,Ie.sg,Uo.A9,dh.lW,Go.R,nn.q,ph.ey,Uo.Yi,vh.$g],pipes:[Jt.fM],styles:["[_nghost-%COMP%]{display:block;min-height:14.688rem}[_nghost-%COMP%]   .rows[_ngcontent-%COMP%]     .mat-form-field-infix{width:6rem}.shape-l[_ngcontent-%COMP%], .shape-r[_ngcontent-%COMP%]{flex:1;background-color:var(--plinko-board-bg);border-radius:0 0 .5rem .5rem}@media (max-width: 767.98px){.shape-l[_ngcontent-%COMP%], .shape-r[_ngcontent-%COMP%]{display:none}}.shape-c[_ngcontent-%COMP%]{background-color:var(--plinko-board-bg)}.shape-c[_ngcontent-%COMP%]   .btn-container[_ngcontent-%COMP%]{padding:1rem 1rem 0;border-radius:.5rem .5rem 0 0;background-color:var(--main-color-03)}.shape-c[_ngcontent-%COMP%]   .btn-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:12rem}form[_ngcontent-%COMP%]{border-radius:.5rem;padding:1rem;background-color:var(--plinko-form-bg)}cw-amount-input[_ngcontent-%COMP%]{min-width:16rem}mat-button-toggle-group[_ngcontent-%COMP%]{margin-top:.75rem!important;height:3.25rem;border:none;border-radius:0;grid-gap:.25rem;gap:.25rem}mat-button-toggle-group[_ngcontent-%COMP%]   .mat-button-toggle[_ngcontent-%COMP%]{background-color:var(--main-elements-bg);border-radius:.4rem;border-left:none;width:4.75rem}mat-button-toggle-group[_ngcontent-%COMP%]   .mat-button-toggle.mat-button-toggle-checked[_ngcontent-%COMP%]{background-color:#1e3930;border:2px solid var(--success);color:#fff}mat-spinner[_ngcontent-%COMP%]{top:calc(50% - 16px);margin:auto}"],changeDetection:0}),$e=(0,X.gn)([(0,et.c)(),(0,X.w6)("design:paramtypes",[Object,ge.qu,Q.KDu,he.aV,Ji.PortableInventoryService,Lo.AuthDialogService,k,T._M,Q.Pb3,Q.RCL,U,u.sBO])],$e);var Oh=y(89979);var xh=setTimeout,ko="undefined"!=typeof setImmediate?setImmediate:null;function Yo(i){return Boolean(i&&void 0!==i.length)}function Ih(){}function jt(i){if(!(this instanceof jt))throw new TypeError("Promises must be constructed via new");if("function"!=typeof i)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],Xo(i,this)}function Ho(i,e){for(;3===i._state;)i=i._value;0!==i._state?(i._handled=!0,jt._immediateFn(function(){var t=1===i._state?e.onFulfilled:e.onRejected;if(null!==t){var r;try{r=t(i._value)}catch(n){return void Hr(e.promise,n)}on(e.promise,r)}else(1===i._state?on:Hr)(e.promise,i._value)})):i._deferreds.push(e)}function on(i,e){try{if(e===i)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var t=e.then;if(e instanceof jt)return i._state=3,i._value=e,void an(i);if("function"==typeof t)return void Xo(function(i,e){return function(){i.apply(e,arguments)}}(t,e),i)}i._state=1,i._value=e,an(i)}catch(r){Hr(i,r)}}function Hr(i,e){i._state=2,i._value=e,an(i)}function an(i){2===i._state&&0===i._deferreds.length&&jt._immediateFn(function(){i._handled||jt._unhandledRejectionFn(i._value)});for(var e=0,t=i._deferreds.length;e<t;e++)Ho(i,i._deferreds[e]);i._deferreds=null}function Dh(i,e,t){this.onFulfilled="function"==typeof i?i:null,this.onRejected="function"==typeof e?e:null,this.promise=t}function Xo(i,e){var t=!1;try{i(function(r){t||(t=!0,on(e,r))},function(r){t||(t=!0,Hr(e,r))})}catch(r){if(t)return;t=!0,Hr(e,r)}}jt.prototype.catch=function(i){return this.then(null,i)},jt.prototype.then=function(i,e){var t=new this.constructor(Ih);return Ho(this,new Dh(i,e,t)),t},jt.prototype.finally=function(i){var e=this.constructor;return this.then(function(t){return e.resolve(i()).then(function(){return t})},function(t){return e.resolve(i()).then(function(){return e.reject(t)})})},jt.all=function(i){return new jt(function(e,t){if(!Yo(i))return t(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(i);if(0===r.length)return e([]);var n=r.length;function o(s,h){try{if(h&&("object"==typeof h||"function"==typeof h)){var l=h.then;if("function"==typeof l)return void l.call(h,function(f){o(s,f)},t)}r[s]=h,0==--n&&e(r)}catch(f){t(f)}}for(var a=0;a<r.length;a++)o(a,r[a])})},jt.allSettled=function(i){return new this(function(t,r){if(!i||void 0===i.length)return r(new TypeError(typeof i+" "+i+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var n=Array.prototype.slice.call(i);if(0===n.length)return t([]);var o=n.length;function a(h,l){if(l&&("object"==typeof l||"function"==typeof l)){var f=l.then;if("function"==typeof f)return void f.call(l,function(_){a(h,_)},function(_){n[h]={status:"rejected",reason:_},0==--o&&t(n)})}n[h]={status:"fulfilled",value:l},0==--o&&t(n)}for(var s=0;s<n.length;s++)a(s,n[s])})},jt.resolve=function(i){return i&&"object"==typeof i&&i.constructor===jt?i:new jt(function(e){e(i)})},jt.reject=function(i){return new jt(function(e,t){t(i)})},jt.race=function(i){return new jt(function(e,t){if(!Yo(i))return t(new TypeError("Promise.race accepts an array"));for(var r=0,n=i.length;r<n;r++)jt.resolve(i[r]).then(e,t)})},jt._immediateFn="function"==typeof ko&&function(i){ko(i)}||function(i){xh(i,0)},jt._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};const Nh=jt;var Lh=y(35943),Ch=y.n(Lh);if(self.Promise||(self.Promise=Nh),Object.assign||(Object.assign=Ch()),Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!self.performance||!self.performance.now){var Fh=Date.now();self.performance||(self.performance={}),self.performance.now=function(){return Date.now()-Fh}}for(var sn=Date.now(),Vo=["ms","moz","webkit","o"],hn=0;hn<Vo.length&&!self.requestAnimationFrame;++hn){var ln=Vo[hn];self.requestAnimationFrame=self[ln+"RequestAnimationFrame"],self.cancelAnimationFrame=self[ln+"CancelAnimationFrame"]||self[ln+"CancelRequestAnimationFrame"]}self.requestAnimationFrame||(self.requestAnimationFrame=function(i){if("function"!=typeof i)throw new TypeError(i+"is not a function");var e=Date.now(),t=16+sn-e;return t<0&&(t=0),sn=e,self.setTimeout(function(){sn=Date.now(),i(performance.now())},t)}),self.cancelAnimationFrame||(self.cancelAnimationFrame=function(i){return clearTimeout(i)}),Math.sign||(Math.sign=function(e){return 0===(e=Number(e))||isNaN(e)?e:e>0?1:-1}),Number.isInteger||(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}),self.ArrayBuffer||(self.ArrayBuffer=Array),self.Float32Array||(self.Float32Array=Array),self.Uint32Array||(self.Uint32Array=Array),self.Uint16Array||(self.Uint16Array=Array),self.Uint8Array||(self.Uint8Array=Array),self.Int32Array||(self.Int32Array=Array);var un=/iPhone/i,Wo=/iPod/i,jo=/iPad/i,$o=/\biOS-universal(?:.+)Mac\b/i,fn=/\bAndroid(?:.+)Mobile\b/i,zo=/Android/i,mr=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,si=/Silk/i,Ue=/Windows Phone/i,Zo=/\bWindows(?:.+)ARM\b/i,Ko=/BlackBerry/i,qo=/BB10/i,Qo=/Opera Mini/i,Jo=/\b(CriOS|Chrome)(?:.+)Mobile/i,ta=/Mobile(?:.+)Firefox\b/i,ea=function(i){return void 0!==i&&"MacIntel"===i.platform&&"number"==typeof i.maxTouchPoints&&i.maxTouchPoints>1&&"undefined"==typeof MSStream},Me=function(i){var e={userAgent:"",platform:"",maxTouchPoints:0};i||"undefined"==typeof navigator?"string"==typeof i?e.userAgent=i:i&&i.userAgent&&(e={userAgent:i.userAgent,platform:i.platform,maxTouchPoints:i.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var t=e.userAgent,r=t.split("[FBAN");void 0!==r[1]&&(t=r[0]),void 0!==(r=t.split("Twitter"))[1]&&(t=r[0]);var n=function(i){return function(e){return e.test(i)}}(t),o={apple:{phone:n(un)&&!n(Ue),ipod:n(Wo),tablet:!n(un)&&(n(jo)||ea(e))&&!n(Ue),universal:n($o),device:(n(un)||n(Wo)||n(jo)||n($o)||ea(e))&&!n(Ue)},amazon:{phone:n(mr),tablet:!n(mr)&&n(si),device:n(mr)||n(si)},android:{phone:!n(Ue)&&n(mr)||!n(Ue)&&n(fn),tablet:!n(Ue)&&!n(mr)&&!n(fn)&&(n(si)||n(zo)),device:!n(Ue)&&(n(mr)||n(si)||n(fn)||n(zo))||n(/\bokhttp\b/i)},windows:{phone:n(Ue),tablet:n(Zo),device:n(Ue)||n(Zo)},other:{blackberry:n(Ko),blackberry10:n(qo),opera:n(Qo),firefox:n(ta),chrome:n(Jo),device:n(Ko)||n(qo)||n(Qo)||n(ta)||n(Jo)},any:!1,phone:!1,tablet:!1};return o.any=o.apple.device||o.android.device||o.windows.device||o.other.device,o.phone=o.apple.phone||o.android.phone||o.windows.phone,o.tablet=o.apple.tablet||o.android.tablet||o.windows.tablet,o}(self.navigator),hi=(()=>{return(i=hi||(hi={}))[i.NEAREST=0]="NEAREST",i[i.LINEAR=1]="LINEAR",hi;var i})(),li=(()=>{return(i=li||(li={}))[i.CLAMP=33071]="CLAMP",i[i.REPEAT=10497]="REPEAT",i[i.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",li;var i})(),ui=(()=>{return(i=ui||(ui={}))[i.OFF=0]="OFF",i[i.POW2=1]="POW2",i[i.ON=2]="ON",i[i.ON_MANUAL=3]="ON_MANUAL",ui;var i})(),fi=(()=>{return(i=fi||(fi={}))[i.AUTO=0]="AUTO",i[i.MANUAL=1]="MANUAL",fi;var i})(),gr=(()=>{return(i=gr||(gr={})).LOW="lowp",i.MEDIUM="mediump",i.HIGH="highp",gr;var i})(),ci=(()=>{return(i=ci||(ci={}))[i.NONE=0]="NONE",i[i.LOW=2]="LOW",i[i.MEDIUM=4]="MEDIUM",i[i.HIGH=8]="HIGH",ci;var i})(),st={MIPMAP_TEXTURES:ui.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:ci.NONE,SPRITE_MAX_TEXTURES:function(i){var t,e=!0;(Me.tablet||Me.phone)&&(Me.apple.device&&(t=navigator.userAgent.match(/OS (\d+)_(\d+)?/))&&parseInt(t[1],10)<11&&(e=!1),Me.android.device&&(t=navigator.userAgent.match(/Android\s([0-9.]*)/))&&parseInt(t[1],10)<7&&(e=!1));return e?32:4}(),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:fi.AUTO,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:li.CLAMP,SCALE_MODE:hi.LINEAR,PRECISION_VERTEX:gr.HIGH,PRECISION_FRAGMENT:Me.apple.device?gr.HIGH:gr.MEDIUM,CAN_UPLOAD_SAME_BUFFER:!Me.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},Yh=y(62005),Xr=y.n(Yh),Hh=y(5469),ra=y.n(Hh),cn=y(68762),De=(()=>{return(i=De||(De={}))[i.WEBGL_LEGACY=0]="WEBGL_LEGACY",i[i.WEBGL=1]="WEBGL",i[i.WEBGL2=2]="WEBGL2",De;var i})(),Tr=(()=>{return(i=Tr||(Tr={}))[i.UNKNOWN=0]="UNKNOWN",i[i.WEBGL=1]="WEBGL",i[i.CANVAS=2]="CANVAS",Tr;var i})(),Vr=(()=>{return(i=Vr||(Vr={}))[i.COLOR=16384]="COLOR",i[i.DEPTH=256]="DEPTH",i[i.STENCIL=1024]="STENCIL",Vr;var i})(),ut=(()=>{return(i=ut||(ut={}))[i.NORMAL=0]="NORMAL",i[i.ADD=1]="ADD",i[i.MULTIPLY=2]="MULTIPLY",i[i.SCREEN=3]="SCREEN",i[i.OVERLAY=4]="OVERLAY",i[i.DARKEN=5]="DARKEN",i[i.LIGHTEN=6]="LIGHTEN",i[i.COLOR_DODGE=7]="COLOR_DODGE",i[i.COLOR_BURN=8]="COLOR_BURN",i[i.HARD_LIGHT=9]="HARD_LIGHT",i[i.SOFT_LIGHT=10]="SOFT_LIGHT",i[i.DIFFERENCE=11]="DIFFERENCE",i[i.EXCLUSION=12]="EXCLUSION",i[i.HUE=13]="HUE",i[i.SATURATION=14]="SATURATION",i[i.COLOR=15]="COLOR",i[i.LUMINOSITY=16]="LUMINOSITY",i[i.NORMAL_NPM=17]="NORMAL_NPM",i[i.ADD_NPM=18]="ADD_NPM",i[i.SCREEN_NPM=19]="SCREEN_NPM",i[i.NONE=20]="NONE",i[i.SRC_OVER=0]="SRC_OVER",i[i.SRC_IN=21]="SRC_IN",i[i.SRC_OUT=22]="SRC_OUT",i[i.SRC_ATOP=23]="SRC_ATOP",i[i.DST_OVER=24]="DST_OVER",i[i.DST_IN=25]="DST_IN",i[i.DST_OUT=26]="DST_OUT",i[i.DST_ATOP=27]="DST_ATOP",i[i.ERASE=26]="ERASE",i[i.SUBTRACT=28]="SUBTRACT",i[i.XOR=29]="XOR",ut;var i})(),_e=(()=>{return(i=_e||(_e={}))[i.POINTS=0]="POINTS",i[i.LINES=1]="LINES",i[i.LINE_LOOP=2]="LINE_LOOP",i[i.LINE_STRIP=3]="LINE_STRIP",i[i.TRIANGLES=4]="TRIANGLES",i[i.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",i[i.TRIANGLE_FAN=6]="TRIANGLE_FAN",_e;var i})(),H=(()=>{return(i=H||(H={}))[i.RGBA=6408]="RGBA",i[i.RGB=6407]="RGB",i[i.RG=33319]="RG",i[i.RED=6403]="RED",i[i.RGBA_INTEGER=36249]="RGBA_INTEGER",i[i.RGB_INTEGER=36248]="RGB_INTEGER",i[i.RG_INTEGER=33320]="RG_INTEGER",i[i.RED_INTEGER=36244]="RED_INTEGER",i[i.ALPHA=6406]="ALPHA",i[i.LUMINANCE=6409]="LUMINANCE",i[i.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",i[i.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",i[i.DEPTH_STENCIL=34041]="DEPTH_STENCIL",H;var i})(),ze=(()=>{return(i=ze||(ze={}))[i.TEXTURE_2D=3553]="TEXTURE_2D",i[i.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",i[i.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",i[i.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",i[i.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",i[i.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",i[i.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",i[i.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",i[i.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",ze;var i})(),dt=(()=>{return(i=dt||(dt={}))[i.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",i[i.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",i[i.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",i[i.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",i[i.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",i[i.UNSIGNED_INT=5125]="UNSIGNED_INT",i[i.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",i[i.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",i[i.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",i[i.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",i[i.BYTE=5120]="BYTE",i[i.SHORT=5122]="SHORT",i[i.INT=5124]="INT",i[i.FLOAT=5126]="FLOAT",i[i.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",i[i.HALF_FLOAT=36193]="HALF_FLOAT",dt;var i})(),Wr=(()=>{return(i=Wr||(Wr={}))[i.FLOAT=0]="FLOAT",i[i.INT=1]="INT",i[i.UINT=2]="UINT",Wr;var i})(),Te=(()=>{return(i=Te||(Te={}))[i.NEAREST=0]="NEAREST",i[i.LINEAR=1]="LINEAR",Te;var i})(),Ne=(()=>{return(i=Ne||(Ne={}))[i.CLAMP=33071]="CLAMP",i[i.REPEAT=10497]="REPEAT",i[i.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",Ne;var i})(),Ge=(()=>{return(i=Ge||(Ge={}))[i.OFF=0]="OFF",i[i.POW2=1]="POW2",i[i.ON=2]="ON",i[i.ON_MANUAL=3]="ON_MANUAL",Ge;var i})(),Se=(()=>{return(i=Se||(Se={}))[i.NPM=0]="NPM",i[i.UNPACK=1]="UNPACK",i[i.PMA=2]="PMA",i[i.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",i[i.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",i[i.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",i[i.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",Se;var i})(),ke=(()=>{return(i=ke||(ke={}))[i.NO=0]="NO",i[i.YES=1]="YES",i[i.AUTO=2]="AUTO",i[i.BLEND=0]="BLEND",i[i.CLEAR=1]="CLEAR",i[i.BLIT=2]="BLIT",ke;var i})(),_i=(()=>{return(i=_i||(_i={}))[i.AUTO=0]="AUTO",i[i.MANUAL=1]="MANUAL",_i;var i})(),ye=(()=>{return(i=ye||(ye={})).LOW="lowp",i.MEDIUM="mediump",i.HIGH="highp",ye;var i})(),ie=(()=>{return(i=ie||(ie={}))[i.NONE=0]="NONE",i[i.SCISSOR=1]="SCISSOR",i[i.STENCIL=2]="STENCIL",i[i.SPRITE=3]="SPRITE",ie;var i})(),Zt=(()=>{return(i=Zt||(Zt={}))[i.NONE=0]="NONE",i[i.LOW=2]="LOW",i[i.MEDIUM=4]="MEDIUM",i[i.HIGH=8]="HIGH",Zt;var i})(),Oe=(()=>{return(i=Oe||(Oe={}))[i.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",i[i.ARRAY_BUFFER=34962]="ARRAY_BUFFER",i[i.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",Oe;var i})(),Sr={parse:cn.Qc,format:cn.WU,resolve:cn.DB};st.RETINA_PREFIX=/@([0-9\.]+)x/,st.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var dn,_n=!1,Lf={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function yr(i,e){return void 0===e&&(e=[]),e[0]=(i>>16&255)/255,e[1]=(i>>8&255)/255,e[2]=(255&i)/255,e}function na(i){var e=i.toString(16);return"#"+("000000".substr(0,6-e.length)+e)}function oa(i){return"string"==typeof i&&"#"===(i=Lf[i.toLowerCase()]||i)[0]&&(i=i.substr(1)),parseInt(i,16)}var aa=function(){for(var i=[],e=[],t=0;t<32;t++)i[t]=t,e[t]=t;i[ut.NORMAL_NPM]=ut.NORMAL,i[ut.ADD_NPM]=ut.ADD,i[ut.SCREEN_NPM]=ut.SCREEN,e[ut.NORMAL]=ut.NORMAL_NPM,e[ut.ADD]=ut.ADD_NPM,e[ut.SCREEN]=ut.SCREEN_NPM;var r=[];return r.push(e),r.push(i),r}();function sa(i,e){return aa[e?1:0][i]}function pn(i,e){if(1===e)return(255*e<<24)+i;if(0===e)return 0;var t=i>>16&255,r=i>>8&255,n=255&i;return(255*e<<24)+((t=t*e+.5|0)<<16)+((r=r*e+.5|0)<<8)+(n*e+.5|0)}function ha(i,e,t,r){return(t=t||new Float32Array(4))[0]=(i>>16&255)/255,t[1]=(i>>8&255)/255,t[2]=(255&i)/255,(r||void 0===r)&&(t[0]*=e,t[1]*=e,t[2]*=e),t[3]=e,t}function vn(i){if(4===i.BYTES_PER_ELEMENT)return i instanceof Float32Array?"Float32Array":i instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===i.BYTES_PER_ELEMENT){if(i instanceof Uint16Array)return"Uint16Array"}else if(1===i.BYTES_PER_ELEMENT&&i instanceof Uint8Array)return"Uint8Array";return null}function di(i){return i+=0===i?1:0,--i,i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,1+(i|=i>>>16)}function la(i){return!(i&i-1||!i)}function ua(i){var e=(i>65535?1:0)<<4,t=((i>>>=e)>255?1:0)<<3;return e|=t,e|=t=((i>>>=t)>15?1:0)<<2,(e|=t=((i>>>=t)>3?1:0)<<1)|(i>>>=t)>>1}function Or(i,e,t){var n,r=i.length;if(!(e>=r||0===t)){var o=r-(t=e+t>r?r-e:t);for(n=e;n<o;++n)i[n]=i[n+t];i.length=o}}function Ar(i){return 0===i?0:i<0?-1:1}Float32Array,Uint32Array,Int32Array,Uint8Array;var Uf=0;function nr(){return++Uf}var fa={};function Ze(i,e,t){if(void 0===t&&(t=3),!fa[e]){var r=(new Error).stack;void 0===r?console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+i):(r=r.split("\n").splice(t).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+"\nDeprecated since v"+i),console.warn(r),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+i),console.warn(r))),fa[e]=!0}}var pi,ca={},ue=Object.create(null),Ae=Object.create(null),_a=function(){function i(e,t,r){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=r||st.RESOLUTION,this.resize(e,t)}return i.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},i.prototype.resize=function(e,t){this.canvas.width=Math.round(e*this.resolution),this.canvas.height=Math.round(t*this.resolution)},i.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(i.prototype,"width",{get:function(){return this.canvas.width},set:function(e){this.canvas.width=Math.round(e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this.canvas.height},set:function(e){this.canvas.height=Math.round(e)},enumerable:!1,configurable:!0}),i}();function vi(i,e){var t=st.RETINA_PREFIX.exec(i);return t?parseFloat(t[1]):void 0!==e?e:1}var Ei=2*Math.PI,Hf=180/Math.PI,Xf=Math.PI/180,$t=(()=>{return(i=$t||($t={}))[i.POLY=0]="POLY",i[i.RECT=1]="RECT",i[i.CIRC=2]="CIRC",i[i.ELIP=3]="ELIP",i[i.RREC=4]="RREC",$t;var i})(),It=function(){function i(e,t,r,n){void 0===e&&(e=0),void 0===t&&(t=0),void 0===r&&(r=0),void 0===n&&(n=0),this.x=Number(e),this.y=Number(t),this.width=Number(r),this.height=Number(n),this.type=$t.RECT}return Object.defineProperty(i.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(i,"EMPTY",{get:function(){return new i(0,0,0,0)},enumerable:!1,configurable:!0}),i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height)},i.prototype.copyFrom=function(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this},i.prototype.copyTo=function(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e},i.prototype.contains=function(e,t){return!(this.width<=0||this.height<=0)&&e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height},i.prototype.pad=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=e),this.x-=e,this.y-=t,this.width+=2*e,this.height+=2*t,this},i.prototype.fit=function(e){var t=Math.max(this.x,e.x),r=Math.min(this.x+this.width,e.x+e.width),n=Math.max(this.y,e.y),o=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(r-t,0),this.y=n,this.height=Math.max(o-n,0),this},i.prototype.ceil=function(e,t){void 0===e&&(e=1),void 0===t&&(t=.001);var r=Math.ceil((this.x+this.width-t)*e)/e,n=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=r-this.x,this.height=n-this.y,this},i.prototype.enlarge=function(e){var t=Math.min(this.x,e.x),r=Math.max(this.x+this.width,e.x+e.width),n=Math.min(this.y,e.y),o=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=r-t,this.y=n,this.height=o-n,this},i.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},i}(),Vf=function(){function i(e,t,r){void 0===e&&(e=0),void 0===t&&(t=0),void 0===r&&(r=0),this.x=e,this.y=t,this.radius=r,this.type=$t.CIRC}return i.prototype.clone=function(){return new i(this.x,this.y,this.radius)},i.prototype.contains=function(e,t){if(this.radius<=0)return!1;var n=this.x-e,o=this.y-t;return(n*=n)+(o*=o)<=this.radius*this.radius},i.prototype.getBounds=function(){return new It(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},i.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"},i}(),Wf=function(){function i(e,t,r,n){void 0===e&&(e=0),void 0===t&&(t=0),void 0===r&&(r=0),void 0===n&&(n=0),this.x=e,this.y=t,this.width=r,this.height=n,this.type=$t.ELIP}return i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height)},i.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;var r=(e-this.x)/this.width,n=(t-this.y)/this.height;return(r*=r)+(n*=n)<=1},i.prototype.getBounds=function(){return new It(this.x-this.width,this.y-this.height,this.width,this.height)},i.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},i}(),mi=function(){function i(){for(var e=arguments,t=[],r=0;r<arguments.length;r++)t[r]=e[r];var n=Array.isArray(t[0])?t[0]:t;if("number"!=typeof n[0]){for(var o=[],a=0,s=n.length;a<s;a++)o.push(n[a].x,n[a].y);n=o}this.points=n,this.type=$t.POLY,this.closeStroke=!0}return i.prototype.clone=function(){var t=new i(this.points.slice());return t.closeStroke=this.closeStroke,t},i.prototype.contains=function(e,t){for(var r=!1,n=this.points.length/2,o=0,a=n-1;o<n;a=o++){var s=this.points[2*o],h=this.points[2*o+1],f=this.points[2*a+1];h>t!=f>t&&e<(t-h)/(f-h)*(this.points[2*a]-s)+s&&(r=!r)}return r},i.prototype.toString=function(){return"[@pixi/math:PolygoncloseStroke="+this.closeStroke+"points="+this.points.reduce(function(e,t){return e+", "+t},"")+"]"},i}(),jf=function(){function i(e,t,r,n,o){void 0===e&&(e=0),void 0===t&&(t=0),void 0===r&&(r=0),void 0===n&&(n=0),void 0===o&&(o=20),this.x=e,this.y=t,this.width=r,this.height=n,this.radius=o,this.type=$t.RREC}return i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.radius)},i.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){if(t>=this.y+this.radius&&t<=this.y+this.height-this.radius||e>=this.x+this.radius&&e<=this.x+this.width-this.radius)return!0;var r=e-(this.x+this.radius),n=t-(this.y+this.radius),o=this.radius*this.radius;if(r*r+n*n<=o||(r=e-(this.x+this.width-this.radius))*r+n*n<=o||r*r+(n=t-(this.y+this.height-this.radius))*n<=o||(r=e-(this.x+this.radius))*r+n*n<=o)return!0}return!1},i.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+"width="+this.width+" height="+this.height+" radius="+this.radius+"]"},i}(),Kt=function(){function i(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.x=0,this.y=0,this.x=e,this.y=t}return i.prototype.clone=function(){return new i(this.x,this.y)},i.prototype.copyFrom=function(e){return this.set(e.x,e.y),this},i.prototype.copyTo=function(e){return e.set(this.x,this.y),e},i.prototype.equals=function(e){return e.x===this.x&&e.y===this.y},i.prototype.set=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=e),this.x=e,this.y=t,this},i.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},i}(),Pr=function(){function i(e,t,r,n){void 0===r&&(r=0),void 0===n&&(n=0),this._x=r,this._y=n,this.cb=e,this.scope=t}return i.prototype.clone=function(e,t){return void 0===e&&(e=this.cb),void 0===t&&(t=this.scope),new i(e,t,this._x,this._y)},i.prototype.set=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=e),(this._x!==e||this._y!==t)&&(this._x=e,this._y=t,this.cb.call(this.scope)),this},i.prototype.copyFrom=function(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this},i.prototype.copyTo=function(e){return e.set(this._x,this._y),e},i.prototype.equals=function(e){return e.x===this._x&&e.y===this._y},i.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(i.prototype,"x",{get:function(){return this._x},set:function(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"y",{get:function(){return this._y},set:function(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),i}(),qt=function(){function i(e,t,r,n,o,a){void 0===e&&(e=1),void 0===t&&(t=0),void 0===r&&(r=0),void 0===n&&(n=1),void 0===o&&(o=0),void 0===a&&(a=0),this.array=null,this.a=e,this.b=t,this.c=r,this.d=n,this.tx=o,this.ty=a}return i.prototype.fromArray=function(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]},i.prototype.set=function(e,t,r,n,o,a){return this.a=e,this.b=t,this.c=r,this.d=n,this.tx=o,this.ty=a,this},i.prototype.toArray=function(e,t){this.array||(this.array=new Float32Array(9));var r=t||this.array;return e?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r},i.prototype.apply=function(e,t){t=t||new Kt;var r=e.x,n=e.y;return t.x=this.a*r+this.c*n+this.tx,t.y=this.b*r+this.d*n+this.ty,t},i.prototype.applyInverse=function(e,t){t=t||new Kt;var r=1/(this.a*this.d+this.c*-this.b),n=e.x,o=e.y;return t.x=this.d*r*n+-this.c*r*o+(this.ty*this.c-this.tx*this.d)*r,t.y=this.a*r*o+-this.b*r*n+(-this.ty*this.a+this.tx*this.b)*r,t},i.prototype.translate=function(e,t){return this.tx+=e,this.ty+=t,this},i.prototype.scale=function(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this},i.prototype.rotate=function(e){var t=Math.cos(e),r=Math.sin(e),n=this.a,o=this.c,a=this.tx;return this.a=n*t-this.b*r,this.b=n*r+this.b*t,this.c=o*t-this.d*r,this.d=o*r+this.d*t,this.tx=a*t-this.ty*r,this.ty=a*r+this.ty*t,this},i.prototype.append=function(e){var t=this.a,r=this.b,n=this.c,o=this.d;return this.a=e.a*t+e.b*n,this.b=e.a*r+e.b*o,this.c=e.c*t+e.d*n,this.d=e.c*r+e.d*o,this.tx=e.tx*t+e.ty*n+this.tx,this.ty=e.tx*r+e.ty*o+this.ty,this},i.prototype.setTransform=function(e,t,r,n,o,a,s,h,l){return this.a=Math.cos(s+l)*o,this.b=Math.sin(s+l)*o,this.c=-Math.sin(s-h)*a,this.d=Math.cos(s-h)*a,this.tx=e-(r*this.a+n*this.c),this.ty=t-(r*this.b+n*this.d),this},i.prototype.prepend=function(e){var t=this.tx;if(1!==e.a||0!==e.b||0!==e.c||1!==e.d){var r=this.a,n=this.c;this.a=r*e.a+this.b*e.c,this.b=r*e.b+this.b*e.d,this.c=n*e.a+this.d*e.c,this.d=n*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this},i.prototype.decompose=function(e){var t=this.a,r=this.b,n=this.c,o=this.d,a=e.pivot,s=-Math.atan2(-n,o),h=Math.atan2(r,t),l=Math.abs(s+h);return l<1e-5||Math.abs(Ei-l)<1e-5?(e.rotation=h,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=s,e.skew.y=h),e.scale.x=Math.sqrt(t*t+r*r),e.scale.y=Math.sqrt(n*n+o*o),e.position.x=this.tx+(a.x*t+a.y*n),e.position.y=this.ty+(a.x*r+a.y*o),e},i.prototype.invert=function(){var e=this.a,t=this.b,r=this.c,n=this.d,o=this.tx,a=e*n-t*r;return this.a=n/a,this.b=-t/a,this.c=-r/a,this.d=e/a,this.tx=(r*this.ty-n*o)/a,this.ty=-(e*this.ty-t*o)/a,this},i.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},i.prototype.clone=function(){var e=new i;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},i.prototype.copyTo=function(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},i.prototype.copyFrom=function(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this},i.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(i,"IDENTITY",{get:function(){return new i},enumerable:!1,configurable:!0}),Object.defineProperty(i,"TEMP_MATRIX",{get:function(){return new i},enumerable:!1,configurable:!0}),i}(),or=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],ar=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],sr=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],hr=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],En=[],da=[],gi=Math.sign;!function(){for(var i=0;i<16;i++){var e=[];En.push(e);for(var t=0;t<16;t++)for(var r=gi(or[i]*or[t]+sr[i]*ar[t]),n=gi(ar[i]*or[t]+hr[i]*ar[t]),o=gi(or[i]*sr[t]+sr[i]*hr[t]),a=gi(ar[i]*sr[t]+hr[i]*hr[t]),s=0;s<16;s++)if(or[s]===r&&ar[s]===n&&sr[s]===o&&hr[s]===a){e.push(s);break}}for(i=0;i<16;i++){var h=new qt;h.set(or[i],ar[i],sr[i],hr[i],0,0),da.push(h)}}();var Wt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(i){return or[i]},uY:function(i){return ar[i]},vX:function(i){return sr[i]},vY:function(i){return hr[i]},inv:function(i){return 8&i?15&i:7&-i},add:function(i,e){return En[i][e]},sub:function(i,e){return En[i][Wt.inv(e)]},rotate180:function(i){return 4^i},isVertical:function(i){return 2==(3&i)},byDirection:function(i,e){return 2*Math.abs(i)<=Math.abs(e)?e>=0?Wt.S:Wt.N:2*Math.abs(e)<=Math.abs(i)?i>0?Wt.E:Wt.W:e>0?i>0?Wt.SE:Wt.SW:i>0?Wt.NE:Wt.NW},matrixAppendRotationInv:function(i,e,t,r){void 0===t&&(t=0),void 0===r&&(r=0);var n=da[Wt.inv(e)];n.tx=t,n.ty=r,i.append(n)}},pa=function(){function i(){this.worldTransform=new qt,this.localTransform=new qt,this.position=new Pr(this.onChange,this,0,0),this.scale=new Pr(this.onChange,this,1,1),this.pivot=new Pr(this.onChange,this,0,0),this.skew=new Pr(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return i.prototype.onChange=function(){this._localID++},i.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},i.prototype.toString=function(){return"[@pixi/math:Transform position=("+this.position.x+", "+this.position.y+") rotation="+this.rotation+" scale=("+this.scale.x+", "+this.scale.y+") skew=("+this.skew.x+", "+this.skew.y+") ]"},i.prototype.updateLocalTransform=function(){var e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1)},i.prototype.updateTransform=function(e){var t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID){var r=e.worldTransform,n=this.worldTransform;n.a=t.a*r.a+t.b*r.c,n.b=t.a*r.b+t.b*r.d,n.c=t.c*r.a+t.d*r.c,n.d=t.c*r.b+t.d*r.d,n.tx=t.tx*r.a+t.ty*r.c+r.tx,n.ty=t.tx*r.b+t.ty*r.d+r.ty,this._parentID=e._worldID,this._worldID++}},i.prototype.setFromMatrix=function(e){e.decompose(this),this._localID++},Object.defineProperty(i.prototype,"rotation",{get:function(){return this._rotation},set:function(e){this._rotation!==e&&(this._rotation=e,this.updateSkew())},enumerable:!1,configurable:!0}),i.IDENTITY=new i,i}();st.SORTABLE_CHILDREN=!1;var Ti=function(){function i(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return i.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},i.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},i.prototype.getRectangle=function(e){return this.minX>this.maxX||this.minY>this.maxY?It.EMPTY:((e=e||new It(0,0,1,1)).x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)},i.prototype.addPoint=function(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)},i.prototype.addPointMatrix=function(e,t){var l=e.a*t.x+e.c*t.y+e.tx,f=e.b*t.x+e.d*t.y+e.ty;this.minX=Math.min(this.minX,l),this.maxX=Math.max(this.maxX,l),this.minY=Math.min(this.minY,f),this.maxY=Math.max(this.maxY,f)},i.prototype.addQuad=function(e){var t=this.minX,r=this.minY,n=this.maxX,o=this.maxY,a=e[0],s=e[1];t=a<t?a:t,r=s<r?s:r,n=a>n?a:n,o=s>o?s:o,t=(a=e[2])<t?a:t,r=(s=e[3])<r?s:r,n=a>n?a:n,o=s>o?s:o,t=(a=e[4])<t?a:t,r=(s=e[5])<r?s:r,n=a>n?a:n,o=s>o?s:o,r=(s=e[7])<r?s:r,n=(a=e[6])>n?a:n,o=s>o?s:o,this.minX=t=a<t?a:t,this.minY=r,this.maxX=n,this.maxY=o},i.prototype.addFrame=function(e,t,r,n,o){this.addFrameMatrix(e.worldTransform,t,r,n,o)},i.prototype.addFrameMatrix=function(e,t,r,n,o){var a=e.a,s=e.b,h=e.c,l=e.d,f=e.tx,_=e.ty,c=this.minX,d=this.minY,m=this.maxX,v=this.maxY,g=a*t+h*r+f,R=s*t+l*r+_;c=g<c?g:c,d=R<d?R:d,m=g>m?g:m,v=R>v?R:v,c=(g=a*n+h*r+f)<c?g:c,d=(R=s*n+l*r+_)<d?R:d,m=g>m?g:m,v=R>v?R:v,c=(g=a*t+h*o+f)<c?g:c,d=(R=s*t+l*o+_)<d?R:d,m=g>m?g:m,v=R>v?R:v,d=(R=s*n+l*o+_)<d?R:d,m=(g=a*n+h*o+f)>m?g:m,v=R>v?R:v,this.minX=c=g<c?g:c,this.minY=d,this.maxX=m,this.maxY=v},i.prototype.addVertexData=function(e,t,r){for(var n=this.minX,o=this.minY,a=this.maxX,s=this.maxY,h=t;h<r;h+=2){var l=e[h],f=e[h+1];n=l<n?l:n,o=f<o?f:o,a=l>a?l:a,s=f>s?f:s}this.minX=n,this.minY=o,this.maxX=a,this.maxY=s},i.prototype.addVertices=function(e,t,r,n){this.addVerticesMatrix(e.worldTransform,t,r,n)},i.prototype.addVerticesMatrix=function(e,t,r,n,o,a){void 0===o&&(o=0),void 0===a&&(a=o);for(var s=e.a,h=e.b,l=e.c,f=e.d,_=e.tx,c=e.ty,d=this.minX,m=this.minY,v=this.maxX,g=this.maxY,R=r;R<n;R+=2){var C=t[R],B=t[R+1],j=s*C+l*B+_,N=f*B+h*C+c;d=Math.min(d,j-o),v=Math.max(v,j+o),m=Math.min(m,N-a),g=Math.max(g,N+a)}this.minX=d,this.minY=m,this.maxX=v,this.maxY=g},i.prototype.addBounds=function(e){var t=this.minX,r=this.minY,n=this.maxX,o=this.maxY;this.minX=e.minX<t?e.minX:t,this.minY=e.minY<r?e.minY:r,this.maxX=e.maxX>n?e.maxX:n,this.maxY=e.maxY>o?e.maxY:o},i.prototype.addBoundsMask=function(e,t){var r=e.minX>t.minX?e.minX:t.minX,n=e.minY>t.minY?e.minY:t.minY,o=e.maxX<t.maxX?e.maxX:t.maxX,a=e.maxY<t.maxY?e.maxY:t.maxY;if(r<=o&&n<=a){var s=this.minX,h=this.minY,l=this.maxX,f=this.maxY;this.minX=r<s?r:s,this.minY=n<h?n:h,this.maxX=o>l?o:l,this.maxY=a>f?a:f}},i.prototype.addBoundsMatrix=function(e,t){this.addFrameMatrix(t,e.minX,e.minY,e.maxX,e.maxY)},i.prototype.addBoundsArea=function(e,t){var r=e.minX>t.x?e.minX:t.x,n=e.minY>t.y?e.minY:t.y,o=e.maxX<t.x+t.width?e.maxX:t.x+t.width,a=e.maxY<t.y+t.height?e.maxY:t.y+t.height;if(r<=o&&n<=a){var s=this.minX,h=this.minY,l=this.maxX,f=this.maxY;this.minX=r<s?r:s,this.minY=n<h?n:h,this.maxX=o>l?o:l,this.maxY=a>f?a:f}},i.prototype.pad=function(e,t){void 0===e&&(e=0),void 0===t&&(t=e),this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t)},i.prototype.addFramePad=function(e,t,r,n,o,a){t-=a,r+=o,n+=a,this.minX=this.minX<(e-=o)?this.minX:e,this.maxX=this.maxX>r?this.maxX:r,this.minY=this.minY<t?this.minY:t,this.maxY=this.maxY>n?this.maxY:n},i}(),mn=function(i,e){return(mn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])})(i,e)};function gn(i,e){function t(){this.constructor=i}mn(i,e),i.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}var Qt=function(i){function e(){var t=i.call(this)||this;return t.tempDisplayObjectParent=null,t.transform=new pa,t.alpha=1,t.visible=!0,t.renderable=!0,t.parent=null,t.worldAlpha=1,t._lastSortedIndex=0,t._zIndex=0,t.filterArea=null,t.filters=null,t._enabledFilters=null,t._bounds=new Ti,t._localBounds=null,t._boundsID=0,t._boundsRect=null,t._localBoundsRect=null,t._mask=null,t._maskRefCount=0,t._destroyed=!1,t.isSprite=!1,t.isMask=!1,t}return gn(e,i),e.mixin=function(t){for(var r=Object.keys(t),n=0;n<r.length;++n){var o=r[n];Object.defineProperty(e.prototype,o,Object.getOwnPropertyDescriptor(t,o))}},Object.defineProperty(e.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},e.prototype.getBounds=function(t,r){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),r||(this._boundsRect||(this._boundsRect=new It),r=this._boundsRect),this._bounds.getRectangle(r)},e.prototype.getLocalBounds=function(t){t||(this._localBoundsRect||(this._localBoundsRect=new It),t=this._localBoundsRect),this._localBounds||(this._localBounds=new Ti);var r=this.transform,n=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var o=this._bounds,a=this._boundsID;this._bounds=this._localBounds;var s=this.getBounds(!1,t);return this.parent=n,this.transform=r,this._bounds=o,this._bounds.updateID+=this._boundsID-a,s},e.prototype.toGlobal=function(t,r,n){return void 0===n&&(n=!1),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,r)},e.prototype.toLocal=function(t,r,n,o){return r&&(t=r.toGlobal(t,n,o)),o||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,n)},e.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},e.prototype.setTransform=function(t,r,n,o,a,s,h,l,f){return void 0===t&&(t=0),void 0===r&&(r=0),void 0===n&&(n=1),void 0===o&&(o=1),void 0===a&&(a=0),void 0===s&&(s=0),void 0===h&&(h=0),void 0===l&&(l=0),void 0===f&&(f=0),this.position.x=t,this.position.y=r,this.scale.x=n||1,this.scale.y=o||1,this.rotation=a,this.skew.x=s,this.skew.y=h,this.pivot.x=l,this.pivot.y=f,this},e.prototype.destroy=function(t){this.parent&&this.parent.removeChild(this),this.emit("destroyed"),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Object.defineProperty(e.prototype,"_tempDisplayObjectParent",{get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new va),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),e.prototype.enableTempParent=function(){var t=this.parent;return this.parent=this._tempDisplayObjectParent,t},e.prototype.disableTempParent=function(t){this.parent=t},Object.defineProperty(e.prototype,"x",{get:function(){return this.position.x},set:function(t){this.transform.position.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.position.y},set:function(t){this.transform.position.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.transform.position},set:function(t){this.transform.position.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this.transform.scale},set:function(t){this.transform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"skew",{get:function(){return this.transform.skew},set:function(t){this.transform.skew.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.transform.rotation*Hf},set:function(t){this.transform.rotation=t*Xf},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mask",{get:function(){return this._mask},set:function(t){var r;this._mask!==t&&(this._mask&&((r=this._mask.maskObject||this._mask)._maskRefCount--,0===r._maskRefCount&&(r.renderable=!0,r.isMask=!1)),this._mask=t,this._mask&&(0===(r=this._mask.maskObject||this._mask)._maskRefCount&&(r.renderable=!1,r.isMask=!0),r._maskRefCount++))},enumerable:!1,configurable:!0}),e}(Xr()),va=function(i){function e(){var t=null!==i&&i.apply(this,arguments)||this;return t.sortDirty=null,t}return gn(e,i),e}(Qt);Qt.prototype.displayObjectUpdateTransform=Qt.prototype.updateTransform;var Si=(()=>{return(i=Si||(Si={}))[i.NONE=0]="NONE",i[i.SCISSOR=1]="SCISSOR",i[i.STENCIL=2]="STENCIL",i[i.SPRITE=3]="SPRITE",Si;var i})();function zf(i,e){return i.zIndex===e.zIndex?i._lastSortedIndex-e._lastSortedIndex:i.zIndex-e.zIndex}var fe=function(i){function e(){var t=i.call(this)||this;return t.children=[],t.sortableChildren=st.SORTABLE_CHILDREN,t.sortDirty=!1,t}return gn(e,i),e.prototype.onChildrenChange=function(t){},e.prototype.addChild=function(){for(var t=arguments,r=[],n=0;n<arguments.length;n++)r[n]=t[n];if(r.length>1)for(var o=0;o<r.length;o++)this.addChild(r[o]);else{var a=r[0];a.parent&&a.parent.removeChild(a),a.parent=this,this.sortDirty=!0,a.transform._parentID=-1,this.children.push(a),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",a,this,this.children.length-1),a.emit("added",this)}return r[0]},e.prototype.addChildAt=function(t,r){if(r<0||r>this.children.length)throw new Error(t+"addChildAt: The index "+r+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(r,0,t),this._boundsID++,this.onChildrenChange(r),t.emit("added",this),this.emit("childAdded",t,this,r),t},e.prototype.swapChildren=function(t,r){if(t!==r){var n=this.getChildIndex(t),o=this.getChildIndex(r);this.children[n]=r,this.children[o]=t,this.onChildrenChange(n<o?n:o)}},e.prototype.getChildIndex=function(t){var r=this.children.indexOf(t);if(-1===r)throw new Error("The supplied DisplayObject must be a child of the caller");return r},e.prototype.setChildIndex=function(t,r){if(r<0||r>=this.children.length)throw new Error("The index "+r+" supplied is out of bounds "+this.children.length);var n=this.getChildIndex(t);Or(this.children,n,1),this.children.splice(r,0,t),this.onChildrenChange(r)},e.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},e.prototype.removeChild=function(){for(var t=arguments,r=[],n=0;n<arguments.length;n++)r[n]=t[n];if(r.length>1)for(var o=0;o<r.length;o++)this.removeChild(r[o]);else{var a=r[0],s=this.children.indexOf(a);if(-1===s)return null;a.parent=null,a.transform._parentID=-1,Or(this.children,s,1),this._boundsID++,this.onChildrenChange(s),a.emit("removed",this),this.emit("childRemoved",a,this,s)}return r[0]},e.prototype.removeChildAt=function(t){var r=this.getChildAt(t);return r.parent=null,r.transform._parentID=-1,Or(this.children,t,1),this._boundsID++,this.onChildrenChange(t),r.emit("removed",this),this.emit("childRemoved",r,this,t),r},e.prototype.removeChildren=function(t,r){void 0===t&&(t=0),void 0===r&&(r=this.children.length);var s,a=r-t;if(a>0&&a<=r){s=this.children.splice(t,a);for(var h=0;h<s.length;++h)s[h].parent=null,s[h].transform&&(s[h].transform._parentID=-1);for(this._boundsID++,this.onChildrenChange(t),h=0;h<s.length;++h)s[h].emit("removed",this),this.emit("childRemoved",s[h],this,h);return s}if(0===a&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.sortChildren=function(){for(var t=!1,r=0,n=this.children.length;r<n;++r){var o=this.children[r];o._lastSortedIndex=r,!t&&0!==o.zIndex&&(t=!0)}t&&this.children.length>1&&this.children.sort(zf),this.sortDirty=!1},e.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,r=this.children.length;t<r;++t){var n=this.children[t];n.visible&&n.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var r=this.children[t];if(r.visible&&r.renderable)if(r.calculateBounds(),r._mask){var n=r._mask.maskObject||r._mask;n.calculateBounds(),this._bounds.addBoundsMask(r._bounds,n._bounds)}else r.filterArea?this._bounds.addBoundsArea(r._bounds,r.filterArea):this._bounds.addBounds(r._bounds)}this._bounds.updateID=this._boundsID},e.prototype.getLocalBounds=function(t,r){void 0===r&&(r=!1);var n=i.prototype.getLocalBounds.call(this,t);if(!r)for(var o=0,a=this.children.length;o<a;++o){var s=this.children[o];s.visible&&s.updateTransform()}return n},e.prototype._calculateBounds=function(){},e.prototype.render=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else{this._render(t);for(var r=0,n=this.children.length;r<n;++r)this.children[r].render(t)}},e.prototype.renderAdvanced=function(t){var r=this.filters,n=this._mask;if(r){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var o=0;o<r.length;o++)r[o].enabled&&this._enabledFilters.push(r[o])}var a=r&&this._enabledFilters&&this._enabledFilters.length||n&&(!n.isMaskData||n.enabled&&(n.autoDetect||n.type!==Si.NONE));a&&t.batch.flush(),r&&this._enabledFilters&&this._enabledFilters.length&&t.filter.push(this,this._enabledFilters),n&&t.mask.push(this,this._mask),this._render(t),o=0;for(var s=this.children.length;o<s;o++)this.children[o].render(t);a&&t.batch.flush(),n&&t.mask.pop(this),r&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},e.prototype._render=function(t){},e.prototype.destroy=function(t){i.prototype.destroy.call(this),this.sortDirty=!1;var r="boolean"==typeof t?t:t&&t.children,n=this.removeChildren(0,this.children.length);if(r)for(var o=0;o<n.length;++o)n[o].destroy(t)},Object.defineProperty(e.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var r=this.getLocalBounds().width;this.scale.x=0!==r?t/r:1,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var r=this.getLocalBounds().height;this.scale.y=0!==r?t/r:1,this._height=t},enumerable:!1,configurable:!0}),e}(Qt);fe.prototype.containerUpdateTransform=fe.prototype.updateTransform,Qt.mixin({accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1});var rc=function(){function i(e){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(Me.tablet||Me.phone)&&this.createTouchHook();var t=document.createElement("div");t.style.width="100px",t.style.height="100px",t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.zIndex=2..toString(),this.div=t,this.renderer=e,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),self.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(i.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),i.prototype.createTouchHook=function(){var e=this,t=document.createElement("button");t.style.width="1px",t.style.height="1px",t.style.position="absolute",t.style.top="-1000px",t.style.left="-1000px",t.style.zIndex=2..toString(),t.style.backgroundColor="#FF0000",t.title="select to enable accessibility for this content",t.addEventListener("focus",function(){e._isMobileAccessibility=!0,e.activate(),e.destroyTouchHook()}),document.body.appendChild(t),this._hookDiv=t},i.prototype.destroyTouchHook=function(){!this._hookDiv||(document.body.removeChild(this._hookDiv),this._hookDiv=null)},i.prototype.activate=function(){var e;this._isActive||(this._isActive=!0,self.document.addEventListener("mousemove",this._onMouseMove,!0),self.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),null===(e=this.renderer.view.parentNode)||void 0===e||e.appendChild(this.div))},i.prototype.deactivate=function(){var e;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,self.document.removeEventListener("mousemove",this._onMouseMove,!0),self.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),null===(e=this.div.parentNode)||void 0===e||e.removeChild(this.div))},i.prototype.updateAccessibleObjects=function(e){if(e.visible&&e.accessibleChildren){e.accessible&&e.interactive&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);var t=e.children;if(t)for(var r=0;r<t.length;r++)this.updateAccessibleObjects(t[r])}},i.prototype.update=function(){var e=performance.now();if(!(Me.android.device&&e<this.androidUpdateCount)&&(this.androidUpdateCount=e+this.androidUpdateFrequency,this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var t=this.renderer.view.getBoundingClientRect(),n=t.top,s=this.renderer,h=s.width,l=s.height,f=s.resolution,_=t.width/h*f,c=t.height/l*f,d=this.div;d.style.left=t.left+"px",d.style.top=n+"px",d.style.width=h+"px",d.style.height=l+"px";for(var m=0;m<this.children.length;m++){var v=this.children[m];if(v.renderId!==this.renderId)v._accessibleActive=!1,Or(this.children,m,1),this.div.removeChild(v._accessibleDiv),this.pool.push(v._accessibleDiv),v._accessibleDiv=null,m--;else{d=v._accessibleDiv;var g=v.hitArea,R=v.worldTransform;v.hitArea?(d.style.left=(R.tx+g.x*R.a)*_+"px",d.style.top=(R.ty+g.y*R.d)*c+"px",d.style.width=g.width*R.a*_+"px",d.style.height=g.height*R.d*c+"px"):(g=v.getBounds(),this.capHitArea(g),d.style.left=g.x*_+"px",d.style.top=g.y*c+"px",d.style.width=g.width*_+"px",d.style.height=g.height*c+"px",d.title!==v.accessibleTitle&&null!==v.accessibleTitle&&(d.title=v.accessibleTitle),d.getAttribute("aria-label")!==v.accessibleHint&&null!==v.accessibleHint&&d.setAttribute("aria-label",v.accessibleHint)),(v.accessibleTitle!==d.title||v.tabIndex!==d.tabIndex)&&(d.title=v.accessibleTitle,d.tabIndex=v.tabIndex,this.debug&&this.updateDebugHTML(d))}}this.renderId++}},i.prototype.updateDebugHTML=function(e){e.innerHTML="type: "+e.type+"</br> title : "+e.title+"</br> tabIndex: "+e.tabIndex},i.prototype.capHitArea=function(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);var t=this.renderer,r=t.width,n=t.height;e.x+e.width>r&&(e.width=r-e.x),e.y+e.height>n&&(e.height=n-e.y)},i.prototype.addChild=function(e){var t=this.pool.pop();t||((t=document.createElement("button")).style.width="100px",t.style.height="100px",t.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=2..toString(),t.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?t.setAttribute("aria-live","off"):t.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?t.setAttribute("aria-relevant","additions"):t.setAttribute("aria-relevant","text"),t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),t.style.pointerEvents=e.accessiblePointerEvents,t.type=e.accessibleType,e.accessibleTitle&&null!==e.accessibleTitle?t.title=e.accessibleTitle:(!e.accessibleHint||null===e.accessibleHint)&&(t.title="displayObject "+e.tabIndex),e.accessibleHint&&null!==e.accessibleHint&&t.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(t),e._accessibleActive=!0,e._accessibleDiv=t,t.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex},i.prototype._onClick=function(e){var t=this.renderer.plugins.interaction,r=e.target.displayObject,n=t.eventData;t.dispatchEvent(r,"click",n),t.dispatchEvent(r,"pointertap",n),t.dispatchEvent(r,"tap",n)},i.prototype._onFocus=function(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive");var t=this.renderer.plugins.interaction;t.dispatchEvent(e.target.displayObject,"mouseover",t.eventData)},i.prototype._onFocusOut=function(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite");var t=this.renderer.plugins.interaction;t.dispatchEvent(e.target.displayObject,"mouseout",t.eventData)},i.prototype._onKeyDown=function(e){9===e.keyCode&&this.activate()},i.prototype._onMouseMove=function(e){0===e.movementX&&0===e.movementY||this.deactivate()},i.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,self.document.removeEventListener("mousemove",this._onMouseMove,!0),self.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},i}();st.TARGET_FPMS=.06;var Le=(()=>{return(i=Le||(Le={}))[i.INTERACTION=50]="INTERACTION",i[i.HIGH=25]="HIGH",i[i.NORMAL=0]="NORMAL",i[i.LOW=-25]="LOW",i[i.UTILITY=-50]="UTILITY",Le;var i})(),Tn=function(){function i(e,t,r,n){void 0===t&&(t=null),void 0===r&&(r=0),void 0===n&&(n=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=t,this.priority=r,this.once=n}return i.prototype.match=function(e,t){return void 0===t&&(t=null),this.fn===e&&this.context===t},i.prototype.emit=function(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));var t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t},i.prototype.connect=function(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this},i.prototype.destroy=function(e){void 0===e&&(e=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var t=this.next;return this.next=e?null:t,this.previous=null,t},i}(),ne=function(){function i(){var e=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Tn(null,null,1/0),this.deltaMS=1/st.TARGET_FPMS,this.elapsedMS=1/st.TARGET_FPMS,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&null===e._requestId&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}return i.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},i.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},i.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},i.prototype.add=function(e,t,r){return void 0===r&&(r=Le.NORMAL),this._addListener(new Tn(e,t,r))},i.prototype.addOnce=function(e,t,r){return void 0===r&&(r=Le.NORMAL),this._addListener(new Tn(e,t,r,!0))},i.prototype._addListener=function(e){var t=this._head.next,r=this._head;if(t){for(;t;){if(e.priority>t.priority){e.connect(r);break}r=t,t=t.next}e.previous||e.connect(r)}else e.connect(r);return this._startIfPossible(),this},i.prototype.remove=function(e,t){for(var r=this._head.next;r;)r=r.match(e,t)?r.destroy():r.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(i.prototype,"count",{get:function(){if(!this._head)return 0;for(var e=0,t=this._head;t=t.next;)e++;return e},enumerable:!1,configurable:!0}),i.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},i.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},i.prototype.destroy=function(){if(!this._protected){this.stop();for(var e=this._head.next;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}},i.prototype.update=function(e){var t;if(void 0===e&&(e=performance.now()),e>this.lastTime){if((t=this.elapsedMS=e-this.lastTime)>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){var r=e-this._lastFrame|0;if(r<this._minElapsedMS)return;this._lastFrame=e-r%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*st.TARGET_FPMS;for(var n=this._head,o=n.next;o;)o=o.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e},Object.defineProperty(i.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(e){var t=Math.min(this.maxFPS,e),r=Math.min(Math.max(0,t)/1e3,st.TARGET_FPMS);this._maxElapsedMS=1/r},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(e){if(0===e)this._minElapsedMS=0;else{var t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(i,"shared",{get:function(){if(!i._shared){var e=i._shared=new i;e.autoStart=!0,e._protected=!0}return i._shared},enumerable:!1,configurable:!0}),Object.defineProperty(i,"system",{get:function(){if(!i._system){var e=i._system=new i;e.autoStart=!0,e._protected=!0}return i._system},enumerable:!1,configurable:!0}),i}(),ic=function(){function i(){}return i.init=function(e){var t=this;e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set:function(r){this._ticker&&this._ticker.remove(this.render,this),this._ticker=r,r&&r.add(this.render,this,Le.LOW)},get:function(){return this._ticker}}),this.stop=function(){t._ticker.stop()},this.start=function(){t._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?ne.shared:new ne,e.autoStart&&this.start()},i.destroy=function(){if(this._ticker){var e=this._ticker;this.ticker=null,e.destroy()}},i}(),ga=function(){function i(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new Kt,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(i.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),i.prototype.getLocalPosition=function(e,t,r){return e.worldTransform.applyInverse(r||this.global,t)},i.prototype.copyEvent=function(e){"isPrimary"in e&&e.isPrimary&&(this.isPrimary=!0),this.button="button"in e&&e.button;var t="buttons"in e&&e.buttons;this.buttons=Number.isInteger(t)?t:"which"in e&&e.which,this.width="width"in e&&e.width,this.height="height"in e&&e.height,this.tiltX="tiltX"in e&&e.tiltX,this.tiltY="tiltY"in e&&e.tiltY,this.pointerType="pointerType"in e&&e.pointerType,this.pressure="pressure"in e&&e.pressure,this.rotationAngle="rotationAngle"in e&&e.rotationAngle,this.twist="twist"in e&&e.twist||0,this.tangentialPressure="tangentialPressure"in e&&e.tangentialPressure||0},i.prototype.reset=function(){this.isPrimary=!1},i}(),Sn=function(i,e){return(Sn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])})(i,e)},oc=function(){function i(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return i.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},i.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},i}(),yn=function(){function i(e){this._pointerId=e,this._flags=i.FLAGS.NONE}return i.prototype._doSet=function(e,t){this._flags=t?this._flags|e:this._flags&~e},Object.defineProperty(i.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"flags",{get:function(){return this._flags},set:function(e){this._flags=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"none",{get:function(){return this._flags===i.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"over",{get:function(){return 0!=(this._flags&i.FLAGS.OVER)},set:function(e){this._doSet(i.FLAGS.OVER,e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rightDown",{get:function(){return 0!=(this._flags&i.FLAGS.RIGHT_DOWN)},set:function(e){this._doSet(i.FLAGS.RIGHT_DOWN,e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"leftDown",{get:function(){return 0!=(this._flags&i.FLAGS.LEFT_DOWN)},set:function(e){this._doSet(i.FLAGS.LEFT_DOWN,e)},enumerable:!1,configurable:!0}),i.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4}),i}(),ac=function(){function i(){this._tempPoint=new Kt}return i.prototype.recursiveFindHit=function(e,t,r,n,o){if(!t||!t.visible)return!1;var a=e.data.global,s=!1,h=o=t.interactive||o,l=!0;if(t.hitArea?(n&&(t.worldTransform.applyInverse(a,this._tempPoint),t.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?s=!0:(n=!1,l=!1)),h=!1):t._mask&&n&&(t._mask.containsPoint&&t._mask.containsPoint(a)||(n=!1)),l&&t.interactiveChildren&&t.children)for(var f=t.children,_=f.length-1;_>=0;_--){var c=f[_],d=this.recursiveFindHit(e,c,r,n,h);if(d){if(!c.parent)continue;h=!1,d&&(e.target&&(n=!1),s=!0)}}return o&&(n&&!e.target&&!t.hitArea&&t.containsPoint&&t.containsPoint(a)&&(s=!0),t.interactive&&(s&&!e.target&&(e.target=t),r&&r(e,t,!!s))),s},i.prototype.findHit=function(e,t,r,n){this.recursiveFindHit(e,t,r,n,!1)},i}(),sc={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(i){i?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};Qt.mixin(sc);var Ai={target:null,data:{global:null}},hc=function(i){function e(t,r){var n=i.call(this)||this;return r=r||{},n.renderer=t,n.autoPreventDefault=void 0===r.autoPreventDefault||r.autoPreventDefault,n.interactionFrequency=r.interactionFrequency||10,n.mouse=new ga,n.mouse.identifier=1,n.mouse.global.set(-999999),n.activeInteractionData={},n.activeInteractionData[1]=n.mouse,n.interactionDataPool=[],n.eventData=new oc,n.interactionDOMElement=null,n.moveWhenInside=!1,n.eventsAdded=!1,n.tickerAdded=!1,n.mouseOverRenderer=!("PointerEvent"in self),n.supportsTouchEvents="ontouchstart"in self,n.supportsPointerEvents=!!self.PointerEvent,n.onPointerUp=n.onPointerUp.bind(n),n.processPointerUp=n.processPointerUp.bind(n),n.onPointerCancel=n.onPointerCancel.bind(n),n.processPointerCancel=n.processPointerCancel.bind(n),n.onPointerDown=n.onPointerDown.bind(n),n.processPointerDown=n.processPointerDown.bind(n),n.onPointerMove=n.onPointerMove.bind(n),n.processPointerMove=n.processPointerMove.bind(n),n.onPointerOut=n.onPointerOut.bind(n),n.processPointerOverOut=n.processPointerOverOut.bind(n),n.onPointerOver=n.onPointerOver.bind(n),n.cursorStyles={default:"inherit",pointer:"pointer"},n.currentCursorMode=null,n.cursor=null,n.resolution=1,n.delayedEvents=[],n.search=new ac,n._tempDisplayObject=new va,n._eventListenerOptions={capture:!0,passive:!1},n._useSystemTicker=void 0===r.useSystemTicker||r.useSystemTicker,n.setTargetElement(n.renderer.view,n.renderer.resolution),n}return function(i,e){function t(){this.constructor=i}Sn(i,e),i.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}(e,i),Object.defineProperty(e.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(t){this._useSystemTicker=t,t?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),e.prototype.hitTest=function(t,r){return Ai.target=null,Ai.data.global=t,r||(r=this.lastObjectRendered),this.processInteractive(Ai,r,null,!0),Ai.target},e.prototype.setTargetElement=function(t,r){void 0===r&&(r=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=t,this.resolution=r,this.addEvents(),this.addTickerListener()},e.prototype.addTickerListener=function(){this.tickerAdded||!this.interactionDOMElement||!this._useSystemTicker||(ne.system.add(this.tickerUpdate,this,Le.INTERACTION),this.tickerAdded=!0)},e.prototype.removeTickerListener=function(){!this.tickerAdded||(ne.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},e.prototype.addEvents=function(){if(!this.eventsAdded&&this.interactionDOMElement){var t=this.interactionDOMElement.style;self.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none"),this.supportsPointerEvents?(self.document.addEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),self.addEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),self.addEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(self.document.addEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),self.addEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.eventsAdded=!0}},e.prototype.removeEvents=function(){if(this.eventsAdded&&this.interactionDOMElement){var t=this.interactionDOMElement.style;self.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(self.document.removeEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),self.removeEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),self.removeEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(self.document.removeEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),self.removeEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.interactionDOMElement=null,this.eventsAdded=!1}},e.prototype.tickerUpdate=function(t){this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())},e.prototype.update=function(){if(this.interactionDOMElement){if(this._didMove)return void(this._didMove=!1);for(var t in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(t)){var r=this.activeInteractionData[t];if(r.originalEvent&&"touch"!==r.pointerType){var n=this.configureInteractionEventForDOMEvent(this.eventData,r.originalEvent,r);this.processInteractive(n,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},e.prototype.setCursorMode=function(t){t=t||"default";var r=!0;if(self.OffscreenCanvas&&this.interactionDOMElement instanceof OffscreenCanvas&&(r=!1),this.currentCursorMode!==t){this.currentCursorMode=t;var n=this.cursorStyles[t];if(n)switch(typeof n){case"string":r&&(this.interactionDOMElement.style.cursor=n);break;case"function":n(t);break;case"object":r&&Object.assign(this.interactionDOMElement.style,n)}else r&&"string"==typeof t&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.interactionDOMElement.style.cursor=t)}},e.prototype.dispatchEvent=function(t,r,n){(!n.stopPropagationHint||t===n.stopsPropagatingAt)&&(n.currentTarget=t,n.type=r,t.emit(r,n),t[r]&&t[r](n))},e.prototype.delayDispatchEvent=function(t,r,n){this.delayedEvents.push({displayObject:t,eventString:r,eventData:n})},e.prototype.mapPositionToPoint=function(t,r,n){var o;o=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:this.interactionDOMElement.width,height:this.interactionDOMElement.height,left:0,top:0};var a=1/this.resolution;t.x=this.interactionDOMElement.width/o.width*(r-o.left)*a,t.y=this.interactionDOMElement.height/o.height*(n-o.top)*a},e.prototype.processInteractive=function(t,r,n,o){var a=this.search.findHit(t,r,n,o),s=this.delayedEvents;if(!s.length)return a;t.stopPropagationHint=!1;var h=s.length;this.delayedEvents=[];for(var l=0;l<h;l++){var f=s[l],_=f.displayObject,c=f.eventString,d=f.eventData;d.stopsPropagatingAt===_&&(d.stopPropagationHint=!0),this.dispatchEvent(_,c,d)}return a},e.prototype.onPointerDown=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var r=this.normalizeToPointerData(t);this.autoPreventDefault&&r[0].isNormalized&&(t.cancelable||!("cancelable"in t))&&t.preventDefault();for(var o=r.length,a=0;a<o;a++){var s=r[a],h=this.getInteractionDataForPointerId(s),l=this.configureInteractionEventForDOMEvent(this.eventData,s,h);l.data.originalEvent=t,this.processInteractive(l,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",l),"touch"===s.pointerType?this.emit("touchstart",l):"mouse"!==s.pointerType&&"pen"!==s.pointerType||this.emit(2===s.button?"rightdown":"mousedown",this.eventData)}}},e.prototype.processPointerDown=function(t,r,n){var o=t.data,a=t.data.identifier;if(n)if(r.trackedPointers[a]||(r.trackedPointers[a]=new yn(a)),this.dispatchEvent(r,"pointerdown",t),"touch"===o.pointerType)this.dispatchEvent(r,"touchstart",t);else if("mouse"===o.pointerType||"pen"===o.pointerType){var s=2===o.button;s?r.trackedPointers[a].rightDown=!0:r.trackedPointers[a].leftDown=!0,this.dispatchEvent(r,s?"rightdown":"mousedown",t)}},e.prototype.onPointerComplete=function(t,r,n){for(var o=this.normalizeToPointerData(t),a=o.length,s=t.target!==this.interactionDOMElement?"outside":"",h=0;h<a;h++){var l=o[h],f=this.getInteractionDataForPointerId(l),_=this.configureInteractionEventForDOMEvent(this.eventData,l,f);_.data.originalEvent=t,this.processInteractive(_,this.lastObjectRendered,n,r||!s),this.emit(r?"pointercancel":"pointerup"+s,_),"mouse"===l.pointerType||"pen"===l.pointerType?this.emit(2===l.button?"rightup"+s:"mouseup"+s,_):"touch"===l.pointerType&&(this.emit(r?"touchcancel":"touchend"+s,_),this.releaseInteractionDataForPointerId(l.pointerId))}},e.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!0,this.processPointerCancel)},e.prototype.processPointerCancel=function(t,r){var n=t.data,o=t.data.identifier;void 0!==r.trackedPointers[o]&&(delete r.trackedPointers[o],this.dispatchEvent(r,"pointercancel",t),"touch"===n.pointerType&&this.dispatchEvent(r,"touchcancel",t))},e.prototype.onPointerUp=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!1,this.processPointerUp)},e.prototype.processPointerUp=function(t,r,n){var o=t.data,a=t.data.identifier,s=r.trackedPointers[a],h="touch"===o.pointerType,l="mouse"===o.pointerType||"pen"===o.pointerType,f=!1;if(l){var _=2===o.button,c=yn.FLAGS,m=void 0!==s&&s.flags&(_?c.RIGHT_DOWN:c.LEFT_DOWN);n?(this.dispatchEvent(r,_?"rightup":"mouseup",t),m&&(this.dispatchEvent(r,_?"rightclick":"click",t),f=!0)):m&&this.dispatchEvent(r,_?"rightupoutside":"mouseupoutside",t),s&&(_?s.rightDown=!1:s.leftDown=!1)}n?(this.dispatchEvent(r,"pointerup",t),h&&this.dispatchEvent(r,"touchend",t),s&&((!l||f)&&this.dispatchEvent(r,"pointertap",t),h&&(this.dispatchEvent(r,"tap",t),s.over=!1))):s&&(this.dispatchEvent(r,"pointerupoutside",t),h&&this.dispatchEvent(r,"touchendoutside",t)),s&&s.none&&delete r.trackedPointers[a]},e.prototype.onPointerMove=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var r=this.normalizeToPointerData(t);("mouse"===r[0].pointerType||"pen"===r[0].pointerType)&&(this._didMove=!0,this.cursor=null);for(var n=r.length,o=0;o<n;o++){var a=r[o],s=this.getInteractionDataForPointerId(a),h=this.configureInteractionEventForDOMEvent(this.eventData,a,s);h.data.originalEvent=t,this.processInteractive(h,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",h),"touch"===a.pointerType&&this.emit("touchmove",h),("mouse"===a.pointerType||"pen"===a.pointerType)&&this.emit("mousemove",h)}"mouse"===r[0].pointerType&&this.setCursorMode(this.cursor)}},e.prototype.processPointerMove=function(t,r,n){var o=t.data,a="touch"===o.pointerType,s="mouse"===o.pointerType||"pen"===o.pointerType;s&&this.processPointerOverOut(t,r,n),(!this.moveWhenInside||n)&&(this.dispatchEvent(r,"pointermove",t),a&&this.dispatchEvent(r,"touchmove",t),s&&this.dispatchEvent(r,"mousemove",t))},e.prototype.onPointerOut=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var n=this.normalizeToPointerData(t)[0];"mouse"===n.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var o=this.getInteractionDataForPointerId(n),a=this.configureInteractionEventForDOMEvent(this.eventData,n,o);a.data.originalEvent=n,this.processInteractive(a,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",a),"mouse"===n.pointerType||"pen"===n.pointerType?this.emit("mouseout",a):this.releaseInteractionDataForPointerId(o.identifier)}},e.prototype.processPointerOverOut=function(t,r,n){var o=t.data,a=t.data.identifier,s="mouse"===o.pointerType||"pen"===o.pointerType,h=r.trackedPointers[a];n&&!h&&(h=r.trackedPointers[a]=new yn(a)),void 0!==h&&(n&&this.mouseOverRenderer?(h.over||(h.over=!0,this.delayDispatchEvent(r,"pointerover",t),s&&this.delayDispatchEvent(r,"mouseover",t)),s&&null===this.cursor&&(this.cursor=r.cursor)):h.over&&(h.over=!1,this.dispatchEvent(r,"pointerout",this.eventData),s&&this.dispatchEvent(r,"mouseout",t),h.none&&delete r.trackedPointers[a]))},e.prototype.onPointerOver=function(t){var n=this.normalizeToPointerData(t)[0],o=this.getInteractionDataForPointerId(n),a=this.configureInteractionEventForDOMEvent(this.eventData,n,o);a.data.originalEvent=n,"mouse"===n.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",a),("mouse"===n.pointerType||"pen"===n.pointerType)&&this.emit("mouseover",a)},e.prototype.getInteractionDataForPointerId=function(t){var n,r=t.pointerId;return 1===r||"mouse"===t.pointerType?n=this.mouse:this.activeInteractionData[r]?n=this.activeInteractionData[r]:((n=this.interactionDataPool.pop()||new ga).identifier=r,this.activeInteractionData[r]=n),n.copyEvent(t),n},e.prototype.releaseInteractionDataForPointerId=function(t){var r=this.activeInteractionData[t];r&&(delete this.activeInteractionData[t],r.reset(),this.interactionDataPool.push(r))},e.prototype.configureInteractionEventForDOMEvent=function(t,r,n){return t.data=n,this.mapPositionToPoint(n.global,r.clientX,r.clientY),"touch"===r.pointerType&&(r.globalX=n.global.x,r.globalY=n.global.y),n.originalEvent=r,t.reset(),t},e.prototype.normalizeToPointerData=function(t){var r=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var n=0,o=t.changedTouches.length;n<o;n++){var a=t.changedTouches[n];void 0===a.button&&(a.button=t.touches.length?1:0),void 0===a.buttons&&(a.buttons=t.touches.length?1:0),void 0===a.isPrimary&&(a.isPrimary=1===t.touches.length&&"touchstart"===t.type),void 0===a.width&&(a.width=a.radiusX||1),void 0===a.height&&(a.height=a.radiusY||1),void 0===a.tiltX&&(a.tiltX=0),void 0===a.tiltY&&(a.tiltY=0),void 0===a.pointerType&&(a.pointerType="touch"),void 0===a.pointerId&&(a.pointerId=a.identifier||0),void 0===a.pressure&&(a.pressure=a.force||.5),void 0===a.twist&&(a.twist=0),void 0===a.tangentialPressure&&(a.tangentialPressure=0),void 0===a.layerX&&(a.layerX=a.offsetX=a.clientX),void 0===a.layerY&&(a.layerY=a.offsetY=a.clientY),a.isNormalized=!0,r.push(a)}else if(!self.MouseEvent||t instanceof MouseEvent&&!(this.supportsPointerEvents&&t instanceof self.PointerEvent)){var s=t;void 0===s.isPrimary&&(s.isPrimary=!0),void 0===s.width&&(s.width=1),void 0===s.height&&(s.height=1),void 0===s.tiltX&&(s.tiltX=0),void 0===s.tiltY&&(s.tiltY=0),void 0===s.pointerType&&(s.pointerType="mouse"),void 0===s.pointerId&&(s.pointerId=1),void 0===s.pressure&&(s.pressure=.5),void 0===s.twist&&(s.twist=0),void 0===s.tangentialPressure&&(s.tangentialPressure=0),s.isNormalized=!0,r.push(s)}else r.push(t);return r},e.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},e}(Xr()),oe=function(){function i(e){this.items=[],this._name=e,this._aliasCount=0}return i.prototype.emit=function(e,t,r,n,o,a,s,h){if(arguments.length>8)throw new Error("max arguments reached");var l=this,f=l.name,_=l.items;this._aliasCount++;for(var c=0,d=_.length;c<d;c++)_[c][f](e,t,r,n,o,a,s,h);return _===this.items&&this._aliasCount--,this},i.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},i.prototype.add=function(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this},i.prototype.remove=function(e){var t=this.items.indexOf(e);return-1!==t&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this},i.prototype.contains=function(e){return-1!==this.items.indexOf(e)},i.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},i.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(i.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),i}();Object.defineProperties(oe.prototype,{dispatch:{value:oe.prototype.emit},run:{value:oe.prototype.emit}}),st.PREFER_ENV=Me.any?De.WEBGL:De.WEBGL2,st.STRICT_TEXTURE_CACHE=!1;var Pi=[];function On(i,e){if(!i)return null;var t="";if("string"==typeof i){var r=/\.(\w{3,4})(?:$|\?|#)/i.exec(i);r&&(t=r[1].toLowerCase())}for(var n=Pi.length-1;n>=0;--n){var o=Pi[n];if(o.test&&o.test(i,t))return new o(i,e)}throw new Error("Unrecognized source type to auto-detect Resource")}var An=function(i,e){return(An=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])})(i,e)};function wt(i,e){function t(){this.constructor=i}An(i,e),i.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}var Pn=function(){return Pn=Object.assign||function(e){for(var r,t=arguments,n=1,o=arguments.length;n<o;n++)for(var a in r=t[n])Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);return e},Pn.apply(this,arguments)},Rr=function(){function i(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this._width=e,this._height=t,this.destroyed=!1,this.internal=!1,this.onResize=new oe("setRealSize"),this.onUpdate=new oe("update"),this.onError=new oe("onError")}return i.prototype.bind=function(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},i.prototype.unbind=function(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)},i.prototype.resize=function(e,t){(e!==this._width||t!==this._height)&&(this._width=e,this._height=t,this.onResize.emit(e,t))},Object.defineProperty(i.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),i.prototype.update=function(){this.destroyed||this.onUpdate.emit()},i.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(i.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),i.prototype.style=function(e,t,r){return!1},i.prototype.dispose=function(){},i.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},i.test=function(e,t){return!1},i}(),jr=function(i){function e(t,r){var n=this,o=r||{},a=o.width,s=o.height;if(!a||!s)throw new Error("BufferResource width or height invalid");return(n=i.call(this,a,s)||this).data=t,n}return wt(e,i),e.prototype.upload=function(t,r,n){var o=t.gl;o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===Se.UNPACK);var a=r.realWidth,s=r.realHeight;return n.width===a&&n.height===s?o.texSubImage2D(r.target,0,0,0,a,s,r.format,n.type,this.data):(n.width=a,n.height=s,o.texImage2D(r.target,0,n.internalFormat,a,s,0,r.format,n.type,this.data)),!0},e.prototype.dispose=function(){this.data=null},e.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},e}(Rr),uc={scaleMode:Te.NEAREST,format:H.RGBA,alphaMode:Se.NPM},Mt=function(i){function e(t,r){void 0===t&&(t=null),void 0===r&&(r=null);var n=i.call(this)||this,o=(r=r||{}).alphaMode,a=r.mipmap,s=r.anisotropicLevel,h=r.scaleMode,l=r.width,f=r.height,_=r.wrapMode,c=r.format,d=r.type,m=r.target,v=r.resolution;return t&&!(t instanceof Rr)&&((t=On(t,r.resourceOptions)).internal=!0),n.resolution=v||st.RESOLUTION,n.width=Math.round((l||0)*n.resolution)/n.resolution,n.height=Math.round((f||0)*n.resolution)/n.resolution,n._mipmap=void 0!==a?a:st.MIPMAP_TEXTURES,n.anisotropicLevel=void 0!==s?s:st.ANISOTROPIC_LEVEL,n._wrapMode=_||st.WRAP_MODE,n._scaleMode=void 0!==h?h:st.SCALE_MODE,n.format=c||H.RGBA,n.type=d||dt.UNSIGNED_BYTE,n.target=m||ze.TEXTURE_2D,n.alphaMode=void 0!==o?o:Se.UNPACK,n.uid=nr(),n.touched=0,n.isPowerOfTwo=!1,n._refreshPOT(),n._glTextures={},n.dirtyId=0,n.dirtyStyleId=0,n.cacheId=null,n.valid=l>0&&f>0,n.textureCacheIds=[],n.destroyed=!1,n.resource=null,n._batchEnabled=0,n._batchLocation=0,n.parentTextureArray=null,n.setResource(t),n}return wt(e,i),Object.defineProperty(e.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mipmap",{get:function(){return this._mipmap},set:function(t){this._mipmap!==t&&(this._mipmap=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(t){this._scaleMode!==t&&(this._scaleMode=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(t){this._wrapMode!==t&&(this._wrapMode=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),e.prototype.setStyle=function(t,r){var n;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,n=!0),void 0!==r&&r!==this.mipmap&&(this.mipmap=r,n=!0),n&&this.dirtyStyleId++,this},e.prototype.setSize=function(t,r,n){return this.setRealSize(t*(n=n||this.resolution),r*n,n)},e.prototype.setRealSize=function(t,r,n){return this.resolution=n||this.resolution,this.width=Math.round(t)/this.resolution,this.height=Math.round(r)/this.resolution,this._refreshPOT(),this.update(),this},e.prototype._refreshPOT=function(){this.isPowerOfTwo=la(this.realWidth)&&la(this.realHeight)},e.prototype.setResolution=function(t){var r=this.resolution;return r===t||(this.resolution=t,this.valid&&(this.width=Math.round(this.width*r)/t,this.height=Math.round(this.height*r)/t,this.emit("update",this)),this._refreshPOT()),this},e.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},e.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},e.prototype.onError=function(t){this.emit("error",this,t)},e.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Ae[this.cacheId],delete ue[this.cacheId],this.cacheId=null),this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},e.prototype.dispose=function(){this.emit("dispose",this)},e.prototype.castToBaseTexture=function(){return this},e.from=function(t,r,n){void 0===n&&(n=st.STRICT_TEXTURE_CACHE);var o="string"==typeof t,a=null;o?a=t:(t._pixiId||(t._pixiId=(r&&r.pixiIdPrefix||"pixiid")+"_"+nr()),a=t._pixiId);var h=Ae[a];if(o&&n&&!h)throw new Error('The cacheId "'+a+'" does not exist in BaseTextureCache.');return h||((h=new e(t,r)).cacheId=a,e.addToCache(h,a)),h},e.fromBuffer=function(t,r,n,o){t=t||new Float32Array(r*n*4);var a=new jr(t,{width:r,height:n}),s=t instanceof Float32Array?dt.FLOAT:dt.UNSIGNED_BYTE;return new e(a,Object.assign(uc,o||{width:r,height:n,type:s}))},e.addToCache=function(t,r){r&&(-1===t.textureCacheIds.indexOf(r)&&t.textureCacheIds.push(r),Ae[r]&&console.warn("BaseTexture added to the cache with an id ["+r+"] that already had an entry"),Ae[r]=t)},e.removeFromCache=function(t){if("string"==typeof t){var r=Ae[t];if(r){var n=r.textureCacheIds.indexOf(t);return n>-1&&r.textureCacheIds.splice(n,1),delete Ae[t],r}}else if(t&&t.textureCacheIds){for(var o=0;o<t.textureCacheIds.length;++o)delete Ae[t.textureCacheIds[o]];return t.textureCacheIds.length=0,t}return null},e._globalBatch=0,e}(Xr()),Rn=function(i){function e(t,r){var n=this,o=r||{};(n=i.call(this,o.width,o.height)||this).items=[],n.itemDirtyIds=[];for(var h=0;h<t;h++){var l=new Mt;n.items.push(l),n.itemDirtyIds.push(-2)}return n.length=t,n._load=null,n.baseTexture=null,n}return wt(e,i),e.prototype.initFromArray=function(t,r){for(var n=0;n<this.length;n++)!t[n]||(t[n].castToBaseTexture?this.addBaseTextureAt(t[n].castToBaseTexture(),n):this.addResourceAt(t[n]instanceof Rr?t[n]:On(t[n],r),n))},e.prototype.dispose=function(){for(var t=0,r=this.length;t<r;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},e.prototype.addResourceAt=function(t,r){if(!this.items[r])throw new Error("Index "+r+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[r].setResource(t),this},e.prototype.bind=function(t){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");i.prototype.bind.call(this,t);for(var r=0;r<this.length;r++)this.items[r].parentTextureArray=t,this.items[r].on("update",t.update,t)},e.prototype.unbind=function(t){i.prototype.unbind.call(this,t);for(var r=0;r<this.length;r++)this.items[r].parentTextureArray=null,this.items[r].off("update",t.update,t)},e.prototype.load=function(){var t=this;if(this._load)return this._load;var n=this.items.map(function(o){return o.resource}).filter(function(o){return o}).map(function(o){return o.load()});return this._load=Promise.all(n).then(function(){var o=t.items[0];return t.resize(o.realWidth,o.realHeight),Promise.resolve(t)}),this._load},e}(Rr),Ta=function(i){function e(t,r){var h,l,n=this,o=r||{},a=o.width,s=o.height;return Array.isArray(t)?(h=t,l=t.length):l=t,n=i.call(this,l,{width:a,height:s})||this,h&&n.initFromArray(h,r),n}return wt(e,i),e.prototype.addBaseTextureAt=function(t,r){if(!t.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(t.resource,r),this},e.prototype.bind=function(t){i.prototype.bind.call(this,t),t.target=ze.TEXTURE_2D_ARRAY},e.prototype.upload=function(t,r,n){var o=this,a=o.length,s=o.itemDirtyIds,h=o.items,l=t.gl;n.dirtyId<0&&l.texImage3D(l.TEXTURE_2D_ARRAY,0,n.internalFormat,this._width,this._height,a,0,r.format,n.type,null);for(var f=0;f<a;f++){var _=h[f];s[f]<_.dirtyId&&(s[f]=_.dirtyId,_.valid&&l.texSubImage3D(l.TEXTURE_2D_ARRAY,0,0,0,f,_.resource.width,_.resource.height,1,r.format,n.type,_.resource.source))}return!0},e}(Rn),Ye=function(i){function e(t){var r=this;return(r=i.call(this,t.naturalWidth||t.videoWidth||t.width,t.naturalHeight||t.videoHeight||t.height)||this).source=t,r.noSubImage=!1,r}return wt(e,i),e.crossOrigin=function(t,r,n){void 0===n&&0!==r.indexOf("data:")?t.crossOrigin=function(i,e){if(void 0===e&&(e=self.location),0===i.indexOf("data:"))return"";e=e||self.location,pi||(pi=document.createElement("a")),pi.href=i;var t=Sr.parse(pi.href);return t.hostname!==e.hostname||(t.port||""!==e.port)&&t.port!==e.port||t.protocol!==e.protocol?"anonymous":""}(r):!1!==n&&(t.crossOrigin="string"==typeof n?n:"anonymous")},e.prototype.upload=function(t,r,n,o){var a=t.gl,s=r.realWidth,h=r.realHeight;return o=o||this.source,a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===Se.UNPACK),this.noSubImage||r.target!==a.TEXTURE_2D||n.width!==s||n.height!==h?(n.width=s,n.height=h,a.texImage2D(r.target,0,n.internalFormat,r.format,n.type,o)):a.texSubImage2D(a.TEXTURE_2D,0,0,0,r.format,n.type,o),!0},e.prototype.update=function(){if(!this.destroyed){var t=this.source;this.resize(t.naturalWidth||t.videoWidth||t.width,t.naturalHeight||t.videoHeight||t.height),i.prototype.update.call(this)}},e.prototype.dispose=function(){this.source=null},e}(Rr),bn=function(i){function e(t){return i.call(this,t)||this}return wt(e,i),e.test=function(t){var r=self.OffscreenCanvas;return!!(r&&t instanceof r)||self.HTMLCanvasElement&&t instanceof HTMLCanvasElement},e}(Ye),Sa=function(i){function e(t,r){var n=this,o=r||{},a=o.width,s=o.height,h=o.autoLoad,l=o.linkBaseTexture;if(t&&t.length!==e.SIDES)throw new Error("Invalid length. Got "+t.length+", expected 6");n=i.call(this,6,{width:a,height:s})||this;for(var f=0;f<e.SIDES;f++)n.items[f].target=ze.TEXTURE_CUBE_MAP_POSITIVE_X+f;return n.linkBaseTexture=!1!==l,t&&n.initFromArray(t,r),!1!==h&&n.load(),n}return wt(e,i),e.prototype.bind=function(t){i.prototype.bind.call(this,t),t.target=ze.TEXTURE_CUBE_MAP},e.prototype.addBaseTextureAt=function(t,r,n){if(void 0===n&&(n=this.linkBaseTexture),!this.items[r])throw new Error("Index "+r+" is out of bounds");if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0){if(!t.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(t.resource,r)}else t.target=ze.TEXTURE_CUBE_MAP_POSITIVE_X+r,t.parentTextureArray=this.baseTexture,this.items[r]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[r]=t,this},e.prototype.upload=function(t,r,n){for(var o=this.itemDirtyIds,a=0;a<e.SIDES;a++){var s=this.items[a];o[a]<s.dirtyId&&(s.valid&&s.resource?(s.resource.upload(t,s,n),o[a]=s.dirtyId):o[a]<-1&&(t.gl.texImage2D(s.target,0,n.internalFormat,r.realWidth,r.realHeight,0,r.format,n.type,null),o[a]=-1))}return!0},e.test=function(t){return Array.isArray(t)&&t.length===e.SIDES},e.SIDES=6,e}(Rn),xn=function(i){function e(t,r){var n=this;if(r=r||{},!(t instanceof HTMLImageElement)){var o=new Image;Ye.crossOrigin(o,t,r.crossorigin),o.src=t,t=o}return n=i.call(this,t)||this,!t.complete&&!!n._width&&!!n._height&&(n._width=0,n._height=0),n.url=t.src,n._process=null,n.preserveBitmap=!1,n.createBitmap=(void 0!==r.createBitmap?r.createBitmap:st.CREATE_IMAGE_BITMAP)&&!!self.createImageBitmap,n.alphaMode="number"==typeof r.alphaMode?r.alphaMode:null,n.bitmap=null,n._load=null,!1!==r.autoLoad&&n.load(),n}return wt(e,i),e.prototype.load=function(t){var r=this;return this._load||(void 0!==t&&(this.createBitmap=t),this._load=new Promise(function(n,o){var a=r.source;r.url=a.src;var s=function(){r.destroyed||(a.onload=null,a.onerror=null,r.resize(a.width,a.height),r._load=null,n(r.createBitmap?r.process():r))};a.complete&&a.src?s():(a.onload=s,a.onerror=function(h){o(h),r.onError.emit(h)})})),this._load},e.prototype.process=function(){var t=this,r=this.source;if(null!==this._process)return this._process;if(null!==this.bitmap||!self.createImageBitmap)return Promise.resolve(this);var n=self.createImageBitmap;return this._process=fetch(r.src,{mode:r.crossOrigin&&"anonymous"!==r.crossOrigin?"no-cors":"cors"}).then(function(a){return a.blob()}).then(function(a){return n(a,0,0,r.width,r.height,{premultiplyAlpha:t.alphaMode===Se.UNPACK?"premultiply":"none"})}).then(function(a){return t.destroyed?Promise.reject():(t.bitmap=a,t.update(),t._process=null,Promise.resolve(t))}),this._process},e.prototype.upload=function(t,r,n){if("number"==typeof this.alphaMode&&(r.alphaMode=this.alphaMode),!this.createBitmap)return i.prototype.upload.call(this,t,r,n);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(i.prototype.upload.call(this,t,r,n,this.bitmap),!this.preserveBitmap){var o=!0,a=r._glTextures;for(var s in a){var h=a[s];if(h!==n&&h.dirtyId!==r.dirtyId){o=!1;break}}o&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},e.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,i.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},e.test=function(t){return"string"==typeof t||t instanceof HTMLImageElement},e}(Ye),ya=function(i){function e(t,r){var n=this;return r=r||{},(n=i.call(this,document.createElement("canvas"))||this)._width=0,n._height=0,n.svg=t,n.scale=r.scale||1,n._overrideWidth=r.width,n._overrideHeight=r.height,n._resolve=null,n._crossorigin=r.crossorigin,n._load=null,!1!==r.autoLoad&&n.load(),n}return wt(e,i),e.prototype.load=function(){var t=this;return this._load||(this._load=new Promise(function(r){if(t._resolve=function(){t.resize(t.source.width,t.source.height),r(t)},e.SVG_XML.test(t.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");t.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(t.svg)))}t._loadSvg()})),this._load},e.prototype._loadSvg=function(){var t=this,r=new Image;Ye.crossOrigin(r,this.svg,this._crossorigin),r.src=this.svg,r.onerror=function(n){!t._resolve||(r.onerror=null,t.onError.emit(n))},r.onload=function(){if(t._resolve){var n=r.width,o=r.height;if(!n||!o)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var a=n*t.scale,s=o*t.scale;(t._overrideWidth||t._overrideHeight)&&(a=t._overrideWidth||t._overrideHeight/o*n,s=t._overrideHeight||t._overrideWidth/n*o),a=Math.round(a),s=Math.round(s);var h=t.source;h.width=a,h.height=s,h._pixiId="canvas_"+nr(),h.getContext("2d").drawImage(r,0,0,n,o,0,0,a,s),t._resolve(),t._resolve=null}}},e.getSize=function(t){var r=e.SVG_SIZE.exec(t),n={};return r&&(n[r[1]]=Math.round(parseFloat(r[3])),n[r[5]]=Math.round(parseFloat(r[7]))),n},e.prototype.dispose=function(){i.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},e.test=function(t,r){return"svg"===r||"string"==typeof t&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(t)||"string"==typeof t&&e.SVG_XML.test(t)},e.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,e.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,e}(Ye),Oa=function(i){function e(t,r){var n=this;if(r=r||{},!(t instanceof HTMLVideoElement)){var o=document.createElement("video");o.setAttribute("preload","auto"),o.setAttribute("webkit-playsinline",""),o.setAttribute("playsinline",""),"string"==typeof t&&(t=[t]),Ye.crossOrigin(o,t[0].src||t[0],r.crossorigin);for(var s=0;s<t.length;++s){var h=document.createElement("source"),l=t[s],f=l.src,_=l.mime,c=(f=f||t[s]).split("?").shift().toLowerCase(),d=c.substr(c.lastIndexOf(".")+1);_=_||e.MIME_TYPES[d]||"video/"+d,h.src=f,h.type=_,o.appendChild(h)}t=o}return(n=i.call(this,t)||this).noSubImage=!0,n._autoUpdate=!0,n._isConnectedToTicker=!1,n._updateFPS=r.updateFPS||0,n._msToNextUpdate=0,n.autoPlay=!1!==r.autoPlay,n._load=null,n._resolve=null,n._onCanPlay=n._onCanPlay.bind(n),n._onError=n._onError.bind(n),!1!==r.autoLoad&&n.load(),n}return wt(e,i),e.prototype.update=function(t){this.destroyed||(this._msToNextUpdate=Math.floor(this._msToNextUpdate-ne.shared.elapsedMS*this.source.playbackRate),(!this._updateFPS||this._msToNextUpdate<=0)&&(i.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0))},e.prototype.load=function(){var t=this;if(this._load)return this._load;var r=this.source;return(r.readyState===r.HAVE_ENOUGH_DATA||r.readyState===r.HAVE_FUTURE_DATA)&&r.width&&r.height&&(r.complete=!0),r.addEventListener("play",this._onPlayStart.bind(this)),r.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(r.addEventListener("canplay",this._onCanPlay),r.addEventListener("canplaythrough",this._onCanPlay),r.addEventListener("error",this._onError,!0)),this._load=new Promise(function(n){t.valid?n(t):(t._resolve=n,r.load())}),this._load},e.prototype._onError=function(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)},e.prototype._isSourcePlaying=function(){var t=this.source;return t.currentTime>0&&!1===t.paused&&!1===t.ended&&t.readyState>2},e.prototype._isSourceReady=function(){var t=this.source;return 3===t.readyState||4===t.readyState},e.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(ne.shared.add(this.update,this),this._isConnectedToTicker=!0)},e.prototype._onPlayStop=function(){this._isConnectedToTicker&&(ne.shared.remove(this.update,this),this._isConnectedToTicker=!1)},e.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var r=this.valid;this.resize(t.videoWidth,t.videoHeight),!r&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},e.prototype.dispose=function(){this._isConnectedToTicker&&(ne.shared.remove(this.update,this),this._isConnectedToTicker=!1);var t=this.source;t&&(t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),i.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(ne.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(ne.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(t){t!==this._updateFPS&&(this._updateFPS=t)},enumerable:!1,configurable:!0}),e.test=function(t,r){return self.HTMLVideoElement&&t instanceof HTMLVideoElement||e.TYPES.indexOf(r)>-1},e.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],e.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},e}(Ye),Aa=function(i){function e(t){return i.call(this,t)||this}return wt(e,i),e.test=function(t){return!!self.createImageBitmap&&t instanceof ImageBitmap},e}(Ye);Pi.push(xn,Aa,bn,Oa,ya,jr,Sa,Ta);var Pa={__proto__:null,Resource:Rr,BaseImageResource:Ye,INSTALLED:Pi,autoDetectResource:On,AbstractMultiResource:Rn,ArrayResource:Ta,BufferResource:jr,CanvasResource:bn,CubeResource:Sa,ImageResource:xn,SVGResource:ya,VideoResource:Oa,ImageBitmapResource:Aa},fc=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return wt(e,i),e.prototype.upload=function(t,r,n){var o=t.gl;o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===Se.UNPACK);var a=r.realWidth,s=r.realHeight;return n.width===a&&n.height===s?o.texSubImage2D(r.target,0,0,0,a,s,r.format,n.type,this.data):(n.width=a,n.height=s,o.texImage2D(r.target,0,n.internalFormat,a,s,0,r.format,n.type,this.data)),!0},e}(jr),In=function(){function i(e,t){this.width=Math.round(e||100),this.height=Math.round(t||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new oe("disposeFramebuffer"),this.multisample=Zt.NONE}return Object.defineProperty(i.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),i.prototype.addColorTexture=function(e,t){return void 0===e&&(e=0),this.colorTextures[e]=t||new Mt(null,{scaleMode:Te.NEAREST,resolution:1,mipmap:Ge.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},i.prototype.addDepthTexture=function(e){return this.depthTexture=e||new Mt(new fc(null,{width:this.width,height:this.height}),{scaleMode:Te.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Ge.OFF,format:H.DEPTH_COMPONENT,type:dt.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},i.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},i.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},i.prototype.resize=function(e,t){if(e=Math.round(e),t=Math.round(t),e!==this.width||t!==this.height){this.width=e,this.height=t,this.dirtyId++,this.dirtySize++;for(var r=0;r<this.colorTextures.length;r++){var n=this.colorTextures[r];n.setSize(e/(o=n.resolution),t/o)}var o;this.depthTexture&&this.depthTexture.setSize(e/(o=this.depthTexture.resolution),t/o)}},i.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},i.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},i}(),Ra=function(i){function e(t){var r=this;if("number"==typeof t){var n=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];t={width:n,height:o,scaleMode:a,resolution:s}}return t.width=t.width||100,t.height=t.height||100,t.multisample=void 0!==t.multisample?t.multisample:Zt.NONE,(r=i.call(this,null,t)||this).mipmap=Ge.OFF,r.valid=!0,r.clearColor=[0,0,0,0],r.framebuffer=new In(r.realWidth,r.realHeight).addColorTexture(0,r),r.framebuffer.multisample=t.multisample,r.maskStack=[],r.filterStack=[{}],r}return wt(e,i),e.prototype.resize=function(t,r){this.framebuffer.resize(t*this.resolution,r*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},e.prototype.dispose=function(){this.framebuffer.dispose(),i.prototype.dispose.call(this)},e.prototype.destroy=function(){i.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},e}(Mt),ba=function(){function i(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return i.prototype.set=function(e,t,r){var n=t.width,o=t.height;if(r){var a=e.width/2/n,s=e.height/2/o,h=e.x/n+a,l=e.y/o+s;r=Wt.add(r,Wt.NW),this.x0=h+a*Wt.uX(r),this.y0=l+s*Wt.uY(r),r=Wt.add(r,2),this.x1=h+a*Wt.uX(r),this.y1=l+s*Wt.uY(r),r=Wt.add(r,2),this.x2=h+a*Wt.uX(r),this.y2=l+s*Wt.uY(r),r=Wt.add(r,2),this.x3=h+a*Wt.uX(r),this.y3=l+s*Wt.uY(r)}else this.x0=e.x/n,this.y0=e.y/o,this.x1=(e.x+e.width)/n,this.y1=e.y/o,this.x2=(e.x+e.width)/n,this.y2=(e.y+e.height)/o,this.x3=e.x/n,this.y3=(e.y+e.height)/o;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},i.prototype.toString=function(){return"[@pixi/core:TextureUvs x0="+this.x0+" y0="+this.y0+" x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" y2="+this.y2+" x3="+this.x3+" y3="+this.y3+"]"},i}(),xa=new ba,pt=function(i){function e(t,r,n,o,a,s){var h=i.call(this)||this;if(h.noFrame=!1,r||(h.noFrame=!0,r=new It(0,0,1,1)),t instanceof e&&(t=t.baseTexture),h.baseTexture=t,h._frame=r,h.trim=o,h.valid=!1,h._uvs=xa,h.uvMatrix=null,h.orig=n||r,h._rotate=Number(a||0),!0===a)h._rotate=2;else if(h._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return h.defaultAnchor=s?new Kt(s.x,s.y):new Kt(0,0),h._updateID=0,h.textureCacheIds=[],t.valid?h.noFrame?t.valid&&h.onBaseTextureUpdated(t):h.frame=r:t.once("loaded",h.onBaseTextureUpdated,h),h.noFrame&&t.on("update",h.onBaseTextureUpdated,h),h}return wt(e,i),e.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},e.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},e.prototype.destroy=function(t){if(this.baseTexture){if(t){var r=this.baseTexture.resource;r&&r.url&&ue[r.url]&&e.removeFromCache(r.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removeFromCache(this),this.textureCacheIds=null},e.prototype.clone=function(){var t=this._frame.clone(),r=this._frame===this.orig?t:this.orig.clone(),n=new e(this.baseTexture,!this.noFrame&&t,r,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(n._frame=t),n},e.prototype.updateUvs=function(){this._uvs===xa&&(this._uvs=new ba),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.from=function(t,r,n){void 0===r&&(r={}),void 0===n&&(n=st.STRICT_TEXTURE_CACHE);var o="string"==typeof t,a=null;o?a=t:t instanceof Mt?(t.cacheId||(t.cacheId=(r&&r.pixiIdPrefix||"pixiid")+"-"+nr(),Mt.addToCache(t,t.cacheId)),a=t.cacheId):(t._pixiId||(t._pixiId=(r&&r.pixiIdPrefix||"pixiid")+"_"+nr()),a=t._pixiId);var h=ue[a];if(o&&n&&!h)throw new Error('The cacheId "'+a+'" does not exist in TextureCache.');return h||t instanceof Mt?!h&&t instanceof Mt&&(h=new e(t),e.addToCache(h,a)):(r.resolution||(r.resolution=vi(t)),(h=new e(new Mt(t,r))).baseTexture.cacheId=a,Mt.addToCache(h.baseTexture,a),e.addToCache(h,a)),h},e.fromURL=function(t,r){var n=Object.assign({autoLoad:!1},null==r?void 0:r.resourceOptions),o=e.from(t,Object.assign({resourceOptions:n},r),!1),a=o.baseTexture.resource;return o.baseTexture.valid?Promise.resolve(o):a.load().then(function(){return Promise.resolve(o)})},e.fromBuffer=function(t,r,n,o){return new e(Mt.fromBuffer(t,r,n,o))},e.fromLoader=function(t,r,n,o){var a=new Mt(t,Object.assign({scaleMode:st.SCALE_MODE,resolution:vi(r)},o)),s=a.resource;s instanceof xn&&(s.url=r);var h=new e(a);return n||(n=r),Mt.addToCache(h.baseTexture,n),e.addToCache(h,n),n!==r&&(Mt.addToCache(h.baseTexture,r),e.addToCache(h,r)),h.baseTexture.valid?Promise.resolve(h):new Promise(function(l){h.baseTexture.once("loaded",function(){return l(h)})})},e.addToCache=function(t,r){r&&(-1===t.textureCacheIds.indexOf(r)&&t.textureCacheIds.push(r),ue[r]&&console.warn("Texture added to the cache with an id ["+r+"] that already had an entry"),ue[r]=t)},e.removeFromCache=function(t){if("string"==typeof t){var r=ue[t];if(r){var n=r.textureCacheIds.indexOf(t);return n>-1&&r.textureCacheIds.splice(n,1),delete ue[t],r}}else if(t&&t.textureCacheIds){for(var o=0;o<t.textureCacheIds.length;++o)ue[t.textureCacheIds[o]]===t&&delete ue[t.textureCacheIds[o]];return t.textureCacheIds.length=0,t}return null},Object.defineProperty(e.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var r=t.x,n=t.y,o=t.width,a=t.height,s=r+o>this.baseTexture.width,h=n+a>this.baseTexture.height;if(s||h)throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: X: "+r+" + "+o+" = "+(r+o)+" > "+this.baseTexture.width+" "+(s&&h?"and":"or")+" Y: "+n+" + "+a+" = "+(n+a)+" > "+this.baseTexture.height);this.valid=o&&a&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=t),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),e.prototype.castToBaseTexture=function(){return this.baseTexture},e}(Xr());function Ri(i){i.destroy=function(){},i.on=function(){},i.once=function(){},i.emit=function(){}}pt.EMPTY=new pt(new Mt),Ri(pt.EMPTY),Ri(pt.EMPTY.baseTexture),pt.WHITE=function(){var i=document.createElement("canvas");i.width=16,i.height=16;var e=i.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,16,16),new pt(new Mt(new bn(i)))}(),Ri(pt.WHITE),Ri(pt.WHITE.baseTexture);var lr=function(i){function e(t,r){var n=i.call(this,t,r)||this;return n.valid=!0,n.filterFrame=null,n.filterPoolKey=null,n.updateUvs(),n}return wt(e,i),Object.defineProperty(e.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(t){this.framebuffer.multisample=t},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,r,n){void 0===n&&(n=!0);var o=this.baseTexture.resolution,a=Math.round(t*o)/o,s=Math.round(r*o)/o;this.valid=a>0&&s>0,this._frame.width=this.orig.width=a,this._frame.height=this.orig.height=s,n&&this.baseTexture.resize(a,s),this.updateUvs()},e.prototype.setResolution=function(t){var r=this.baseTexture;r.resolution!==t&&(r.setResolution(t),this.resize(r.width,r.height,!1))},e.create=function(t){for(var r=arguments,n=[],o=1;o<arguments.length;o++)n[o-1]=r[o];return"number"==typeof t&&(Ze("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),t={width:t,height:n[0],scaleMode:n[1],resolution:n[2]}),new e(new Ra(t))},e}(pt),_c=function(){function i(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return i.prototype.createTexture=function(e,t,r){void 0===r&&(r=Zt.NONE);var n=new Ra(Object.assign({width:e,height:t,resolution:1,multisample:r},this.textureOptions));return new lr(n)},i.prototype.getOptimalTexture=function(e,t,r,n){var o;void 0===r&&(r=1),void 0===n&&(n=Zt.NONE),e=Math.ceil(e*r),t=Math.ceil(t*r),this.enableFullScreen&&e===this._pixelsWidth&&t===this._pixelsHeight?o=n>1?-n:-1:(o=((65535&(e=di(e)))<<16|65535&(t=di(t)))>>>0,n>1&&(o+=4294967296*n)),this.texturePool[o]||(this.texturePool[o]=[]);var a=this.texturePool[o].pop();return a||(a=this.createTexture(e,t,n)),a.filterPoolKey=o,a.setResolution(r),a},i.prototype.getFilterTexture=function(e,t,r){var n=this.getOptimalTexture(e.width,e.height,t||e.resolution,r||Zt.NONE);return n.filterFrame=e.filterFrame,n},i.prototype.returnTexture=function(e){var t=e.filterPoolKey;e.filterFrame=null,this.texturePool[t].push(e)},i.prototype.returnFilterTexture=function(e){this.returnTexture(e)},i.prototype.clear=function(e){if(e=!1!==e)for(var t in this.texturePool){var r=this.texturePool[t];if(r)for(var n=0;n<r.length;n++)r[n].destroy(!0)}this.texturePool={}},i.prototype.setScreenSize=function(e){if(e.width!==this._pixelsWidth||e.height!==this._pixelsHeight){for(var t in this.enableFullScreen=e.width>0&&e.height>0,this.texturePool)if(Number(t)<0){var r=this.texturePool[t];if(r)for(var n=0;n<r.length;n++)r[n].destroy(!0);this.texturePool[t]=[]}this._pixelsWidth=e.width,this._pixelsHeight=e.height}},i.SCREEN_KEY=-1,i}(),Ia=function(){function i(e,t,r,n,o,a,s){void 0===t&&(t=0),void 0===r&&(r=!1),void 0===n&&(n=dt.FLOAT),this.buffer=e,this.size=t,this.normalized=r,this.type=n,this.stride=o,this.start=a,this.instance=s}return i.prototype.destroy=function(){this.buffer=null},i.from=function(e,t,r,n,o){return new i(e,t,r,n,o)},i}(),dc=0,re=function(){function i(e,t,r){void 0===t&&(t=!0),void 0===r&&(r=!1),this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=t,this.id=dc++,this.disposeRunner=new oe("disposeBuffer")}return i.prototype.update=function(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++},i.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},i.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(i.prototype,"index",{get:function(){return this.type===Oe.ELEMENT_ARRAY_BUFFER},set:function(e){this.type=e?Oe.ELEMENT_ARRAY_BUFFER:Oe.ARRAY_BUFFER},enumerable:!1,configurable:!0}),i.from=function(e){return e instanceof Array&&(e=new Float32Array(e)),new i(e)},i}(),pc={Float32Array,Uint32Array,Int32Array,Uint8Array},Ma={5126:4,5123:2,5121:1},Ec=0,mc={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},$r=function(){function i(e,t){void 0===e&&(e=[]),void 0===t&&(t={}),this.buffers=e,this.indexBuffer=null,this.attributes=t,this.glVertexArrayObjects={},this.id=Ec++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new oe("disposeGeometry"),this.refCount=0}return i.prototype.addAttribute=function(e,t,r,n,o,a,s,h){if(void 0===r&&(r=0),void 0===n&&(n=!1),void 0===h&&(h=!1),!t)throw new Error("You must pass a buffer when creating an attribute");t instanceof re||(t instanceof Array&&(t=new Float32Array(t)),t=new re(t));var l=e.split("|");if(l.length>1){for(var f=0;f<l.length;f++)this.addAttribute(l[f],t,r,n,o);return this}var _=this.buffers.indexOf(t);return-1===_&&(this.buffers.push(t),_=this.buffers.length-1),this.attributes[e]=new Ia(_,r,n,o,a,s,h),this.instanced=this.instanced||h,this},i.prototype.getAttribute=function(e){return this.attributes[e]},i.prototype.getBuffer=function(e){return this.buffers[this.getAttribute(e).buffer]},i.prototype.addIndex=function(e){return e instanceof re||(e instanceof Array&&(e=new Uint16Array(e)),e=new re(e)),e.type=Oe.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,-1===this.buffers.indexOf(e)&&this.buffers.push(e),this},i.prototype.getIndex=function(){return this.indexBuffer},i.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var n,e=[],t=[],r=new re;for(n in this.attributes){var o=this.attributes[n];e.push(this.buffers[o.buffer].data),t.push(o.size*Ma[o.type]/4),o.buffer=0}for(r.data=function(i,e){for(var t=0,r=0,n={},o=0;o<i.length;o++)r+=e[o],t+=i[o].length;var a=new ArrayBuffer(4*t),s=null,h=0;for(o=0;o<i.length;o++){var l=e[o],f=i[o],_=vn(f);n[_]||(n[_]=new pc[_](a)),s=n[_];for(var c=0;c<f.length;c++)s[(c/l|0)*r+h+c%l]=f[c];h+=l}return new Float32Array(a)}(e,t),n=0;n<this.buffers.length;n++)this.buffers[n]!==this.indexBuffer&&this.buffers[n].destroy();return this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},i.prototype.getSize=function(){for(var e in this.attributes){var t=this.attributes[e];return this.buffers[t.buffer].data.length/(t.stride/4||t.size)}return 0},i.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},i.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},i.prototype.clone=function(){for(var e=new i,t=0;t<this.buffers.length;t++)e.buffers[t]=new re(this.buffers[t].data.slice(0));for(var t in this.attributes){var r=this.attributes[t];e.attributes[t]=new Ia(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=Oe.ELEMENT_ARRAY_BUFFER),e},i.merge=function(e){for(var a,t=new i,r=[],n=[],o=[],s=0;s<e.length;s++){a=e[s];for(var h=0;h<a.buffers.length;h++)n[h]=n[h]||0,n[h]+=a.buffers[h].data.length,o[h]=0}for(s=0;s<a.buffers.length;s++)r[s]=new(mc[vn(a.buffers[s].data)])(n[s]),t.buffers[s]=new re(r[s]);for(s=0;s<e.length;s++)for(a=e[s],h=0;h<a.buffers.length;h++)r[h].set(a.buffers[h].data,o[h]),o[h]+=a.buffers[h].data.length;if(t.attributes=a.attributes,a.indexBuffer){t.indexBuffer=t.buffers[a.buffers.indexOf(a.indexBuffer)],t.indexBuffer.type=Oe.ELEMENT_ARRAY_BUFFER;var l=0,f=0,_=0,c=0;for(s=0;s<a.buffers.length;s++)if(a.buffers[s]!==a.indexBuffer){c=s;break}for(var s in a.attributes){var d=a.attributes[s];(0|d.buffer)===c&&(f+=d.size*Ma[d.type]/4)}for(s=0;s<e.length;s++){var m=e[s].indexBuffer.data;for(h=0;h<m.length;h++)t.indexBuffer.data[h+_]+=l;l+=e[s].buffers[c].data.length/f,_+=m.length}}return t},i}(),gc=function(i){function e(){var t=i.call(this)||this;return t.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),t}return wt(e,i),e}($r),Da=function(i){function e(){var t=i.call(this)||this;return t.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),t.uvs=new Float32Array([0,0,1,0,1,1,0,1]),t.vertexBuffer=new re(t.vertices),t.uvBuffer=new re(t.uvs),t.addAttribute("aVertexPosition",t.vertexBuffer).addAttribute("aTextureCoord",t.uvBuffer).addIndex([0,1,2,0,2,3]),t}return wt(e,i),e.prototype.map=function(t,r){var n=0,o=0;return this.uvs[0]=n,this.uvs[1]=o,this.uvs[2]=n+r.width/t.width,this.uvs[3]=o,this.uvs[4]=n+r.width/t.width,this.uvs[5]=o+r.height/t.height,this.uvs[6]=n,this.uvs[7]=o+r.height/t.height,o=r.y,this.vertices[0]=n=r.x,this.vertices[1]=o,this.vertices[2]=n+r.width,this.vertices[3]=o,this.vertices[4]=n+r.width,this.vertices[5]=o+r.height,this.vertices[6]=n,this.vertices[7]=o+r.height,this.invalidate(),this},e.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},e}($r),Tc=0,ur=function(){function i(e,t,r){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=Tc++,this.static=!!t,this.ubo=!!r,e instanceof re?(this.buffer=e,this.buffer.type=Oe.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new re(new Float32Array(1)),this.buffer.type=Oe.UNIFORM_BUFFER,this.autoManage=!0))}return i.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},i.prototype.add=function(e,t,r){if(this.ubo)throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them");this.uniforms[e]=new i(t,r)},i.from=function(e,t,r){return new i(e,t,r)},i.uboFrom=function(e,t){return new i(e,null==t||t,!0)},i}(),Sc=function(){function i(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=Zt.NONE,this.sourceFrame=new It,this.destinationFrame=new It,this.bindingSourceFrame=new It,this.bindingDestinationFrame=new It,this.filters=[],this.transform=null}return i.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},i}(),bi=[new Kt,new Kt,new Kt,new Kt],Mn=new qt,Na=function(){function i(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new _c,this.texturePool.setScreenSize(e.view),this.statePool=[],this.quad=new gc,this.quadUv=new Da,this.tempRect=new It,this.activeState={},this.globalUniforms=new ur({outputFrame:new It,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return i.prototype.push=function(e,t){for(var r=this.renderer,n=this.defaultFilterStack,o=this.statePool.pop()||new Sc,a=this.renderer.renderTexture,s=t[0].resolution,h=t[0].multisample,l=t[0].padding,f=t[0].autoFit,_=t[0].legacy,c=1;c<t.length;c++){var d=t[c];s=Math.min(s,d.resolution),h=Math.min(h,d.multisample),l=this.useMaxPadding?Math.max(l,d.padding):l+d.padding,f=f&&d.autoFit,_=_||d.legacy}if(1===n.length&&(this.defaultFilterStack[0].renderTexture=a.current),n.push(o),o.resolution=s,o.multisample=h,o.legacy=_,o.target=e,o.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),o.sourceFrame.pad(l),f){var m=this.tempRect.copyFrom(a.sourceFrame);r.projection.transform&&this.transformAABB(Mn.copyFrom(r.projection.transform).invert(),m),o.sourceFrame.fit(m)}this.roundFrame(o.sourceFrame,a.current?a.current.resolution:r.resolution,a.sourceFrame,a.destinationFrame,r.projection.transform),o.renderTexture=this.getOptimalFilterTexture(o.sourceFrame.width,o.sourceFrame.height,s,h),o.filters=t,o.destinationFrame.width=o.renderTexture.width,o.destinationFrame.height=o.renderTexture.height;var v=this.tempRect;v.x=0,v.y=0,v.width=o.sourceFrame.width,v.height=o.sourceFrame.height,o.renderTexture.filterFrame=o.sourceFrame,o.bindingSourceFrame.copyFrom(a.sourceFrame),o.bindingDestinationFrame.copyFrom(a.destinationFrame),o.transform=r.projection.transform,r.projection.transform=null,a.bind(o.renderTexture,o.sourceFrame,v),r.framebuffer.clear(0,0,0,0)},i.prototype.pop=function(){var e=this.defaultFilterStack,t=e.pop(),r=t.filters;this.activeState=t;var n=this.globalUniforms.uniforms;n.outputFrame=t.sourceFrame,n.resolution=t.resolution;var o=n.inputSize,a=n.inputPixel,s=n.inputClamp;if(o[0]=t.destinationFrame.width,o[1]=t.destinationFrame.height,o[2]=1/o[0],o[3]=1/o[1],a[0]=Math.round(o[0]*t.resolution),a[1]=Math.round(o[1]*t.resolution),a[2]=1/a[0],a[3]=1/a[1],s[0]=.5*a[2],s[1]=.5*a[3],s[2]=t.sourceFrame.width*o[2]-.5*a[2],s[3]=t.sourceFrame.height*o[3]-.5*a[3],t.legacy){var h=n.filterArea;h[0]=t.destinationFrame.width,h[1]=t.destinationFrame.height,h[2]=t.sourceFrame.x,h[3]=t.sourceFrame.y,n.filterClamp=n.inputClamp}this.globalUniforms.update();var l=e[e.length-1];if(this.renderer.framebuffer.blit(),1===r.length)r[0].apply(this,t.renderTexture,l.renderTexture,ke.BLEND,t),this.returnFilterTexture(t.renderTexture);else{var f=t.renderTexture,_=this.getOptimalFilterTexture(f.width,f.height,t.resolution);_.filterFrame=f.filterFrame;var c=0;for(c=0;c<r.length-1;++c){1===c&&t.multisample>1&&((_=this.getOptimalFilterTexture(f.width,f.height,t.resolution)).filterFrame=f.filterFrame),r[c].apply(this,f,_,ke.CLEAR,t);var d=f;f=_,_=d}r[c].apply(this,f,l.renderTexture,ke.BLEND,t),c>1&&t.multisample>1&&this.returnFilterTexture(t.renderTexture),this.returnFilterTexture(f),this.returnFilterTexture(_)}t.clear(),this.statePool.push(t)},i.prototype.bindAndClear=function(e,t){void 0===t&&(t=ke.CLEAR);var r=this.renderer,n=r.renderTexture,o=r.state;if(this.renderer.projection.transform=e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.activeState.transform:null,e&&e.filterFrame){var a=this.tempRect;a.x=0,a.y=0,a.width=e.filterFrame.width,a.height=e.filterFrame.height,n.bind(e,e.filterFrame,a)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?n.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);(t===ke.CLEAR||t===ke.BLIT&&(1&o.stateId||this.forceClear))&&this.renderer.framebuffer.clear(0,0,0,0)},i.prototype.applyFilter=function(e,t,r,n){var o=this.renderer;o.state.set(e.state),this.bindAndClear(r,n),e.uniforms.uSampler=t,e.uniforms.filterGlobals=this.globalUniforms,o.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(t._frame,t.filterFrame),o.geometry.bind(this.quadUv),o.geometry.draw(_e.TRIANGLES)):(o.geometry.bind(this.quad),o.geometry.draw(_e.TRIANGLE_STRIP))},i.prototype.calculateSpriteMatrix=function(e,t){var r=this.activeState,n=r.sourceFrame,o=r.destinationFrame,a=t._texture.orig,s=e.set(o.width,0,0,o.height,n.x,n.y),h=t.worldTransform.copyTo(qt.TEMP_MATRIX);return h.invert(),s.prepend(h),s.scale(1/a.width,1/a.height),s.translate(t.anchor.x,t.anchor.y),s},i.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},i.prototype.getOptimalFilterTexture=function(e,t,r,n){return void 0===r&&(r=1),void 0===n&&(n=Zt.NONE),this.texturePool.getOptimalTexture(e,t,r,n)},i.prototype.getFilterTexture=function(e,t,r){if("number"==typeof e){var n=e;e=t,t=n}var o=this.texturePool.getOptimalTexture((e=e||this.activeState.renderTexture).width,e.height,t||e.resolution,r||Zt.NONE);return o.filterFrame=e.filterFrame,o},i.prototype.returnFilterTexture=function(e){this.texturePool.returnTexture(e)},i.prototype.emptyPool=function(){this.texturePool.clear(!0)},i.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},i.prototype.transformAABB=function(e,t){var r=bi[0],n=bi[1],o=bi[2],a=bi[3];r.set(t.left,t.top),n.set(t.left,t.bottom),o.set(t.right,t.top),a.set(t.right,t.bottom),e.apply(r,r),e.apply(n,n),e.apply(o,o),e.apply(a,a);var s=Math.min(r.x,n.x,o.x,a.x),h=Math.min(r.y,n.y,o.y,a.y),l=Math.max(r.x,n.x,o.x,a.x),f=Math.max(r.y,n.y,o.y,a.y);t.x=s,t.y=h,t.width=l-s,t.height=f-h},i.prototype.roundFrame=function(e,t,r,n,o){if(o){var a=o.a,h=o.c,l=o.d;if((Math.abs(o.b)>1e-4||Math.abs(h)>1e-4)&&(Math.abs(a)>1e-4||Math.abs(l)>1e-4))return}(o=o?Mn.copyFrom(o):Mn.identity()).translate(-r.x,-r.y).scale(n.width/r.width,n.height/r.height).translate(n.x,n.y),this.transformAABB(o,e),e.ceil(t),this.transformAABB(o.invert(),e)},i}(),xi=function(){function i(e){this.renderer=e}return i.prototype.flush=function(){},i.prototype.destroy=function(){this.renderer=null},i.prototype.start=function(){},i.prototype.stop=function(){this.flush()},i.prototype.render=function(e){},i}(),La=function(){function i(e){this.renderer=e,this.emptyRenderer=new xi(e),this.currentRenderer=this.emptyRenderer}return i.prototype.setObjectRenderer=function(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())},i.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},i.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},i.prototype.copyBoundTextures=function(e,t){for(var r=this.renderer.texture.boundTextures,n=t-1;n>=0;--n)e[n]=r[n]||null,e[n]&&(e[n]._batchLocation=n)},i.prototype.boundArray=function(e,t,r,n){for(var o=e.elements,a=e.ids,s=e.count,h=0,l=0;l<s;l++){var f=o[l],_=f._batchLocation;if(_>=0&&_<n&&t[_]===f)a[l]=_;else for(;h<n;){var c=t[h];if(!c||c._batchEnabled!==r||c._batchLocation!==h){a[l]=h,f._batchLocation=h,t[h]=f;break}h++}}},i.prototype.destroy=function(){this.renderer=null},i}(),Ca=0,Ba=function(){function i(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),e.view.addEventListener("webglcontextlost",this.handleContextLost,!1),e.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(i.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),i.prototype.contextChange=function(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=Ca++,e.isContextLost()&&e.getExtension("WEBGL_lose_context")&&e.getExtension("WEBGL_lose_context").restoreContext()},i.prototype.initFromContext=function(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=Ca++,this.renderer.runners.contextChange.emit(e)},i.prototype.initFromOptions=function(e){var t=this.createContext(this.renderer.view,e);this.initFromContext(t)},i.prototype.createContext=function(e,t){var r;if(st.PREFER_ENV>=De.WEBGL2&&(r=e.getContext("webgl2",t)),r)this.webGLVersion=2;else if(this.webGLVersion=1,!(r=e.getContext("webgl",t)||e.getContext("experimental-webgl",t)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),this.gl},i.prototype.getExtensions=function(){var e=this.gl,t={anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,t,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),loseContext:e.getExtension("WEBGL_lose_context"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,t,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})},i.prototype.handleContextLost=function(e){e.preventDefault()},i.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},i.prototype.destroy=function(){var e=this.renderer.view;this.renderer=null,e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},i.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},i.prototype.validateContext=function(e){var t=e.getContextAttributes(),r="WebGL2RenderingContext"in self&&e instanceof self.WebGL2RenderingContext;r&&(this.webGLVersion=2),t.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var n=r||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=n,n||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},i}(),yc=function(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=Zt.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0},Oc=new It,Fa=function(){function i(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new In(10,10),this.msaaSamples=null}return i.prototype.contextChange=function(){var e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new It,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion){var t=this.renderer.context.extensions.drawBuffers,r=this.renderer.context.extensions.depthTexture;st.PREFER_ENV===De.WEBGL_LEGACY&&(t=null,r=null),t?e.drawBuffers=function(n){return t.drawBuffersWEBGL(n)}:(this.hasMRT=!1,e.drawBuffers=function(){}),r||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)},i.prototype.bind=function(e,t,r){void 0===r&&(r=0);var n=this.gl;if(e){var o=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,n.bindFramebuffer(n.FRAMEBUFFER,o.framebuffer)),o.mipLevel!==r&&(e.dirtyId++,e.dirtyFormat++,o.mipLevel=r),o.dirtyId!==e.dirtyId&&(o.dirtyId=e.dirtyId,o.dirtyFormat!==e.dirtyFormat?(o.dirtyFormat=e.dirtyFormat,o.dirtySize=e.dirtySize,this.updateFramebuffer(e,r)):o.dirtySize!==e.dirtySize&&(o.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(var a=0;a<e.colorTextures.length;a++){var s=e.colorTextures[a];this.renderer.texture.unbind(s.parentTextureArray||s)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),t){var f=(h=t.width>>r)/t.width;this.setViewport(t.x*f,t.y*f,h,t.height>>r)}else{var h;this.setViewport(0,0,h=e.width>>r,e.height>>r)}}else this.current&&(this.current=null,n.bindFramebuffer(n.FRAMEBUFFER,null)),t?this.setViewport(t.x,t.y,t.width,t.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},i.prototype.setViewport=function(e,t,r,n){var o=this.viewport;e=Math.round(e),t=Math.round(t),r=Math.round(r),n=Math.round(n),(o.width!==r||o.height!==n||o.x!==e||o.y!==t)&&(o.x=e,o.y=t,o.width=r,o.height=n,this.gl.viewport(e,t,r,n))},Object.defineProperty(i.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),i.prototype.clear=function(e,t,r,n,o){void 0===o&&(o=Vr.COLOR|Vr.DEPTH);var a=this.gl;a.clearColor(e,t,r,n),a.clear(o)},i.prototype.initFramebuffer=function(e){var r=new yc(this.gl.createFramebuffer());return r.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=r,this.managedFramebuffers.push(e),e.disposeRunner.add(this),r},i.prototype.resizeFramebuffer=function(e){var t=this.gl,r=e.glFramebuffers[this.CONTEXT_UID];r.msaaBuffer&&(t.bindRenderbuffer(t.RENDERBUFFER,r.msaaBuffer),t.renderbufferStorageMultisample(t.RENDERBUFFER,r.multisample,t.RGBA8,e.width,e.height)),r.stencil&&(t.bindRenderbuffer(t.RENDERBUFFER,r.stencil),r.msaaBuffer?t.renderbufferStorageMultisample(t.RENDERBUFFER,r.multisample,t.DEPTH24_STENCIL8,e.width,e.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,e.width,e.height));var n=e.colorTextures,o=n.length;t.drawBuffers||(o=Math.min(o,1));for(var a=0;a<o;a++){var s=n[a];this.renderer.texture.bind(s.parentTextureArray||s,0)}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)},i.prototype.updateFramebuffer=function(e,t){var r=this.gl,n=e.glFramebuffers[this.CONTEXT_UID],o=e.colorTextures,a=o.length;r.drawBuffers||(a=Math.min(a,1)),n.multisample>1&&this.canMultisampleFramebuffer(e)?(n.msaaBuffer=n.msaaBuffer||r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,n.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,r.RGBA8,e.width,e.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,n.msaaBuffer)):n.msaaBuffer&&(r.deleteRenderbuffer(n.msaaBuffer),n.msaaBuffer=null,n.blitFramebuffer&&(n.blitFramebuffer.dispose(),n.blitFramebuffer=null));for(var s=[],h=0;h<a;h++){var l=o[h],f=l.parentTextureArray||l;this.renderer.texture.bind(f,0),(0!==h||!n.msaaBuffer)&&(r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+h,l.target,f._glTextures[this.CONTEXT_UID].texture,t),s.push(r.COLOR_ATTACHMENT0+h))}if(s.length>1&&r.drawBuffers(s),e.depthTexture&&this.writeDepthTexture){var c=e.depthTexture;this.renderer.texture.bind(c,0),r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,c._glTextures[this.CONTEXT_UID].texture,t)}!e.stencil&&!e.depth||e.depthTexture&&this.writeDepthTexture?n.stencil&&(r.deleteRenderbuffer(n.stencil),n.stencil=null):(n.stencil=n.stencil||r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,n.stencil),n.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,r.DEPTH24_STENCIL8,e.width,e.height):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,e.width,e.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,n.stencil))},i.prototype.canMultisampleFramebuffer=function(e){return 1!==this.renderer.context.webGLVersion&&e.colorTextures.length<=1&&!e.depthTexture},i.prototype.detectSamples=function(e){var t=this.msaaSamples,r=Zt.NONE;if(e<=1||null===t)return r;for(var n=0;n<t.length;n++)if(t[n]<=e){r=t[n];break}return 1===r&&(r=Zt.NONE),r},i.prototype.blit=function(e,t,r){var n=this,o=n.current,s=n.gl;if(2===n.renderer.context.webGLVersion&&o){var l=o.glFramebuffers[n.CONTEXT_UID];if(l){if(!e){if(!l.msaaBuffer)return;var f=o.colorTextures[0];if(!f)return;l.blitFramebuffer||(l.blitFramebuffer=new In(o.width,o.height),l.blitFramebuffer.addColorTexture(0,f)),(e=l.blitFramebuffer).colorTextures[0]!==f&&(e.colorTextures[0]=f,e.dirtyId++,e.dirtyFormat++),(e.width!==o.width||e.height!==o.height)&&(e.width=o.width,e.height=o.height,e.dirtyId++,e.dirtySize++)}t||((t=Oc).width=o.width,t.height=o.height),r||(r=t);var _=t.width===r.width&&t.height===r.height;this.bind(e),s.bindFramebuffer(s.READ_FRAMEBUFFER,l.framebuffer),s.blitFramebuffer(t.x,t.y,t.width,t.height,r.x,r.y,r.width,r.height,s.COLOR_BUFFER_BIT,_?s.NEAREST:s.LINEAR)}}},i.prototype.disposeFramebuffer=function(e,t){var r=e.glFramebuffers[this.CONTEXT_UID],n=this.gl;if(r){delete e.glFramebuffers[this.CONTEXT_UID];var o=this.managedFramebuffers.indexOf(e);o>=0&&this.managedFramebuffers.splice(o,1),e.disposeRunner.remove(this),t||(n.deleteFramebuffer(r.framebuffer),r.msaaBuffer&&n.deleteRenderbuffer(r.msaaBuffer),r.stencil&&n.deleteRenderbuffer(r.stencil)),r.blitFramebuffer&&r.blitFramebuffer.dispose()}},i.prototype.disposeAll=function(e){var t=this.managedFramebuffers;this.managedFramebuffers=[];for(var r=0;r<t.length;r++)this.disposeFramebuffer(t[r],e)},i.prototype.forceStencil=function(){var e=this.current;if(e){var t=e.glFramebuffers[this.CONTEXT_UID];if(t&&!t.stencil){e.stencil=!0;var r=e.width,n=e.height,o=this.gl,a=o.createRenderbuffer();o.bindRenderbuffer(o.RENDERBUFFER,a),t.msaaBuffer?o.renderbufferStorageMultisample(o.RENDERBUFFER,t.multisample,o.DEPTH24_STENCIL8,r,n):o.renderbufferStorage(o.RENDERBUFFER,o.DEPTH_STENCIL,r,n),t.stencil=a,o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_STENCIL_ATTACHMENT,o.RENDERBUFFER,a)}}},i.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new It},i.prototype.destroy=function(){this.renderer=null},i}(),Dn={5126:4,5123:2,5121:1},wa=function(){function i(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return i.prototype.contextChange=function(){this.disposeAll(!0);var e=this.gl=this.renderer.gl,t=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==t.webGLVersion){var r=this.renderer.context.extensions.vertexArrayObject;st.PREFER_ENV===De.WEBGL_LEGACY&&(r=null),r?(e.createVertexArray=function(){return r.createVertexArrayOES()},e.bindVertexArray=function(o){return r.bindVertexArrayOES(o)},e.deleteVertexArray=function(o){return r.deleteVertexArrayOES(o)}):(this.hasVao=!1,e.createVertexArray=function(){return null},e.bindVertexArray=function(){return null},e.deleteVertexArray=function(){return null})}if(2!==t.webGLVersion){var n=e.getExtension("ANGLE_instanced_arrays");n?(e.vertexAttribDivisor=function(o,a){return n.vertexAttribDivisorANGLE(o,a)},e.drawElementsInstanced=function(o,a,s,h,l){return n.drawElementsInstancedANGLE(o,a,s,h,l)},e.drawArraysInstanced=function(o,a,s,h){return n.drawArraysInstancedANGLE(o,a,s,h)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===t.webGLVersion||!!t.extensions.uint32ElementIndex},i.prototype.bind=function(e,t){t=t||this.renderer.shader.shader;var r=this.gl,n=e.glVertexArrayObjects[this.CONTEXT_UID],o=!1;n||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=n={},o=!0);var a=n[t.program.id]||this.initGeometryVao(e,t,o);this._activeGeometry=e,this._activeVao!==a&&(this._activeVao=a,this.hasVao?r.bindVertexArray(a):this.activateVao(e,t.program)),this.updateBuffers()},i.prototype.reset=function(){this.unbind()},i.prototype.updateBuffers=function(){for(var e=this._activeGeometry,t=this.renderer.buffer,r=0;r<e.buffers.length;r++)t.update(e.buffers[r])},i.prototype.checkCompatibility=function(e,t){var r=e.attributes,n=t.attributeData;for(var o in n)if(!r[o])throw new Error('shader and geometry incompatible, geometry missing the "'+o+'" attribute')},i.prototype.getSignature=function(e,t){var r=e.attributes,n=t.attributeData,o=["g",e.id];for(var a in r)n[a]&&o.push(a);return o.join("-")},i.prototype.initGeometryVao=function(e,t,r){void 0===r&&(r=!0);var n=this.gl,o=this.CONTEXT_UID,a=this.renderer.buffer,s=t.program;s.glPrograms[o]||this.renderer.shader.generateProgram(t),this.checkCompatibility(e,s);var h=this.getSignature(e,s),l=e.glVertexArrayObjects[this.CONTEXT_UID],f=l[h];if(f)return l[s.id]=f,f;var _=e.buffers,c=e.attributes,d={},m={};for(var v in _)d[v]=0,m[v]=0;for(var v in c)!c[v].size&&s.attributeData[v]?c[v].size=s.attributeData[v].size:c[v].size||console.warn("PIXI Geometry attribute '"+v+"' size cannot be determined (likely the bound shader does not have the attribute)"),d[c[v].buffer]+=c[v].size*Dn[c[v].type];for(var v in c){var g=c[v],R=g.size;void 0===g.stride&&(g.stride=d[g.buffer]===R*Dn[g.type]?0:d[g.buffer]),void 0===g.start&&(g.start=m[g.buffer],m[g.buffer]+=R*Dn[g.type])}f=n.createVertexArray(),n.bindVertexArray(f);for(var C=0;C<_.length;C++){var B=_[C];a.bind(B),r&&B._glBuffers[o].refCount++}return this.activateVao(e,s),this._activeVao=f,l[s.id]=f,l[h]=f,f},i.prototype.disposeGeometry=function(e,t){var r;if(this.managedGeometries[e.id]){delete this.managedGeometries[e.id];var n=e.glVertexArrayObjects[this.CONTEXT_UID],o=this.gl,a=e.buffers,s=null===(r=this.renderer)||void 0===r?void 0:r.buffer;if(e.disposeRunner.remove(this),n){if(s)for(var h=0;h<a.length;h++){var l=a[h]._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,0===l.refCount&&!t&&s.dispose(a[h],t))}if(!t)for(var f in n)if("g"===f[0]){var _=n[f];this._activeVao===_&&this.unbind(),o.deleteVertexArray(_)}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}},i.prototype.disposeAll=function(e){for(var t=Object.keys(this.managedGeometries),r=0;r<t.length;r++)this.disposeGeometry(this.managedGeometries[t[r]],e)},i.prototype.activateVao=function(e,t){var r=this.gl,n=this.CONTEXT_UID,o=this.renderer.buffer,a=e.buffers,s=e.attributes;e.indexBuffer&&o.bind(e.indexBuffer);var h=null;for(var l in s){var f=s[l],_=a[f.buffer],c=_._glBuffers[n];if(t.attributeData[l]){h!==c&&(o.bind(_),h=c);var d=t.attributeData[l].location;if(r.enableVertexAttribArray(d),r.vertexAttribPointer(d,f.size,f.type||r.FLOAT,f.normalized,f.stride,f.start),f.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");r.vertexAttribDivisor(d,1)}}}},i.prototype.draw=function(e,t,r,n){var o=this.gl,a=this._activeGeometry;if(a.indexBuffer){var s=a.indexBuffer.data.BYTES_PER_ELEMENT,h=2===s?o.UNSIGNED_SHORT:o.UNSIGNED_INT;2===s||4===s&&this.canUseUInt32ElementIndex?a.instanced?o.drawElementsInstanced(e,t||a.indexBuffer.data.length,h,(r||0)*s,n||1):o.drawElements(e,t||a.indexBuffer.data.length,h,(r||0)*s):console.warn("unsupported index buffer type: uint32")}else a.instanced?o.drawArraysInstanced(e,r,t||a.getSize(),n||1):o.drawArrays(e,r,t||a.getSize());return this},i.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},i.prototype.destroy=function(){this.renderer=null},i}(),Ac=function(){function i(e){void 0===e&&(e=null),this.type=ie.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=st.FILTER_MULTISAMPLE,this.enabled=!0,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._target=null}return Object.defineProperty(i.prototype,"filter",{get:function(){return this._filters?this._filters[0]:null},set:function(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null},enumerable:!1,configurable:!0}),i.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=ie.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null},i.prototype.copyCountersOrReset=function(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},i}();function Ua(i,e,t){var r=i.createShader(e);return i.shaderSource(r,t),i.compileShader(r),r}function Ga(i,e){var t=i.getShaderSource(e).split("\n").map(function(l,f){return f+": "+l}),r=i.getShaderInfoLog(e),n=r.split("\n"),o={},a=n.map(function(l){return parseFloat(l.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))}).filter(function(l){return!(!l||o[l]||(o[l]=!0,0))}),s=[""];a.forEach(function(l){t[l-1]="%c"+t[l-1]+"%c",s.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});var h=t.join("\n");s[0]=h,console.error(r),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,s),console.groupEnd()}function Nn(i){for(var e=new Array(i),t=0;t<e.length;t++)e[t]=!1;return e}function ka(i,e){switch(i){case"float":case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return Nn(2*e);case"bvec3":return Nn(3*e);case"bvec4":return Nn(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var Ii,Ya={},zr=Ya;function Ha(i,e,t){if("precision"!==i.substring(0,9)){var r=e;return e===ye.HIGH&&t!==ye.HIGH&&(r=ye.MEDIUM),"precision "+r+" float;\n"+i}return t!==ye.HIGH&&"precision highp"===i.substring(0,15)?i.replace("precision highp","precision mediump"):i}var xc={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function Xa(i){return xc[i]}var Mi=null,Va={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function Wa(i,e){if(!Mi){var t=Object.keys(Va);Mi={};for(var r=0;r<t.length;++r){var n=t[r];Mi[i[n]]=Va[n]}}return Mi[e]}var Zr,br=[{test:function(i){return"float"===i.type&&1===i.size},code:function(i){return'\n            if(uv["'+i+'"] !== ud["'+i+'"].value)\n            {\n                ud["'+i+'"].value = uv["'+i+'"]\n                gl.uniform1f(ud["'+i+'"].location, uv["'+i+'"])\n            }\n            '}},{test:function(i){return("sampler2D"===i.type||"samplerCube"===i.type||"sampler2DArray"===i.type)&&1===i.size&&!i.isArray},code:function(i){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+i+'"], t);\n\n            if(ud["'+i+'"].value !== t)\n            {\n                ud["'+i+'"].value = t;\n                gl.uniform1i(ud["'+i+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function(i,e){return"mat3"===i.type&&1===i.size&&void 0!==e.a},code:function(i){return'\n            gl.uniformMatrix3fv(ud["'+i+'"].location, false, uv["'+i+'"].toArray(true));\n            '},codeUbo:function(i){return"\n                var "+i+"_matrix = uv."+i+".toArray(true);\n\n                data[offset] = "+i+"_matrix[0];\n                data[offset+1] = "+i+"_matrix[1];\n                data[offset+2] = "+i+"_matrix[2];\n        \n                data[offset + 4] = "+i+"_matrix[3];\n                data[offset + 5] = "+i+"_matrix[4];\n                data[offset + 6] = "+i+"_matrix[5];\n        \n                data[offset + 8] = "+i+"_matrix[6];\n                data[offset + 9] = "+i+"_matrix[7];\n                data[offset + 10] = "+i+"_matrix[8];\n            "}},{test:function(i,e){return"vec2"===i.type&&1===i.size&&void 0!==e.x},code:function(i){return'\n                cv = ud["'+i+'"].value;\n                v = uv["'+i+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+i+'"].location, v.x, v.y);\n                }'},codeUbo:function(i){return"\n                v = uv."+i+";\n\n                data[offset] = v.x;\n                data[offset+1] = v.y;\n            "}},{test:function(i){return"vec2"===i.type&&1===i.size},code:function(i){return'\n                cv = ud["'+i+'"].value;\n                v = uv["'+i+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+i+'"].location, v[0], v[1]);\n                }\n            '}},{test:function(i,e){return"vec4"===i.type&&1===i.size&&void 0!==e.width},code:function(i){return'\n                cv = ud["'+i+'"].value;\n                v = uv["'+i+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+i+'"].location, v.x, v.y, v.width, v.height)\n                }'},codeUbo:function(i){return"\n                    v = uv."+i+";\n\n                    data[offset] = v.x;\n                    data[offset+1] = v.y;\n                    data[offset+2] = v.width;\n                    data[offset+3] = v.height;\n                "}},{test:function(i){return"vec4"===i.type&&1===i.size},code:function(i){return'\n                cv = ud["'+i+'"].value;\n                v = uv["'+i+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+i+'"].location, v[0], v[1], v[2], v[3])\n                }'}}],Ic={float:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1f(location, v);\n    }",vec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4f(location, v[0], v[1], v[2], v[3]);\n    }",int:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",ivec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",ivec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",ivec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",uint:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1ui(location, v);\n    }",uvec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2ui(location, v[0], v[1]);\n    }",uvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3ui(location, v[0], v[1], v[2]);\n    }",uvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);\n    }",bool:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1i(location, v);\n    }",bvec2:"\n    if (cv[0] != v[0] || cv[1] != v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",bvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",bvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},Mc={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"},Nc=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function Lc(i){for(var e="",t=0;t<i;++t)t>0&&(e+="\nelse "),t<i-1&&(e+="if(test == "+t+".0){}");return e}var Uc=0,Di={},Kr=function(){function i(e,t,r){void 0===r&&(r="pixi-shader"),this.id=Uc++,this.vertexSrc=e||i.defaultVertexSrc,this.fragmentSrc=t||i.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(r=r.replace(/\s+/g,"-"),Di[r]?(Di[r]++,r+="-"+Di[r]):Di[r]=1,this.vertexSrc="#define SHADER_NAME "+r+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+r+"\n"+this.fragmentSrc,this.vertexSrc=Ha(this.vertexSrc,st.PRECISION_VERTEX,ye.HIGH),this.fragmentSrc=Ha(this.fragmentSrc,st.PRECISION_FRAGMENT,function(){if(!Ii){Ii=ye.MEDIUM;var i=function(){if(zr===Ya||zr&&zr.isContextLost()){var i=document.createElement("canvas"),e=void 0;st.PREFER_ENV>=De.WEBGL2&&(e=i.getContext("webgl2",{})),e||((e=i.getContext("webgl",{})||i.getContext("experimental-webgl",{}))?e.getExtension("WEBGL_draw_buffers"):e=null),zr=e}return zr}();if(i&&i.getShaderPrecisionFormat){var e=i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT);Ii=e.precision?ye.HIGH:ye.MEDIUM}}return Ii}())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(i,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(i,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},enumerable:!1,configurable:!0}),i.from=function(e,t,r){var n=e+t,o=ca[n];return o||(ca[n]=o=new i(e,t,r)),o},i}(),Ke=function(){function i(e,t){this.uniformBindCount=0,this.program=e,this.uniformGroup=t?t instanceof ur?t:new ur(t):new ur({})}return i.prototype.checkUniformExists=function(e,t){if(t.uniforms[e])return!0;for(var r in t.uniforms){var n=t.uniforms[r];if(n.group&&this.checkUniformExists(e,n))return!0}return!1},i.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(i.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),i.from=function(e,t,r){return new i(Kr.from(e,t),r)},i}(),fr=function(){function i(){this.data=0,this.blendMode=ut.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(i.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(e){!!(1&this.data)!==e&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(e){!!(2&this.data)!==e&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(e){!!(4&this.data)!==e&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(e){!!(8&this.data)!==e&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"depthMask",{get:function(){return!!(32&this.data)},set:function(e){!!(32&this.data)!==e&&(this.data^=32)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(e){!!(16&this.data)!==e&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"blendMode",{get:function(){return this._blendMode},set:function(e){this.blend=e!==ut.NONE,this._blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(e){this.offsets=!!e,this._polygonOffset=e},enumerable:!1,configurable:!0}),i.prototype.toString=function(){return"[@pixi/core:State blendMode="+this.blendMode+" clockwiseFrontFace="+this.clockwiseFrontFace+" culling="+this.culling+" depthMask="+this.depthMask+" polygonOffset="+this.polygonOffset+"]"},i.for2d=function(){var e=new i;return e.depthTest=!1,e.blend=!0,e},i}(),qe=function(i){function e(t,r,n){var o=this,a=Kr.from(t||e.defaultVertexSrc,r||e.defaultFragmentSrc);return(o=i.call(this,a,n)||this).padding=0,o.resolution=st.FILTER_RESOLUTION,o.multisample=st.FILTER_MULTISAMPLE,o.enabled=!0,o.autoFit=!0,o.state=new fr,o}return wt(e,i),e.prototype.apply=function(t,r,n,o,a){t.applyFilter(this,r,n,o)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._resolution=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},enumerable:!1,configurable:!0}),e}(Ke),ja=new qt,Gn=function(){function i(e,t){this._texture=e,this.mapCoord=new qt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===t?.5:t,this.isSimple=!1}return Object.defineProperty(i.prototype,"texture",{get:function(){return this._texture},set:function(e){this._texture=e,this._textureID=-1},enumerable:!1,configurable:!0}),i.prototype.multiplyUvs=function(e,t){void 0===t&&(t=e);for(var r=this.mapCoord,n=0;n<e.length;n+=2){var o=e[n],a=e[n+1];t[n]=o*r.a+a*r.c+r.tx,t[n+1]=o*r.b+a*r.d+r.ty}return t},i.prototype.update=function(e){var t=this._texture;if(!t||!t.valid||!e&&this._textureID===t._updateID)return!1;this._textureID=t._updateID,this._updateID++;var r=t._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);var n=t.orig,o=t.trim;o&&(ja.set(n.width/o.width,0,0,n.height/o.height,-o.x/o.width,-o.y/o.height),this.mapCoord.append(ja));var a=t.baseTexture,s=this.uClampFrame,h=this.clampMargin/a.resolution,l=this.clampOffset;return s[0]=(t._frame.x+h+l)/a.width,s[1]=(t._frame.y+h+l)/a.height,s[2]=(t._frame.x+t._frame.width-h+l)/a.width,s[3]=(t._frame.y+t._frame.height-h+l)/a.height,this.uClampOffset[0]=l/a.realWidth,this.uClampOffset[1]=l/a.realHeight,this.isSimple=t._frame.width===a.width&&t._frame.height===a.height&&0===t.rotate,!0},i}(),Xc=function(i){function e(t,r,n){var o=this,a=null;return"string"!=typeof t&&void 0===r&&void 0===n&&(a=t,t=void 0,r=void 0,n=void 0),(o=i.call(this,t||"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n",r||"varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n",n)||this).maskSprite=a,o.maskMatrix=new qt,o}return wt(e,i),Object.defineProperty(e.prototype,"maskSprite",{get:function(){return this._maskSprite},set:function(t){this._maskSprite=t,this._maskSprite&&(this._maskSprite.renderable=!1)},enumerable:!1,configurable:!0}),e.prototype.apply=function(t,r,n,o){var a=this._maskSprite,s=a._texture;!s.valid||(s.uvMatrix||(s.uvMatrix=new Gn(s,0)),s.uvMatrix.update(),this.uniforms.npmAlpha=s.baseTexture.alphaMode?0:1,this.uniforms.mask=s,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,a).prepend(s.uvMatrix.mapCoord),this.uniforms.alpha=a.worldAlpha,this.uniforms.maskClamp=s.uvMatrix.uClampFrame,t.applyFilter(this,r,n,o))},e}(qe),$a=function(){function i(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return i.prototype.setMaskStack=function(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)},i.prototype.push=function(e,t){var r=t;if(!r.isMaskData){var n=this.maskDataPool.pop()||new Ac;n.pooled=!0,n.maskObject=t,r=n}if(r.copyCountersOrReset(0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null),r.autoDetect&&this.detect(r),r._target=e,r.type!==ie.SPRITE&&this.maskStack.push(r),r.enabled)switch(r.type){case ie.SCISSOR:this.renderer.scissor.push(r);break;case ie.STENCIL:this.renderer.stencil.push(r);break;case ie.SPRITE:r.copyCountersOrReset(null),this.pushSpriteMask(r)}r.type===ie.SPRITE&&this.maskStack.push(r)},i.prototype.pop=function(e){var t=this.maskStack.pop();if(t&&t._target===e){if(t.enabled)switch(t.type){case ie.SCISSOR:this.renderer.scissor.pop();break;case ie.STENCIL:this.renderer.stencil.pop(t.maskObject);break;case ie.SPRITE:this.popSpriteMask(t)}if(t.reset(),t.pooled&&this.maskDataPool.push(t),0!==this.maskStack.length){var r=this.maskStack[this.maskStack.length-1];r.type===ie.SPRITE&&r._filters&&(r._filters[0].maskSprite=r.maskObject)}}},i.prototype.detect=function(e){e.type=e.maskObject.isSprite?ie.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?ie.SCISSOR:ie.STENCIL},i.prototype.pushSpriteMask=function(e){var t,r,n=e.maskObject,o=e._target,a=e._filters;a||(a=this.alphaMaskPool[this.alphaMaskIndex])||(a=this.alphaMaskPool[this.alphaMaskIndex]=[new Xc]);var l,f,s=this.renderer,h=s.renderTexture;if(h.current){var _=h.current;l=e.resolution||_.resolution,f=null!==(t=e.multisample)&&void 0!==t?t:_.multisample}else l=e.resolution||s.resolution,f=null!==(r=e.multisample)&&void 0!==r?r:s.multisample;a[0].resolution=l,a[0].multisample=f,a[0].maskSprite=n;var c=o.filterArea;o.filterArea=n.getBounds(!0),s.filter.push(o,a),o.filterArea=c,e._filters||this.alphaMaskIndex++},i.prototype.popSpriteMask=function(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)},i.prototype.destroy=function(){this.renderer=null},i}(),za=function(){function i(e){this.renderer=e,this.maskStack=[],this.glConst=0}return i.prototype.getStackLength=function(){return this.maskStack.length},i.prototype.setMaskStack=function(e){var t=this.renderer.gl,r=this.getStackLength();this.maskStack=e;var n=this.getStackLength();n!==r&&(0===n?t.disable(this.glConst):(t.enable(this.glConst),this._useCurrent()))},i.prototype._useCurrent=function(){},i.prototype.destroy=function(){this.renderer=null,this.maskStack=null},i}(),Za=new qt,Ka=function(i){function e(t){var r=i.call(this,t)||this;return r.glConst=WebGLRenderingContext.SCISSOR_TEST,r}return wt(e,i),e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},e.prototype.calcScissorRect=function(t){if(!t._scissorRectLocal){var r=t._scissorRect,n=t.maskObject,o=this.renderer,a=o.renderTexture;n.renderable=!0;var s=n.getBounds();this.roundFrameToPixels(s,a.current?a.current.resolution:o.resolution,a.sourceFrame,a.destinationFrame,o.projection.transform),n.renderable=!1,r&&s.fit(r),t._scissorRectLocal=s}},e.isMatrixRotated=function(t){if(!t)return!1;var r=t.a,o=t.c,a=t.d;return(Math.abs(t.b)>1e-4||Math.abs(o)>1e-4)&&(Math.abs(r)>1e-4||Math.abs(a)>1e-4)},e.prototype.testScissor=function(t){var r=t.maskObject;if(!r.isFastRect||!r.isFastRect()||e.isMatrixRotated(r.worldTransform)||e.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(t);var n=t._scissorRectLocal;return n.width>0&&n.height>0},e.prototype.roundFrameToPixels=function(t,r,n,o,a){e.isMatrixRotated(a)||((a=a?Za.copyFrom(a):Za.identity()).translate(-n.x,-n.y).scale(o.width/n.width,o.height/n.height).translate(o.x,o.y),this.renderer.filter.transformAABB(a,t),t.fit(o),t.x=Math.round(t.x*r),t.y=Math.round(t.y*r),t.width=Math.round(t.width*r),t.height=Math.round(t.height*r))},e.prototype.push=function(t){t._scissorRectLocal||this.calcScissorRect(t);var r=this.renderer.gl;t._scissorRect||r.enable(r.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=t._scissorRectLocal,this._useCurrent()},e.prototype.pop=function(){var t=this.renderer.gl;this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)},e.prototype._useCurrent=function(){var t=this.maskStack[this.maskStack.length-1]._scissorRect;this.renderer.gl.scissor(t.x,this.renderer.renderTexture.current?t.y:this.renderer.height-t.height-t.y,t.width,t.height)},e}(za),qa=function(i){function e(t){var r=i.call(this,t)||this;return r.glConst=WebGLRenderingContext.STENCIL_TEST,r}return wt(e,i),e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},e.prototype.push=function(t){var r=t.maskObject,n=this.renderer.gl,o=t._stencilCounter;0===o&&(this.renderer.framebuffer.forceStencil(),n.enable(n.STENCIL_TEST)),t._stencilCounter++,n.colorMask(!1,!1,!1,!1),n.stencilFunc(n.EQUAL,o,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.INCR),r.renderable=!0,r.render(this.renderer),this.renderer.batch.flush(),r.renderable=!1,this._useCurrent()},e.prototype.pop=function(t){var r=this.renderer.gl;0===this.getStackLength()?(r.disable(r.STENCIL_TEST),r.clearStencil(0),r.clear(r.STENCIL_BUFFER_BIT)):(r.colorMask(!1,!1,!1,!1),r.stencilOp(r.KEEP,r.KEEP,r.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent())},e.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.getStackLength(),4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},e}(za),Qa=function(){function i(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new qt,this.transform=null}return i.prototype.update=function(e,t,r,n){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=t||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,n),this.transform&&this.projectionMatrix.append(this.transform);var o=this.renderer;o.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,o.globalUniforms.update(),o.shader.shader&&o.shader.syncUniformGroup(o.shader.shader.uniforms.globals)},i.prototype.calculateProjection=function(e,t,r,n){var o=this.projectionMatrix,a=n?-1:1;o.identity(),o.a=1/t.width*2,o.d=a*(1/t.height*2),o.tx=-1-t.x*o.a,o.ty=-a-t.y*o.d},i.prototype.setTransform=function(e){},i.prototype.destroy=function(){this.renderer=null},i}(),cr=new It,qr=new It,Ja=function(){function i(e){this.renderer=e,this.clearColor=e._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new It,this.destinationFrame=new It,this.viewportFrame=new It}return i.prototype.bind=function(e,t,r){void 0===e&&(e=null);var o,a,s,n=this.renderer;this.current=e,e?(s=(o=e.baseTexture).resolution,t||(cr.width=e.frame.width,cr.height=e.frame.height,t=cr),r||(qr.x=e.frame.x,qr.y=e.frame.y,qr.width=t.width,qr.height=t.height,r=qr),a=o.framebuffer):(s=n.resolution,t||(cr.width=n.screen.width,cr.height=n.screen.height,t=cr),r||((r=cr).width=t.width,r.height=t.height));var h=this.viewportFrame;h.x=r.x*s,h.y=r.y*s,h.width=r.width*s,h.height=r.height*s,e||(h.y=n.view.height-(h.y+h.height)),h.ceil(),this.renderer.framebuffer.bind(a,h),this.renderer.projection.update(r,t,s,!a),this.renderer.mask.setMaskStack(e?o.maskStack:this.defaultMaskStack),this.sourceFrame.copyFrom(t),this.destinationFrame.copyFrom(r)},i.prototype.clear=function(e,t){e=this.current?e||this.current.baseTexture.clearColor:e||this.clearColor;var r=this.destinationFrame,n=this.current?this.current.baseTexture:this.renderer.screen,o=r.width!==n.width||r.height!==n.height;if(o){var a=this.viewportFrame,s=a.x,h=a.y,l=a.width,f=a.height;s=Math.round(s),h=Math.round(h),l=Math.round(l),f=Math.round(f),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(s,h,l,f)}this.renderer.framebuffer.clear(e[0],e[1],e[2],e[3],t),o&&this.renderer.scissor.pop()},i.prototype.resize=function(){this.bind(null)},i.prototype.reset=function(){this.bind(null)},i.prototype.destroy=function(){this.renderer=null},i}();function Vc(i,e,t,r,n){t.buffer.update(n)}var Wc={float:"\n        data[offset] = v;\n    ",vec2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n    ",vec3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n    ",vec4:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n        data[offset+3] = v[3];\n    ",mat2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n\n        data[offset+4] = v[2];\n        data[offset+5] = v[3];\n    ",mat3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n        data[offset + 4] = v[3];\n        data[offset + 5] = v[4];\n        data[offset + 6] = v[5];\n\n        data[offset + 8] = v[6];\n        data[offset + 9] = v[7];\n        data[offset + 10] = v[8];\n    ",mat4:"\n        for(var i = 0; i < 16; i++)\n        {\n            data[offset + i] = v[i];\n        }\n    "},ts={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:32,mat3:48,mat4:64};var Zc=function(){function i(e,t){this.program=e,this.uniformData=t,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return i.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},i}();var Jc=0,Ni={textureCount:0,uboCount:0},es=function(){function i(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=Jc++}return i.prototype.systemCheck=function(){if(!function(){if("boolean"==typeof Zr)return Zr;try{var i=new Function("param1","param2","param3","return param1[param2] === param3;");Zr=!0===i({a:"b"},"a","b")}catch(e){Zr=!1}return Zr}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},i.prototype.contextChange=function(e){this.gl=e,this.reset()},i.prototype.bind=function(e,t){e.uniforms.globals=this.renderer.globalUniforms;var r=e.program,n=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==r&&(this.program=r,this.gl.useProgram(n.program)),t||(Ni.textureCount=0,Ni.uboCount=0,this.syncUniformGroup(e.uniformGroup,Ni)),n},i.prototype.setUniforms=function(e){var t=this.shader.program;t.syncUniforms(t.glPrograms[this.renderer.CONTEXT_UID].uniformData,e,this.renderer)},i.prototype.syncUniformGroup=function(e,t){var r=this.getGlProgram();(!e.static||e.dirtyId!==r.uniformDirtyGroups[e.id])&&(r.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,r,t))},i.prototype.syncUniforms=function(e,t,r){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(t.uniformData,e.uniforms,this.renderer,r)},i.prototype.createSyncGroups=function(e){var t=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[t]||(this.cache[t]=function(i,e){var t,r=["\n        var v = null;\n        var cv = null;\n        var cu = null;\n        var t = 0;\n        var gl = renderer.gl;\n    "];for(var n in i.uniforms){var o=e[n];if(o){for(var a=i.uniforms[n],s=!1,h=0;h<br.length;h++)if(br[h].test(o,a)){r.push(br[h].code(n,a)),s=!0;break}if(!s){var f=(1===o.size?Ic:Mc)[o.type].replace("location",'ud["'+n+'"].location');r.push('\n            cu = ud["'+n+'"];\n            cv = cu.value;\n            v = uv["'+n+'"];\n            '+f+";")}}else(null===(t=i.uniforms[n])||void 0===t?void 0:t.group)&&r.push(i.uniforms[n].ubo?"\n                        renderer.shader.syncUniformBufferGroup(uv."+n+", '"+n+"');\n                    ":"\n                        renderer.shader.syncUniformGroup(uv."+n+", syncData);\n                    ")}return new Function("ud","uv","renderer","syncData",r.join("\n"))}(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[t],e.syncUniforms[this.shader.program.id]},i.prototype.syncUniformBufferGroup=function(e,t){var r=this.getGlProgram();if(!e.static||0!==e.dirtyId||!r.uniformGroups[e.id]){e.dirtyId=0;var n=r.uniformGroups[e.id]||this.createSyncBufferGroup(e,r,t);e.buffer.update(),n(r.uniformData,e.uniforms,this.renderer,Ni,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,r.uniformBufferBindings[t])},i.prototype.createSyncBufferGroup=function(e,t,r){var n=this.renderer.gl;this.renderer.buffer.bind(e.buffer);var o=this.gl.getUniformBlockIndex(t.program,r);t.uniformBufferBindings[r]=this.shader.uniformBindCount,n.uniformBlockBinding(t.program,o,this.shader.uniformBindCount),this.shader.uniformBindCount++;var a=this.getSignature(e,this.shader.program.uniformData,"ubo"),s=this._uboCache[a];if(s||(s=this._uboCache[a]=function(i,e){if(!i.autoManage)return{size:0,syncFunc:Vc};for(var t=function(i,e){var t=[];for(var r in i)e[r]&&t.push(e[r]);return t.sort(function(n,o){return n.index-o.index}),t}(i.uniforms,e),r=function(i){for(var e=i.map(function(h){return{data:h,offset:0,dataLen:0,dirty:0}}),t=0,r=0,n=0,o=0;o<e.length;o++){var a=e[o];if(t=ts[a.data.type],a.data.size>1&&(t=Math.max(t,16)*a.data.size),a.dataLen=t,r%t!=0&&r<16){var s=r%t%16;r+=s,n+=s}r+t>16?(n=16*Math.ceil(n/16),a.offset=n,n+=t,r=t):(a.offset=n,r+=t,n+=t)}return{uboElements:e,size:n=16*Math.ceil(n/16)}}(t),n=r.uboElements,o=r.size,a=["\n    var v = null;\n    var v2 = null;\n    var cv = null;\n    var t = 0;\n    var gl = renderer.gl\n    var index = 0;\n    var data = buffer.data;\n    "],s=0;s<n.length;s++){for(var h=n[s],l=i.uniforms[h.data.name],f=h.data.name,_=!1,c=0;c<br.length;c++){var d=br[c];if(d.codeUbo&&d.test(h.data,l)){a.push("offset = "+h.offset/4+";",br[c].codeUbo(h.data.name,l)),_=!0;break}}if(!_)if(h.data.size>1){var m=Xa(h.data.type),v=Math.max(ts[h.data.type]/16,1),g=m/v;a.push("\n                cv = ud."+f+".value;\n                v = uv."+f+";\n                offset = "+h.offset/4+";\n\n                t = 0;\n\n                for(var i=0; i < "+h.data.size*v+"; i++)\n                {\n                    for(var j = 0; j < "+g+"; j++)\n                    {\n                        data[offset++] = v[t++];\n                    }\n                    offset += "+(4-g%4)%4+";\n                }\n\n                ")}else a.push("\n                cv = ud."+f+".value;\n                v = uv."+f+";\n                offset = "+h.offset/4+";\n                "+Wc[h.data.type]+";\n                ")}return a.push("\n       renderer.buffer.update(buffer);\n    "),{size:o,syncFunc:new Function("ud","uv","renderer","syncData","buffer",a.join("\n"))}}(e,this.shader.program.uniformData)),e.autoManage){var h=new Float32Array(s.size/4);e.buffer.update(h)}return t.uniformGroups[e.id]=s.syncFunc,t.uniformGroups[e.id]},i.prototype.getSignature=function(e,t,r){var n=e.uniforms,o=[r+"-"];for(var a in n)o.push(a),t[a]&&o.push(t[a].type);return o.join("-")},i.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},i.prototype.generateProgram=function(e){var r=e.program,n=function(i,e){var t=Ua(i,i.VERTEX_SHADER,e.vertexSrc),r=Ua(i,i.FRAGMENT_SHADER,e.fragmentSrc),n=i.createProgram();if(i.attachShader(n,t),i.attachShader(n,r),i.linkProgram(n),i.getProgramParameter(n,i.LINK_STATUS)||function(i,e,t,r){i.getProgramParameter(e,i.LINK_STATUS)||(i.getShaderParameter(t,i.COMPILE_STATUS)||Ga(i,t),i.getShaderParameter(r,i.COMPILE_STATUS)||Ga(i,r),console.error("PixiJS Error: Could not initialize shader."),""!==i.getProgramInfoLog(e)&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",i.getProgramInfoLog(e)))}(i,n,t,r),e.attributeData=function(i,e){for(var t={},r=e.getProgramParameter(i,e.ACTIVE_ATTRIBUTES),n=0;n<r;n++){var o=e.getActiveAttrib(i,n);if(0!==o.name.indexOf("gl_")){var a=Wa(e,o.type),s={type:a,name:o.name,size:Xa(a),location:e.getAttribLocation(i,o.name)};t[o.name]=s}}return t}(n,i),e.uniformData=function(i,e){for(var t={},r=e.getProgramParameter(i,e.ACTIVE_UNIFORMS),n=0;n<r;n++){var o=e.getActiveUniform(i,n),a=o.name.replace(/\[.*?\]$/,""),s=!!o.name.match(/\[.*?\]$/),h=Wa(e,o.type);t[a]={name:a,index:n,type:h,size:o.size,isArray:s,value:ka(h,o.size)}}return t}(n,i),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){var o=Object.keys(e.attributeData);o.sort(function(f,_){return f>_?1:-1});for(var a=0;a<o.length;a++)e.attributeData[o[a]].location=a,i.bindAttribLocation(n,a,o[a]);i.linkProgram(n)}i.deleteShader(t),i.deleteShader(r);var s={};for(var a in e.uniformData){var h=e.uniformData[a];s[a]={location:i.getUniformLocation(n,a),value:ka(h.type,h.size)}}return new Zc(n,s)}(this.gl,r);return r.glPrograms[this.renderer.CONTEXT_UID]=n,n},i.prototype.reset=function(){this.program=null,this.shader=null},i.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},i}(),rs=function(){function i(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=ut.NONE,this._blendEq=!1,this.map=[],this.map[0]=this.setBlend,this.map[1]=this.setOffset,this.map[2]=this.setCullFace,this.map[3]=this.setDepthTest,this.map[4]=this.setFrontFace,this.map[5]=this.setDepthMask,this.checks=[],this.defaultState=new fr,this.defaultState.blend=!0}return i.prototype.contextChange=function(e){this.gl=e,this.blendModes=function(i,e){return void 0===e&&(e=[]),e[ut.NORMAL]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ut.ADD]=[i.ONE,i.ONE],e[ut.MULTIPLY]=[i.DST_COLOR,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ut.SCREEN]=[i.ONE,i.ONE_MINUS_SRC_COLOR,i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ut.OVERLAY]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ut.DARKEN]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ut.LIGHTEN]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ut.COLOR_DODGE]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ut.COLOR_BURN]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ut.HARD_LIGHT]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ut.SOFT_LIGHT]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ut.DIFFERENCE]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ut.EXCLUSION]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ut.HUE]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ut.SATURATION]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ut.COLOR]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ut.LUMINOSITY]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ut.NONE]=[0,0],e[ut.NORMAL_NPM]=[i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ut.ADD_NPM]=[i.SRC_ALPHA,i.ONE,i.ONE,i.ONE],e[ut.SCREEN_NPM]=[i.SRC_ALPHA,i.ONE_MINUS_SRC_COLOR,i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ut.SRC_IN]=[i.DST_ALPHA,i.ZERO],e[ut.SRC_OUT]=[i.ONE_MINUS_DST_ALPHA,i.ZERO],e[ut.SRC_ATOP]=[i.DST_ALPHA,i.ONE_MINUS_SRC_ALPHA],e[ut.DST_OVER]=[i.ONE_MINUS_DST_ALPHA,i.ONE],e[ut.DST_IN]=[i.ZERO,i.SRC_ALPHA],e[ut.DST_OUT]=[i.ZERO,i.ONE_MINUS_SRC_ALPHA],e[ut.DST_ATOP]=[i.ONE_MINUS_DST_ALPHA,i.SRC_ALPHA],e[ut.XOR]=[i.ONE_MINUS_DST_ALPHA,i.ONE_MINUS_SRC_ALPHA],e[ut.SUBTRACT]=[i.ONE,i.ONE,i.ONE,i.ONE,i.FUNC_REVERSE_SUBTRACT,i.FUNC_ADD],e}(e),this.set(this.defaultState),this.reset()},i.prototype.set=function(e){if(this.stateId!==(e=e||this.defaultState).data){for(var t=this.stateId^e.data,r=0;t;)1&t&&this.map[r].call(this,!!(e.data&1<<r)),t>>=1,r++;this.stateId=e.data}for(r=0;r<this.checks.length;r++)this.checks[r](this,e)},i.prototype.forceState=function(e){e=e||this.defaultState;for(var t=0;t<this.map.length;t++)this.map[t].call(this,!!(e.data&1<<t));for(t=0;t<this.checks.length;t++)this.checks[t](this,e);this.stateId=e.data},i.prototype.setBlend=function(e){this.updateCheck(i.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)},i.prototype.setOffset=function(e){this.updateCheck(i.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},i.prototype.setDepthTest=function(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)},i.prototype.setDepthMask=function(e){this.gl.depthMask(e)},i.prototype.setCullFace=function(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)},i.prototype.setFrontFace=function(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])},i.prototype.setBlendMode=function(e){if(e!==this.blendMode){this.blendMode=e;var t=this.blendModes[e],r=this.gl;2===t.length?r.blendFunc(t[0],t[1]):r.blendFuncSeparate(t[0],t[1],t[2],t[3]),6===t.length?(this._blendEq=!0,r.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,r.blendEquationSeparate(r.FUNC_ADD,r.FUNC_ADD))}},i.prototype.setPolygonOffset=function(e,t){this.gl.polygonOffset(e,t)},i.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},i.prototype.updateCheck=function(e,t){var r=this.checks.indexOf(e);t&&-1===r?this.checks.push(e):!t&&-1!==r&&this.checks.splice(r,1)},i.checkBlendMode=function(e,t){e.setBlendMode(t.blendMode)},i.checkPolygonOffset=function(e,t){e.setPolygonOffset(1,t.polygonOffset)},i.prototype.destroy=function(){this.gl=null},i}(),is=function(){function i(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=st.GC_MAX_IDLE,this.checkCountMax=st.GC_MAX_CHECK_COUNT,this.mode=st.GC_MODE}return i.prototype.postrender=function(){!this.renderer.renderingToScreen||(this.count++,this.mode!==_i.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},i.prototype.run=function(){for(var e=this.renderer.texture,t=e.managedTextures,r=!1,n=0;n<t.length;n++){var o=t[n];!o.framebuffer&&this.count-o.touched>this.maxIdle&&(e.destroyTexture(o,!0),t[n]=null,r=!0)}if(r){var a=0;for(n=0;n<t.length;n++)null!==t[n]&&(t[a++]=t[n]);t.length=a}},i.prototype.unload=function(e){var r=e._texture;r&&!r.framebuffer&&this.renderer.texture.destroyTexture(r);for(var n=e.children.length-1;n>=0;n--)this.unload(e.children[n])},i.prototype.destroy=function(){this.renderer=null},i}(),kn=function(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=dt.UNSIGNED_BYTE,this.internalFormat=H.RGBA,this.samplerType=0},ns=function(){function i(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Mt,this.hasIntegerTextures=!1}return i.prototype.contextChange=function(){var e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=function(i){var e,t,r,n,o,a,s,h,l,f,_,c,d,m,v,g,R,C,B,j,N,I,J;return"WebGL2RenderingContext"in self&&i instanceof self.WebGL2RenderingContext?((e={})[dt.UNSIGNED_BYTE]=((t={})[H.RGBA]=i.RGBA8,t[H.RGB]=i.RGB8,t[H.RG]=i.RG8,t[H.RED]=i.R8,t[H.RGBA_INTEGER]=i.RGBA8UI,t[H.RGB_INTEGER]=i.RGB8UI,t[H.RG_INTEGER]=i.RG8UI,t[H.RED_INTEGER]=i.R8UI,t[H.ALPHA]=i.ALPHA,t[H.LUMINANCE]=i.LUMINANCE,t[H.LUMINANCE_ALPHA]=i.LUMINANCE_ALPHA,t),e[dt.BYTE]=((r={})[H.RGBA]=i.RGBA8_SNORM,r[H.RGB]=i.RGB8_SNORM,r[H.RG]=i.RG8_SNORM,r[H.RED]=i.R8_SNORM,r[H.RGBA_INTEGER]=i.RGBA8I,r[H.RGB_INTEGER]=i.RGB8I,r[H.RG_INTEGER]=i.RG8I,r[H.RED_INTEGER]=i.R8I,r),e[dt.UNSIGNED_SHORT]=((n={})[H.RGBA_INTEGER]=i.RGBA16UI,n[H.RGB_INTEGER]=i.RGB16UI,n[H.RG_INTEGER]=i.RG16UI,n[H.RED_INTEGER]=i.R16UI,n[H.DEPTH_COMPONENT]=i.DEPTH_COMPONENT16,n),e[dt.SHORT]=((o={})[H.RGBA_INTEGER]=i.RGBA16I,o[H.RGB_INTEGER]=i.RGB16I,o[H.RG_INTEGER]=i.RG16I,o[H.RED_INTEGER]=i.R16I,o),e[dt.UNSIGNED_INT]=((a={})[H.RGBA_INTEGER]=i.RGBA32UI,a[H.RGB_INTEGER]=i.RGB32UI,a[H.RG_INTEGER]=i.RG32UI,a[H.RED_INTEGER]=i.R32UI,a[H.DEPTH_COMPONENT]=i.DEPTH_COMPONENT24,a),e[dt.INT]=((s={})[H.RGBA_INTEGER]=i.RGBA32I,s[H.RGB_INTEGER]=i.RGB32I,s[H.RG_INTEGER]=i.RG32I,s[H.RED_INTEGER]=i.R32I,s),e[dt.FLOAT]=((h={})[H.RGBA]=i.RGBA32F,h[H.RGB]=i.RGB32F,h[H.RG]=i.RG32F,h[H.RED]=i.R32F,h[H.DEPTH_COMPONENT]=i.DEPTH_COMPONENT32F,h),e[dt.HALF_FLOAT]=((l={})[H.RGBA]=i.RGBA16F,l[H.RGB]=i.RGB16F,l[H.RG]=i.RG16F,l[H.RED]=i.R16F,l),e[dt.UNSIGNED_SHORT_5_6_5]=((f={})[H.RGB]=i.RGB565,f),e[dt.UNSIGNED_SHORT_4_4_4_4]=((_={})[H.RGBA]=i.RGBA4,_),e[dt.UNSIGNED_SHORT_5_5_5_1]=((c={})[H.RGBA]=i.RGB5_A1,c),e[dt.UNSIGNED_INT_2_10_10_10_REV]=((d={})[H.RGBA]=i.RGB10_A2,d[H.RGBA_INTEGER]=i.RGB10_A2UI,d),e[dt.UNSIGNED_INT_10F_11F_11F_REV]=((m={})[H.RGB]=i.R11F_G11F_B10F,m),e[dt.UNSIGNED_INT_5_9_9_9_REV]=((v={})[H.RGB]=i.RGB9_E5,v),e[dt.UNSIGNED_INT_24_8]=((g={})[H.DEPTH_STENCIL]=i.DEPTH24_STENCIL8,g),e[dt.FLOAT_32_UNSIGNED_INT_24_8_REV]=((R={})[H.DEPTH_STENCIL]=i.DEPTH32F_STENCIL8,R),J=e):((C={})[dt.UNSIGNED_BYTE]=((B={})[H.RGBA]=i.RGBA,B[H.RGB]=i.RGB,B[H.ALPHA]=i.ALPHA,B[H.LUMINANCE]=i.LUMINANCE,B[H.LUMINANCE_ALPHA]=i.LUMINANCE_ALPHA,B),C[dt.UNSIGNED_SHORT_5_6_5]=((j={})[H.RGB]=i.RGB,j),C[dt.UNSIGNED_SHORT_4_4_4_4]=((N={})[H.RGBA]=i.RGBA,N),C[dt.UNSIGNED_SHORT_5_5_5_1]=((I={})[H.RGBA]=i.RGBA,I),J=C),J}(e);var t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=t;for(var r=0;r<t;r++)this.boundTextures[r]=null;this.emptyTextures={};var n=new kn(e.createTexture());for(e.bindTexture(e.TEXTURE_2D,n.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=n,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new kn(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture),r=0;r<6;r++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);for(e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR),r=0;r<this.boundTextures.length;r++)this.bind(null,r)},i.prototype.bind=function(e,t){void 0===t&&(t=0);var r=this.gl;if((e=null==e?void 0:e.castToBaseTexture())&&e.valid&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;var n=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[t]!==e&&(this.currentLocation!==t&&(this.currentLocation=t,r.activeTexture(r.TEXTURE0+t)),r.bindTexture(e.target,n.texture)),n.dirtyId!==e.dirtyId&&(this.currentLocation!==t&&(this.currentLocation=t,r.activeTexture(r.TEXTURE0+t)),this.updateTexture(e)),this.boundTextures[t]=e}else this.currentLocation!==t&&(this.currentLocation=t,r.activeTexture(r.TEXTURE0+t)),r.bindTexture(r.TEXTURE_2D,this.emptyTextures[r.TEXTURE_2D].texture),this.boundTextures[t]=null},i.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture},i.prototype.unbind=function(e){var r=this.gl,n=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var o=0;o<n.length;o++)n[o]===this.unknownTexture&&this.bind(null,o)}for(o=0;o<n.length;o++)n[o]===e&&(this.currentLocation!==o&&(r.activeTexture(r.TEXTURE0+o),this.currentLocation=o),r.bindTexture(e.target,this.emptyTextures[e.target].texture),n[o]=null)},i.prototype.ensureSamplerType=function(e){var t=this,r=t.boundTextures,o=t.CONTEXT_UID;if(t.hasIntegerTextures)for(var a=e-1;a>=0;--a){var s=r[a];s&&s._glTextures[o].samplerType!==Wr.FLOAT&&this.renderer.texture.unbind(s)}},i.prototype.initTexture=function(e){var t=new kn(this.gl.createTexture());return t.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=t,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),t},i.prototype.initTextureType=function(e,t){var r,n;t.internalFormat=null!==(n=null===(r=this.internalFormats[e.type])||void 0===r?void 0:r[e.format])&&void 0!==n?n:e.format,t.type=2===this.webGLVersion&&e.type===dt.HALF_FLOAT?this.gl.HALF_FLOAT:e.type},i.prototype.updateTexture=function(e){var t=e._glTextures[this.CONTEXT_UID];if(t){var r=this.renderer;if(this.initTextureType(e,t),e.resource&&e.resource.upload(r,e,t))t.samplerType!==Wr.FLOAT&&(this.hasIntegerTextures=!0);else{var n=e.realWidth,o=e.realHeight,a=r.gl;(t.width!==n||t.height!==o||t.dirtyId<0)&&(t.width=n,t.height=o,a.texImage2D(e.target,0,t.internalFormat,n,o,0,e.format,t.type,null))}e.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(e),t.dirtyId=e.dirtyId}},i.prototype.destroyTexture=function(e,t){var r=this.gl;if((e=e.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(e),r.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!t)){var n=this.managedTextures.indexOf(e);-1!==n&&Or(this.managedTextures,n,1)}},i.prototype.updateTextureStyle=function(e){var t=e._glTextures[this.CONTEXT_UID];!t||(t.mipmap=!!(e.mipmap!==Ge.POW2&&2===this.webGLVersion||e.isPowerOfTwo)&&e.mipmap>=1,t.wrapMode=2===this.webGLVersion||e.isPowerOfTwo?e.wrapMode:Ne.CLAMP,e.resource&&e.resource.style(this.renderer,e,t)||this.setStyle(e,t),t.dirtyStyleId=e.dirtyStyleId)},i.prototype.setStyle=function(e,t){var r=this.gl;if(t.mipmap&&e.mipmap!==Ge.ON_MANUAL&&r.generateMipmap(e.target),r.texParameteri(e.target,r.TEXTURE_WRAP_S,t.wrapMode),r.texParameteri(e.target,r.TEXTURE_WRAP_T,t.wrapMode),t.mipmap){r.texParameteri(e.target,r.TEXTURE_MIN_FILTER,e.scaleMode===Te.LINEAR?r.LINEAR_MIPMAP_LINEAR:r.NEAREST_MIPMAP_NEAREST);var n=this.renderer.context.extensions.anisotropicFiltering;if(n&&e.anisotropicLevel>0&&e.scaleMode===Te.LINEAR){var o=Math.min(e.anisotropicLevel,r.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT));r.texParameterf(e.target,n.TEXTURE_MAX_ANISOTROPY_EXT,o)}}else r.texParameteri(e.target,r.TEXTURE_MIN_FILTER,e.scaleMode===Te.LINEAR?r.LINEAR:r.NEAREST);r.texParameteri(e.target,r.TEXTURE_MAG_FILTER,e.scaleMode===Te.LINEAR?r.LINEAR:r.NEAREST)},i.prototype.destroy=function(){this.renderer=null},i}(),os={__proto__:null,FilterSystem:Na,BatchSystem:La,ContextSystem:Ba,FramebufferSystem:Fa,GeometrySystem:wa,MaskSystem:$a,ScissorSystem:Ka,StencilSystem:qa,ProjectionSystem:Qa,RenderTextureSystem:Ja,ShaderSystem:es,StateSystem:rs,TextureGCSystem:is,TextureSystem:ns},Yn=new qt,h_=function(i){function e(t,r){void 0===t&&(t=Tr.UNKNOWN);var n=i.call(this)||this;return r=Object.assign({},st.RENDER_OPTIONS,r),n.options=r,n.type=t,n.screen=new It(0,0,r.width,r.height),n.view=r.view||document.createElement("canvas"),n.resolution=r.resolution||st.RESOLUTION,n.useContextAlpha=r.useContextAlpha,n.autoDensity=!!r.autoDensity,n.preserveDrawingBuffer=r.preserveDrawingBuffer,n.clearBeforeRender=r.clearBeforeRender,n._backgroundColor=0,n._backgroundColorRgba=[0,0,0,1],n._backgroundColorString="#000000",n.backgroundColor=r.backgroundColor||n._backgroundColor,n.backgroundAlpha=r.backgroundAlpha,void 0!==r.transparent&&(Ze("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),n.useContextAlpha=r.transparent,n.backgroundAlpha=r.transparent?0:1),n._lastObjectRendered=null,n.plugins={},n}return wt(e,i),e.prototype.initPlugins=function(t){for(var r in t)this.plugins[r]=new t[r](this)},Object.defineProperty(e.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,r){this.view.width=Math.round(t*this.resolution),this.view.height=Math.round(r*this.resolution);var n=this.view.width/this.resolution,o=this.view.height/this.resolution;this.screen.width=n,this.screen.height=o,this.autoDensity&&(this.view.style.width=n+"px",this.view.style.height=o+"px"),this.emit("resize",n,o)},e.prototype.generateTexture=function(t,r,n,o){void 0===r&&(r={}),"number"==typeof r&&(Ze("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),r={scaleMode:r,resolution:n,region:o});var a=r.region,s=function(i,e){var t={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(t[r]=i[r]);if(null!=i&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(i);n<r.length;n++)e.indexOf(r[n])<0&&(t[r[n]]=i[r[n]])}return t}(r,["region"]);0===(o=a||t.getLocalBounds(null,!0)).width&&(o.width=1),0===o.height&&(o.height=1);var h=lr.create(Pn({width:o.width,height:o.height},s));return Yn.tx=-o.x,Yn.ty=-o.y,this.render(t,{renderTexture:h,clear:!1,transform:Yn,skipUpdateTransform:!!t.parent}),h},e.prototype.destroy=function(t){for(var r in this.plugins)this.plugins[r].destroy(),this.plugins[r]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var n=this;n.plugins=null,n.type=Tr.UNKNOWN,n.view=null,n.screen=null,n._tempDisplayObjectParent=null,n.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=na(t),yr(t,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(t){this._backgroundColorRgba[3]=t},enumerable:!1,configurable:!0}),e}(Xr()),l_=function(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},u_=function(){function i(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}return i.prototype.destroy=function(){this.renderer=null},i.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},i.prototype.bind=function(e){var r=this.gl,o=e._glBuffers[this.CONTEXT_UID]||this.createGLBuffer(e);r.bindBuffer(e.type,o.buffer)},i.prototype.bindBufferBase=function(e,t){var n=this.gl;if(this.boundBufferBases[t]!==e){var a=e._glBuffers[this.CONTEXT_UID]||this.createGLBuffer(e);this.boundBufferBases[t]=e,n.bindBufferBase(n.UNIFORM_BUFFER,t,a.buffer)}},i.prototype.bindBufferRange=function(e,t,r){var o=this.gl;r=r||0;var s=e._glBuffers[this.CONTEXT_UID]||this.createGLBuffer(e);o.bindBufferRange(o.UNIFORM_BUFFER,t||0,s.buffer,256*r,256)},i.prototype.update=function(e){var r=this.gl,o=e._glBuffers[this.CONTEXT_UID];if(e._updateID!==o.updateID)if(o.updateID=e._updateID,r.bindBuffer(e.type,o.buffer),o.byteLength>=e.data.byteLength)r.bufferSubData(e.type,0,e.data);else{var a=e.static?r.STATIC_DRAW:r.DYNAMIC_DRAW;o.byteLength=e.data.byteLength,r.bufferData(e.type,e.data,a)}},i.prototype.dispose=function(e,t){if(this.managedBuffers[e.id]){delete this.managedBuffers[e.id];var r=e._glBuffers[this.CONTEXT_UID],n=this.gl;e.disposeRunner.remove(this),r&&(t||n.deleteBuffer(r.buffer),delete e._glBuffers[this.CONTEXT_UID])}},i.prototype.disposeAll=function(e){for(var t=Object.keys(this.managedBuffers),r=0;r<t.length;r++)this.dispose(this.managedBuffers[t[r]],e)},i.prototype.createGLBuffer=function(e){var r=this.CONTEXT_UID;return e._glBuffers[r]=new l_(this.gl.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[r]},i}(),Qe=function(i){function e(t){var r=i.call(this,Tr.WEBGL,t)||this;return t=r.options,r.gl=null,r.CONTEXT_UID=0,r.runners={destroy:new oe("destroy"),contextChange:new oe("contextChange"),reset:new oe("reset"),update:new oe("update"),postrender:new oe("postrender"),prerender:new oe("prerender"),resize:new oe("resize")},r.runners.contextChange.add(r),r.globalUniforms=new ur({projectionMatrix:new qt},!0),r.addSystem($a,"mask").addSystem(Ba,"context").addSystem(rs,"state").addSystem(es,"shader").addSystem(ns,"texture").addSystem(u_,"buffer").addSystem(wa,"geometry").addSystem(Fa,"framebuffer").addSystem(Ka,"scissor").addSystem(qa,"stencil").addSystem(Qa,"projection").addSystem(is,"textureGC").addSystem(Na,"filter").addSystem(Ja,"renderTexture").addSystem(La,"batch"),r.initPlugins(e.__plugins),r.multisample=void 0,t.context?r.context.initFromContext(t.context):r.context.initFromOptions({alpha:!!r.useContextAlpha,antialias:t.antialias,premultipliedAlpha:r.useContextAlpha&&"notMultiplied"!==r.useContextAlpha,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:r.options.powerPreference}),r.renderingToScreen=!0,function(i){var e;_n||(navigator.userAgent.toLowerCase().indexOf("chrome")>-1?(e=self.console).log.apply(e,["\n %c %c %c PixiJS 6.2.0 - \u2730 "+i+" \u2730  %c  %c  http://www.pixijs.com/  %c %c \u2665%c\u2665%c\u2665 \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"]):self.console&&self.console.log("PixiJS 6.2.0 - "+i+" - http://www.pixijs.com/"),_n=!0)}(2===r.context.webGLVersion?"WebGL 2":"WebGL 1"),r.resize(r.options.width,r.options.height),r}return wt(e,i),e.create=function(t){if(void 0===dn&&(dn=function(){var e={stencil:!0,failIfMajorPerformanceCaveat:st.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!self.WebGLRenderingContext)return!1;var t=document.createElement("canvas"),r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),n=!(!r||!r.getContextAttributes().stencil);if(r){var o=r.getExtension("WEBGL_lose_context");o&&o.loseContext()}return r=null,n}catch(a){return!1}}()),dn)return new e(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},e.prototype.contextChange=function(){var r,t=this.gl;if(1===this.context.webGLVersion){var n=t.getParameter(t.FRAMEBUFFER_BINDING);t.bindFramebuffer(t.FRAMEBUFFER,null),r=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.FRAMEBUFFER,n)}else n=t.getParameter(t.DRAW_FRAMEBUFFER_BINDING),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),r=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,n);this.multisample=r>=Zt.HIGH?Zt.HIGH:r>=Zt.MEDIUM?Zt.MEDIUM:r>=Zt.LOW?Zt.LOW:Zt.NONE},e.prototype.addSystem=function(t,r){var n=new t(this);if(this[r])throw new Error('Whoops! The name "'+r+'" is already in use');for(var o in this[r]=n,this.runners)this.runners[o].add(n);return this},e.prototype.render=function(t,r){var n,o,a,s;if(r&&(r instanceof lr?(Ze("6.0.0","Renderer#render arguments changed, use options instead."),n=r,o=arguments[2],a=arguments[3],s=arguments[4]):(n=r.renderTexture,o=r.clear,a=r.transform,s=r.skipUpdateTransform)),this.renderingToScreen=!n,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=a,!this.context.isLost){if(n||(this._lastObjectRendered=t),!s){var h=t.enableTempParent();t.updateTransform(),t.disableTempParent(h)}this.renderTexture.bind(n),this.batch.currentRenderer.start(),(void 0!==o?o:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),n&&n.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},e.prototype.generateTexture=function(t,r,n,o){void 0===r&&(r={});var a=i.prototype.generateTexture.call(this,t,r,n,o);return this.framebuffer.blit(),a},e.prototype.resize=function(t,r){i.prototype.resize.call(this,t,r),this.runners.resize.emit(this.screen.height,this.screen.width)},e.prototype.reset=function(){return this.runners.reset.emit(),this},e.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},e.prototype.destroy=function(t){for(var r in this.runners.destroy.emit(),this.runners)this.runners[r].destroy();i.prototype.destroy.call(this,t),this.gl=null},Object.defineProperty(e.prototype,"extract",{get:function(){return Ze("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),e.registerPlugin=function(t,r){(e.__plugins=e.__plugins||{})[t]=r},e}(h_);function as(i){return Qe.create(i)}var ss="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n",Hn=function(){this.texArray=null,this.blend=0,this.type=_e.TRIANGLES,this.start=0,this.size=0,this.data=null},Xn=function(){function i(){this.elements=[],this.ids=[],this.count=0}return i.prototype.clear=function(){for(var e=0;e<this.count;e++)this.elements[e]=null;this.count=0},i}(),Vn=function(){function i(e){this.rawBinaryData="number"==typeof e?new ArrayBuffer(e):e instanceof Uint8Array?e.buffer:e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(i.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),i.prototype.view=function(e){return this[e+"View"]},i.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},i.sizeOf=function(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(e+" isn't a valid view type")}},i}(),d_=function(i){function e(t){var r=i.call(this,t)||this;return r.shaderGenerator=null,r.geometryClass=null,r.vertexSize=null,r.state=fr.for2d(),r.size=4*st.SPRITE_BATCH_SIZE,r._vertexCount=0,r._indexCount=0,r._bufferedElements=[],r._bufferedTextures=[],r._bufferSize=0,r._shader=null,r._packedGeometries=[],r._packedGeometryPoolSize=2,r._flushId=0,r._aBuffers={},r._iBuffers={},r.MAX_TEXTURES=1,r.renderer.on("prerender",r.onPrerender,r),t.runners.contextChange.add(r),r._dcIndex=0,r._aIndex=0,r._iIndex=0,r._attributeBuffer=null,r._indexBuffer=null,r._tempBoundTextures=[],r}return wt(e,i),e.prototype.contextChange=function(){var t=this.renderer.gl;st.PREFER_ENV===De.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),st.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=function(i,e){if(0===i)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var t=e.createShader(e.FRAGMENT_SHADER);;){var r=Nc.replace(/%forloop%/gi,Lc(i));if(e.shaderSource(t,r),e.compileShader(t),e.getShaderParameter(t,e.COMPILE_STATUS))break;i=i/2|0}return i}(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var r=0;r<this._packedGeometryPoolSize;r++)this._packedGeometries[r]=new this.geometryClass;this.initFlushBuffers()},e.prototype.initFlushBuffers=function(){for(var t=e._drawCallPool,r=e._textureArrayPool,n=this.size/4,o=Math.floor(n/this.MAX_TEXTURES)+1;t.length<n;)t.push(new Hn);for(;r.length<o;)r.push(new Xn);for(var a=0;a<this.MAX_TEXTURES;a++)this._tempBoundTextures[a]=null},e.prototype.onPrerender=function(){this._flushId=0},e.prototype.render=function(t){!t._texture.valid||(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},e.prototype.buildTexturesAndDrawCalls=function(){var r=this._bufferedTextures,n=this.MAX_TEXTURES,o=e._textureArrayPool,a=this.renderer.batch,s=this._tempBoundTextures,h=this.renderer.textureGC.count,l=++Mt._globalBatch,f=0,_=o[0],c=0;a.copyBoundTextures(s,n);for(var d=0;d<this._bufferSize;++d){var m=r[d];r[d]=null,m._batchEnabled!==l&&(_.count>=n&&(a.boundArray(_,s,l,n),this.buildDrawCalls(_,c,d),c=d,_=o[++f],++l),m._batchEnabled=l,m.touched=h,_.elements[_.count++]=m)}for(_.count>0&&(a.boundArray(_,s,l,n),this.buildDrawCalls(_,c,this._bufferSize),++f,++l),d=0;d<s.length;d++)s[d]=null;Mt._globalBatch=l},e.prototype.buildDrawCalls=function(t,r,n){var o=this,a=o._bufferedElements,s=o._attributeBuffer,h=o._indexBuffer,l=o.vertexSize,f=e._drawCallPool,_=this._dcIndex,c=this._aIndex,d=this._iIndex,m=f[_];m.start=this._iIndex,m.texArray=t;for(var v=r;v<n;++v){var g=a[v],C=aa[g._texture.baseTexture.alphaMode?1:0][g.blendMode];a[v]=null,r<v&&m.blend!==C&&(m.size=d-m.start,r=v,(m=f[++_]).texArray=t,m.start=d),this.packInterleavedGeometry(g,s,h,c,d),c+=g.vertexData.length/2*l,d+=g.indices.length,m.blend=C}r<n&&(m.size=d-m.start,++_),this._dcIndex=_,this._aIndex=c,this._iIndex=d},e.prototype.bindAndClearTexArray=function(t){for(var r=this.renderer.texture,n=0;n<t.count;n++)r.bind(t.elements[n],t.ids[n]),t.elements[n]=null;t.count=0},e.prototype.updateGeometry=function(){var t=this,r=t._packedGeometries,n=t._attributeBuffer,o=t._indexBuffer;st.CAN_UPLOAD_SAME_BUFFER?(r[this._flushId]._buffer.update(n.rawBinaryData),r[this._flushId]._indexBuffer.update(o),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,r[this._flushId]=new this.geometryClass),r[this._flushId]._buffer.update(n.rawBinaryData),r[this._flushId]._indexBuffer.update(o),this.renderer.geometry.bind(r[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},e.prototype.drawBatches=function(){for(var t=this._dcIndex,r=this.renderer,n=r.gl,o=r.state,a=e._drawCallPool,s=null,h=0;h<t;h++){var l=a[h],f=l.texArray,_=l.type,c=l.size,d=l.start,m=l.blend;s!==f&&(s=f,this.bindAndClearTexArray(f)),this.state.blendMode=m,o.set(this.state),n.drawElements(_,c,n.UNSIGNED_SHORT,2*d)}},e.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},e.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),st.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),i.prototype.destroy.call(this)},e.prototype.getAttributeBuffer=function(t){var r=di(Math.ceil(t/8)),n=ua(r),o=8*r;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);var a=this._aBuffers[o];return a||(this._aBuffers[o]=a=new Vn(o*this.vertexSize*4)),a},e.prototype.getIndexBuffer=function(t){var r=di(Math.ceil(t/12)),n=ua(r),o=12*r;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);var a=this._iBuffers[n];return a||(this._iBuffers[n]=a=new Uint16Array(o)),a},e.prototype.packInterleavedGeometry=function(t,r,n,o,a){for(var s=r.uint32View,h=r.float32View,l=o/this.vertexSize,f=t.uvs,_=t.indices,c=t.vertexData,d=t._texture.baseTexture._batchLocation,m=Math.min(t.worldAlpha,1),v=m<1&&t._texture.baseTexture.alphaMode?pn(t._tintRGB,m):t._tintRGB+(255*m<<24),g=0;g<c.length;g+=2)h[o++]=c[g],h[o++]=c[g+1],h[o++]=f[g],h[o++]=f[g+1],s[o++]=v,h[o++]=d;for(g=0;g<_.length;g++)n[a++]=l+_[g]},e._drawCallPool=[],e._textureArrayPool=[],e}(xi),p_=function(){function i(e,t){if(this.vertexSrc=e,this.fragTemplate=t,this.programCache={},this.defaultGroupCache={},t.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(t.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return i.prototype.generateShader=function(e){if(!this.programCache[e]){for(var t=new Int32Array(e),r=0;r<e;r++)t[r]=r;this.defaultGroupCache[e]=ur.from({uSamplers:t},!0);var n=this.fragTemplate;n=(n=n.replace(/%count%/gi,""+e)).replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new Kr(this.vertexSrc,n)}var o={tint:new Float32Array([1,1,1,1]),translationMatrix:new qt,default:this.defaultGroupCache[e]};return new Ke(this.programCache[e],o)},i.prototype.generateSampleSrc=function(e){var t="";t+="\n",t+="\n";for(var r=0;r<e;r++)r>0&&(t+="\nelse "),r<e-1&&(t+="if(vTextureId < "+r+".5)"),t+="\n{",t+="\n\tcolor = texture2D(uSamplers["+r+"], vTextureCoord);",t+="\n}";return(t+="\n")+"\n"},i}(),hs=function(i){function e(t){void 0===t&&(t=!1);var r=i.call(this)||this;return r._buffer=new re(null,t,!1),r._indexBuffer=new re(null,t,!0),r.addAttribute("aVertexPosition",r._buffer,2,!1,dt.FLOAT).addAttribute("aTextureCoord",r._buffer,2,!1,dt.FLOAT).addAttribute("aColor",r._buffer,4,!0,dt.UNSIGNED_BYTE).addAttribute("aTextureId",r._buffer,1,!0,dt.FLOAT).addIndex(r._indexBuffer),r}return wt(e,i),e}($r),ls="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",us="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n",v_=function(){function i(){}return i.create=function(e){var t=Object.assign({vertex:ls,fragment:us,geometryClass:hs,vertexSize:6},e),r=t.vertex,n=t.fragment,o=t.vertexSize,a=t.geometryClass;return function(s){function h(l){var f=s.call(this,l)||this;return f.shaderGenerator=new p_(r,n),f.geometryClass=a,f.vertexSize=o,f}return wt(h,s),h}(d_)},Object.defineProperty(i,"defaultVertexSrc",{get:function(){return ls},enumerable:!1,configurable:!0}),Object.defineProperty(i,"defaultFragmentTemplate",{get:function(){return us},enumerable:!1,configurable:!0}),i}(),E_=v_.create(),m_={},g_=function(i){Object.defineProperty(m_,i,{get:function(){return Ze("6.0.0","PIXI.systems."+i+" has moved to PIXI."+i),Pa[i]}})};for(var Wn in Pa)g_(Wn);var T_={},S_=function(i){Object.defineProperty(T_,i,{get:function(){return Ze("6.0.0","PIXI.resources."+i+" has moved to PIXI."+i),os[i]}})};for(var Wn in os)S_(Wn);var jn=function(){function i(e){var t=this;this.stage=new fe,e=Object.assign({forceCanvas:!1},e),this.renderer=as(e),i._plugins.forEach(function(r){r.init.call(t,e)})}return i.registerPlugin=function(e){i._plugins.push(e)},i.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(i.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),i.prototype.destroy=function(e,t){var r=this,n=i._plugins.slice(0);n.reverse(),n.forEach(function(o){o.destroy.call(r)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null},i._plugins=[],i}(),y_=function(){function i(){}return i.init=function(e){var t=this;Object.defineProperty(this,"resizeTo",{set:function(r){self.removeEventListener("resize",this.queueResize),this._resizeTo=r,r&&(self.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){!t._resizeTo||(t.cancelResize(),t._resizeId=requestAnimationFrame(function(){return t.resize()}))},this.cancelResize=function(){t._resizeId&&(cancelAnimationFrame(t._resizeId),t._resizeId=null)},this.resize=function(){if(t._resizeTo){var r,n;if(t.cancelResize(),t._resizeTo===self)r=self.innerWidth,n=self.innerHeight;else{var o=t._resizeTo;r=o.clientWidth,n=o.clientHeight}t.renderer.resize(r,n)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null},i.destroy=function(){self.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},i}();jn.registerPlugin(y_);var fs=new It,O_=function(){function i(e){this.renderer=e}return i.prototype.image=function(e,t,r){var n=new Image;return n.src=this.base64(e,t,r),n},i.prototype.base64=function(e,t,r){return this.canvas(e).toDataURL(t,r)},i.prototype.canvas=function(e){var r,n,a,t=this.renderer,o=!1,s=!1;e&&(e instanceof lr?a=e:(a=this.renderer.generateTexture(e),s=!0)),a?(r=a.baseTexture.resolution,n=a.frame,o=!1,t.renderTexture.bind(a)):(r=this.renderer.resolution,o=!0,(n=fs).width=this.renderer.width,n.height=this.renderer.height,t.renderTexture.bind(null));var h=Math.floor(n.width*r+1e-4),l=Math.floor(n.height*r+1e-4),f=new _a(h,l,1),_=new Uint8Array(4*h*l),c=t.gl;c.readPixels(n.x*r,n.y*r,h,l,c.RGBA,c.UNSIGNED_BYTE,_);var d=f.context.getImageData(0,0,h,l);if(i.arrayPostDivide(_,d.data),f.context.putImageData(d,0,0),o){var m=new _a(f.width,f.height,1);m.context.scale(1,-1),m.context.drawImage(f.canvas,0,-l),f.destroy(),f=m}return s&&a.destroy(!0),f.canvas},i.prototype.pixels=function(e){var r,n,o,t=this.renderer,a=!1;e&&(e instanceof lr?o=e:(o=this.renderer.generateTexture(e),a=!0)),o?(r=o.baseTexture.resolution,n=o.frame,t.renderTexture.bind(o)):(r=t.resolution,(n=fs).width=t.width,n.height=t.height,t.renderTexture.bind(null));var s=n.width*r,h=n.height*r,l=new Uint8Array(4*s*h),f=t.gl;return f.readPixels(n.x*r,n.y*r,s,h,f.RGBA,f.UNSIGNED_BYTE,l),a&&o.destroy(!0),i.arrayPostDivide(l,l),l},i.prototype.destroy=function(){this.renderer=null},i.arrayPostDivide=function(e,t){for(var r=0;r<e.length;r+=4){var n=t[r+3]=e[r+3];0!==n?(t[r]=Math.round(Math.min(255*e[r]/n,255)),t[r+1]=Math.round(Math.min(255*e[r+1]/n,255)),t[r+2]=Math.round(Math.min(255*e[r+2]/n,255))):(t[r]=e[r],t[r+1]=e[r+1],t[r+2]=e[r+2])}},i}(),Li=function(){function i(e,t,r){void 0===t&&(t=!1),this._fn=e,this._once=t,this._thisArg=r,this._next=this._prev=this._owner=null}return i.prototype.detach=function(){return null!==this._owner&&(this._owner.detach(this),!0)},i}();function _s(i,e){return i._head?(i._tail._next=e,e._prev=i._tail,i._tail=e):(i._head=e,i._tail=e),e._owner=i,e}var He=function(){function i(){this._head=this._tail=void 0}return i.prototype.handlers=function(e){void 0===e&&(e=!1);var t=this._head;if(e)return!!t;for(var r=[];t;)r.push(t),t=t._next;return r},i.prototype.has=function(e){if(!(e instanceof Li))throw new Error("MiniSignal#has(): First arg must be a SignalBinding object.");return e._owner===this},i.prototype.dispatch=function(){for(var e=arguments,t=[],r=0;r<arguments.length;r++)t[r]=e[r];var n=this._head;if(!n)return!1;for(;n;)n._once&&this.detach(n),n._fn.apply(n._thisArg,t),n=n._next;return!0},i.prototype.add=function(e,t){if(void 0===t&&(t=null),"function"!=typeof e)throw new Error("MiniSignal#add(): First arg must be a Function.");return _s(this,new Li(e,!1,t))},i.prototype.once=function(e,t){if(void 0===t&&(t=null),"function"!=typeof e)throw new Error("MiniSignal#once(): First arg must be a Function.");return _s(this,new Li(e,!0,t))},i.prototype.detach=function(e){if(!(e instanceof Li))throw new Error("MiniSignal#detach(): First arg must be a SignalBinding object.");return e._owner!==this||(e._prev&&(e._prev._next=e._next),e._next&&(e._next._prev=e._prev),e===this._head?(this._head=e._next,null===e._next&&(this._tail=null)):e===this._tail&&(this._tail=e._prev,this._tail._next=null),e._owner=null),this},i.prototype.detachAll=function(){var e=this._head;if(!e)return this;for(this._head=this._tail=null;e;)e._owner=null,e=e._next;return this},i}();function ds(i,e){for(var t={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},r=t.parser[(e=e||{}).strictMode?"strict":"loose"].exec(i),n={},o=14;o--;)n[t.key[o]]=r[o]||"";return n[t.q.name]={},n[t.key[12]].replace(t.q.parser,function(a,s,h){s&&(n[t.q.name][s]=h)}),n}var A_=!(!self.XDomainRequest||"withCredentials"in new XMLHttpRequest),Ci=null;function vs(){}function Es(i,e,t){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(i[e]=t)}function $n(i){return i.toString().replace("object ","")}var i,o,zt=function(){function i(e,t,r){if(this._dequeue=vs,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=null,this._boundOnError=null,this._boundOnProgress=null,this._boundOnTimeout=null,this._boundXhrOnError=null,this._boundXhrOnTimeout=null,this._boundXhrOnAbort=null,this._boundXhrOnLoad=null,"string"!=typeof e||"string"!=typeof t)throw new Error("Both name and url are required for constructing a resource.");r=r||{},this._flags=0,this._setFlag(i.STATUS_FLAGS.DATA_URL,0===t.indexOf("data:")),this.name=e,this.url=t,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===r.crossOrigin?"anonymous":r.crossOrigin,this.timeout=r.timeout||0,this.loadType=r.loadType||this._determineLoadType(),this.xhrType=r.xhrType,this.metadata=r.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=i.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=vs,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new He,this.onProgress=new He,this.onComplete=new He,this.onAfterMiddleware=new He}return i.setExtensionLoadType=function(e,t){Es(i._loadTypeMap,e,t)},i.setExtensionXhrType=function(e,t){Es(i._xhrTypeMap,e,t)},Object.defineProperty(i.prototype,"isDataUrl",{get:function(){return this._hasFlag(i.STATUS_FLAGS.DATA_URL)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isComplete",{get:function(){return this._hasFlag(i.STATUS_FLAGS.COMPLETE)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isLoading",{get:function(){return this._hasFlag(i.STATUS_FLAGS.LOADING)},enumerable:!1,configurable:!0}),i.prototype.complete=function(){this._clearEvents(),this._finish()},i.prototype.abort=function(e){if(!this.error){if(this.error=new Error(e),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=i.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},i.prototype.load=function(e){var t=this;if(!this.isLoading){if(this.isComplete)return void(e&&setTimeout(function(){return e(t)},1));switch(e&&this.onComplete.once(e),this._setFlag(i.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),(!1===this.crossOrigin||"string"!=typeof this.crossOrigin)&&(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case i.LOAD_TYPE.IMAGE:this.type=i.TYPE.IMAGE,this._loadElement("image");break;case i.LOAD_TYPE.AUDIO:this.type=i.TYPE.AUDIO,this._loadSourceElement("audio");break;case i.LOAD_TYPE.VIDEO:this.type=i.TYPE.VIDEO,this._loadSourceElement("video");break;default:A_&&this.crossOrigin?this._loadXdr():this._loadXhr()}}},i.prototype._hasFlag=function(e){return 0!=(this._flags&e)},i.prototype._setFlag=function(e,t){this._flags=t?this._flags|e:this._flags&~e},i.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},i.prototype._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(i.STATUS_FLAGS.COMPLETE,!0),this._setFlag(i.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},i.prototype._loadElement=function(e){this.data=this.metadata.loadElement?this.metadata.loadElement:"image"===e&&void 0!==self.Image?new Image:document.createElement(e),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},i.prototype._loadSourceElement=function(e){if(this.data=this.metadata.loadElement?this.metadata.loadElement:"audio"===e&&void 0!==self.Audio?new Audio:document.createElement(e),null!==this.data){if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var t=this.metadata.mimeType,r=0;r<this.url.length;++r)this.data.appendChild(this._createSource(e,this.url[r],Array.isArray(t)?t[r]:t));else t=this.metadata.mimeType,this.data.appendChild(this._createSource(e,this.url,Array.isArray(t)?t[0]:t));this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))}else this.abort("Unsupported element: "+e)},i.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;e.open("GET",this.url,!0),e.timeout=this.timeout,e.responseType=this.xhrType===i.XHR_RESPONSE_TYPE.JSON||this.xhrType===i.XHR_RESPONSE_TYPE.DOCUMENT?i.XHR_RESPONSE_TYPE.TEXT:this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("timeout",this._boundXhrOnTimeout,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},i.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new self.XDomainRequest;e.timeout=this.timeout||5e3,e.onerror=this._boundXhrOnError,e.ontimeout=this._boundXhrOnTimeout,e.onprogress=this._boundOnProgress,e.onload=this._boundXhrOnLoad,e.open("GET",this.url,!0),setTimeout(function(){return e.send()},1)},i.prototype._createSource=function(e,t,r){r||(r=e+"/"+this._getExtension(t));var n=document.createElement("source");return n.src=t,n.type=r,n},i.prototype._onError=function(e){this.abort("Failed to load element using: "+e.target.nodeName)},i.prototype._onProgress=function(e){e&&e.lengthComputable&&this.onProgress.dispatch(this,e.loaded/e.total)},i.prototype._onTimeout=function(){this.abort("Load timed out.")},i.prototype._xhrOnError=function(){var e=this.xhr;this.abort($n(e)+" Request failed. Status: "+e.status+', text: "'+e.statusText+'"')},i.prototype._xhrOnTimeout=function(){this.abort($n(this.xhr)+" Request timed out.")},i.prototype._xhrOnAbort=function(){this.abort($n(this.xhr)+" Request was aborted by the user.")},i.prototype._xhrOnLoad=function(){var e=this.xhr,t="",r=void 0===e.status?200:e.status;if((""===e.responseType||"text"===e.responseType||void 0===e.responseType)&&(t=e.responseText),0===r&&(t.length>0||e.responseType===i.XHR_RESPONSE_TYPE.BUFFER)?r=200:1223===r&&(r=204),2==(r/100|0)){if(this.xhrType===i.XHR_RESPONSE_TYPE.TEXT)this.data=t,this.type=i.TYPE.TEXT;else if(this.xhrType===i.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(t),this.type=i.TYPE.JSON}catch(s){return void this.abort("Error trying to parse loaded json: "+s)}else if(this.xhrType===i.XHR_RESPONSE_TYPE.DOCUMENT)try{if(self.DOMParser){var o=new DOMParser;this.data=o.parseFromString(t,"text/xml")}else{var a=document.createElement("div");a.innerHTML=t,this.data=a}this.type=i.TYPE.XML}catch(s){return void this.abort("Error trying to parse loaded xml: "+s)}else this.data=e.response||t;this.complete()}else this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL)},i.prototype._determineCrossOrigin=function(e,t){if(0===e.indexOf("data:"))return"";if(self.origin!==self.location.origin)return"anonymous";t=t||self.location,Ci||(Ci=document.createElement("a")),Ci.href=e;var r=ds(Ci.href,{strictMode:!0});return r.host!==t.hostname||(r.port||""!==t.port)&&r.port!==t.port||(r.protocol?r.protocol+":":"")!==t.protocol?"anonymous":""},i.prototype._determineXhrType=function(){return i._xhrTypeMap[this.extension]||i.XHR_RESPONSE_TYPE.TEXT},i.prototype._determineLoadType=function(){return i._loadTypeMap[this.extension]||i.LOAD_TYPE.XHR},i.prototype._getExtension=function(e){void 0===e&&(e=this.url);var t="";if(this.isDataUrl){var r=e.indexOf("/");t=e.substring(r+1,e.indexOf(";",r))}else{var n=e.indexOf("?"),o=e.indexOf("#"),a=Math.min(n>-1?n:e.length,o>-1?o:e.length);t=(e=e.substring(0,a)).substring(e.lastIndexOf(".")+1)}return t.toLowerCase()},i.prototype._getMimeFromXhrType=function(e){switch(e){case i.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case i.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case i.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case i.XHR_RESPONSE_TYPE.JSON:return"application/json";default:return"text/plain"}},i}();function _r(){}function I_(i){return function(){for(var t=arguments,r=[],n=0;n<arguments.length;n++)r[n]=t[n];if(null===i)throw new Error("Callback was already called.");var o=i;i=null,o.apply(this,r)}}(o=(i=zt||(zt={})).STATUS_FLAGS||(i.STATUS_FLAGS={}))[o.NONE=0]="NONE",o[o.DATA_URL=1]="DATA_URL",o[o.COMPLETE=2]="COMPLETE",o[o.LOADING=4]="LOADING",function(o){o[o.UNKNOWN=0]="UNKNOWN",o[o.JSON=1]="JSON",o[o.XML=2]="XML",o[o.IMAGE=3]="IMAGE",o[o.AUDIO=4]="AUDIO",o[o.VIDEO=5]="VIDEO",o[o.TEXT=6]="TEXT"}(i.TYPE||(i.TYPE={})),function(o){o[o.XHR=1]="XHR",o[o.IMAGE=2]="IMAGE",o[o.AUDIO=3]="AUDIO",o[o.VIDEO=4]="VIDEO"}(i.LOAD_TYPE||(i.LOAD_TYPE={})),function(o){o.DEFAULT="text",o.BUFFER="arraybuffer",o.BLOB="blob",o.DOCUMENT="document",o.JSON="json",o.TEXT="text"}(i.XHR_RESPONSE_TYPE||(i.XHR_RESPONSE_TYPE={})),i._loadTypeMap={gif:i.LOAD_TYPE.IMAGE,png:i.LOAD_TYPE.IMAGE,bmp:i.LOAD_TYPE.IMAGE,jpg:i.LOAD_TYPE.IMAGE,jpeg:i.LOAD_TYPE.IMAGE,tif:i.LOAD_TYPE.IMAGE,tiff:i.LOAD_TYPE.IMAGE,webp:i.LOAD_TYPE.IMAGE,tga:i.LOAD_TYPE.IMAGE,svg:i.LOAD_TYPE.IMAGE,"svg+xml":i.LOAD_TYPE.IMAGE,mp3:i.LOAD_TYPE.AUDIO,ogg:i.LOAD_TYPE.AUDIO,wav:i.LOAD_TYPE.AUDIO,mp4:i.LOAD_TYPE.VIDEO,webm:i.LOAD_TYPE.VIDEO},i._xhrTypeMap={xhtml:i.XHR_RESPONSE_TYPE.DOCUMENT,html:i.XHR_RESPONSE_TYPE.DOCUMENT,htm:i.XHR_RESPONSE_TYPE.DOCUMENT,xml:i.XHR_RESPONSE_TYPE.DOCUMENT,tmx:i.XHR_RESPONSE_TYPE.DOCUMENT,svg:i.XHR_RESPONSE_TYPE.DOCUMENT,tsx:i.XHR_RESPONSE_TYPE.DOCUMENT,gif:i.XHR_RESPONSE_TYPE.BLOB,png:i.XHR_RESPONSE_TYPE.BLOB,bmp:i.XHR_RESPONSE_TYPE.BLOB,jpg:i.XHR_RESPONSE_TYPE.BLOB,jpeg:i.XHR_RESPONSE_TYPE.BLOB,tif:i.XHR_RESPONSE_TYPE.BLOB,tiff:i.XHR_RESPONSE_TYPE.BLOB,webp:i.XHR_RESPONSE_TYPE.BLOB,tga:i.XHR_RESPONSE_TYPE.BLOB,json:i.XHR_RESPONSE_TYPE.JSON,text:i.XHR_RESPONSE_TYPE.TEXT,txt:i.XHR_RESPONSE_TYPE.TEXT,ttf:i.XHR_RESPONSE_TYPE.BUFFER,otf:i.XHR_RESPONSE_TYPE.BUFFER},i.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";var M_=function(e,t){this.data=e,this.callback=t},zn=function(){function i(e,t){var r=this;if(void 0===t&&(t=1),this.workers=0,this.saturated=_r,this.unsaturated=_r,this.empty=_r,this.drain=_r,this.error=_r,this.started=!1,this.paused=!1,this._tasks=[],this._insert=function(n,o,a){if(a&&"function"!=typeof a)throw new Error("task callback must be a function");if(r.started=!0,null==n&&r.idle())setTimeout(function(){return r.drain()},1);else{var s=new M_(n,"function"==typeof a?a:_r);o?r._tasks.unshift(s):r._tasks.push(s),setTimeout(r.process,1)}},this.process=function(){for(;!r.paused&&r.workers<r.concurrency&&r._tasks.length;){var n=r._tasks.shift();0===r._tasks.length&&r.empty(),r.workers+=1,r.workers===r.concurrency&&r.saturated(),r._worker(n.data,I_(r._next(n)))}},this._worker=e,0===t)throw new Error("Concurrency must not be zero");this.concurrency=t,this.buffer=t/4}return i.prototype._next=function(e){var t=this;return function(){for(var r=arguments,n=[],o=0;o<arguments.length;o++)n[o]=r[o];t.workers-=1,e.callback.apply(e,n),null!=n[0]&&t.error(n[0],e.data),t.workers<=t.concurrency-t.buffer&&t.unsaturated(),t.idle()&&t.drain(),t.process()}},i.prototype.push=function(e,t){this._insert(e,!1,t)},i.prototype.kill=function(){this.workers=0,this.drain=_r,this.started=!1,this._tasks=[]},i.prototype.unshift=function(e,t){this._insert(e,!0,t)},i.prototype.length=function(){return this._tasks.length},i.prototype.running=function(){return this.workers},i.prototype.idle=function(){return this._tasks.length+this.workers===0},i.prototype.pause=function(){!0!==this.paused&&(this.paused=!0)},i.prototype.resume=function(){if(!1!==this.paused){this.paused=!1;for(var e=1;e<=this.concurrency;e++)this.process()}},i.eachSeries=function(e,t,r,n){var o=0,a=e.length;!function s(h){h||o===a?r&&r(h):n?setTimeout(function(){t(e[o++],s)},1):t(e[o++],s)}()},i.queue=function(e,t){return new i(e,t)},i}(),D_=/(#[\w-]+)?$/,Ce=function(){function i(e,t){var r=this;void 0===e&&(e=""),void 0===t&&(t=10),this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(h,l){return r._loadResource(h,l)},this.resources={},this.baseUrl=e,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(h,l){return r._loadResource(h,l)},this._queue=zn.queue(this._boundLoadResource,t),this._queue.pause(),this.resources={},this.onProgress=new He,this.onError=new He,this.onLoad=new He,this.onStart=new He,this.onComplete=new He;for(var n=0;n<i._plugins.length;++n){var o=i._plugins[n],a=o.pre,s=o.use;a&&this.pre(a),s&&this.use(s)}this._protected=!1}return i.prototype._add=function(e,t,r,n){if(this.loading&&(!r||!r.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[e])throw new Error('Resource named "'+e+'" already exists.');if(t=this._prepareUrl(t),this.resources[e]=new zt(e,t,r),"function"==typeof n&&this.resources[e].onAfterMiddleware.once(n),this.loading){for(var o=r.parentResource,a=[],s=0;s<o.children.length;++s)o.children[s].isComplete||a.push(o.children[s]);var l=o.progressChunk*(a.length+1)/(a.length+2);for(o.children.push(this.resources[e]),o.progressChunk=l,s=0;s<a.length;++s)a[s].progressChunk=l;this.resources[e].progressChunk=l}return this._queue.push(this.resources[e]),this},i.prototype.pre=function(e){return this._beforeMiddleware.push(e),this},i.prototype.use=function(e){return this._afterMiddleware.push(e),this},i.prototype.reset=function(){for(var e in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var t=this.resources[e];t._onLoadBinding&&t._onLoadBinding.detach(),t.isLoading&&t.abort("loader reset")}return this.resources={},this},i.prototype.load=function(e){if("function"==typeof e&&this.onComplete.once(e),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var r=100/this._queue._tasks.length,n=0;n<this._queue._tasks.length;++n)this._queue._tasks[n].data.progressChunk=r;this._onStart(),this._queue.resume()}return this},Object.defineProperty(i.prototype,"concurrency",{get:function(){return this._queue.concurrency},set:function(e){this._queue.concurrency=e},enumerable:!1,configurable:!0}),i.prototype._prepareUrl=function(e){var r,t=ds(e,{strictMode:!0});if(r=t.protocol||!t.path||0===e.indexOf("//")?e:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==e.charAt(0)?this.baseUrl+"/"+e:this.baseUrl+e,this.defaultQueryString){var n=D_.exec(r)[0];-1!==(r=r.substr(0,r.length-n.length)).indexOf("?")?r+="&"+this.defaultQueryString:r+="?"+this.defaultQueryString,r+=n}return r},i.prototype._loadResource=function(e,t){var r=this;e._dequeue=t,zn.eachSeries(this._beforeMiddleware,function(n,o){n.call(r,e,function(){o(e.isComplete?{}:null)})},function(){e.isComplete?r._onLoad(e):(e._onLoadBinding=e.onComplete.once(r._onLoad,r),e.load())},!0)},i.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},i.prototype._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},i.prototype._onLoad=function(e){var t=this;e._onLoadBinding=null,this._resourcesParsing.push(e),e._dequeue(),zn.eachSeries(this._afterMiddleware,function(r,n){r.call(t,e,n)},function(){e.onAfterMiddleware.dispatch(e),t.progress=Math.min(100,t.progress+e.progressChunk),t.onProgress.dispatch(t,e),e.error?t.onError.dispatch(e.error,t,e):t.onLoad.dispatch(t,e),t._resourcesParsing.splice(t._resourcesParsing.indexOf(e),1),t._queue.idle()&&0===t._resourcesParsing.length&&t._onComplete()},!0)},i.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(i,"shared",{get:function(){var e=i._shared;return e||((e=new i)._protected=!0,i._shared=e),e},enumerable:!1,configurable:!0}),i.registerPlugin=function(e){return i._plugins.push(e),e.add&&e.add(),i},i._plugins=[],i}();Ce.prototype.add=function(e,t,r,n){if(Array.isArray(e)){for(var o=0;o<e.length;++o)this.add(e[o]);return this}if("object"==typeof e&&(r=e,n=t||r.callback||r.onComplete,t=r.url,e=r.name||r.key||r.url),"string"!=typeof t&&(n=r,r=t,t=e),"string"!=typeof t)throw new Error("No url passed to add resource to loader.");return"function"==typeof r&&(n=r,r=null),this._add(e,t,r,n)};var N_=function(){function i(){}return i.init=function(e){e=Object.assign({sharedLoader:!1},e),this.loader=e.sharedLoader?Ce.shared:new Ce},i.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},i}(),L_=function(){function i(){}return i.add=function(){zt.setExtensionLoadType("svg",zt.LOAD_TYPE.XHR),zt.setExtensionXhrType("svg",zt.XHR_RESPONSE_TYPE.TEXT)},i.use=function(e,t){!e.data||e.type!==zt.TYPE.IMAGE&&"svg"!==e.extension?t():pt.fromLoader(e.data,e.url,e.name,e.metadata).then(function(s){e.texture=s,t()}).catch(t)},i}(),ms=self.URL||self.webkitURL;Ce.registerPlugin({use:function(i,e){if(i.data){if(i.xhr&&i.xhrType===zt.XHR_RESPONSE_TYPE.BLOB)if(self.Blob&&"string"!=typeof i.data){if(0===i.data.type.indexOf("image")){var r=ms.createObjectURL(i.data);return i.blob=i.data,i.data=new Image,i.data.src=r,i.type=zt.TYPE.IMAGE,void(i.data.onload=function(){ms.revokeObjectURL(r),i.data.onload=null,e()})}}else{var t=i.xhr.getResponseHeader("content-type");if(t&&0===t.indexOf("image"))return i.data=new Image,i.data.src="data:"+t+";base64,"+function(i){for(var e="",t=0;t<i.length;){for(var r=[0,0,0],n=[0,0,0,0],o=0;o<r.length;++o)r[o]=t<i.length?255&i.charCodeAt(t++):0;switch(n[0]=r[0]>>2,n[1]=(3&r[0])<<4|r[1]>>4,n[2]=(15&r[1])<<2|r[2]>>6,n[3]=63&r[2],t-(i.length-1)){case 2:n[3]=64,n[2]=64;break;case 1:n[3]=64}for(o=0;o<n.length;++o)e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(n[o])}return e}(i.xhr.responseText),i.type=zt.TYPE.IMAGE,void(i.data.onload=function(){i.data.onload=null,e()})}e()}else e()}}),Ce.registerPlugin(L_);var Ft,yt=(()=>(function(i){i[i.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",i[i.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",i[i.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",i[i.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",i[i.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",i[i.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",i[i.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",i[i.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",i[i.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",i[i.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",i[i.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",i[i.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",i[i.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",i[i.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",i[i.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",i[i.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",i[i.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",i[i.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",i[i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",i[i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",i[i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",i[i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",i[i.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",i[i.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",i[i.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",i[i.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL"}(yt||(yt={})),yt))(),Bi=((Ft={})[yt.COMPRESSED_RGB_S3TC_DXT1_EXT]=.5,Ft[yt.COMPRESSED_RGBA_S3TC_DXT1_EXT]=.5,Ft[yt.COMPRESSED_RGBA_S3TC_DXT3_EXT]=1,Ft[yt.COMPRESSED_RGBA_S3TC_DXT5_EXT]=1,Ft[yt.COMPRESSED_SRGB_S3TC_DXT1_EXT]=.5,Ft[yt.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT]=.5,Ft[yt.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT]=1,Ft[yt.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT]=1,Ft[yt.COMPRESSED_R11_EAC]=.5,Ft[yt.COMPRESSED_SIGNED_R11_EAC]=.5,Ft[yt.COMPRESSED_RG11_EAC]=1,Ft[yt.COMPRESSED_SIGNED_RG11_EAC]=1,Ft[yt.COMPRESSED_RGB8_ETC2]=.5,Ft[yt.COMPRESSED_RGBA8_ETC2_EAC]=1,Ft[yt.COMPRESSED_SRGB8_ETC2]=.5,Ft[yt.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC]=1,Ft[yt.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,Ft[yt.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,Ft[yt.COMPRESSED_RGB_PVRTC_4BPPV1_IMG]=.5,Ft[yt.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG]=.5,Ft[yt.COMPRESSED_RGB_PVRTC_2BPPV1_IMG]=.25,Ft[yt.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG]=.25,Ft[yt.COMPRESSED_RGB_ETC1_WEBGL]=.5,Ft[yt.COMPRESSED_RGB_ATC_WEBGL]=.5,Ft[yt.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL]=1,Ft[yt.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL]=1,Ft),Kn=function(i,e){return(Kn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])})(i,e)};function gs(i,e){function t(){this.constructor=i}Kn(i,e),i.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}var Qr,Pe,G_=function(i){function e(t,r){void 0===r&&(r={width:1,height:1,autoLoad:!0});var o,a,n=this;return"string"==typeof t?(o=t,a=new Uint8Array):(o=null,a=t),(n=i.call(this,a,r)||this).origin=o,n.buffer=a?new Vn(a):null,n.origin&&!1!==r.autoLoad&&n.load(),a&&a.length&&(n.loaded=!0,n.onBlobLoaded(n.buffer.rawBinaryData)),n}return gs(e,i),e.prototype.onBlobLoaded=function(t){},e.prototype.load=function(){return function(i,e,t,r){return new(t||(t=Promise))(function(n,o){function a(l){try{h(r.next(l))}catch(f){o(f)}}function s(l){try{h(r.throw(l))}catch(f){o(f)}}function h(l){l.done?n(l.value):new t(function(f){f(l.value)}).then(a,s)}h((r=r.apply(i,[])).next())})}(this,0,Promise,function(){var n;return function(i,e){var r,n,o,a,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(f){return function(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,n&&(o=2&l[0]?n.return:l[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,l[1])).done)return o;switch(n=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,n=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(6===l[0]&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(i,t)}catch(f){l=[6,f],n=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,f])}}}(this,function(o){switch(o.label){case 0:return[4,fetch(this.origin)];case 1:return[4,o.sent().blob()];case 2:return[4,o.sent().arrayBuffer()];case 3:return n=o.sent(),this.data=new Uint32Array(n),this.buffer=new Vn(n),this.loaded=!0,this.onBlobLoaded(n),this.update(),[2,this]}})})},e}(jr),qn=function(i){function e(t,r){var n=i.call(this,t,r)||this;return n.format=r.format,n.levels=r.levels||1,n._width=r.width,n._height=r.height,n._extension=e._formatToExtension(n.format),(r.levelBuffers||n.buffer)&&(n._levelBuffers=r.levelBuffers||e._createLevelBuffers(t instanceof Uint8Array?t:n.buffer.uint8View,n.format,n.levels,4,4,n.width,n.height)),n}return gs(e,i),e.prototype.upload=function(t,r,n){var o=t.gl;if(!t.context.extensions[this._extension])throw new Error(this._extension+" textures are not supported on the current machine");if(!this._levelBuffers)return!1;for(var s=0,h=this.levels;s<h;s++){var l=this._levelBuffers[s];o.compressedTexImage2D(o.TEXTURE_2D,l.levelID,this.format,l.levelWidth,l.levelHeight,0,l.levelBuffer)}return!0},e.prototype.onBlobLoaded=function(){this._levelBuffers=e._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)},e._formatToExtension=function(t){if(t>=33776&&t<=33779)return"s3tc";if(t>=37488&&t<=37497)return"etc";if(t>=35840&&t<=35843)return"pvrtc";if(t>=36196)return"etc1";if(t>=35986&&t<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")},e._createLevelBuffers=function(t,r,n,o,a,s,h){for(var l=new Array(n),f=t.byteOffset,_=s,c=h,d=_+o-1&~(o-1),m=c+a-1&~(a-1),v=d*m*Bi[r],g=0;g<n;g++)l[g]={levelID:g,levelWidth:n>1?_:d,levelHeight:n>1?c:m,levelBuffer:new Uint8Array(t.buffer,f,v)},f+=v,v=(d=(_=_>>1||1)+o-1&~(o-1))*(m=(c=c>>1||1)+a-1&~(a-1))*Bi[r];return l},e}(G_),k_=function(){function i(){}return i.use=function(e,t){var r=e.data;if(e.type===zt.TYPE.JSON&&r&&r.cacheID&&r.textures){for(var o=r.textures,a=void 0,s=void 0,h=0,l=o.length;h<l;h++){var f=o[h],_=f.src,c=f.format;if(c||(s=_),i.textureFormats[c]){a=_;break}}if(!(a=a||s))return void t(new Error("Cannot load compressed-textures in "+e.url+", make sure you provide a fallback"));if(a===e.url)return void t(new Error("URL of compressed texture cannot be the same as the manifest's URL"));var d={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},m=Sr.resolve(e.url.replace(this.baseUrl,""),a);this.add(r.cacheID,m,d,function(g){if(g.error)t(g.error);else{var R=g.texture,B=g.textures;Object.assign(e,{texture:void 0===R?null:R,textures:void 0===B?{}:B}),t()}})}else t()},i.add=function(){var t=document.createElement("canvas").getContext("webgl");if(t){var r={s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};for(var n in i.textureExtensions=r,i.textureFormats={},r){var o=r[n];!o||Object.assign(i.textureFormats,Object.getPrototypeOf(o))}}else console.warn("WebGL not available for compressed textures. Silently failing.")},i}();function Ts(i,e,t){var r={textures:{},texture:null};if(!e)return r;var n=e.map(function(o){return new pt(new Mt(o,Object.assign({mipmap:Ge.OFF,alphaMode:Se.NO_PREMULTIPLIED_ALPHA},t)))});return n.forEach(function(o,a){var s=o.baseTexture,h=i+"-"+(a+1);Mt.addToCache(s,h),pt.addToCache(o,h),0===a&&(Mt.addToCache(s,i),pt.addToCache(o,i),r.texture=o),r.textures[h]=o}),r}zt.setExtensionXhrType("dds",zt.XHR_RESPONSE_TYPE.BUFFER);var xr,dr,Jr,de=(()=>(function(i){i[i.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",i[i.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",i[i.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",i[i.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",i[i.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",i[i.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",i[i.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",i[i.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",i[i.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",i[i.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",i[i.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",i[i.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",i[i.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",i[i.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",i[i.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",i[i.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",i[i.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",i[i.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",i[i.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",i[i.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",i[i.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",i[i.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",i[i.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",i[i.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",i[i.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",i[i.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",i[i.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",i[i.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",i[i.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",i[i.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",i[i.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",i[i.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",i[i.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",i[i.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",i[i.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",i[i.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",i[i.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",i[i.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",i[i.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",i[i.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",i[i.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",i[i.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",i[i.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",i[i.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",i[i.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",i[i.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",i[i.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",i[i.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",i[i.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",i[i.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",i[i.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",i[i.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",i[i.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",i[i.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",i[i.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",i[i.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",i[i.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",i[i.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",i[i.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",i[i.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",i[i.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",i[i.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",i[i.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",i[i.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",i[i.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",i[i.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",i[i.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",i[i.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",i[i.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",i[i.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",i[i.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",i[i.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",i[i.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",i[i.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",i[i.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",i[i.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",i[i.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",i[i.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",i[i.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",i[i.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",i[i.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",i[i.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",i[i.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",i[i.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",i[i.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",i[i.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",i[i.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",i[i.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",i[i.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",i[i.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",i[i.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",i[i.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",i[i.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",i[i.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",i[i.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",i[i.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",i[i.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",i[i.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",i[i.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",i[i.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",i[i.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",i[i.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",i[i.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",i[i.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",i[i.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",i[i.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",i[i.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",i[i.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",i[i.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",i[i.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",i[i.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",i[i.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",i[i.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",i[i.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",i[i.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",i[i.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",i[i.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",i[i.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",i[i.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",i[i.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",i[i.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",i[i.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT"}(de||(de={})),de))(),Gi=(()=>(function(i){i[i.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",i[i.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",i[i.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D"}(Gi||(Gi={})),Gi))(),ed=((Qr={})[827611204]=yt.COMPRESSED_RGBA_S3TC_DXT1_EXT,Qr[861165636]=yt.COMPRESSED_RGBA_S3TC_DXT3_EXT,Qr[894720068]=yt.COMPRESSED_RGBA_S3TC_DXT5_EXT,Qr),rd=((Pe={})[de.DXGI_FORMAT_BC1_TYPELESS]=yt.COMPRESSED_RGBA_S3TC_DXT1_EXT,Pe[de.DXGI_FORMAT_BC1_UNORM]=yt.COMPRESSED_RGBA_S3TC_DXT1_EXT,Pe[de.DXGI_FORMAT_BC2_TYPELESS]=yt.COMPRESSED_RGBA_S3TC_DXT3_EXT,Pe[de.DXGI_FORMAT_BC2_UNORM]=yt.COMPRESSED_RGBA_S3TC_DXT3_EXT,Pe[de.DXGI_FORMAT_BC3_TYPELESS]=yt.COMPRESSED_RGBA_S3TC_DXT5_EXT,Pe[de.DXGI_FORMAT_BC3_UNORM]=yt.COMPRESSED_RGBA_S3TC_DXT5_EXT,Pe[de.DXGI_FORMAT_BC1_UNORM_SRGB]=yt.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,Pe[de.DXGI_FORMAT_BC2_UNORM_SRGB]=yt.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,Pe[de.DXGI_FORMAT_BC3_UNORM_SRGB]=yt.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,Pe),id=function(){function i(){}return i.use=function(e,t){if("dds"===e.extension&&e.data)try{Object.assign(e,Ts(e.name||e.url,i.parse(e.data),e.metadata))}catch(r){return void t(r)}t()},i.parse=function(e){var t=new Uint32Array(e);if(542327876!==t[0])throw new Error("Invalid DDS file magic word");var n=new Uint32Array(e,0,124/Uint32Array.BYTES_PER_ELEMENT),o=n[3],a=n[4],s=n[7],h=new Uint32Array(e,19*Uint32Array.BYTES_PER_ELEMENT,32/Uint32Array.BYTES_PER_ELEMENT),l=h[1];if(4&l){var f=h[2];if(808540228!==f){var _=ed[f],d=new Uint8Array(e,128);return[new qn(d,{format:_,width:a,height:o,levels:s})]}var g=new Uint32Array(t.buffer,128,20/Uint32Array.BYTES_PER_ELEMENT),R=g[0],C=g[1],B=g[2],j=g[3],N=rd[R];if(void 0===N)throw new Error("DDSLoader cannot parse texture data with DXGI format "+R);if(4===B)throw new Error("DDSLoader does not support cubemap textures");if(C===Gi.DDS_DIMENSION_TEXTURE3D)throw new Error("DDSLoader does not supported 3D texture data");var I=new Array;if(1===j)I.push(new Uint8Array(e,148));else{for(var Ot=Bi[N],G=0,$=a,mt=o,_t=0;_t<s;_t++)G+=Math.max(1,$+3&-4)*Math.max(1,mt+3&-4)*Ot,$>>>=1,mt>>>=1;var at=148;for(_t=0;_t<j;_t++)I.push(new Uint8Array(e,at,G)),at+=G}return I.map(function(xt){return new qn(xt,{format:N,width:a,height:o,levels:s})})}throw 64&l?new Error("DDSLoader does not support uncompressed texture data."):512&l?new Error("DDSLoader does not supported YUV uncompressed texture data."):131072&l?new Error("DDSLoader does not support single-channel (lumninance) texture data!"):2&l?new Error("DDSLoader does not support single-channel (alpha) texture data!"):new Error("DDSLoader failed to load a texture file due to an unknown reason!")},i}();zt.setExtensionXhrType("ktx",zt.XHR_RESPONSE_TYPE.BUFFER);var ys=[171,75,84,88,32,49,49,187,13,10,26,10],Os=((xr={})[dt.UNSIGNED_BYTE]=1,xr[dt.UNSIGNED_SHORT]=2,xr[dt.FLOAT]=4,xr[dt.HALF_FLOAT]=8,xr),ad=((dr={})[H.RGBA]=4,dr[H.RGB]=3,dr[H.LUMINANCE]=1,dr[H.LUMINANCE_ALPHA]=2,dr[H.ALPHA]=1,dr),sd=((Jr={})[dt.UNSIGNED_SHORT_4_4_4_4]=2,Jr[dt.UNSIGNED_SHORT_5_5_5_1]=2,Jr[dt.UNSIGNED_SHORT_5_6_5]=2,Jr),hd=function(){function i(){}return i.use=function(e,t){if("ktx"===e.extension&&e.data)try{var r=e.name||e.url;Object.assign(e,Ts(r,i.parse(r,e.data),e.metadata))}catch(n){return void t(n)}t()},i.parse=function(e,t){var r=new DataView(t);if(!i.validate(e,r))return null;var n=67305985===r.getUint32(12,!0),o=r.getUint32(16,n),a=r.getUint32(24,n),s=r.getUint32(28,n),h=r.getUint32(36,n),l=r.getUint32(40,n)||1,f=r.getUint32(44,n)||1,_=r.getUint32(48,n)||1,c=r.getUint32(52,n),d=r.getUint32(56,n),m=r.getUint32(60,n);if(0===l||1!==f)throw new Error("Only 2D textures are supported");if(1!==c)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(1!==_)throw new Error("WebGL does not support array textures");var N,R=h+3&-4,C=l+3&-4,B=new Array(_),j=h*l;if(0===o&&(j=R*C),void 0===(N=0!==o?Os[o]?Os[o]*ad[a]:sd[o]:Bi[s]))throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");for(var J=j*N,Ot=h,G=l,$=R,mt=C,_t=64+m,Dt=0;Dt<d;Dt++){for(var ae=r.getUint32(_t,n),ht=_t+4,at=0;at<_;at++){var xt=B[at];xt||(xt=B[at]=new Array(d)),xt[Dt]={levelID:Dt,levelWidth:d>1?Ot:$,levelHeight:d>1?G:mt,levelBuffer:new Uint8Array(t,ht,J)},ht+=J}_t=(_t+=ae+4)%4!=0?_t+4-_t%4:_t,J=($=(Ot=Ot>>1||1)+4-1&-4)*(mt=(G=G>>1||1)+4-1&-4)*N}if(0!==o)throw new Error("TODO: Uncompressed");return B.map(function(se){return new qn(null,{format:s,width:h,height:l,levels:d,levelBuffers:se})})},i.validate=function(e,t){for(var r=0;r<ys.length;r++)if(t.getUint8(r)!==ys[r])return console.error(e+" is not a valid *.ktx file!"),!1;return!0},i}(),Jn=function(i,e){return(Jn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])})(i,e)};function As(i,e){function t(){this.constructor=i}Jn(i,e),i.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}!function(i){function e(t,r,n,o){void 0===t&&(t=1500),void 0===n&&(n=16384),void 0===o&&(o=!1);var a=i.call(this)||this;return n>16384&&(n=16384),a._properties=[!1,!0,!1,!1,!1],a._maxSize=t,a._batchSize=n,a._buffers=null,a._bufferUpdateIDs=[],a._updateID=0,a.interactiveChildren=!1,a.blendMode=ut.NORMAL,a.autoResize=o,a.roundPixels=!0,a.baseTexture=null,a.setProperties(r),a._tint=0,a.tintRgb=new Float32Array(4),a.tint=16777215,a}As(e,i),e.prototype.setProperties=function(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])},e.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,yr(t,this.tintRgb)},enumerable:!1,configurable:!0}),e.prototype.render=function(t){var r=this;!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",function(){return r.onChildrenChange(0)})),t.batch.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},e.prototype.onChildrenChange=function(t){for(var r=Math.floor(t/this._batchSize);this._bufferUpdateIDs.length<r;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[r]=++this._updateID},e.prototype.dispose=function(){if(this._buffers){for(var t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._buffers=null}},e.prototype.destroy=function(t){i.prototype.destroy.call(this,t),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null}}(fe);var Ps=function(){function i(e,t,r){this.geometry=new $r,this.indexBuffer=null,this.size=r,this.dynamicProperties=[],this.staticProperties=[];for(var n=0;n<e.length;++n){var o=e[n];o={attributeName:o.attributeName,size:o.size,uploadFunction:o.uploadFunction,type:o.type||dt.FLOAT,offset:o.offset},t[n]?this.dynamicProperties.push(o):this.staticProperties.push(o)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return i.prototype.initBuffers=function(){var e=this.geometry,t=0;this.indexBuffer=new re(function(i,e){void 0===e&&(e=null);var t=6*i;if((e=e||new Uint16Array(t)).length!==t)throw new Error("Out buffer length is incorrect, got "+e.length+" and expected "+t);for(var r=0,n=0;r<t;r+=6,n+=4)e[r+0]=n+0,e[r+1]=n+1,e[r+2]=n+2,e[r+3]=n+0,e[r+4]=n+2,e[r+5]=n+3;return e}(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(var r=0;r<this.dynamicProperties.length;++r)(n=this.dynamicProperties[r]).offset=t,t+=n.size,this.dynamicStride+=n.size;var o=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(o),this.dynamicDataUint32=new Uint32Array(o),this.dynamicBuffer=new re(this.dynamicData,!1,!1);var a=0;for(this.staticStride=0,r=0;r<this.staticProperties.length;++r)(n=this.staticProperties[r]).offset=a,a+=n.size,this.staticStride+=n.size;var s=new ArrayBuffer(this.size*this.staticStride*4*4);for(this.staticData=new Float32Array(s),this.staticDataUint32=new Uint32Array(s),this.staticBuffer=new re(this.staticData,!0,!1),r=0;r<this.dynamicProperties.length;++r)e.addAttribute((n=this.dynamicProperties[r]).attributeName,this.dynamicBuffer,0,n.type===dt.UNSIGNED_BYTE,n.type,4*this.dynamicStride,4*n.offset);for(r=0;r<this.staticProperties.length;++r){var n;e.addAttribute((n=this.staticProperties[r]).attributeName,this.staticBuffer,0,n.type===dt.UNSIGNED_BYTE,n.type,4*this.staticStride,4*n.offset)}},i.prototype.uploadDynamic=function(e,t,r){for(var n=0;n<this.dynamicProperties.length;n++){var o=this.dynamicProperties[n];o.uploadFunction(e,t,r,o.type===dt.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,o.offset)}this.dynamicBuffer._updateID++},i.prototype.uploadStatic=function(e,t,r){for(var n=0;n<this.staticProperties.length;n++){var o=this.staticProperties[n];o.uploadFunction(e,t,r,o.type===dt.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,o.offset)}this.staticBuffer._updateID++},i.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},i}(),fd=function(i){function e(t){var r=i.call(this,t)||this;return r.shader=null,r.properties=null,r.tempMatrix=new qt,r.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:r.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:r.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:r.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:r.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:dt.UNSIGNED_BYTE,uploadFunction:r.uploadTint,offset:0}],r.shader=Ke.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",{}),r.state=fr.for2d(),r}return As(e,i),e.prototype.render=function(t){var r=t.children,n=t._maxSize,o=t._batchSize,a=this.renderer,s=r.length;if(0!==s){s>n&&!t.autoResize&&(s=n);var h=t._buffers;h||(h=t._buffers=this.generateBuffers(t));var l=r[0]._texture.baseTexture;this.state.blendMode=sa(t.blendMode,l.alphaMode),a.state.set(this.state);var f=a.gl,_=t.worldTransform.copyTo(this.tempMatrix);_.prepend(a.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=_.toArray(!0),this.shader.uniforms.uColor=function(i,e,t,r){return t=t||new Float32Array(4),r||void 0===r?(t[0]=i[0]*e,t[1]=i[1]*e,t[2]=i[2]*e):(t[0]=i[0],t[1]=i[1],t[2]=i[2]),t[3]=e,t}(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,l.alphaMode),this.shader.uniforms.uSampler=l,this.renderer.shader.bind(this.shader);for(var c=!1,d=0,m=0;d<s;d+=o,m+=1){var v=s-d;v>o&&(v=o),m>=h.length&&h.push(this._generateOneMoreBuffer(t));var g=h[m];g.uploadDynamic(r,d,v),(c=c||g._updateID<(t._bufferUpdateIDs[m]||0))&&(g._updateID=t._updateID,g.uploadStatic(r,d,v)),a.geometry.bind(g.geometry),f.drawElements(f.TRIANGLES,6*v,f.UNSIGNED_SHORT,0)}}},e.prototype.generateBuffers=function(t){for(var r=[],n=t._maxSize,o=t._batchSize,a=t._properties,s=0;s<n;s+=o)r.push(new Ps(this.properties,a,o));return r},e.prototype._generateOneMoreBuffer=function(t){return new Ps(this.properties,t._properties,t._batchSize)},e.prototype.uploadVertices=function(t,r,n,o,a,s){for(var h=0,l=0,f=0,_=0,c=0;c<n;++c){var d=t[r+c],m=d._texture,v=d.scale.x,g=d.scale.y,R=m.trim,C=m.orig;R?(h=(l=R.x-d.anchor.x*C.width)+R.width,f=(_=R.y-d.anchor.y*C.height)+R.height):(h=C.width*(1-d.anchor.x),l=C.width*-d.anchor.x,f=C.height*(1-d.anchor.y),_=C.height*-d.anchor.y),o[s]=l*v,o[s+1]=_*g,o[s+a]=h*v,o[s+a+1]=_*g,o[s+2*a]=h*v,o[s+2*a+1]=f*g,o[s+3*a]=l*v,o[s+3*a+1]=f*g,s+=4*a}},e.prototype.uploadPosition=function(t,r,n,o,a,s){for(var h=0;h<n;h++){var l=t[r+h].position;o[s]=l.x,o[s+1]=l.y,o[s+a]=l.x,o[s+a+1]=l.y,o[s+2*a]=l.x,o[s+2*a+1]=l.y,o[s+3*a]=l.x,o[s+3*a+1]=l.y,s+=4*a}},e.prototype.uploadRotation=function(t,r,n,o,a,s){for(var h=0;h<n;h++){var l=t[r+h].rotation;o[s]=l,o[s+a]=l,o[s+2*a]=l,o[s+3*a]=l,s+=4*a}},e.prototype.uploadUvs=function(t,r,n,o,a,s){for(var h=0;h<n;++h){var l=t[r+h]._texture._uvs;l?(o[s]=l.x0,o[s+1]=l.y0,o[s+a]=l.x1,o[s+a+1]=l.y1,o[s+2*a]=l.x2,o[s+2*a+1]=l.y2,o[s+3*a]=l.x3,o[s+3*a+1]=l.y3,s+=4*a):(o[s]=0,o[s+1]=0,o[s+a]=0,o[s+a+1]=0,o[s+2*a]=0,o[s+2*a+1]=0,o[s+3*a]=0,o[s+3*a+1]=0,s+=4*a)}},e.prototype.uploadTint=function(t,r,n,o,a,s){for(var h=0;h<n;++h){var l=t[r+h],_=l.alpha,c=_<1&&l._texture.baseTexture.alphaMode>0?pn(l._tintRGB,_):l._tintRGB+(255*_<<24);o[s]=c,o[s+a]=c,o[s+2*a]=c,o[s+3*a]=c,s+=4*a}},e.prototype.destroy=function(){i.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},e}(xi),Xe=(()=>(function(i){i.MITER="miter",i.BEVEL="bevel",i.ROUND="round"}(Xe||(Xe={})),Xe))(),Ve=(()=>(function(i){i.BUTT="butt",i.ROUND="round",i.SQUARE="square"}(Ve||(Ve={})),Ve))(),ti={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(i,e){if(void 0===e&&(e=20),!this.adaptive||!i||isNaN(i))return e;var t=Math.ceil(i/this.maxLength);return t<this.minSegments?t=this.minSegments:t>this.maxSegments&&(t=this.maxSegments),t}},Rs=function(){function i(){this.color=16777215,this.alpha=1,this.texture=pt.WHITE,this.matrix=null,this.visible=!1,this.reset()}return i.prototype.clone=function(){var e=new i;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e},i.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=pt.WHITE,this.matrix=null,this.visible=!1},i.prototype.destroy=function(){this.texture=null,this.matrix=null},i}(),to=function(i,e){return(to=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])})(i,e)};function eo(i,e){function t(){this.constructor=i}to(i,e),i.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}var ro={build:function(i){i.points=i.shape.points.slice()},triangulate:function(i,e){var t=i.points,r=i.holes,n=e.points,o=e.indices;if(t.length>=6){for(var a=[],s=0;s<r.length;s++){var h=r[s];a.push(t.length/2),t=t.concat(h.points)}var l=ra()(t,a,2);if(!l)return;var f=n.length/2;for(s=0;s<l.length;s+=3)o.push(l[s]+f),o.push(l[s+1]+f),o.push(l[s+2]+f);for(s=0;s<t.length;s++)n.push(t[s])}}},io={build:function(i){var o,a,e=i.shape,t=i.points,r=e.x,n=e.y;if(t.length=0,i.type===$t.CIRC)o=e.radius,a=e.radius;else{var s=i.shape;o=s.width,a=s.height}if(0!==o&&0!==a){var h=Math.floor(30*Math.sqrt(e.radius))||Math.floor(15*Math.sqrt(o+a));h/=2.3;for(var l=2*Math.PI/h,f=0;f<h-.5;f++)t.push(r+Math.sin(-l*f)*o,n+Math.cos(-l*f)*a);t.push(t[0],t[1])}},triangulate:function(i,e){var t=i.points,r=e.points,n=e.indices,o=r.length/2,a=o,s=i.shape,h=i.matrix,l=s.x,f=s.y;r.push(i.matrix?h.a*l+h.c*f+h.tx:l,i.matrix?h.b*l+h.d*f+h.ty:f);for(var _=0;_<t.length;_+=2)r.push(t[_],t[_+1]),n.push(o++,a,o)}};function Ir(i,e,t){return i+(e-i)*t}function ki(i,e,t,r,n,o,a){void 0===a&&(a=[]);for(var h=a,l=0,f=0,_=0,c=0,d=0,m=0,v=0,g=0;v<=20;++v)l=Ir(i,t,g=v/20),f=Ir(e,r,g),_=Ir(t,n,g),c=Ir(r,o,g),d=Ir(l,_,g),m=Ir(f,c,g),(0!==v||h[h.length-2]!==d||h[h.length-1]!==m)&&h.push(d,m);return h}var xs={build:function(i){var e=i.shape,t=i.points,r=e.x,n=e.y,o=e.width,a=e.height,s=Math.max(0,Math.min(e.radius,Math.min(o,a)/2));t.length=0,s?(ki(r,n+s,r,n,r+s,n,t),ki(r+o-s,n,r+o,n,r+o,n+s,t),ki(r+o,n+a-s,r+o,n+a,r+o-s,n+a,t),ki(r+s,n+a,r,n+a,r,n+a-s,t)):t.push(r,n,r+o,n,r+o,n+a,r,n+a)},triangulate:function(i,e){for(var t=i.points,r=e.points,n=e.indices,o=r.length/2,a=ra()(t,null,2),s=0,h=a.length;s<h;s+=3)n.push(a[s]+o),n.push(a[s+1]+o),n.push(a[s+2]+o);for(s=0,h=t.length;s<h;s++)r.push(t[s],t[++s])}};function Is(i,e,t,r,n,o,a,s){var c,d;a?(c=r,d=-t):(c=-r,d=t);var g=i+t*o+c,R=e+r*o+d;return s.push(i-t*n+c,e-r*n+d),s.push(g,R),2}function Mr(i,e,t,r,n,o,a,s){var h=t-i,l=r-e,f=Math.atan2(h,l),_=Math.atan2(n-i,o-e);s&&f<_?f+=2*Math.PI:!s&&f>_&&(_+=2*Math.PI);var c=f,d=_-f,m=Math.abs(d),v=Math.sqrt(h*h+l*l),g=1+(15*m*Math.sqrt(v)/Math.PI>>0),R=d/g;if(c+=R,s){a.push(i,e),a.push(t,r);for(var C=1,B=c;C<g;C++,B+=R)a.push(i,e),a.push(i+Math.sin(B)*v,e+Math.cos(B)*v);a.push(i,e),a.push(n,o)}else{for(a.push(t,r),a.push(i,e),C=1,B=c;C<g;C++,B+=R)a.push(i+Math.sin(B)*v,e+Math.cos(B)*v),a.push(i,e);a.push(n,o),a.push(i,e)}return 2*g}function no(i,e){i.lineStyle.native?function(i,e){var t=0,r=i.shape,n=i.points||r.points,o=r.type!==$t.POLY||r.closeStroke;if(0!==n.length){var a=e.points,s=e.indices,h=n.length/2,l=a.length/2,f=l;for(a.push(n[0],n[1]),t=1;t<h;t++)a.push(n[2*t],n[2*t+1]),s.push(f,f+1),f++;o&&s.push(f,l)}}(i,e):function(i,e){var t=i.shape,r=i.points||t.points.slice(),n=e.closePointEps;if(0!==r.length){var o=i.lineStyle,a=new Kt(r[0],r[1]),s=new Kt(r[r.length-2],r[r.length-1]),h=t.type!==$t.POLY||t.closeStroke,l=Math.abs(a.x-s.x)<n&&Math.abs(a.y-s.y)<n;if(h){r=r.slice(),l&&(r.pop(),r.pop(),s.set(r[r.length-2],r[r.length-1]));var f=.5*(a.x+s.x),_=.5*(s.y+a.y);r.unshift(f,_),r.push(f,_)}var c=e.points,d=r.length/2,m=r.length,v=c.length/2,g=o.width/2,R=g*g,C=o.miterLimit*o.miterLimit,B=r[0],j=r[1],N=r[2],I=r[3],J=0,Ot=0,G=-(j-I),$=B-N,mt=0,_t=0,Dt=Math.sqrt(G*G+$*$);G/=Dt,$/=Dt,G*=g,$*=g;var ae=o.alignment,ht=2*(1-ae),at=2*ae;h||(o.cap===Ve.ROUND?m+=Mr(B-G*(ht-at)*.5,j-$*(ht-at)*.5,B-G*ht,j-$*ht,B+G*at,j+$*at,c,!0)+2:o.cap===Ve.SQUARE&&(m+=Is(B,j,G,$,ht,at,!0,c))),c.push(B-G*ht,j-$*ht),c.push(B+G*at,j+$*at);for(var xt=1;xt<d-1;++xt){J=r[2*(xt+1)],Ot=r[2*(xt+1)+1],G=-((j=r[2*(xt-1)+1])-(I=r[2*xt+1])),$=(B=r[2*(xt-1)])-(N=r[2*xt]),G/=Dt=Math.sqrt(G*G+$*$),$/=Dt,G*=g,$*=g,mt=-(I-Ot),_t=N-J,mt/=Dt=Math.sqrt(mt*mt+_t*_t),_t/=Dt,mt*=g,_t*=g;var se=N-B,le=j-I,St=N-J,wr=Ot-I,ir=le*St-wr*se,We=ir<0;if(Math.abs(ir)<.1)c.push(N-G*ht,I-$*ht),c.push(N+G*at,I+$*at);else{var ai=(-G+B)*(-$+I)-(-G+N)*(-$+j),Ur=(-mt+J)*(-_t+I)-(-mt+N)*(-_t+Ot),Be=(se*Ur-St*ai)/ir,Gr=(wr*ai-le*Ur)/ir,kr=(Be-N)*(Be-N)+(Gr-I)*(Gr-I),be=N+(Be-N)*ht,xe=I+(Gr-I)*ht,ve=N-(Be-N)*at,Ee=I-(Gr-I)*at,Er=We?ht:at;kr<=Math.min(se*se+le*le,St*St+wr*wr)+Er*Er*R?o.join===Xe.BEVEL||kr/R>C?(We?(c.push(be,xe),c.push(N+G*at,I+$*at),c.push(be,xe),c.push(N+mt*at,I+_t*at)):(c.push(N-G*ht,I-$*ht),c.push(ve,Ee),c.push(N-mt*ht,I-_t*ht),c.push(ve,Ee)),m+=2):o.join===Xe.ROUND?We?(c.push(be,xe),c.push(N+G*at,I+$*at),m+=Mr(N,I,N+G*at,I+$*at,N+mt*at,I+_t*at,c,!0)+4,c.push(be,xe),c.push(N+mt*at,I+_t*at)):(c.push(N-G*ht,I-$*ht),c.push(ve,Ee),m+=Mr(N,I,N-G*ht,I-$*ht,N-mt*ht,I-_t*ht,c,!1)+4,c.push(N-mt*ht,I-_t*ht),c.push(ve,Ee)):(c.push(be,xe),c.push(ve,Ee)):(c.push(N-G*ht,I-$*ht),c.push(N+G*at,I+$*at),o.join===Xe.BEVEL||kr/R>C||(o.join===Xe.ROUND?m+=We?Mr(N,I,N+G*at,I+$*at,N+mt*at,I+_t*at,c,!0)+2:Mr(N,I,N-G*ht,I-$*ht,N-mt*ht,I-_t*ht,c,!1)+2:(We?(c.push(ve,Ee),c.push(ve,Ee)):(c.push(be,xe),c.push(be,xe)),m+=2)),c.push(N-mt*ht,I-_t*ht),c.push(N+mt*at,I+_t*at),m+=2)}}G=-((j=r[2*(d-2)+1])-(I=r[2*(d-1)+1])),$=(B=r[2*(d-2)])-(N=r[2*(d-1)]),G/=Dt=Math.sqrt(G*G+$*$),$/=Dt,c.push(N-(G*=g)*ht,I-($*=g)*ht),c.push(N+G*at,I+$*at),h||(o.cap===Ve.ROUND?m+=Mr(N-G*(ht-at)*.5,I-$*(ht-at)*.5,N-G*ht,I-$*ht,N+G*at,I+$*at,c,!1)+2:o.cap===Ve.SQUARE&&(m+=Is(N,I,G,$,ht,at,!1,c)));var we=e.indices,Yr=ti.epsilon*ti.epsilon;for(xt=v;xt<m+v-2;++xt)B=c[2*xt],j=c[2*xt+1],N=c[2*(xt+1)],I=c[2*(xt+1)+1],J=c[2*(xt+2)],Ot=c[2*(xt+2)+1],!(Math.abs(B*(I-Ot)+N*(Ot-j)+J*(j-I))<Yr)&&we.push(xt,xt+1,xt+2)}}(i,e)}var pr,oo=function(){function i(){}return i.curveTo=function(e,t,r,n,o,a){var l=a[a.length-1]-t,f=a[a.length-2]-e,_=n-t,c=r-e,d=Math.abs(l*c-f*_);if(d<1e-8||0===o)return(a[a.length-2]!==e||a[a.length-1]!==t)&&a.push(e,t),null;var m=l*l+f*f,v=_*_+c*c,g=l*_+f*c,R=o*Math.sqrt(m)/d,C=o*Math.sqrt(v)/d,B=R*g/m,j=C*g/v,N=R*c+C*f,I=R*_+C*l,G=c*(R+j),$=_*(R+j);return{cx:N+e,cy:I+t,radius:o,startAngle:Math.atan2(l*(C+B)-I,f*(C+B)-N),endAngle:Math.atan2($-I,G-N),anticlockwise:f*_>c*l}},i.arc=function(e,t,r,n,o,a,s,h,l){for(var f=s-a,_=ti._segmentsCount(Math.abs(f)*o,40*Math.ceil(Math.abs(f)/Ei)),c=f/(2*_),d=2*c,m=Math.cos(c),v=Math.sin(c),g=_-1,R=g%1/g,C=0;C<=g;++C){var j=c+a+d*(C+R*C),N=Math.cos(j),I=-Math.sin(j);l.push((m*N+v*I)*o+r,(m*-I+v*N)*o+n)}},i}(),Ms=function(){function i(){}return i.curveLength=function(e,t,r,n,o,a,s,h){for(var f=0,_=0,c=0,d=0,m=0,v=0,g=0,R=0,C=0,B=0,j=0,N=e,I=t,J=1;J<=10;++J)B=N-(R=(g=(v=(m=1-(_=J/10))*m)*m)*e+3*v*_*r+3*m*(c=_*_)*o+(d=c*_)*s),j=I-(C=g*t+3*v*_*n+3*m*c*a+d*h),N=R,I=C,f+=Math.sqrt(B*B+j*j);return f},i.curveTo=function(e,t,r,n,o,a,s){var h=s[s.length-2],l=s[s.length-1];s.length-=2;var f=ti._segmentsCount(i.curveLength(h,l,e,t,r,n,o,a)),_=0,c=0,d=0,m=0,v=0;s.push(h,l);for(var g=1,R=0;g<=f;++g)s.push((d=(c=(_=1-(R=g/f))*_)*_)*h+3*c*R*e+3*_*(m=R*R)*r+(v=m*R)*o,d*l+3*c*R*t+3*_*m*n+v*a)},i}(),Ds=function(){function i(){}return i.curveLength=function(e,t,r,n,o,a){var s=e-2*r+o,h=t-2*n+a,l=2*r-2*e,f=2*n-2*t,_=4*(s*s+h*h),c=4*(s*l+h*f),d=l*l+f*f,m=2*Math.sqrt(_+c+d),v=Math.sqrt(_),g=2*_*v,R=2*Math.sqrt(d),C=c/v;return(g*m+v*c*(m-R)+(4*d*_-c*c)*Math.log((2*v+C+m)/(C+R)))/(4*g)},i.curveTo=function(e,t,r,n,o){for(var a=o[o.length-2],s=o[o.length-1],h=ti._segmentsCount(i.curveLength(a,s,e,t,r,n)),l=0,f=0,_=1;_<=h;++_){var c=_/h;o.push((l=a+(e-a)*c)+(e+(r-e)*c-l)*c,(f=s+(t-s)*c)+(t+(n-t)*c-f)*c)}},i}(),Ns=function(){function i(){this.reset()}return i.prototype.begin=function(e,t,r){this.reset(),this.style=e,this.start=t,this.attribStart=r},i.prototype.end=function(e,t){this.attribSize=t-this.attribStart,this.size=e-this.start},i.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},i}(),Yi=((pr={})[$t.POLY]=ro,pr[$t.CIRC]=io,pr[$t.ELIP]=io,pr[$t.RECT]={build:function(i){var e=i.shape,t=e.x,r=e.y,n=e.width,o=e.height,a=i.points;a.length=0,a.push(t,r,t+n,r,t+n,r+o,t,r+o)},triangulate:function(i,e){var t=i.points,r=e.points,n=r.length/2;r.push(t[0],t[1],t[2],t[3],t[6],t[7],t[4],t[5]),e.indices.push(n,n+1,n+2,n+1,n+2,n+3)}},pr[$t.RREC]=xs,pr),ao=[],ei=[];function dd(i){for(var e=i.points,t=0,r=0;r<e.length-2;r+=2)t+=(e[r+2]-e[r])*(e[r+3]+e[r+1]);return t>0}var Ls=function(){function i(e,t,r,n){void 0===t&&(t=null),void 0===r&&(r=null),void 0===n&&(n=null),this.points=[],this.holes=[],this.shape=e,this.lineStyle=r,this.fillStyle=t,this.matrix=n,this.type=e.type}return i.prototype.clone=function(){return new i(this.shape,this.fillStyle,this.lineStyle,this.matrix)},i.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},i}(),Dr=new Kt,pd=new Ti,vd=function(i){function e(){var t=i.call(this)||this;return t.closePointEps=1e-4,t.boundsPadding=0,t.uvsFloat32=null,t.indicesUint16=null,t.batchable=!1,t.points=[],t.colors=[],t.uvs=[],t.indices=[],t.textureIds=[],t.graphicsData=[],t.drawCalls=[],t.batchDirty=-1,t.batches=[],t.dirty=0,t.cacheDirty=-1,t.clearDirty=0,t.shapeIndex=0,t._bounds=new Ti,t.boundsDirty=-1,t}return eo(e,i),Object.defineProperty(e.prototype,"bounds",{get:function(){return this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),e.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),ei.push(this.drawCalls[t]);for(this.drawCalls.length=0,t=0;t<this.batches.length;t++){var r=this.batches[t];r.reset(),ao.push(r)}this.batches.length=0},e.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},e.prototype.drawShape=function(t,r,n,o){void 0===r&&(r=null),void 0===n&&(n=null),void 0===o&&(o=null);var a=new Ls(t,r,n,o);return this.graphicsData.push(a),this.dirty++,this},e.prototype.drawHole=function(t,r){if(void 0===r&&(r=null),!this.graphicsData.length)return null;var n=new Ls(t,null,null,r),o=this.graphicsData[this.graphicsData.length-1];return n.lineStyle=o.lineStyle,o.holes.push(n),this.dirty++,this},e.prototype.destroy=function(){i.prototype.destroy.call(this);for(var t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},e.prototype.containsPoint=function(t){for(var r=this.graphicsData,n=0;n<r.length;++n){var o=r[n];if(o.fillStyle.visible&&o.shape&&(o.matrix?o.matrix.applyInverse(t,Dr):Dr.copyFrom(t),o.shape.contains(Dr.x,Dr.y))){var a=!1;if(o.holes)for(var s=0;s<o.holes.length;s++)if(o.holes[s].shape.contains(Dr.x,Dr.y)){a=!0;break}if(!a)return!0}}return!1},e.prototype.updateBatches=function(t){if(this.graphicsData.length){if(this.validateBatching()){this.cacheDirty=this.dirty;var r=this.uvs,n=this.graphicsData,o=null,a=null;this.batches.length>0&&(a=(o=this.batches[this.batches.length-1]).style);for(var s=this.shapeIndex;s<n.length;s++){this.shapeIndex++;var h=n[s],l=h.fillStyle,f=h.lineStyle;Yi[h.type].build(h),h.matrix&&this.transformPoints(h.points,h.matrix);for(var c=0;c<2;c++){var d=0===c?l:f;if(d.visible){var v=this.indices.length,g=this.points.length/2;d.texture.baseTexture.wrapMode=Ne.REPEAT,0===c?this.processFill(h):this.processLine(h);var R=this.points.length/2-g;0!==R&&(o&&!this._compareStyles(a,d)&&(o.end(v,g),o=null),o||((o=ao.pop()||new Ns).begin(d,v,g),this.batches.push(o),a=d),this.addUvs(this.points,r,d.texture,g,R,d.matrix))}}}var B=this.points.length/2;if(o&&o.end(this.indices.length,B),0===this.batches.length)return void(this.batchable=!0);this.indicesUint16&&this.indices.length===this.indicesUint16.length?this.indicesUint16.set(this.indices):this.indicesUint16=B>65535&&t?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}}else this.batchable=!0},e.prototype._compareStyles=function(t,r){return!(!t||!r||t.texture.baseTexture!==r.texture.baseTexture||t.color+t.alpha!==r.color+r.alpha||!!t.native!=!!r.native)},e.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var t=0,r=this.graphicsData.length;t<r;t++){var n=this.graphicsData[t],o=n.fillStyle,a=n.lineStyle;if(o&&!o.texture.baseTexture.valid||a&&!a.texture.baseTexture.valid)return!1}return!0},e.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var t=this.batches,r=0,n=t.length;r<n;r++)for(var o=t[r],a=0;a<o.size;a++){var s=o.start+a;this.indicesUint16[s]=this.indicesUint16[s]-o.attribStart}},e.prototype.isBatchable=function(){if(this.points.length>131070)return!1;for(var t=this.batches,r=0;r<t.length;r++)if(t[r].style.native)return!1;return this.points.length<2*e.BATCHABLE_SIZE},e.prototype.buildDrawCalls=function(){for(var t=++Mt._globalBatch,r=0;r<this.drawCalls.length;r++)this.drawCalls[r].texArray.clear(),ei.push(this.drawCalls[r]);this.drawCalls.length=0;var n=this.colors,o=this.textureIds,a=ei.pop();a||((a=new Hn).texArray=new Xn),a.texArray.count=0,a.start=0,a.size=0,a.type=_e.TRIANGLES;var s=0,h=null,l=0,f=!1,_=_e.TRIANGLES,c=0;for(this.drawCalls.push(a),r=0;r<this.batches.length;r++){var d=this.batches[r],v=d.style,g=v.texture.baseTexture;f!==!!v.native&&(_=(f=!!v.native)?_e.LINES:_e.TRIANGLES,h=null,s=8,t++),h!==g&&(h=g,g._batchEnabled!==t&&(8===s&&(t++,s=0,a.size>0&&((a=ei.pop())||((a=new Hn).texArray=new Xn),this.drawCalls.push(a)),a.start=c,a.size=0,a.texArray.count=0,a.type=_),g.touched=1,g._batchEnabled=t,g._batchLocation=s,g.wrapMode=Ne.REPEAT,a.texArray.elements[a.texArray.count++]=g,s++)),a.size+=d.size,c+=d.size,l=g._batchLocation,this.addColors(n,v.color,v.alpha,d.attribSize,d.attribStart),this.addTextureIds(o,l,d.attribSize,d.attribStart)}Mt._globalBatch=t,this.packAttributes()},e.prototype.packAttributes=function(){for(var t=this.points,r=this.uvs,n=this.colors,o=this.textureIds,a=new ArrayBuffer(3*t.length*4),s=new Float32Array(a),h=new Uint32Array(a),l=0,f=0;f<t.length/2;f++)s[l++]=t[2*f],s[l++]=t[2*f+1],s[l++]=r[2*f],s[l++]=r[2*f+1],h[l++]=n[f],s[l++]=o[f];this._buffer.update(a),this._indexBuffer.update(this.indicesUint16)},e.prototype.processFill=function(t){t.holes.length?(this.processHoles(t.holes),ro.triangulate(t,this)):Yi[t.type].triangulate(t,this)},e.prototype.processLine=function(t){no(t,this);for(var r=0;r<t.holes.length;r++)no(t.holes[r],this)},e.prototype.processHoles=function(t){for(var r=0;r<t.length;r++){var n=t[r];Yi[n.type].build(n),n.matrix&&this.transformPoints(n.points,n.matrix)}},e.prototype.calculateBounds=function(){var t=this._bounds,r=pd,n=qt.IDENTITY;this._bounds.clear(),r.clear();for(var o=0;o<this.graphicsData.length;o++){var a=this.graphicsData[o],s=a.shape,h=a.type,l=a.lineStyle,f=a.matrix||qt.IDENTITY,_=0;if(l&&l.visible){var c=l.alignment;_=l.width,h===$t.POLY?dd(s)?_*=1-c:_*=c:_*=Math.max(0,c)}n!==f&&(r.isEmpty()||(t.addBoundsMatrix(r,n),r.clear()),n=f),h===$t.RECT||h===$t.RREC?r.addFramePad(s.x,s.y,s.x+s.width,s.y+s.height,_,_):h===$t.CIRC?r.addFramePad(s.x,s.y,s.x,s.y,s.radius+_,s.radius+_):h===$t.ELIP?r.addFramePad(s.x,s.y,s.x,s.y,s.width+_,s.height+_):t.addVerticesMatrix(n,s.points,0,s.points.length,_,_)}r.isEmpty()||t.addBoundsMatrix(r,n),t.pad(this.boundsPadding,this.boundsPadding)},e.prototype.transformPoints=function(t,r){for(var n=0;n<t.length/2;n++){var o=t[2*n],a=t[2*n+1];t[2*n]=r.a*o+r.c*a+r.tx,t[2*n+1]=r.b*o+r.d*a+r.ty}},e.prototype.addColors=function(t,r,n,o,a){void 0===a&&(a=0);var h=pn((r>>16)+(65280&r)+((255&r)<<16),n);t.length=Math.max(t.length,a+o);for(var l=0;l<o;l++)t[a+l]=h},e.prototype.addTextureIds=function(t,r,n,o){void 0===o&&(o=0),t.length=Math.max(t.length,o+n);for(var a=0;a<n;a++)t[o+a]=r},e.prototype.addUvs=function(t,r,n,o,a,s){void 0===s&&(s=null);for(var h=0,l=r.length,f=n.frame;h<a;){var _=t[2*(o+h)],c=t[2*(o+h)+1];if(s){var d=s.a*_+s.c*c+s.tx;c=s.b*_+s.d*c+s.ty,_=d}h++,r.push(_/f.width,c/f.height)}var m=n.baseTexture;(f.width<m.width||f.height<m.height)&&this.adjustUvs(r,n,l,a)},e.prototype.adjustUvs=function(t,r,n,o){for(var a=r.baseTexture,s=1e-6,h=n+2*o,l=r.frame,f=l.width/a.width,_=l.height/a.height,c=l.x/l.width,d=l.y/l.height,m=Math.floor(t[n]+s),v=Math.floor(t[n+1]+s),g=n+2;g<h;g+=2)m=Math.min(m,Math.floor(t[g]+s)),v=Math.min(v,Math.floor(t[g+1]+s));for(c-=m,d-=v,g=n;g<h;g+=2)t[g]=(t[g]+c)*f,t[g+1]=(t[g+1]+d)*_},e.BATCHABLE_SIZE=100,e}(hs),Ed=function(i){function e(){var t=null!==i&&i.apply(this,arguments)||this;return t.width=0,t.alignment=.5,t.native=!1,t.cap=Ve.BUTT,t.join=Xe.MITER,t.miterLimit=10,t}return eo(e,i),e.prototype.clone=function(){var t=new e;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t},e.prototype.reset=function(){i.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},e}(Rs),md=new Float32Array(3),so={},Hi=function(i){function e(t){void 0===t&&(t=null);var r=i.call(this)||this;return r.shader=null,r.pluginName="batch",r.currentPath=null,r.batches=[],r.batchTint=-1,r.batchDirty=-1,r.vertexData=null,r._fillStyle=new Rs,r._lineStyle=new Ed,r._matrix=null,r._holeMode=!1,r.state=fr.for2d(),r._geometry=t||new vd,r._geometry.refCount++,r._transformID=-1,r.tint=16777215,r.blendMode=ut.NORMAL,r}return eo(e,i),Object.defineProperty(e.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return this.finishPoly(),new e(this._geometry)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),e.prototype.lineStyle=function(t,r,n,o,a){return void 0===t&&(t=null),void 0===r&&(r=0),void 0===n&&(n=1),void 0===o&&(o=.5),void 0===a&&(a=!1),"number"==typeof t&&(t={width:t,color:r,alpha:n,alignment:o,native:a}),this.lineTextureStyle(t)},e.prototype.lineTextureStyle=function(t){t=Object.assign({width:0,texture:pt.WHITE,color:t&&t.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:Ve.BUTT,join:Xe.MITER,miterLimit:10},t),this.currentPath&&this.startPoly();var r=t.width>0&&t.alpha>0;return r?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:r},t)):this._lineStyle.reset(),this},e.prototype.startPoly=function(){if(this.currentPath){var t=this.currentPath.points,r=this.currentPath.points.length;r>2&&(this.drawShape(this.currentPath),this.currentPath=new mi,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[r-2],t[r-1]))}else this.currentPath=new mi,this.currentPath.closeStroke=!1},e.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},e.prototype.moveTo=function(t,r){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=r,this},e.prototype.lineTo=function(t,r){this.currentPath||this.moveTo(0,0);var n=this.currentPath.points;return(n[n.length-2]!==t||n[n.length-1]!==r)&&n.push(t,r),this},e.prototype._initCurve=function(t,r){void 0===t&&(t=0),void 0===r&&(r=0),this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[t,r]):this.moveTo(t,r)},e.prototype.quadraticCurveTo=function(t,r,n,o){this._initCurve();var a=this.currentPath.points;return 0===a.length&&this.moveTo(0,0),Ds.curveTo(t,r,n,o,a),this},e.prototype.bezierCurveTo=function(t,r,n,o,a,s){return this._initCurve(),Ms.curveTo(t,r,n,o,a,s,this.currentPath.points),this},e.prototype.arcTo=function(t,r,n,o,a){this._initCurve(t,r);var h=oo.curveTo(t,r,n,o,a,this.currentPath.points);return h&&this.arc(h.cx,h.cy,h.radius,h.startAngle,h.endAngle,h.anticlockwise),this},e.prototype.arc=function(t,r,n,o,a,s){if(void 0===s&&(s=!1),o===a)return this;if(!s&&a<=o?a+=Ei:s&&o<=a&&(o+=Ei),0==a-o)return this;var l=t+Math.cos(o)*n,f=r+Math.sin(o)*n,_=this._geometry.closePointEps,c=this.currentPath?this.currentPath.points:null;if(c){var d=Math.abs(c[c.length-2]-l),m=Math.abs(c[c.length-1]-f);d<_&&m<_||c.push(l,f)}else this.moveTo(l,f),c=this.currentPath.points;return oo.arc(l,f,t,r,n,o,a,s,c),this},e.prototype.beginFill=function(t,r){return void 0===t&&(t=0),void 0===r&&(r=1),this.beginTextureFill({texture:pt.WHITE,color:t,alpha:r})},e.prototype.beginTextureFill=function(t){t=Object.assign({texture:pt.WHITE,color:16777215,alpha:1,matrix:null},t),this.currentPath&&this.startPoly();var r=t.alpha>0;return r?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:r},t)):this._fillStyle.reset(),this},e.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},e.prototype.drawRect=function(t,r,n,o){return this.drawShape(new It(t,r,n,o))},e.prototype.drawRoundedRect=function(t,r,n,o,a){return this.drawShape(new jf(t,r,n,o,a))},e.prototype.drawCircle=function(t,r,n){return this.drawShape(new Vf(t,r,n))},e.prototype.drawEllipse=function(t,r,n,o){return this.drawShape(new Wf(t,r,n,o))},e.prototype.drawPolygon=function(){for(var t=arguments,r=[],n=0;n<arguments.length;n++)r[n]=t[n];var o,a=!0,s=r[0];s.points?(a=s.closeStroke,o=s.points):o=Array.isArray(r[0])?r[0]:r;var h=new mi(o);return h.closeStroke=a,this.drawShape(h),this},e.prototype.drawShape=function(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},e.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},e.prototype.isFastRect=function(){var t=this._geometry.graphicsData;return!(1!==t.length||t[0].shape.type!==$t.RECT||t[0].holes.length||t[0].lineStyle.visible&&t[0].lineStyle.width)},e.prototype._render=function(t){this.finishPoly();var r=this._geometry;r.updateBatches(t.context.supports.uint32Indices),r.batchable?(this.batchDirty!==r.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))},e.prototype._populateBatches=function(){var t=this._geometry,r=this.blendMode,n=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=n,this.vertexData=new Float32Array(t.points);for(var o=0;o<n;o++){var a=t.batches[o],s=a.style.color,h=new Float32Array(this.vertexData.buffer,4*a.attribStart*2,2*a.attribSize),l=new Float32Array(t.uvsFloat32.buffer,4*a.attribStart*2,2*a.attribSize),_={vertexData:h,blendMode:r,indices:new Uint16Array(t.indicesUint16.buffer,2*a.start,a.size),uvs:l,_batchRGB:yr(s),_tintRGB:s,_texture:a.style.texture,alpha:a.style.alpha,worldAlpha:1};this.batches[o]=_}},e.prototype._renderBatched=function(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var r=0,n=this.batches.length;r<n;r++){var o=this.batches[r];o.worldAlpha=this.worldAlpha*o.alpha,t.plugins[this.pluginName].render(o)}}},e.prototype._renderDirect=function(t){var r=this._resolveDirectShader(t),n=this._geometry,o=this.tint,a=this.worldAlpha,s=r.uniforms,h=n.drawCalls;s.translationMatrix=this.transform.worldTransform,s.tint[0]=(o>>16&255)/255*a,s.tint[1]=(o>>8&255)/255*a,s.tint[2]=(255&o)/255*a,s.tint[3]=a,t.shader.bind(r),t.geometry.bind(n,r),t.state.set(this.state);for(var l=0,f=h.length;l<f;l++)this._renderDrawCallDirect(t,n.drawCalls[l])},e.prototype._renderDrawCallDirect=function(t,r){for(var n=r.texArray,o=r.type,a=r.size,s=r.start,h=n.count,l=0;l<h;l++)t.texture.bind(n.elements[l],l);t.geometry.draw(o,a,s)},e.prototype._resolveDirectShader=function(t){var r=this.shader,n=this.pluginName;if(!r){if(!so[n]){for(var o=t.plugins.batch.MAX_TEXTURES,a=new Int32Array(o),s=0;s<o;s++)a[s]=s;var h={tint:new Float32Array([1,1,1,1]),translationMatrix:new qt,default:ur.from({uSamplers:a},!0)};so[n]=new Ke(t.plugins[n]._shader.program,h)}r=so[n]}return r},e.prototype._calculateBounds=function(){this.finishPoly();var t=this._geometry;if(t.graphicsData.length){var r=t.bounds;this._bounds.addFrame(this.transform,r.minX,r.minY,r.maxX,r.maxY)}},e.prototype.containsPoint=function(t){return this.worldTransform.applyInverse(t,e._TEMP_POINT),this._geometry.containsPoint(e._TEMP_POINT)},e.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var t=yr(this.tint,md),r=0;r<this.batches.length;r++){var n=this.batches[r],o=n._batchRGB,l=(t[0]*o[0]*255<<16)+(t[1]*o[1]*255<<8)+(0|t[2]*o[2]*255);n._tintRGB=(l>>16)+(65280&l)+((255&l)<<16)}}},e.prototype.calculateVertices=function(){var t=this.transform._worldID;if(this._transformID!==t){this._transformID=t;for(var r=this.transform.worldTransform,n=r.a,o=r.b,a=r.c,s=r.d,h=r.tx,l=r.ty,f=this._geometry.points,_=this.vertexData,c=0,d=0;d<f.length;d+=2){var m=f[d],v=f[d+1];_[c++]=n*m+a*v+h,_[c++]=s*v+o*m+l}}},e.prototype.closePath=function(){var t=this.currentPath;return t&&(t.closeStroke=!0,this.finishPoly()),this},e.prototype.setMatrix=function(t){return this._matrix=t,this},e.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},e.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},e.prototype.destroy=function(t){this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,i.prototype.destroy.call(this,t)},e._TEMP_POINT=new Kt,e}(fe),ho=function(i,e){return(ho=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])})(i,e)},ri=new Kt,Td=new Uint16Array([0,1,2,0,2,3]),vr=function(i){function e(t){var r=i.call(this)||this;return r._anchor=new Pr(r._onAnchorUpdate,r,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),r._texture=null,r._width=0,r._height=0,r._tint=null,r._tintRGB=null,r.tint=16777215,r.blendMode=ut.NORMAL,r._cachedTint=16777215,r.uvs=null,r.texture=t||pt.EMPTY,r.vertexData=new Float32Array(8),r.vertexTrimmedData=null,r._transformID=-1,r._textureID=-1,r._transformTrimmedID=-1,r._textureTrimmedID=-1,r.indices=Td,r.pluginName="batch",r.isSprite=!0,r._roundPixels=st.ROUND_PIXELS,r}return function(i,e){function t(){this.constructor=i}ho(i,e),i.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}(e,i),e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Ar(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Ar(this.scale.y)*this._height/this._texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},e.prototype.calculateVertices=function(){var t=this._texture;if(this._transformID!==this.transform._worldID||this._textureID!==t._updateID){this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;var r=this.transform.worldTransform,n=r.a,o=r.b,a=r.c,s=r.d,h=r.tx,l=r.ty,f=this.vertexData,_=t.trim,c=t.orig,d=this._anchor,m=0,v=0,g=0,R=0;if(_?(m=(v=_.x-d._x*c.width)+_.width,g=(R=_.y-d._y*c.height)+_.height):(m=(v=-d._x*c.width)+c.width,g=(R=-d._y*c.height)+c.height),f[0]=n*v+a*R+h,f[1]=s*R+o*v+l,f[2]=n*m+a*R+h,f[3]=s*R+o*m+l,f[4]=n*m+a*g+h,f[5]=s*g+o*m+l,f[6]=n*v+a*g+h,f[7]=s*g+o*v+l,this._roundPixels)for(var C=st.RESOLUTION,B=0;B<f.length;++B)f[B]=Math.round((f[B]*C|0)/C)}},e.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var r=this.vertexTrimmedData,n=this._texture.orig,o=this._anchor,a=this.transform.worldTransform,s=a.a,h=a.b,l=a.c,f=a.d,_=a.tx,c=a.ty,d=-o._x*n.width,m=d+n.width,v=-o._y*n.height,g=v+n.height;r[0]=s*d+l*v+_,r[1]=f*v+h*d+c,r[2]=s*m+l*v+_,r[3]=f*v+h*m+c,r[4]=s*m+l*g+_,r[5]=f*g+h*m+c,r[6]=s*d+l*g+_,r[7]=f*g+h*d+c},e.prototype._render=function(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var t=this._texture.trim,r=this._texture.orig;!t||t.width===r.width&&t.height===r.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(t){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new It),t=this._localBoundsRect),this._bounds.getRectangle(t)):i.prototype.getLocalBounds.call(this,t)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,ri);var r=this._texture.orig.width,n=this._texture.orig.height,o=-r*this.anchor.x,a=0;return!!(ri.x>=o&&ri.x<o+r&&(a=-n*this.anchor.y,ri.y>=a&&ri.y<a+n))},e.prototype.destroy=function(t){i.prototype.destroy.call(this,t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,("boolean"==typeof t?t:t&&t.texture)&&this._texture.destroy(!!("boolean"==typeof t?t:t&&t.baseTexture)),this._texture=null},e.from=function(t,r){return new e(t instanceof pt?t:pt.from(t,r))},Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var r=Ar(this.scale.x)||1;this.scale.x=r*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var r=Ar(this.scale.y)||1;this.scale.y=r*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(t){this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||pt.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),e}(fe),lo=function(i,e){return(lo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])})(i,e)},Nr=(()=>(function(i){i[i.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",i[i.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"}(Nr||(Nr={})),Nr))(),uo={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Nr.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},yd=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],Lr=function(){function i(e){this.styleID=0,this.reset(),co(this,e,e)}return i.prototype.clone=function(){var e={};return co(e,this,uo),new i(e)},i.prototype.reset=function(){co(this,uo,uo)},Object.defineProperty(i.prototype,"align",{get:function(){return this._align},set:function(e){this._align!==e&&(this._align=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"breakWords",{get:function(){return this._breakWords},set:function(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(e){var t=fo(e);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fill",{get:function(){return this._fill},set:function(e){var t=fo(e);this._fill!==t&&(this._fill=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(e){(function(i,e){if(!Array.isArray(i)||!Array.isArray(e)||i.length!==e.length)return!1;for(var t=0;t<i.length;++t)if(i[t]!==e[t])return!1;return!0})(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fontSize",{get:function(){return this._fontSize},set:function(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"leading",{get:function(){return this._leading},set:function(e){this._leading!==e&&(this._leading=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"padding",{get:function(){return this._padding},set:function(e){this._padding!==e&&(this._padding=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"stroke",{get:function(){return this._stroke},set:function(e){var t=fo(e);this._stroke!==t&&(this._stroke=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"trim",{get:function(){return this._trim},set:function(e){this._trim!==e&&(this._trim=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)},enumerable:!1,configurable:!0}),i.prototype.toFontString=function(){var e="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(var r=t.length-1;r>=0;r--){var n=t[r].trim();!/([\"\'])[^\'\"]+\1/.test(n)&&yd.indexOf(n)<0&&(n='"'+n+'"'),t[r]=n}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+e+" "+t.join(",")},i}();function Cs(i){return"number"==typeof i?na(i):("string"==typeof i&&0===i.indexOf("0x")&&(i=i.replace("0x","#")),i)}function fo(i){if(Array.isArray(i)){for(var e=0;e<i.length;++e)i[e]=Cs(i[e]);return i}return Cs(i)}function co(i,e,t){for(var r in t)i[r]=Array.isArray(e[r])?e[r].slice():e[r]}var pe=function(){function i(e,t,r,n,o,a,s,h,l){this.text=e,this.style=t,this.width=r,this.height=n,this.lines=o,this.lineWidths=a,this.lineHeight=s,this.maxLineWidth=h,this.fontProperties=l}return i.measureText=function(e,t,r,n){void 0===n&&(n=i._canvas),r=null==r?t.wordWrap:r;var o=t.toFontString(),a=i.measureFont(o);0===a.fontSize&&(a.fontSize=t.fontSize,a.ascent=t.fontSize);var s=n.getContext("2d");s.font=o;for(var l=(r?i.wordWrap(e,t,n):e).split(/(?:\r\n|\r|\n)/),f=new Array(l.length),_=0,c=0;c<l.length;c++){var d=s.measureText(l[c]).width+(l[c].length-1)*t.letterSpacing;f[c]=d,_=Math.max(_,d)}var m=_+t.strokeThickness;t.dropShadow&&(m+=t.dropShadowDistance);var v=t.lineHeight||a.fontSize+t.strokeThickness,g=Math.max(v,a.fontSize+t.strokeThickness)+(l.length-1)*(v+t.leading);return t.dropShadow&&(g+=t.dropShadowDistance),new i(e,t,m,g,l,f,v+t.leading,_,a)},i.wordWrap=function(e,t,r){void 0===r&&(r=i._canvas);for(var n=r.getContext("2d"),o=0,a="",s="",h=Object.create(null),l=t.letterSpacing,f=t.whiteSpace,_=i.collapseSpaces(f),c=i.collapseNewlines(f),d=!_,m=t.wordWrapWidth+l,v=i.tokenize(e),g=0;g<v.length;g++){var R=v[g];if(i.isNewline(R)){if(!c){s+=i.addLine(a),d=!_,a="",o=0;continue}R=" "}if(_){var C=i.isBreakingSpace(R),B=i.isBreakingSpace(a[a.length-1]);if(C&&B)continue}var j=i.getFromCache(R,l,h,n);if(j>m)if(""!==a&&(s+=i.addLine(a),a="",o=0),i.canBreakWords(R,t.breakWords))for(var N=i.wordWrapSplit(R),I=0;I<N.length;I++){for(var J=N[I],Ot=1;N[I+Ot];){var G=N[I+Ot];if(i.canBreakChars(J[J.length-1],G,R,I,t.breakWords))break;J+=G,Ot++}I+=J.length-1;var mt=i.getFromCache(J,l,h,n);mt+o>m&&(s+=i.addLine(a),d=!1,a="",o=0),a+=J,o+=mt}else a.length>0&&(s+=i.addLine(a),a="",o=0),s+=i.addLine(R,!(g===v.length-1)),d=!1,a="",o=0;else j+o>m&&(d=!1,s+=i.addLine(a),a="",o=0),(a.length>0||!i.isBreakingSpace(R)||d)&&(a+=R,o+=j)}return s+i.addLine(a,!1)},i.addLine=function(e,t){return void 0===t&&(t=!0),e=i.trimRight(e),t?e+"\n":e},i.getFromCache=function(e,t,r,n){var o=r[e];if("number"!=typeof o){var a=e.length*t;o=n.measureText(e).width+a,r[e]=o}return o},i.collapseSpaces=function(e){return"normal"===e||"pre-line"===e},i.collapseNewlines=function(e){return"normal"===e},i.trimRight=function(e){if("string"!=typeof e)return"";for(var t=e.length-1;t>=0&&i.isBreakingSpace(e[t]);t--)e=e.slice(0,-1);return e},i.isNewline=function(e){return"string"==typeof e&&i._newlines.indexOf(e.charCodeAt(0))>=0},i.isBreakingSpace=function(e,t){return"string"==typeof e&&i._breakingSpaces.indexOf(e.charCodeAt(0))>=0},i.tokenize=function(e){var t=[],r="";if("string"!=typeof e)return t;for(var n=0;n<e.length;n++){var o=e[n];i.isBreakingSpace(o,e[n+1])||i.isNewline(o)?(""!==r&&(t.push(r),r=""),t.push(o)):r+=o}return""!==r&&t.push(r),t},i.canBreakWords=function(e,t){return t},i.canBreakChars=function(e,t,r,n,o){return!0},i.wordWrapSplit=function(e){return e.split("")},i.measureFont=function(e){if(i._fonts[e])return i._fonts[e];var t={ascent:0,descent:0,fontSize:0},r=i._canvas,n=i._context;n.font=e;var o=i.METRICS_STRING+i.BASELINE_SYMBOL,a=Math.ceil(n.measureText(o).width),s=Math.ceil(n.measureText(i.BASELINE_SYMBOL).width),h=Math.ceil(i.HEIGHT_MULTIPLIER*s);s=s*i.BASELINE_MULTIPLIER|0,r.width=a,r.height=h,n.fillStyle="#f00",n.fillRect(0,0,a,h),n.font=e,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(o,0,s);var l=n.getImageData(0,0,a,h).data,f=l.length,_=4*a,c=0,d=0,m=!1;for(c=0;c<s;++c){for(var v=0;v<_;v+=4)if(255!==l[d+v]){m=!0;break}if(m)break;d+=_}for(t.ascent=s-c,d=f-_,m=!1,c=h;c>s;--c){for(v=0;v<_;v+=4)if(255!==l[d+v]){m=!0;break}if(m)break;d-=_}return t.descent=c-s,t.fontSize=t.ascent+t.descent,i._fonts[e]=t,t},i.clearMetrics=function(e){void 0===e&&(e=""),e?delete i._fonts[e]:i._fonts={}},i}(),Xi=function(){try{var i=new OffscreenCanvas(0,0),e=i.getContext("2d");return e&&e.measureText?i:document.createElement("canvas")}catch(t){return document.createElement("canvas")}}();Xi.width=Xi.height=10,pe._canvas=Xi,pe._context=Xi.getContext("2d"),pe._fonts={},pe.METRICS_STRING="|\xc9q\xc5",pe.BASELINE_SYMBOL="M",pe.BASELINE_MULTIPLIER=1.4,pe.HEIGHT_MULTIPLIER=2,pe._newlines=[10,13],pe._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var Ad={texture:!0,children:!1,baseTexture:!0},Bs="letterSpacing"in CanvasRenderingContext2D.prototype||"textLetterSpacing"in CanvasRenderingContext2D.prototype,Fs=function(i){function e(t,r,n){var o=this,a=!1;n||(n=document.createElement("canvas"),a=!0),n.width=3,n.height=3;var s=pt.from(n);return s.orig=new It,s.trim=new It,(o=i.call(this,s)||this)._ownCanvas=a,o.canvas=n,o.context=o.canvas.getContext("2d"),o._resolution=st.RESOLUTION,o._autoResolution=!0,o._text=null,o._style=null,o._styleListener=null,o._font="",o.text=t,o.style=r,o.localStyleID=-1,o}return function(i,e){function t(){this.constructor=i}lo(i,e),i.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}(e,i),e.prototype.updateText=function(t){var r=this._style;if(this.localStyleID!==r.styleID&&(this.dirty=!0,this.localStyleID=r.styleID),this.dirty||!t){this._font=this._style.toFontString();var n=this.context,o=pe.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),s=o.height,h=o.lines,l=o.lineHeight,f=o.lineWidths,_=o.maxLineWidth,c=o.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,o.width)+2*r.padding)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,s)+2*r.padding)*this._resolution),n.scale(this._resolution,this._resolution),n.clearRect(0,0,this.canvas.width,this.canvas.height),n.font=this._font,n.lineWidth=r.strokeThickness,n.textBaseline=r.textBaseline,n.lineJoin=r.lineJoin,n.miterLimit=r.miterLimit;for(var d,m,v=r.dropShadow?2:1,g=0;g<v;++g){var R=r.dropShadow&&0===g,C=R?Math.ceil(Math.max(1,s)+2*r.padding):0,B=C*this._resolution;if(R){n.fillStyle="black",n.strokeStyle="black";var j=r.dropShadowColor,N=yr("number"==typeof j?j:oa(j));n.shadowColor="rgba("+255*N[0]+","+255*N[1]+","+255*N[2]+","+r.dropShadowAlpha+")",n.shadowBlur=r.dropShadowBlur,n.shadowOffsetX=Math.cos(r.dropShadowAngle)*r.dropShadowDistance,n.shadowOffsetY=Math.sin(r.dropShadowAngle)*r.dropShadowDistance+B}else n.fillStyle=this._generateFillStyle(r,h,o),n.strokeStyle=r.stroke,n.shadowColor="black",n.shadowBlur=0,n.shadowOffsetX=0,n.shadowOffsetY=0;var I=(l-c.fontSize)/2;(!e.nextLineHeightBehavior||l-c.fontSize<0)&&(I=0);for(var J=0;J<h.length;J++)d=r.strokeThickness/2,m=r.strokeThickness/2+J*l+c.ascent+I,"right"===r.align?d+=_-f[J]:"center"===r.align&&(d+=(_-f[J])/2),r.stroke&&r.strokeThickness&&this.drawLetterSpacing(h[J],d+r.padding,m+r.padding-C,!0),r.fill&&this.drawLetterSpacing(h[J],d+r.padding,m+r.padding-C)}this.updateTexture()}},e.prototype.drawLetterSpacing=function(t,r,n,o){void 0===o&&(o=!1);var s=this._style.letterSpacing;if(0===s||Bs)return Bs&&(this.context.letterSpacing=s,this.context.textLetterSpacing=s),void(o?this.context.strokeText(t,r,n):this.context.fillText(t,r,n));for(var h=r,l=Array.from?Array.from(t):t.split(""),f=this.context.measureText(t).width,_=0,c=0;c<l.length;++c){var d=l[c];o?this.context.strokeText(d,h,n):this.context.fillText(d,h,n),h+=f-(_=this.context.measureText(t.substring(c+1)).width)+s,f=_}},e.prototype.updateTexture=function(){var t=this.canvas;if(this._style.trim){var r=function(i){var l,f,_,e=i.width,t=i.height,r=i.getContext("2d"),o=r.getImageData(0,0,e,t).data,a=o.length,s={top:null,left:null,right:null,bottom:null},h=null;for(l=0;l<a;l+=4)0!==o[l+3]&&(f=l/4%e,_=~~(l/4/e),null===s.top&&(s.top=_),(null===s.left||f<s.left)&&(s.left=f),(null===s.right||s.right<f)&&(s.right=f+1),(null===s.bottom||s.bottom<_)&&(s.bottom=_));return null!==s.top&&(h=r.getImageData(s.left,s.top,e=s.right-s.left,t=s.bottom-s.top+1)),{height:t,width:e,data:h}}(t);r.data&&(t.width=r.width,t.height=r.height,this.context.putImageData(r.data,0,0))}var n=this._texture,o=this._style,a=o.trim?0:o.padding,s=n.baseTexture;n.trim.width=n._frame.width=t.width/this._resolution,n.trim.height=n._frame.height=t.height/this._resolution,n.trim.x=-a,n.trim.y=-a,n.orig.width=n._frame.width-2*a,n.orig.height=n._frame.height-2*a,this._onTextureUpdate(),s.setRealSize(t.width,t.height,this._resolution),n.updateUvs(),this._recursivePostUpdateTransform(),this.dirty=!1},e.prototype._render=function(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),i.prototype._render.call(this,t)},e.prototype.getLocalBounds=function(t){return this.updateText(!0),i.prototype.getLocalBounds.call(this,t)},e.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},e.prototype._generateFillStyle=function(t,r,n){var o=t.fill;if(!Array.isArray(o))return o;if(1===o.length)return o[0];var a,s=t.dropShadow?t.dropShadowDistance:0,h=t.padding||0,l=this.canvas.width/this._resolution-s-2*h,f=this.canvas.height/this._resolution-s-2*h,_=o.slice(),c=t.fillGradientStops.slice();if(!c.length)for(var d=_.length+1,m=1;m<d;++m)c.push(m/d);if(_.unshift(o[0]),c.unshift(0),_.push(o[o.length-1]),c.push(1),t.fillGradientType===Nr.LINEAR_VERTICAL){a=this.context.createLinearGradient(l/2,h,l/2,f+h);var v=n.fontProperties.fontSize+t.strokeThickness;for(m=0;m<r.length;m++){var g=n.lineHeight*(m-1)+v,R=n.lineHeight*m,C=R;m>0&&g>R&&(C=(R+g)/2);var B=R+v,j=n.lineHeight*(m+1),N=B;m+1<r.length&&j<B&&(N=(B+j)/2);for(var I=(N-C)/f,J=0;J<_.length;J++){var G=Math.min(1,Math.max(0,C/f+("number"==typeof c[J]?c[J]:J/_.length)*I));G=Number(G.toFixed(5)),a.addColorStop(G,_[J])}}}else{a=this.context.createLinearGradient(h,f/2,l+h,f/2);var $=_.length+1,mt=1;for(m=0;m<_.length;m++)a.addColorStop("number"==typeof c[m]?c[m]:mt/$,_[m]),mt++}return a},e.prototype.destroy=function(t){"boolean"==typeof t&&(t={children:t}),t=Object.assign({},Ad,t),i.prototype.destroy.call(this,t),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(e.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this.updateText(!0);var r=Ar(this.scale.x)||1;this.scale.x=r*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var r=Ar(this.scale.y)||1;this.scale.y=r*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this._style},set:function(t){this._style=(t=t||{})instanceof Lr?t:new Lr(t),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t=String(null==t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)},enumerable:!1,configurable:!0}),e.nextLineHeightBehavior=!1,e}(vr);st.UPLOADS_PER_FRAME=4;var _o=function(i,e){return(_o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])})(i,e)},Rd=function(){function i(e){this.maxItemsPerFrame=e,this.itemsLeft=0}return i.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},i.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},i}();function bd(i,e){var t=!1;if(i&&i._textures&&i._textures.length)for(var r=0;r<i._textures.length;r++)if(i._textures[r]instanceof pt){var n=i._textures[r].baseTexture;-1===e.indexOf(n)&&(e.push(n),t=!0)}return t}function xd(i,e){if(i.baseTexture instanceof Mt){var t=i.baseTexture;return-1===e.indexOf(t)&&e.push(t),!0}return!1}function Id(i,e){if(i._texture&&i._texture instanceof pt){var t=i._texture.baseTexture;return-1===e.indexOf(t)&&e.push(t),!0}return!1}function Md(i,e){return e instanceof Fs&&(e.updateText(!0),!0)}function Dd(i,e){if(e instanceof Lr){var t=e.toFontString();return pe.measureFont(t),!0}return!1}function Nd(i,e){if(i instanceof Fs){-1===e.indexOf(i.style)&&e.push(i.style),-1===e.indexOf(i)&&e.push(i);var t=i._texture.baseTexture;return-1===e.indexOf(t)&&e.push(t),!0}return!1}function Ld(i,e){return i instanceof Lr&&(-1===e.indexOf(i)&&e.push(i),!0)}var Cd=function(){function i(e){var t=this;this.limiter=new Rd(st.UPLOADS_PER_FRAME),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){!t.queue||t.prepareItems()},this.registerFindHook(Nd),this.registerFindHook(Ld),this.registerFindHook(bd),this.registerFindHook(xd),this.registerFindHook(Id),this.registerUploadHook(Md),this.registerUploadHook(Dd)}return i.prototype.upload=function(e,t){"function"==typeof e&&(t=e,e=null),e&&this.add(e),this.queue.length?(t&&this.completes.push(t),this.ticking||(this.ticking=!0,ne.system.addOnce(this.tick,this,Le.UTILITY))):t&&t()},i.prototype.tick=function(){setTimeout(this.delayedTick,0)},i.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var e=this.queue[0],t=!1;if(e&&!e._destroyed)for(var r=0,n=this.uploadHooks.length;r<n;r++)if(this.uploadHooks[r](this.uploadHookHelper,e)){this.queue.shift(),t=!0;break}t||this.queue.shift()}if(this.queue.length)ne.system.addOnce(this.tick,this,Le.UTILITY);else{this.ticking=!1;var o=this.completes.slice(0);for(this.completes.length=0,r=0,n=o.length;r<n;r++)o[r]()}},i.prototype.registerFindHook=function(e){return e&&this.addHooks.push(e),this},i.prototype.registerUploadHook=function(e){return e&&this.uploadHooks.push(e),this},i.prototype.add=function(e){for(var t=0,r=this.addHooks.length;t<r&&!this.addHooks[t](e,this.queue);t++);if(e instanceof fe)for(t=e.children.length-1;t>=0;t--)this.add(e.children[t]);return this},i.prototype.destroy=function(){this.ticking&&ne.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},i}();function ws(i,e){return e instanceof Mt&&(e._glTextures[i.CONTEXT_UID]||i.texture.bind(e),!0)}function Bd(i,e){if(!(e instanceof Hi))return!1;var t=e.geometry;e.finishPoly(),t.updateBatches();for(var r=t.batches,n=0;n<r.length;n++){var o=r[n].style.texture;o&&ws(i,o.baseTexture)}return t.batchable||i.geometry.bind(t,e._resolveDirectShader(i)),!0}function Fd(i,e){return i instanceof Hi&&(e.push(i),!0)}var wd=function(i){function e(t){var r=i.call(this,t)||this;return r.uploadHookHelper=r.renderer,r.registerFindHook(Fd),r.registerUploadHook(ws),r.registerUploadHook(Bd),r}return function(i,e){function t(){this.constructor=i}_o(i,e),i.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}(e,i),e}(Cd),Ud=(function(){function i(e){this.maxMilliseconds=e,this.frameStart=0}i.prototype.beginFrame=function(){this.frameStart=Date.now()},i.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds}}(),function(){function i(e,t,r){void 0===r&&(r=null),this._texture=e instanceof pt?e:null,this.baseTexture=e instanceof Mt?e:this._texture.baseTexture,this.textures={},this.animations={},this.data=t;var n=this.baseTexture.resource;this.resolution=this._updateResolution(r||(n?n.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return i.prototype._updateResolution=function(e){void 0===e&&(e=null);var t=this.data.meta.scale,r=vi(e,null);return null===r&&(r=void 0!==t?parseFloat(t):1),1!==r&&this.baseTexture.setResolution(r),r},i.prototype.parse=function(e){this._batchIndex=0,this._callback=e,this._frameKeys.length<=i.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},i.prototype._processFrames=function(e){for(var t=e,r=i.BATCH_SIZE;t-e<r&&t<this._frameKeys.length;){var n=this._frameKeys[t],o=this._frames[n],a=o.frame;if(a){var s,h=null,l=!1!==o.trimmed&&o.sourceSize?o.sourceSize:o.frame,f=new It(0,0,Math.floor(l.w)/this.resolution,Math.floor(l.h)/this.resolution);s=o.rotated?new It(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.h)/this.resolution,Math.floor(a.w)/this.resolution):new It(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution),!1!==o.trimmed&&o.spriteSourceSize&&(h=new It(Math.floor(o.spriteSourceSize.x)/this.resolution,Math.floor(o.spriteSourceSize.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution)),this.textures[n]=new pt(this.baseTexture,s,f,h,o.rotated?2:0,o.anchor),pt.addToCache(this.textures[n],n)}t++}},i.prototype._processAnimations=function(){var e=this.data.animations||{};for(var t in e){this.animations[t]=[];for(var r=0;r<e[t].length;r++)this.animations[t].push(this.textures[e[t][r]])}},i.prototype._parseComplete=function(){var e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)},i.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*i.BATCH_SIZE),this._batchIndex++,setTimeout(function(){e._batchIndex*i.BATCH_SIZE<e._frameKeys.length?e._nextBatch():(e._processAnimations(),e._parseComplete())},0)},i.prototype.destroy=function(e){var t;for(var r in void 0===e&&(e=!1),this.textures)this.textures[r].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&(null===(t=this._texture)||void 0===t||t.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null},i.BATCH_SIZE=1e3,i}()),Gd=function(){function i(){}return i.use=function(e,t){var r,n,o=this,a=e.name+"_image";if(e.data&&e.type===zt.TYPE.JSON&&e.data.frames&&!o.resources[a]){var s=null===(n=null===(r=e.data)||void 0===r?void 0:r.meta)||void 0===n?void 0:n.related_multi_packs;if(Array.isArray(s))for(var h=function(m){if("string"!=typeof m)return"continue";var v=m.replace(".json",""),g=Sr.resolve(e.url.replace(o.baseUrl,""),m);if(o.resources[v]||Object.values(o.resources).some(function(C){return Sr.format(Sr.parse(C.url))===g}))return"continue";o.add(v,g,{crossOrigin:e.crossOrigin,loadType:zt.LOAD_TYPE.XHR,xhrType:zt.XHR_RESPONSE_TYPE.JSON,parentResource:e,metadata:e.metadata})},l=0,f=s;l<f.length;l++)h(f[l]);var c={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},d=i.getResourcePath(e,o.baseUrl);o.add(a,d,c,function(v){if(v.error)t(v.error);else{var g=new Ud(v.texture,e.data,e.url);g.parse(function(){e.spritesheet=g,e.textures=g.textures,t()})}})}else t()},i.getResourcePath=function(e,t){return e.isDataUrl?e.data.meta.image:Sr.resolve(e.url.replace(t,""),e.data.meta.image)},i}(),po=function(i,e){return(po=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])})(i,e)};function Us(i,e){function t(){this.constructor=i}po(i,e),i.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}var ii=new Kt,Gs=(function(i){function e(t,r,n){void 0===r&&(r=100),void 0===n&&(n=100);var o=i.call(this,t)||this;return o.tileTransform=new pa,o._width=r,o._height=n,o.uvMatrix=o.texture.uvMatrix||new Gn(t),o.pluginName="tilingSprite",o.uvRespectAnchor=!1,o}Us(e,i),Object.defineProperty(e.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(t){this.uvMatrix.clampMargin=t,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copyFrom(t)},enumerable:!1,configurable:!0}),e.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},e.prototype._render=function(t){var r=this._texture;!r||!r.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},e.prototype._calculateBounds=function(){this._bounds.addFrame(this.transform,this._width*-this._anchor._x,this._height*-this._anchor._y,this._width*(1-this._anchor._x),this._height*(1-this._anchor._y))},e.prototype.getLocalBounds=function(t){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new It),t=this._localBoundsRect),this._bounds.getRectangle(t)):i.prototype.getLocalBounds.call(this,t)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,ii);var r=this._width,n=this._height,o=-r*this.anchor._x;if(ii.x>=o&&ii.x<o+r){var a=-n*this.anchor._y;if(ii.y>=a&&ii.y<a+n)return!0}return!1},e.prototype.destroy=function(t){i.prototype.destroy.call(this,t),this.tileTransform=null,this.uvMatrix=null},e.from=function(t,r){return new e(t instanceof pt?t:pt.from(t,r),r.width,r.height)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t},enumerable:!1,configurable:!0})}(vr),"#version 100\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n"),Vi=new qt,Vd=function(i){function e(t){var r=i.call(this,t)||this;return t.runners.contextChange.add(r),r.quad=new Da,r.state=fr.for2d(),r}return Us(e,i),e.prototype.contextChange=function(){var t=this.renderer,r={globals:t.globalUniforms};this.simpleShader=Ke.from(Gs,"#version 100\n#define SHADER_NAME Tiling-Sprite-Simple-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 texSample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = texSample * uColor;\n}\n",r),this.shader=t.context.webGLVersion>1?Ke.from("#version 300 es\n#define SHADER_NAME Tiling-Sprite-300\n\nprecision lowp float;\n\nin vec2 aVertexPosition;\nin vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nout vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","#version 300 es\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nin vec2 vTextureCoord;\n\nout vec4 fragmentColor;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0\n\n    fragmentColor = texSample * uColor;\n}\n",r):Ke.from(Gs,"#version 100\n#ifdef GL_EXT_shader_texture_lod\n    #extension GL_EXT_shader_texture_lod : enable\n#endif\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    #ifdef GL_EXT_shader_texture_lod\n        vec4 texSample = unclamped == coord\n            ? texture2D(uSampler, coord) \n            : texture2DLodEXT(uSampler, coord, 0);\n    #else\n        vec4 texSample = texture2D(uSampler, coord);\n    #endif\n\n    gl_FragColor = texSample * uColor;\n}\n",r)},e.prototype.render=function(t){var r=this.renderer,n=this.quad,o=n.vertices;o[0]=o[6]=t._width*-t.anchor.x,o[1]=o[3]=t._height*-t.anchor.y,o[2]=o[4]=t._width*(1-t.anchor.x),o[5]=o[7]=t._height*(1-t.anchor.y);var a=t.uvRespectAnchor?t.anchor.x:0,s=t.uvRespectAnchor?t.anchor.y:0;(o=n.uvs)[0]=o[6]=-a,o[1]=o[3]=-s,o[2]=o[4]=1-a,o[5]=o[7]=1-s,n.invalidate();var h=t._texture,l=h.baseTexture,f=t.tileTransform.localTransform,_=t.uvMatrix,c=l.isPowerOfTwo&&h.frame.width===l.width&&h.frame.height===l.height;c&&(l._glTextures[r.CONTEXT_UID]?c=l.wrapMode!==Ne.CLAMP:l.wrapMode===Ne.CLAMP&&(l.wrapMode=Ne.REPEAT));var d=c?this.simpleShader:this.shader,m=h.width,v=h.height,g=t._width,R=t._height;Vi.set(f.a*m/g,f.b*m/R,f.c*v/g,f.d*v/R,f.tx/g,f.ty/R),Vi.invert(),c?Vi.prepend(_.mapCoord):(d.uniforms.uMapCoord=_.mapCoord.toArray(!0),d.uniforms.uClampFrame=_.uClampFrame,d.uniforms.uClampOffset=_.uClampOffset),d.uniforms.uTransform=Vi.toArray(!0),d.uniforms.uColor=ha(t.tint,t.worldAlpha,d.uniforms.uColor,l.alphaMode),d.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),d.uniforms.uSampler=h,r.shader.bind(d),r.geometry.bind(n),this.state.blendMode=sa(t.blendMode,l.alphaMode),r.state.set(this.state),r.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},e}(xi),vo=function(i,e){return(vo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])})(i,e)};function Eo(i,e){function t(){this.constructor=i}vo(i,e),i.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}var Wd=function(){function i(e,t){this.uvBuffer=e,this.uvMatrix=t,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return i.prototype.update=function(e){if(e||this._bufferUpdateId!==this.uvBuffer._updateID||this._textureUpdateId!==this.uvMatrix._updateID){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var t=this.uvBuffer.data;(!this.data||this.data.length!==t.length)&&(this.data=new Float32Array(t.length)),this.uvMatrix.multiplyUvs(t,this.data),this._updateID++}},i}(),mo=new Kt,ks=new mi,ni=function(i){function e(t,r,n,o){void 0===o&&(o=_e.TRIANGLES);var a=i.call(this)||this;return a.geometry=t,a.shader=r,a.state=n||fr.for2d(),a.drawMode=o,a.start=0,a.size=0,a.uvs=null,a.indices=null,a.vertexData=new Float32Array(1),a.vertexDirty=-1,a._transformID=-1,a._roundPixels=st.ROUND_PIXELS,a.batchUvs=null,a}return Eo(e,i),Object.defineProperty(e.prototype,"geometry",{get:function(){return this._geometry},set:function(t){this._geometry!==t&&(this._geometry&&(this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose()),this._geometry=t,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"material",{get:function(){return this.shader},set:function(t){this.shader=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return"tint"in this.shader?this.shader.tint:null},set:function(t){this.shader.tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return"texture"in this.shader?this.shader.texture:null},set:function(t){this.shader.texture=t},enumerable:!1,configurable:!0}),e.prototype._render=function(t){this.shader.batchable&&this.drawMode===_e.TRIANGLES&&this.geometry.buffers[0].data.length<2*e.BATCHABLE_SIZE?this._renderToBatch(t):this._renderDefault(t)},e.prototype._renderDefault=function(t){var r=this.shader;r.alpha=this.worldAlpha,r.update&&r.update(),t.batch.flush(),r.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),t.shader.bind(r),t.state.set(this.state),t.geometry.bind(this.geometry,r),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},e.prototype._renderToBatch=function(t){var r=this.geometry,n=this.shader;n.uvMatrix&&(n.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=r.indexBuffer.data,this._tintRGB=n._tintRGB,this._texture=n.texture;var o=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[o]),t.plugins[o].render(this)},e.prototype.calculateVertices=function(){var r=this.geometry.buffers[0],n=r.data,o=r._updateID;if(o!==this.vertexDirty||this._transformID!==this.transform._worldID){this._transformID=this.transform._worldID,this.vertexData.length!==n.length&&(this.vertexData=new Float32Array(n.length));for(var a=this.transform.worldTransform,s=a.a,h=a.b,l=a.c,f=a.d,_=a.tx,c=a.ty,d=this.vertexData,m=0;m<d.length/2;m++){var v=n[2*m],g=n[2*m+1];d[2*m]=s*v+l*g+_,d[2*m+1]=h*v+f*g+c}if(this._roundPixels){var R=st.RESOLUTION;for(m=0;m<d.length;++m)d[m]=Math.round((d[m]*R|0)/R)}this.vertexDirty=o}},e.prototype.calculateUvs=function(){var t=this.geometry.buffers[1],r=this.shader;r.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new Wd(t,r.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},e.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},e.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,mo);for(var r=this.geometry.getBuffer("aVertexPosition").data,n=ks.points,o=this.geometry.getIndex().data,a=o.length,s=4===this.drawMode?3:1,h=0;h+2<a;h+=s){var l=2*o[h],f=2*o[h+1],_=2*o[h+2];if(n[0]=r[l],n[1]=r[l+1],n[2]=r[f],n[3]=r[f+1],n[4]=r[_],n[5]=r[_+1],ks.contains(mo.x,mo.y))return!0}return!1},e.prototype.destroy=function(t){i.prototype.destroy.call(this,t),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},e.BATCHABLE_SIZE=100,e}(fe),oi=function(i){function e(t,r){var n=this,o={uSampler:t,alpha:1,uTextureMatrix:qt.IDENTITY,uColor:new Float32Array([1,1,1,1])};return(r=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},r)).uniforms&&Object.assign(o,r.uniforms),(n=i.call(this,r.program||Kr.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"),o)||this)._colorDirty=!1,n.uvMatrix=new Gn(t),n.batchable=void 0===r.program,n.pluginName=r.pluginName,n.tint=r.tint,n.alpha=r.alpha,n}return Eo(e,i),Object.defineProperty(e.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(t){this.uniforms.uSampler!==t&&(this.uniforms.uSampler=t,this.uvMatrix.texture=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){t!==this._tint&&(this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),e.prototype.update=function(){this._colorDirty&&(this._colorDirty=!1,ha(this._tint,this._alpha,this.uniforms.uColor,this.texture.baseTexture.alphaMode)),this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},e}(Ke),Wi=function(i){function e(t,r,n){var o=i.call(this)||this,a=new re(t),s=new re(r,!0),h=new re(n,!0,!0);return o.addAttribute("aVertexPosition",a,2,!1,dt.FLOAT).addAttribute("aTextureCoord",s,2,!1,dt.FLOAT).addIndex(h),o._updateId=-1,o}return Eo(e,i),Object.defineProperty(e.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),e}($r),go=function(i,e){return(go=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])})(i,e)},ji=function(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]},Zd=function(){function i(){}return i.test=function(e){return"string"==typeof e&&0===e.indexOf("info face=")},i.parse=function(e){var t=e.match(/^[a-z]+\s+.+$/gm),r={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(var n in t){var o=t[n].match(/^[a-z]+/gm)[0],a=t[n].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),s={};for(var h in a){var l=a[h].split("="),f=l[0],_=l[1].replace(/"/gm,""),c=parseFloat(_),d=isNaN(c)?_:c;s[f]=d}r[o].push(s)}var m=new ji;return r.info.forEach(function(v){return m.info.push({face:v.face,size:parseInt(v.size,10)})}),r.common.forEach(function(v){return m.common.push({lineHeight:parseInt(v.lineHeight,10)})}),r.page.forEach(function(v){return m.page.push({id:parseInt(v.id,10),file:v.file})}),r.char.forEach(function(v){return m.char.push({id:parseInt(v.id,10),page:parseInt(v.page,10),x:parseInt(v.x,10),y:parseInt(v.y,10),width:parseInt(v.width,10),height:parseInt(v.height,10),xoffset:parseInt(v.xoffset,10),yoffset:parseInt(v.yoffset,10),xadvance:parseInt(v.xadvance,10)})}),r.kerning.forEach(function(v){return m.kerning.push({first:parseInt(v.first,10),second:parseInt(v.second,10),amount:parseInt(v.amount,10)})}),r.distanceField.forEach(function(v){return m.distanceField.push({distanceRange:parseInt(v.distanceRange,10),fieldType:v.fieldType})}),m},i}(),To=function(){function i(){}return i.test=function(e){return e instanceof XMLDocument&&e.getElementsByTagName("page").length&&null!==e.getElementsByTagName("info")[0].getAttribute("face")},i.parse=function(e){for(var t=new ji,r=e.getElementsByTagName("info"),n=e.getElementsByTagName("common"),o=e.getElementsByTagName("page"),a=e.getElementsByTagName("char"),s=e.getElementsByTagName("kerning"),h=e.getElementsByTagName("distanceField"),l=0;l<r.length;l++)t.info.push({face:r[l].getAttribute("face"),size:parseInt(r[l].getAttribute("size"),10)});for(l=0;l<n.length;l++)t.common.push({lineHeight:parseInt(n[l].getAttribute("lineHeight"),10)});for(l=0;l<o.length;l++)t.page.push({id:parseInt(o[l].getAttribute("id"),10)||0,file:o[l].getAttribute("file")});for(l=0;l<a.length;l++){var f=a[l];t.char.push({id:parseInt(f.getAttribute("id"),10),page:parseInt(f.getAttribute("page"),10)||0,x:parseInt(f.getAttribute("x"),10),y:parseInt(f.getAttribute("y"),10),width:parseInt(f.getAttribute("width"),10),height:parseInt(f.getAttribute("height"),10),xoffset:parseInt(f.getAttribute("xoffset"),10),yoffset:parseInt(f.getAttribute("yoffset"),10),xadvance:parseInt(f.getAttribute("xadvance"),10)})}for(l=0;l<s.length;l++)t.kerning.push({first:parseInt(s[l].getAttribute("first"),10),second:parseInt(s[l].getAttribute("second"),10),amount:parseInt(s[l].getAttribute("amount"),10)});for(l=0;l<h.length;l++)t.distanceField.push({fieldType:h[l].getAttribute("fieldType"),distanceRange:parseInt(h[l].getAttribute("distanceRange"),10)});return t},i}(),Kd=function(){function i(){}return i.test=function(e){if("string"==typeof e&&e.indexOf("<font>")>-1){var t=(new self.DOMParser).parseFromString(e,"text/xml");return To.test(t)}return!1},i.parse=function(e){var t=(new self.DOMParser).parseFromString(e,"text/xml");return To.parse(t)},i}(),So=[Zd,To,Kd];function Ys(i){for(var e=0;e<So.length;e++)if(So[e].test(i))return So[e];return null}function Qd(i,e,t,r,n,o,a){var s=t.text,h=t.fontProperties;e.translate(r,n),e.scale(o,o);var l=a.strokeThickness/2,f=-a.strokeThickness/2;e.font=a.toFontString(),e.lineWidth=a.strokeThickness,e.textBaseline=a.textBaseline,e.lineJoin=a.lineJoin,e.miterLimit=a.miterLimit,e.fillStyle=function(i,e,t,r,n,o){var a=t.fill;if(!Array.isArray(a))return a;if(1===a.length)return a[0];var s,h=t.dropShadow?t.dropShadowDistance:0,l=t.padding||0,f=i.width/r-h-2*l,_=i.height/r-h-2*l,c=a.slice(),d=t.fillGradientStops.slice();if(!d.length)for(var m=c.length+1,v=1;v<m;++v)d.push(v/m);if(c.unshift(a[0]),d.unshift(0),c.push(a[a.length-1]),d.push(1),t.fillGradientType===Nr.LINEAR_VERTICAL){s=e.createLinearGradient(f/2,l,f/2,_+l);var g=0,C=(o.fontProperties.fontSize+t.strokeThickness)/_;for(v=0;v<n.length;v++)for(var B=o.lineHeight*v,j=0;j<c.length;j++){var J=Math.max(g,B/_+("number"==typeof d[j]?d[j]:j/c.length)*C);J=Math.min(J,1),s.addColorStop(J,c[j]),g=J}}else{s=e.createLinearGradient(l,_/2,f+l,_/2);var Ot=c.length+1,G=1;for(v=0;v<c.length;v++)s.addColorStop("number"==typeof d[v]?d[v]:G/Ot,c[v]),G++}return s}(i,e,a,o,[s],t),e.strokeStyle=a.stroke;var _=a.dropShadowColor,c=yr("number"==typeof _?_:oa(_));a.dropShadow?(e.shadowColor="rgba("+255*c[0]+","+255*c[1]+","+255*c[2]+","+a.dropShadowAlpha+")",e.shadowBlur=a.dropShadowBlur,e.shadowOffsetX=Math.cos(a.dropShadowAngle)*a.dropShadowDistance,e.shadowOffsetY=Math.sin(a.dropShadowAngle)*a.dropShadowDistance):(e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0),a.stroke&&a.strokeThickness&&e.strokeText(s,l,f+t.lineHeight-h.descent),a.fill&&e.fillText(s,l,f+t.lineHeight-h.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function Hs(i){return Array.from?Array.from(i):i.split("")}function $i(i){return i.codePointAt?i.codePointAt(0):i.charCodeAt(0)}var Cr=function(){function i(e,t,r){var n,o,a=e.info[0],s=e.common[0],l=e.distanceField[0],f=vi(e.page[0].file),_={};this._ownsTextures=r,this.font=a.face,this.size=a.size,this.lineHeight=s.lineHeight/f,this.chars={},this.pageTextures=_;for(var c=0;c<e.page.length;c++){var d=e.page[c];_[m=d.id]=t instanceof Array?t[c]:t[d.file],(null==l?void 0:l.fieldType)&&"none"!==l.fieldType&&(_[m].baseTexture.alphaMode=Se.NO_PREMULTIPLIED_ALPHA)}for(c=0;c<e.char.length;c++){var g=e.char[c],m=g.id,R=g.page,C=e.char[c],B=C.x,j=C.y,N=C.width,I=C.height,J=C.xoffset,Ot=C.yoffset,G=C.xadvance;J/=f,Ot/=f,G/=f;var $=new It((B/=f)+_[R].frame.x/f,(j/=f)+_[R].frame.y/f,N/=f,I/=f);this.chars[m]={xOffset:J,yOffset:Ot,xAdvance:G,kerning:{},texture:new pt(_[R].baseTexture,$),page:R}}for(c=0;c<e.kerning.length;c++){var mt=e.kerning[c],_t=mt.first,Dt=mt.second,ae=mt.amount;_t/=f,ae/=f,this.chars[Dt/=f]&&(this.chars[Dt].kerning[_t]=ae)}this.distanceFieldRange=null==l?void 0:l.distanceRange,this.distanceFieldType=null!==(o=null===(n=null==l?void 0:l.fieldType)||void 0===n?void 0:n.toLowerCase())&&void 0!==o?o:"none"}return i.prototype.destroy=function(){for(var e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(var e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null},i.install=function(e,t,r){var n;if(e instanceof ji)n=e;else{var o=Ys(e);if(!o)throw new Error("Unrecognized data format for font.");n=o.parse(e)}t instanceof pt&&(t=[t]);var a=new i(n,t,r);return i.available[a.font]=a,a},i.uninstall=function(e){var t=i.available[e];if(!t)throw new Error("No font found named '"+e+"'");t.destroy(),delete i.available[e]},i.from=function(e,t,r){if(!e)throw new Error("[BitmapFont] Property `name` is required.");var n=Object.assign({},i.defaultOptions,r),a=n.padding,s=n.resolution,h=n.textureWidth,l=n.textureHeight,f=function(i){"string"==typeof i&&(i=[i]);for(var e=[],t=0,r=i.length;t<r;t++){var n=i[t];if(Array.isArray(n)){if(2!==n.length)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+n.length+".");var o=n[0].charCodeAt(0),a=n[1].charCodeAt(0);if(a<o)throw new Error("[BitmapFont]: Invalid character range.");for(var s=o,h=a;s<=h;s++)e.push(String.fromCharCode(s))}else e.push.apply(e,Hs(n))}if(0===e.length)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}(n.chars),_=t instanceof Lr?t:new Lr(t),c=h,d=new ji;d.info[0]={face:_.fontFamily,size:_.fontSize},d.common[0]={lineHeight:_.fontSize};for(var g,R,C,m=0,v=0,B=0,j=[],N=0;N<f.length;N++){g||((g=document.createElement("canvas")).width=h,g.height=l,R=g.getContext("2d"),C=new Mt(g,{resolution:s}),j.push(new pt(C)),d.page.push({id:j.length-1,file:""}));var I=pe.measureText(f[N],_,!1,g),J=I.width,Ot=Math.ceil(I.height),G=Math.ceil(("italic"===_.fontStyle?2:1)*J);if(v>=l-Ot*s){if(0===v)throw new Error("[BitmapFont] textureHeight "+l+"px is too small for "+_.fontSize+"px fonts");--N,g=null,R=null,C=null,v=0,m=0,B=0}else if(B=Math.max(Ot+I.fontProperties.descent,B),G*s+m>=c)--N,v+=B*s,v=Math.ceil(v),m=0,B=0;else{Qd(g,R,I,m,v,s,_);var $=$i(I.text);d.char.push({id:$,page:j.length-1,x:m/s,y:v/s,width:G,height:Ot,xoffset:0,yoffset:0,xadvance:Math.ceil(J-(_.dropShadow?_.dropShadowDistance:0)-(_.stroke?_.strokeThickness:0))}),m+=(G+2*a)*s,m=Math.ceil(m)}}N=0;for(var mt=f.length;N<mt;N++)for(var _t=f[N],Dt=0;Dt<mt;Dt++){var ae=f[Dt],ht=R.measureText(_t).width,at=R.measureText(ae).width,se=R.measureText(_t+ae).width-(ht+at);se&&d.kerning.push({first:$i(_t),second:$i(ae),amount:se})}var le=new i(d,j,!0);return void 0!==i.available[e]&&i.uninstall(e),i.available[e]=le,le},i.ALPHA=[["a","z"],["A","Z"]," "],i.NUMERIC=[["0","9"]],i.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],i.ASCII=[[" ","~"]],i.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:i.ALPHANUMERIC},i.available={},i}(),rp=[],ip=[],Xs=[],np=(function(i){function e(t,r){void 0===r&&(r={});var n=i.call(this)||this;n._tint=16777215;var o=Object.assign({},e.styleDefaults,r),a=o.align,s=o.tint,h=o.maxWidth,l=o.letterSpacing,f=o.fontName,_=o.fontSize;if(!Cr.available[f])throw new Error('Missing BitmapFont "'+f+'"');return n._activePagesMeshData=[],n._textWidth=0,n._textHeight=0,n._align=a,n._tint=s,n._fontName=f,n._fontSize=_||Cr.available[f].size,n._text=t,n._maxWidth=h,n._maxLineHeight=0,n._letterSpacing=l,n._anchor=new Pr(function(){n.dirty=!0},n,0,0),n._roundPixels=st.ROUND_PIXELS,n.dirty=!0,n._textureCache={},n}(function(i,e){function t(){this.constructor=i}go(i,e),i.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)})(e,i),e.prototype.updateText=function(){for(var t,r=Cr.available[this._fontName],n=this._fontSize/r.size,o=new Kt,a=[],s=[],h=[],f=Hs(this._text.replace(/(?:\r\n|\r)/g,"\n")||" "),_=this._maxWidth*r.size/this._fontSize,c="none"===r.distanceFieldType?rp:ip,d=null,m=0,v=0,g=0,R=-1,C=0,B=0,j=0,N=0,I=0;I<f.length;I++){var Ot=$i(J=f[I]);if(/(?:\s)/.test(J)&&(R=I,C=m,N++),"\r"!==J&&"\n"!==J){var G=r.chars[Ot];if(G){d&&G.kerning[d]&&(o.x+=G.kerning[d]);var $=Xs.pop()||{texture:pt.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Kt};$.texture=G.texture,$.line=g,$.charCode=Ot,$.position.x=o.x+G.xOffset+this._letterSpacing/2,$.position.y=o.y+G.yOffset,$.prevSpaces=N,a.push($),m=$.position.x+G.texture.orig.width,o.x+=G.xAdvance+this._letterSpacing,j=Math.max(j,G.yOffset+G.texture.height),d=Ot,-1!==R&&_>0&&o.x>_&&(Or(a,1+R-++B,1+I-R),I=R,R=-1,s.push(C),h.push(a.length>0?a[a.length-1].prevSpaces:0),v=Math.max(v,C),g++,o.x=0,o.y+=r.lineHeight,d=null,N=0)}}else s.push(m),h.push(-1),v=Math.max(v,m),++g,++B,o.x=0,o.y+=r.lineHeight,d=null,N=0}var mt=f[f.length-1];"\r"!==mt&&"\n"!==mt&&(/(?:\s)/.test(mt)&&(m=C),s.push(m),v=Math.max(v,m),h.push(-1));var _t=[];for(I=0;I<=g;I++){var Dt=0;"right"===this._align?Dt=v-s[I]:"center"===this._align?Dt=(v-s[I])/2:"justify"===this._align&&(Dt=h[I]<0?0:(v-s[I])/h[I]),_t.push(Dt)}var ae=a.length,ht={},at=[],xt=this._activePagesMeshData;for(I=0;I<xt.length;I++)c.push(xt[I]);for(I=0;I<ae;I++){var le=(se=a[I].texture).baseTexture.uid;if(!ht[le]){if(!(St=c.pop())){var wr=new Wi,ir=void 0,We=void 0;"none"===r.distanceFieldType?(ir=new oi(pt.EMPTY),We=ut.NORMAL):(ir=new oi(pt.EMPTY,{program:Kr.from("// Mesh material default fragment\r\nattribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\n\r\nuniform mat3 projectionMatrix;\r\nuniform mat3 translationMatrix;\r\nuniform mat3 uTextureMatrix;\r\n\r\nvarying vec2 vTextureCoord;\r\n\r\nvoid main(void)\r\n{\r\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r\n\r\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r\n}\r\n","// Pixi texture info\r\nvarying vec2 vTextureCoord;\r\nuniform sampler2D uSampler;\r\n\r\n// Tint\r\nuniform vec4 uColor;\r\n\r\n// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r\nuniform float uFWidth;\r\n\r\nvoid main(void) {\r\n\r\n  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r\n  vec4 texColor = texture2D(uSampler, vTextureCoord);\r\n\r\n  // MSDF\r\n  float median = texColor.r + texColor.g + texColor.b -\r\n                  min(texColor.r, min(texColor.g, texColor.b)) -\r\n                  max(texColor.r, max(texColor.g, texColor.b));\r\n  // SDF\r\n  median = min(median, texColor.a);\r\n\r\n  float screenPxDistance = uFWidth * (median - 0.5);\r\n  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r\n\r\n  // NPM Textures, NPM outputs\r\n  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r\n\r\n}\r\n"),uniforms:{uFWidth:0}}),We=ut.NORMAL_NPM);var ai=new ni(wr,ir);ai.blendMode=We,St={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:ai,vertices:null,uvs:null,indices:null}}St.index=0,St.indexCount=0,St.vertexCount=0,St.uvsCount=0,St.total=0;var Ur=this._textureCache;Ur[le]=Ur[le]||new pt(se.baseTexture),St.mesh.texture=Ur[le],St.mesh.tint=this._tint,at.push(St),ht[le]=St}ht[le].total++}for(I=0;I<xt.length;I++)-1===at.indexOf(xt[I])&&this.removeChild(xt[I].mesh);for(I=0;I<at.length;I++)at[I].mesh.parent!==this&&this.addChild(at[I].mesh);for(var I in this._activePagesMeshData=at,ht){var Be=(St=ht[I]).total;if(!((null===(t=St.indices)||void 0===t?void 0:t.length)>6*Be)||St.vertices.length<2*ni.BATCHABLE_SIZE)St.vertices=new Float32Array(8*Be),St.uvs=new Float32Array(8*Be),St.indices=new Uint16Array(6*Be);else for(var kr=St.vertices,be=4*St.total*2;be<kr.length;be++)kr[be]=0;St.mesh.size=6*Be}for(I=0;I<ae;I++){var J,xe=(J=a[I]).position.x+_t[J.line]*("justify"===this._align?J.prevSpaces:1);this._roundPixels&&(xe=Math.round(xe));var se,ve=xe*n,Ee=J.position.y*n,Gt=ht[(se=J.texture).baseTexture.uid],Er=se.frame,Fe=se._uvs,Nt=Gt.index++;Gt.indices[6*Nt+0]=0+4*Nt,Gt.indices[6*Nt+1]=1+4*Nt,Gt.indices[6*Nt+2]=2+4*Nt,Gt.indices[6*Nt+3]=0+4*Nt,Gt.indices[6*Nt+4]=2+4*Nt,Gt.indices[6*Nt+5]=3+4*Nt,Gt.vertices[8*Nt+0]=ve,Gt.vertices[8*Nt+1]=Ee,Gt.vertices[8*Nt+2]=ve+Er.width*n,Gt.vertices[8*Nt+3]=Ee,Gt.vertices[8*Nt+4]=ve+Er.width*n,Gt.vertices[8*Nt+5]=Ee+Er.height*n,Gt.vertices[8*Nt+6]=ve,Gt.vertices[8*Nt+7]=Ee+Er.height*n,Gt.uvs[8*Nt+0]=Fe.x0,Gt.uvs[8*Nt+1]=Fe.y0,Gt.uvs[8*Nt+2]=Fe.x1,Gt.uvs[8*Nt+3]=Fe.y1,Gt.uvs[8*Nt+4]=Fe.x2,Gt.uvs[8*Nt+5]=Fe.y2,Gt.uvs[8*Nt+6]=Fe.x3,Gt.uvs[8*Nt+7]=Fe.y3}for(var I in this._textWidth=v*n,this._textHeight=(o.y+r.lineHeight)*n,ht){var St=ht[I];if(0!==this.anchor.x||0!==this.anchor.y)for(var we=0,Yr=this._textWidth*this.anchor.x,Ki=this._textHeight*this.anchor.y,eh=0;eh<St.total;eh++)St.vertices[we++]-=Yr,St.vertices[we++]-=Ki,St.vertices[we++]-=Yr,St.vertices[we++]-=Ki,St.vertices[we++]-=Yr,St.vertices[we++]-=Ki,St.vertices[we++]-=Yr,St.vertices[we++]-=Ki;this._maxLineHeight=j*n;var rh=St.mesh.geometry.getBuffer("aVertexPosition"),ih=St.mesh.geometry.getBuffer("aTextureCoord"),nh=St.mesh.geometry.getIndex();rh.data=St.vertices,ih.data=St.uvs,nh.data=St.indices,rh.update(),ih.update(),nh.update()}for(I=0;I<a.length;I++)Xs.push(a[I])},e.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},e.prototype._render=function(t){var r=Cr.available[this._fontName],n=r.distanceFieldRange,a=r.size;if("none"!==r.distanceFieldType)for(var s=this.worldTransform,h=s.a,l=s.b,f=s.c,_=s.d,c=Math.sqrt(h*h+l*l),d=Math.sqrt(f*f+_*_),m=(Math.abs(c)+Math.abs(d))/2,v=this._fontSize/a,g=0,R=this._activePagesMeshData;g<R.length;g++)R[g].mesh.shader.uniforms.uFWidth=m*n*v*t.resolution;i.prototype._render.call(this,t)},e.prototype.getLocalBounds=function(){return this.validate(),i.prototype.getLocalBounds.call(this)},e.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){if(this._tint!==t){this._tint=t;for(var r=0;r<this._activePagesMeshData.length;r++)this._activePagesMeshData[r].mesh.tint=t}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontName",{get:function(){return this._fontName},set:function(t){if(!Cr.available[t])throw new Error('Missing BitmapFont "'+t+'"');this._fontName!==t&&(this._fontName=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(t){"number"==typeof t?this._anchor.set(t):this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t=String(null==t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),e.prototype.destroy=function(t){var r=this._textureCache;for(var n in r)r[n].destroy(),delete r[n];this._textureCache=null,i.prototype.destroy.call(this,t)},e.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0}}(fe),function(){function i(){}return i.add=function(){zt.setExtensionXhrType("fnt",zt.XHR_RESPONSE_TYPE.TEXT)},i.use=function(e,t){var r=Ys(e.data);if(r)for(var n=i.getBaseUrl(this,e),o=r.parse(e.data),a={},s=function(v){a[v.metadata.pageFile]=v.texture,Object.keys(a).length===o.page.length&&(e.bitmapFont=Cr.install(o,a,!0),t())},h=0;h<o.page.length;++h){var l=o.page[h].file,f=n+l,_=!1;for(var c in this.resources){var d=this.resources[c];if(d.url===f){d.metadata.pageFile=l,d.texture?s(d):d.onAfterMiddleware.add(s),_=!0;break}}if(!_){var m={crossOrigin:e.crossOrigin,loadType:zt.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:l},e.metadata.imageMetadata),parentResource:e};this.add(f,m,s)}}else t()},i.getBaseUrl=function(e,t){var r=t.isDataUrl?"":i.dirname(t.url);return t.isDataUrl&&("."===r&&(r=""),e.baseUrl&&r&&"/"===e.baseUrl.charAt(e.baseUrl.length-1)&&(r+="/")),(r=r.replace(e.baseUrl,""))&&"/"!==r.charAt(r.length-1)&&(r+="/"),r},i.dirname=function(e){var t=e.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return t===e?".":""===t?"/":t},i}()),yo=function(i,e){return(yo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])})(i,e)};!function(i){function e(t){void 0===t&&(t=1);var r=i.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n",{uAlpha:1})||this;return r.alpha=t,r}(function(i,e){function t(){this.constructor=i}yo(i,e),i.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)})(e,i),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0})}(qe);var Oo=function(i,e){return(Oo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])})(i,e)};function Vs(i,e){function t(){this.constructor=i}Oo(i,e),i.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}var up={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},fp=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n"),Br=(()=>(function(i){i[i.NO=0]="NO",i[i.YES=1]="YES",i[i.AUTO=2]="AUTO",i[i.BLEND=0]="BLEND",i[i.CLEAR=1]="CLEAR",i[i.BLIT=2]="BLIT"}(Br||(Br={})),Br))(),Ao=function(i){function e(t,r,n,o,a){void 0===r&&(r=8),void 0===n&&(n=4),void 0===o&&(o=st.FILTER_RESOLUTION),void 0===a&&(a=5);var s=this,h=function(i,e){var o,t=Math.ceil(i/2),r="\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }",n="";o=e?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var a=0;a<i;a++){var s=o.replace("%index%",a.toString());n+=s=s.replace("%sampleIndex%",a-(t-1)+".0"),n+="\n"}return(r=r.replace("%blur%",n)).replace("%size%",i.toString())}(a,t),l=function(i){for(var a,e=up[i],t=e.length,r=fp,n="",s=0;s<i;s++){var h="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",s.toString());a=s,s>=t&&(a=i-s-1),n+=h=h.replace("%value%",e[a].toString()),n+="\n"}return(r=r.replace("%blur%",n)).replace("%size%",i.toString())}(a);return(s=i.call(this,h,l)||this).horizontal=t,s.resolution=o,s._quality=0,s.quality=n,s.blur=r,s}return Vs(e,i),e.prototype.apply=function(t,r,n,o){if(this.uniforms.strength=n?this.horizontal?1/n.width*(n.width/r.width):1/n.height*(n.height/r.height):this.horizontal?1/t.renderer.width*(t.renderer.width/r.width):1/t.renderer.height*(t.renderer.height/r.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,r,n,o);else{var a=t.getFilterTexture(),s=t.renderer,h=r,l=a;this.state.blend=!1,t.applyFilter(this,h,l,Br.CLEAR);for(var f=1;f<this.passes-1;f++){t.bindAndClear(h,Br.BLIT),this.uniforms.uSampler=l;var _=l;l=h,h=_,s.shader.bind(this),s.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,l,n,o),t.returnFilterTexture(a)}},Object.defineProperty(e.prototype,"blur",{get:function(){return this.strength},set:function(t){this.padding=1+2*Math.abs(t),this.strength=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t},enumerable:!1,configurable:!0}),e}(qe),Po=(function(i){function e(t,r,n,o){void 0===t&&(t=8),void 0===r&&(r=4),void 0===n&&(n=st.FILTER_RESOLUTION),void 0===o&&(o=5);var a=i.call(this)||this;return a.blurXFilter=new Ao(!0,t,r,n,o),a.blurYFilter=new Ao(!1,t,r,n,o),a.resolution=n,a.quality=r,a.blur=t,a.repeatEdgePixels=!1,a}Vs(e,i),e.prototype.apply=function(t,r,n,o){var a=Math.abs(this.blurXFilter.strength),s=Math.abs(this.blurYFilter.strength);if(a&&s){var h=t.getFilterTexture();this.blurXFilter.apply(t,r,h,Br.CLEAR),this.blurYFilter.apply(t,h,n,o),t.returnFilterTexture(h)}else s?this.blurYFilter.apply(t,r,n,o):this.blurXFilter.apply(t,r,n,o)},e.prototype.updatePadding=function(){this.padding=this._repeatEdgePixels?0:2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))},Object.defineProperty(e.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(t){this.blurYFilter.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(t){this._repeatEdgePixels=t,this.updatePadding()},enumerable:!1,configurable:!0})}(qe),function(i,e){return(Po=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])})(i,e)}),Ro=function(i){function e(){var t=this,r={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return(t=i.call(this,ss,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",r)||this).alpha=1,t}return function(i,e){function t(){this.constructor=i}Po(i,e),i.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}(e,i),e.prototype._loadMatrix=function(t,r){void 0===r&&(r=!1);var n=t;r&&(this._multiply(n,this.uniforms.m,t),n=this._colorMatrix(n)),this.uniforms.m=n},e.prototype._multiply=function(t,r,n){return t[0]=r[0]*n[0]+r[1]*n[5]+r[2]*n[10]+r[3]*n[15],t[1]=r[0]*n[1]+r[1]*n[6]+r[2]*n[11]+r[3]*n[16],t[2]=r[0]*n[2]+r[1]*n[7]+r[2]*n[12]+r[3]*n[17],t[3]=r[0]*n[3]+r[1]*n[8]+r[2]*n[13]+r[3]*n[18],t[4]=r[0]*n[4]+r[1]*n[9]+r[2]*n[14]+r[3]*n[19]+r[4],t[5]=r[5]*n[0]+r[6]*n[5]+r[7]*n[10]+r[8]*n[15],t[6]=r[5]*n[1]+r[6]*n[6]+r[7]*n[11]+r[8]*n[16],t[7]=r[5]*n[2]+r[6]*n[7]+r[7]*n[12]+r[8]*n[17],t[8]=r[5]*n[3]+r[6]*n[8]+r[7]*n[13]+r[8]*n[18],t[9]=r[5]*n[4]+r[6]*n[9]+r[7]*n[14]+r[8]*n[19]+r[9],t[10]=r[10]*n[0]+r[11]*n[5]+r[12]*n[10]+r[13]*n[15],t[11]=r[10]*n[1]+r[11]*n[6]+r[12]*n[11]+r[13]*n[16],t[12]=r[10]*n[2]+r[11]*n[7]+r[12]*n[12]+r[13]*n[17],t[13]=r[10]*n[3]+r[11]*n[8]+r[12]*n[13]+r[13]*n[18],t[14]=r[10]*n[4]+r[11]*n[9]+r[12]*n[14]+r[13]*n[19]+r[14],t[15]=r[15]*n[0]+r[16]*n[5]+r[17]*n[10]+r[18]*n[15],t[16]=r[15]*n[1]+r[16]*n[6]+r[17]*n[11]+r[18]*n[16],t[17]=r[15]*n[2]+r[16]*n[7]+r[17]*n[12]+r[18]*n[17],t[18]=r[15]*n[3]+r[16]*n[8]+r[17]*n[13]+r[18]*n[18],t[19]=r[15]*n[4]+r[16]*n[9]+r[17]*n[14]+r[18]*n[19]+r[19],t},e.prototype._colorMatrix=function(t){var r=new Float32Array(t);return r[4]/=255,r[9]/=255,r[14]/=255,r[19]/=255,r},e.prototype.brightness=function(t,r){this._loadMatrix([t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0],r)},e.prototype.tint=function(t,r){this._loadMatrix([(t>>16&255)/255,0,0,0,0,0,(t>>8&255)/255,0,0,0,0,0,(255&t)/255,0,0,0,0,0,1,0],r)},e.prototype.greyscale=function(t,r){this._loadMatrix([t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0],r)},e.prototype.blackAndWhite=function(t){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)},e.prototype.hue=function(t,r){t=(t||0)/180*Math.PI;var n=Math.cos(t),o=Math.sin(t),s=1/3,h=(0,Math.sqrt)(s);this._loadMatrix([n+(1-n)*s,s*(1-n)-h*o,s*(1-n)+h*o,0,0,s*(1-n)+h*o,n+s*(1-n),s*(1-n)-h*o,0,0,s*(1-n)-h*o,s*(1-n)+h*o,n+s*(1-n),0,0,0,0,0,1,0],r)},e.prototype.contrast=function(t,r){var n=(t||0)+1,o=-.5*(n-1);this._loadMatrix([n,0,0,0,o,0,n,0,0,o,0,0,n,0,o,0,0,0,1,0],r)},e.prototype.saturate=function(t,r){void 0===t&&(t=0);var n=2*t/3+1,o=-.5*(n-1);this._loadMatrix([n,o,o,0,0,o,n,o,0,0,o,o,n,0,0,0,0,0,1,0],r)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(t){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],t)},e.prototype.sepia=function(t){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)},e.prototype.technicolor=function(t){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)},e.prototype.polaroid=function(t){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)},e.prototype.toBGR=function(t){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)},e.prototype.kodachrome=function(t){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)},e.prototype.browni=function(t){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)},e.prototype.vintage=function(t){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)},e.prototype.colorTone=function(t,r,n,o,a){var s=((n=n||16770432)>>16&255)/255,h=(n>>8&255)/255,l=(255&n)/255,f=((o=o||3375104)>>16&255)/255,_=(o>>8&255)/255,c=(255&o)/255;this._loadMatrix([.3,.59,.11,0,0,s,h,l,t=t||.2,0,f,_,c,r=r||.15,0,s-f,h-_,l-c,0,0],a)},e.prototype.night=function(t,r){this._loadMatrix([-2*(t=t||.1),-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0],r)},e.prototype.predator=function(t,r){this._loadMatrix([11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0],r)},e.prototype.lsd=function(t){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)},e.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},Object.defineProperty(e.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),e}(qe);Ro.prototype.grayscale=Ro.prototype.greyscale;var bo=function(i,e){return(bo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])})(i,e)};!function(i){function e(t,r){var n=this,o=new qt;return t.renderable=!1,(n=i.call(this,"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n",{mapSampler:t._texture,filterMatrix:o,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this).maskSprite=t,n.maskMatrix=o,null==r&&(r=20),n.scale=new Kt(r,r),n}(function(i,e){function t(){this.constructor=i}bo(i,e),i.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)})(e,i),e.prototype.apply=function(t,r,n,o){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var a=this.maskSprite.worldTransform,s=Math.sqrt(a.a*a.a+a.b*a.b),h=Math.sqrt(a.c*a.c+a.d*a.d);0!==s&&0!==h&&(this.uniforms.rotation[0]=a.a/s,this.uniforms.rotation[1]=a.b/s,this.uniforms.rotation[2]=a.c/h,this.uniforms.rotation[3]=a.d/h),t.applyFilter(this,r,n,o)},Object.defineProperty(e.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(t){this.uniforms.mapSampler=t},enumerable:!1,configurable:!0})}(qe);var xo=function(i,e){return(xo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])})(i,e)};!function(i){!function(i,e){function t(){this.constructor=i}xo(i,e),i.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}(function(){return i.call(this,"\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputSize;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n')||this},i)}(qe);var Io=function(i,e){return(Io=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])})(i,e)};!function(i){function e(t,r){void 0===t&&(t=.5),void 0===r&&(r=Math.random());var n=i.call(this,ss,"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n",{uNoise:0,uSeed:0})||this;return n.noise=t,n.seed=r,n}(function(i,e){function t(){this.constructor=i}Io(i,e),i.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)})(e,i),Object.defineProperty(e.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(t){this.uniforms.uNoise=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(t){this.uniforms.uSeed=t},enumerable:!1,configurable:!0})}(qe);var zi=(()=>(function(i){i[i.NONE=0]="NONE",i[i.LOW=2]="LOW",i[i.MEDIUM=4]="MEDIUM",i[i.HIGH=8]="HIGH"}(zi||(zi={})),zi))(),Ws=new qt;Qt.prototype._cacheAsBitmap=!1,Qt.prototype._cacheData=null,Qt.prototype._cacheAsBitmapResolution=null,Qt.prototype._cacheAsBitmapMultisample=zi.NONE;var bp=function(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null};Object.defineProperties(Qt.prototype,{cacheAsBitmapResolution:{get:function(){return this._cacheAsBitmapResolution},set:function(i){i!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=i,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get:function(){return this._cacheAsBitmapMultisample},set:function(i){i!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=i,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(i){var e;this._cacheAsBitmap!==i&&(this._cacheAsBitmap=i,i?(this._cacheData||(this._cacheData=new bp),(e=this._cacheData).originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((e=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea))}}}),Qt.prototype._renderCached=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(e),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(e))},Qt.prototype._initCachedDisplayObject=function(e){var t;if(!this._cacheData||!this._cacheData.sprite){var r=this.alpha;this.alpha=1,e.batch.flush();var n=this.getLocalBounds(null,!0).clone();this.filters&&n.pad(this.filters[0].padding),n.ceil(st.RESOLUTION);var a=e.renderTexture.current,s=e.renderTexture.sourceFrame.clone(),h=e.renderTexture.destinationFrame.clone(),l=e.projection.transform,f=lr.create({width:n.width,height:n.height,resolution:this.cacheAsBitmapResolution||e.resolution,multisample:null!==(t=this.cacheAsBitmapMultisample)&&void 0!==t?t:e.multisample}),_="cacheAsBitmap_"+nr();this._cacheData.textureCacheId=_,Mt.addToCache(f.baseTexture,_),pt.addToCache(f,_);var c=this.transform.localTransform.copyTo(Ws).invert().translate(-n.x,-n.y);this.render=this._cacheData.originalRender,e.render(this,{renderTexture:f,clear:!0,transform:c,skipUpdateTransform:!1}),e.framebuffer.blit(),e.projection.transform=l,e.renderTexture.bind(a,s,h),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=r;var d=new vr(f);d.transform.worldTransform=this.transform.worldTransform,d.anchor.x=-n.x/n.width,d.anchor.y=-n.y/n.height,d.alpha=r,d._bounds=this._bounds,this._cacheData.sprite=d,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=d.containsPoint.bind(d)}},Qt.prototype._renderCachedCanvas=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(e),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(e))},Qt.prototype._initCachedDisplayObjectCanvas=function(e){if(!this._cacheData||!this._cacheData.sprite){var t=this.getLocalBounds(null,!0),r=this.alpha;this.alpha=1;var n=e.context,o=e._projTransform;t.ceil(st.RESOLUTION);var a=lr.create({width:t.width,height:t.height}),s="cacheAsBitmap_"+nr();this._cacheData.textureCacheId=s,Mt.addToCache(a.baseTexture,s),pt.addToCache(a,s);var h=Ws;this.transform.localTransform.copyTo(h),h.invert(),h.tx-=t.x,h.ty-=t.y,this.renderCanvas=this._cacheData.originalRenderCanvas,e.render(this,{renderTexture:a,clear:!0,transform:h,skipUpdateTransform:!1}),e.context=n,e._projTransform=o,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=r;var l=new vr(a);l.transform.worldTransform=this.transform.worldTransform,l.anchor.x=-t.x/t.width,l.anchor.y=-t.y/t.height,l.alpha=r,l._bounds=this._bounds,this._cacheData.sprite=l,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=l.containsPoint.bind(l)}},Qt.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},Qt.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},Qt.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,Mt.removeFromCache(this._cacheData.textureCacheId),pt.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},Qt.prototype._cacheAsBitmapDestroy=function(e){this.cacheAsBitmap=!1,this.destroy(e)},Qt.prototype.name=null,fe.prototype.getChildByName=function(e,t){for(var r=0,n=this.children.length;r<n;r++)if(this.children[r].name===e)return this.children[r];if(t)for(r=0,n=this.children.length;r<n;r++)if(this.children[r].getChildByName){var a=this.children[r].getChildByName(e,!0);if(a)return a}return null},Qt.prototype.getGlobalPosition=function(e,t){return void 0===e&&(e=new Kt),void 0===t&&(t=!1),this.parent?this.parent.toGlobal(this.position,e,t):(e.x=this.position.x,e.y=this.position.y),e};var Mo=function(i,e){return(Mo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])})(i,e)};function Fr(i,e){function t(){this.constructor=i}Mo(i,e),i.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}var xp=function(i){function e(t,r,n,o){void 0===t&&(t=100),void 0===r&&(r=100),void 0===n&&(n=10),void 0===o&&(o=10);var a=i.call(this)||this;return a.segWidth=n,a.segHeight=o,a.width=t,a.height=r,a.build(),a}return Fr(e,i),e.prototype.build=function(){for(var t=this.segWidth*this.segHeight,r=[],n=[],o=[],a=this.segWidth-1,s=this.segHeight-1,h=this.width/a,l=this.height/s,f=0;f<t;f++){var _=f%this.segWidth,c=f/this.segWidth|0;r.push(_*h,c*l),n.push(_/a,c/s)}var d=a*s;for(f=0;f<d;f++){var m=f%a,v=f/a|0,R=v*this.segWidth+m+1,C=(v+1)*this.segWidth+m;o.push(v*this.segWidth+m,R,C,R,(v+1)*this.segWidth+m+1,C)}this.buffers[0].data=new Float32Array(r),this.buffers[1].data=new Float32Array(n),this.indexBuffer.data=new Uint16Array(o),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},e}(Wi),Ip=function(i){function e(t,r,n){void 0===t&&(t=200),void 0===n&&(n=0);var o=i.call(this,new Float32Array(4*r.length),new Float32Array(4*r.length),new Uint16Array(6*(r.length-1)))||this;return o.points=r,o._width=t,o.textureScale=n,o.build(),o}return Fr(e,i),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),e.prototype.build=function(){var t=this.points;if(t){var r=this.getBuffer("aVertexPosition"),n=this.getBuffer("aTextureCoord"),o=this.getIndex();if(!(t.length<1)){r.data.length/4!==t.length&&(r.data=new Float32Array(4*t.length),n.data=new Float32Array(4*t.length),o.data=new Uint16Array(6*(t.length-1)));var a=n.data,s=o.data;a[0]=0,a[1]=0,a[2]=0,a[3]=1;for(var h=0,l=t[0],f=this._width*this.textureScale,_=t.length,c=0;c<_;c++){var d=4*c;if(this.textureScale>0){var m=l.x-t[c].x,v=l.y-t[c].y,g=Math.sqrt(m*m+v*v);l=t[c],h+=g/f}else h=c/(_-1);a[d]=h,a[d+1]=0,a[d+2]=h,a[d+3]=1}var R=0;for(c=0;c<_-1;c++)s[R++]=d=2*c,s[R++]=d+1,s[R++]=d+2,s[R++]=d+2,s[R++]=d+1,s[R++]=d+3;n.update(),o.update(),this.updateVertices()}}},e.prototype.updateVertices=function(){var t=this.points;if(!(t.length<1)){for(var n,r=t[0],o=0,a=0,s=this.buffers[0].data,h=t.length,l=0;l<h;l++){var f=t[l],_=4*l;a=-((n=l<t.length-1?t[l+1]:f).x-r.x),o=n.y-r.y;var c=Math.sqrt(o*o+a*a),d=this.textureScale>0?this.textureScale*this._width/2:this._width/2;o/=c,a/=c,a*=d,s[_]=f.x+(o*=d),s[_+1]=f.y+a,s[_+2]=f.x-o,s[_+3]=f.y-a,r=f}this.buffers[0].update()}},e.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},e}(Wi),Mp=(function(i){function e(t,r,n){void 0===n&&(n=0);var o=this,a=new Ip(t.height,r,n),s=new oi(t);return n>0&&(t.baseTexture.wrapMode=Ne.REPEAT),(o=i.call(this,a,s)||this).autoUpdate=!0,o}Fr(e,i),e.prototype._render=function(t){var r=this.geometry;(this.autoUpdate||r._width!==this.shader.texture.height)&&(r._width=this.shader.texture.height,r.update()),i.prototype._render.call(this,t)}}(ni),function(i){function e(t,r,n){var o=this,a=new xp(t.width,t.height,r,n),s=new oi(pt.WHITE);return(o=i.call(this,a,s)||this).texture=t,o.autoResize=!0,o}return Fr(e,i),e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var t=this.geometry,r=this.shader.texture;this.autoResize&&(t.width!==r.width||t.height!==r.height)&&(t.width=this.shader.texture.width,t.height=this.shader.texture.height,t.build())},Object.defineProperty(e.prototype,"texture",{get:function(){return this.shader.texture},set:function(t){this.shader.texture!==t&&(this.shader.texture=t,this._textureID=-1,t.baseTexture.valid?this.textureUpdated():t.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),e.prototype._render=function(t){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),i.prototype._render.call(this,t)},e.prototype.destroy=function(t){this.shader.texture.off("update",this.textureUpdated,this),i.prototype.destroy.call(this,t)},e}(ni)),Do=(function(i){function e(t,r,n,o,a){void 0===t&&(t=pt.EMPTY);var s=this,h=new Wi(r,n,o);h.getBuffer("aVertexPosition").static=!1;var l=new oi(t);return(s=i.call(this,h,l,null,a)||this).autoUpdate=!0,s}Fr(e,i),Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),e.prototype._render=function(t){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),i.prototype._render.call(this,t)}}(ni),function(i){function e(t,r,n,o,a){void 0===r&&(r=10),void 0===n&&(n=10),void 0===o&&(o=10),void 0===a&&(a=10);var s=i.call(this,pt.WHITE,4,4)||this;return s._origWidth=t.orig.width,s._origHeight=t.orig.height,s._width=s._origWidth,s._height=s._origHeight,s._leftWidth=r,s._rightWidth=o,s._topHeight=n,s._bottomHeight=a,s.texture=t,s}Fr(e,i),e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),e.prototype.updateHorizontalVertices=function(){var t=this.vertices,r=this._getMinScale();t[9]=t[11]=t[13]=t[15]=this._topHeight*r,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*r,t[25]=t[27]=t[29]=t[31]=this._height},e.prototype.updateVerticalVertices=function(){var t=this.vertices,r=this._getMinScale();t[2]=t[10]=t[18]=t[26]=this._leftWidth*r,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*r,t[6]=t[14]=t[22]=t[30]=this._width},e.prototype._getMinScale=function(){var t=this._leftWidth+this._rightWidth,n=this._topHeight+this._bottomHeight;return Math.min(this._width>t?1:this._width/t,this._height>n?1:this._height/n)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(t){this._leftWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(t){this._rightWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"topHeight",{get:function(){return this._topHeight},set:function(t){this._topHeight=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t,this._refresh()},enumerable:!1,configurable:!0}),e.prototype._refresh=function(){var t=this.texture,r=this.geometry.buffers[1].data;this._origWidth=t.orig.width,this._origHeight=t.orig.height;var n=1/this._origWidth,o=1/this._origHeight;r[0]=r[8]=r[16]=r[24]=0,r[1]=r[3]=r[5]=r[7]=0,r[6]=r[14]=r[22]=r[30]=1,r[25]=r[27]=r[29]=r[31]=1,r[2]=r[10]=r[18]=r[26]=n*this._leftWidth,r[4]=r[12]=r[20]=r[28]=1-n*this._rightWidth,r[9]=r[11]=r[13]=r[15]=o*this._topHeight,r[17]=r[19]=r[21]=r[23]=1-o*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()}}(Mp),function(i,e){return(Do=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])})(i,e)});!function(i){function e(t,r){void 0===r&&(r=!0);var n=i.call(this,t[0]instanceof pt?t[0]:t[0].texture)||this;return n._textures=null,n._durations=null,n._autoUpdate=r,n._isConnectedToTicker=!1,n.animationSpeed=1,n.loop=!0,n.updateAnchor=!1,n.onComplete=null,n.onFrameChange=null,n.onLoop=null,n._currentTime=0,n._playing=!1,n._previousFrame=null,n.textures=t,n}(function(i,e){function t(){this.constructor=i}Do(i,e),i.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)})(e,i),e.prototype.stop=function(){!this._playing||(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(ne.shared.remove(this.update,this),this._isConnectedToTicker=!1))},e.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(ne.shared.add(this.update,this,Le.HIGH),this._isConnectedToTicker=!0))},e.prototype.gotoAndStop=function(t){this.stop();var r=this.currentFrame;this._currentTime=t,r!==this.currentFrame&&this.updateTexture()},e.prototype.gotoAndPlay=function(t){var r=this.currentFrame;this._currentTime=t,r!==this.currentFrame&&this.updateTexture(),this.play()},e.prototype.update=function(t){if(this._playing){var r=this.animationSpeed*t,n=this.currentFrame;if(null!==this._durations){var o=this._currentTime%1*this._durations[this.currentFrame];for(o+=r/60*1e3;o<0;)this._currentTime--,o+=this._durations[this.currentFrame];var a=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);o>=this._durations[this.currentFrame];)o-=this._durations[this.currentFrame]*a,this._currentTime+=a;this._currentTime+=o/this._durations[this.currentFrame]}else this._currentTime+=r;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):n!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<n||this.animationSpeed<0&&this.currentFrame>n)&&this.onLoop(),this.updateTexture())}},e.prototype.updateTexture=function(){var t=this.currentFrame;this._previousFrame!==t&&(this._previousFrame=t,this._texture=this._textures[t],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},e.prototype.destroy=function(t){this.stop(),i.prototype.destroy.call(this,t),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},e.fromFrames=function(t){for(var r=[],n=0;n<t.length;++n)r.push(pt.from(t[n]));return new e(r)},e.fromImages=function(t){for(var r=[],n=0;n<t.length;++n)r.push(pt.from(t[n]));return new e(r)},Object.defineProperty(e.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textures",{get:function(){return this._textures},set:function(t){if(t[0]instanceof pt)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var r=0;r<t.length;r++)this._textures.push(t[r].texture),this._durations.push(t[r].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentFrame",{get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(ne.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(ne.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0})}(vr),Qe.registerPlugin("accessibility",rc),Qe.registerPlugin("extract",O_),Qe.registerPlugin("interaction",hc),Qe.registerPlugin("particle",fd),Qe.registerPlugin("prepare",wd),Qe.registerPlugin("batch",E_),Qe.registerPlugin("tilingSprite",Vd),Ce.registerPlugin(np),Ce.registerPlugin(k_),Ce.registerPlugin(id),Ce.registerPlugin(hd),Ce.registerPlugin(Gd),jn.registerPlugin(ic),jn.registerPlugin(N_);var Np=y(59468),Lp=y(71884),Cp=y(71345),js=y.n(Cp),Bp=y(69751),Fp=y(50727);const $s={now:()=>($s.delegate||performance).now(),delegate:void 0};var wp=y(13399);function zs(i){const{schedule:e}=wp.l;return new Bp.y(t=>{const r=new Fp.w0,n=i||$s,o=n.now(),a=s=>{const h=n.now();t.next({timestamp:i?h:s,elapsed:h-o}),t.closed||r.add(e(a))};return r.add(e(a)),r})}const Gp=zs();var Zs=y(5963),Ks=y(82722);class kp extends vr{constructor(e,t,r,n,o,a){super(pt.from(e.user.avatar)),this.bet=e,this.pinsContainer=t,this.pinSeparationX=r,this.pinSeparationY=n,this.betResolve$=o,this.isUserBet=a,this.currentRow=-1,this.move$=new At.x,this.unsubscribe$=new At.x,this.width=L.UX.betBallSize,this.height=L.UX.betBallSize,this.anchor.x=.5,this.anchor.y=.5,this.createShape(),this.isUserBet||(this.alpha=.4),this.x=L.UX.width/2,this.y=-this.height/2,this.subscribeToMove(),this.move$.next()}subscribeToMove(){this.move$.pipe((0,E.w)(()=>{let e,t;this.currentRow+=1;const r=this.bet.path.slice(0,this.currentRow).reduce((c,d)=>c+("RIGHT"===d?1:0),1);this.currentRow>=this.bet.path.length?e={x:this.x+this.pinSeparationX/2*("RIGHT"===this.bet.path[this.bet.path.length-1]?1:-1),y:this.y+this.pinSeparationY}:(t=this.pinsContainer.children.find(c=>c.row===this.currentRow&&c.index===r&&c.boardSize===this.bet.pins),e={x:t.position.x+this.pinsContainer.position.x,y:t.position.y+this.pinsContainer.position.y-t.height/2-this.height/2});const n=this.x,o=this.y;let a=0;this.currentRow>0&&(a=L.UX.ballRotationSpeed,"LEFT"===this.bet.path[this.currentRow-1]&&(a*=-1));const s=Math.random(),h=js()(s,s,1,1),l=js()(.75,.3*s-.5,.5,.5),f=Date.now(),_=0===this.currentRow?200:L.UX.ballSpeed;return Gp.pipe((0,tt.b)(()=>{const d=(Date.now()-f)/_;this.x=(0,Q.t7z)(n,e.x,h(d)),this.y=(0,Q.t7z)(o,e.y,l(d)),this.angle+=a}),(0,Bo.x)(()=>{t?(this.visible&&this.isUserBet&&t.animate(),this.move$.next()):this.destroy()}),(0,Ks.R)((0,Zs.H)(_)))}),(0,Ks.R)(this.unsubscribe$)).subscribe()}destroy(){this.betResolve$.next(this.bet),this.unsubscribe$.next(),super.destroy()}createShape(){const e=new Hi;e.pivot.x=.5,e.pivot.y=.5,e.beginFill(16777215).drawCircle(0,0,90).endFill(),this.addChild(e),this.mask=e}}var Yp=y(72950);class Hp extends vr{constructor(e,t,r,n,o){super(pt.from("assets/plinko/pin.png")),this.row=r,this.index=n,this.boardSize=o,this.ripple=new Hi,this.x=e+L.UX.pinRadius,this.y=t+L.UX.pinRadius,this.anchor.x=.5,this.anchor.y=.5,this.width=2*L.UX.pinRadius,this.height=2*L.UX.pinRadius,this.addChild(this.ripple)}animate(){new Q.IC3(Object.assign(Object.assign({},{autostart:!1,duration:1100,step:(r,n)=>{this.ripple.clear(),this.ripple.beginFill(16771398),this.ripple.drawCircle(0,0,r.radius),this.ripple.endFill(),this.ripple.alpha=r.alpha}}),{complete:()=>{},from:{alpha:1,radius:0},to:{alpha:0,radius:L.UX.rippleEffectRadius},easingFn:Yp.sineOut})).start()}}function Xp(i,e){1&i&&u._UZ(0,"cw-loader",1),2&i&&u.Q6J("loading",!0)("type","view")}let Je=class{constructor(e,t,r,n,o){this.elementRef=e,this.plinkoService=t,this.cdr=r,this.userService=n,this.plinkoFacade=o,this.pinsContainer=new fe,this.boardSize$=new nt.X(null),this.availableSizes$=new nt.X(null),this.stage=new fe,this.ballsContainer=new fe,this.resize$=new At.x}set rows(e){this.boardSize$.next(e)}set availableSizes(e){this.availableSizes$.next(e)}startPixiCanvas(){st.SCALE_MODE=Te.NEAREST,_n=!0,this.renderer=as({backgroundAlpha:0}),this.stage.sortableChildren=!0,this.stage.addChild(this.pinsContainer),this.stage.addChild(this.ballsContainer),this.renderer.view.width=L.UX.width,this.renderer.view.height=L.UX.height,this.elementRef.nativeElement.appendChild(this.renderer.view),this.render()}initSubscriptions(){this.availableSizes$.pipe((0,z.h)(Q.$KD),(0,tt.b)(e=>this.createBoards(e)),(0,E.w)(()=>this.boardSize$),(0,z.h)(Q.$KD),(0,et.t)(this),(0,Lp.x)()).subscribe(e=>{this.removeBalls(e),this.pinSeparationX=(L.UX.width-2*L.UX.pinRadius)/(e+1),this.pinSeparationY=(L.UX.height-L.UX.topSpacing-L.UX.bottomSpacing-2*L.UX.pinRadius)/(e-1),this.changeRows(e)}),this.plinkoService.liveBet$.pipe((0,et.t)(this),(0,q.M)(this.boardSize$,this.userService.userId$),(0,z.h)(([e,t,r])=>e.pins===t)).subscribe(([e,t,r])=>this.addBall(e,r)),this.plinkoFacade.showOtherPlayerBets$.pipe((0,et.t)(this),(0,z.h)(e=>!e),(0,q.M)(this.boardSize$)).subscribe(([,e])=>{this.ballsContainer.children.filter(t=>t.bet.pins===e&&!t.isUserBet).forEach(t=>t.visible=!1)})}removeBalls(e){this.ballsContainer.children.forEach(t=>t.visible=t.bet.pins===e)}addBall(e,t){!this.pinsContainer||!this.pinsContainer||this.plinkoFacade.showOtherPlayerBets$.pipe((0,tn.q)(1)).subscribe(r=>{const n=e.user.id===t;if(!n&&!r)return;const o=new kp(e,this.pinsContainer,this.pinSeparationX,this.pinSeparationY,this.plinkoService.betResolver$,n);this.ballsContainer.addChild(o)})}createBoards(e){for(let t=e[0];t<=e[e.length-1];t++){const r=(L.UX.width-2*L.UX.pinRadius)/(t+1),n=(L.UX.height-L.UX.topSpacing-L.UX.bottomSpacing-2*L.UX.pinRadius)/(t-1);for(let o=0;o<t;o++)for(let a=0;a<o+3;a++){const h=new Hp(r*(t-o-1)/2+r*a,n*o,o,a,t);h.visible=!1,this.pinsContainer.addChild(h)}}this.pinsContainer.y=L.UX.topSpacing,this.cdr.markForCheck()}ngAfterViewInit(){this.startPixiCanvas(),this.initSubscriptions(),this.resizeObserver=new ResizeObserver(e=>{this.resize$.next(e[0].contentBoxSize[0])}),this.resizeObserver.observe(this.elementRef.nativeElement),this.resize$.pipe((0,et.t)(this),(0,Np.p)(200)).subscribe(e=>this.resize(e.inlineSize,e.blockSize))}changeRows(e){this.pinsContainer.children.forEach(t=>t.visible=t.boardSize===e)}render(){this.renderer.render(this.stage),requestAnimationFrame(this.render.bind(this))}resize(e,t){if(!e||!t)return;let r,n;const o=L.UX.width,a=L.UX.height;t/e<a/o?(n=t,r=n*o/a):(r=e,n=r*a/o),this.renderer.resize(r,n),this.stage.scale.set(r/o,n/a)}ngOnDestroy(){this.resizeObserver.unobserve(this.elementRef.nativeElement)}};Je.\u0275fac=function(e){return new(e||Je)(u.Y36(u.SBq),u.Y36(k),u.Y36(u.sBO),u.Y36(Q.KDu),u.Y36(U))},Je.\u0275cmp=u.Xpm({type:Je,selectors:[["cw-plinko-board"]],inputs:{rows:"rows",availableSizes:"availableSizes"},ngContentSelectors:["*"],decls:2,vars:1,consts:[[3,"loading","type",4,"ngIf"],[3,"loading","type"]],template:function(e,t){1&e&&(u.F$t(),u.YNc(0,Xp,1,2,"cw-loader",0),u.Hsn(1)),2&e&&u.Q6J("ngIf",!t.pinsContainer.children.length)},directives:[Ie.O5,Go.R],styles:[".no-scrollbar[_ngcontent-%COMP%]{scrollbar-width:none;-ms-overflow-style:none}.no-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}[_nghost-%COMP%]{max-width:calc(100vw - .75rem);position:relative;height:100%}[_nghost-%COMP%]     canvas{display:block;height:100%;width:100%;margin-inline:auto}cw-loader[_ngcontent-%COMP%]{position:absolute;top:50%;right:0;left:0}"],changeDetection:0}),Je=(0,X.gn)([(0,et.c)(),(0,X.w6)("design:paramtypes",[u.SBq,k,u.sBO,Q.KDu,U])],Je);var Wp=y(9124),jp=y(95577),$p=y(4326);const No=i=>i>3?"low":i>=1?"med":"high";var zp=y(57994),qs=y.n(zp);let Qs=(()=>{class i{factorial(t){if(t<2)return 1;let r=1;for(let n=2;n<=t;n++)r*=n;return r}transform(t){const r=Math.pow(2,t.pins);return+qs()(this.factorial(t.pins)).div(+qs()(this.factorial(t.slotIndex)).times(this.factorial(t.pins-t.slotIndex)).times(r)).times(100)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275pipe=u.Yjl({name:"plinkoSlotOdds",type:i,pure:!0}),i})();function Zp(i,e){if(1&i&&(u.TgZ(0,"div",7),u.TgZ(1,"div"),u.TgZ(2,"span"),u._uU(3),u.qZA(),u._UZ(4,"cw-pretty-balance",8),u.qZA(),u.qZA()),2&i){const t=u.oxw().$implicit,r=u.oxw(2).$implicit;u.xp6(1),u.ekj("opacity-50",r!==t.user.id),u.xp6(2),u.hij("",t.multiplier,"x"),u.xp6(1),u.Q6J("balance",t.totalPayout)("currency",t.currency)}}function Kp(i,e){if(1&i&&(u.ynx(0),u.YNc(1,Zp,5,5,"div",6),u.BQk()),2&i){const t=e.$implicit;u.xp6(1),u.Q6J("ngIf",t)}}function qp(i,e){if(1&i&&(u.ynx(0),u.YNc(1,Kp,2,1,"ng-container",5),u.BQk()),2&i){const t=e.$implicit,r=u.oxw(2).$implicit;u.xp6(1),u.Q6J("ngForOf",t[r.slotIndex])}}function Qp(i,e){if(1&i&&(u.ynx(0),u.YNc(1,qp,2,1,"ng-container",4),u.BQk()),2&i){const t=u.oxw(2);u.xp6(1),u.Q6J("ngrxLet",t.resultLabels$)}}function Jp(i,e){if(1&i){const t=u.EpF();u.TgZ(0,"div",2,3),u.NdJ("mouseenter",function(){const o=u.CHM(t).$implicit;return u.MAs(1).open({slot:o})})("mouseleave",function(){return u.CHM(t),u.MAs(1).close()}),u.ALo(2,"ngrxPush"),u.TgZ(3,"span"),u._uU(4),u.qZA(),u.YNc(5,Qp,2,1,"ng-container",4),u.qZA()}if(2&i){const t=e.$implicit,r=u.oxw(),n=u.MAs(3);u.ekj("animated",u.lcZ(2,6,r.slotAnimationsState$)[t.slotIndex]),u.Q6J("ngClass",t.color)("ngbTooltip",n),u.xp6(4),u.hij("",t.slotMultiplier,"x"),u.xp6(1),u.Q6J("ngrxLet",r.userId$)}}function tv(i,e){if(1&i&&(u.TgZ(0,"div",9),u.TgZ(1,"div",10),u.SDv(2,11),u.qZA(),u.TgZ(3,"div",12),u._uU(4),u.ALo(5,"number"),u.ALo(6,"plinkoSlotOdds"),u.qZA(),u.qZA()),2&i){const t=e.slot;u.xp6(4),u.hij("",u.xi3(5,1,u.lcZ(6,4,t),"1.2-6"),"%")}}let tr=class extends((0,en.AF)(Qi.t)){constructor(e,t,r){super(),this.plinkoService=e,this.userService=t,this.plinkoFacade=r,this.slotAnimationsState$=new nt.X([]),this.resultLabels$=new nt.X([]),this.userId$=this.userService.userId$,this.slots$=new nt.X(null),this.risk$=new nt.X(null),this.rows$=new nt.X(null)}set slots(e){this.slots$.next(e)}set risk(e){this.risk$.next(e)}set rows(e){this.rows$.next(e)}ngOnInit(){this.currentSlots$=(0,Co.a)([this.slots$,this.risk$,this.rows$]).pipe((0,et.t)(this),(0,z.h)(([n,o,a])=>!!n&&!!o&&!!a),(0,Y.U)(([n,o,a])=>{const s=n.filter(h=>h.pins===a&&h.riskMode===o);return this.slotAnimationsState$.next(Array(s.length).fill(!1)),this.resultLabels$.next(Array(s.length).fill([])),s.map(h=>{const l=No(h.slotMultiplier);return Object.assign(Object.assign({},h),{color:l})}).sort((h,l)=>h.slotIndex<l.slotIndex?-1:1)}));const e=(n,o)=>{const a=[...this.slotAnimationsState$.getValue()];a[n]=o,this.slotAnimationsState$.next(a)},t=n=>{const o=n.slot.slotIndex,a=[...this.resultLabels$.getValue()];return a[o]=a[o].concat(n),this.resultLabels$.next(a),a[o].length-1},r=(n,o)=>{const a=[...this.resultLabels$.getValue()];delete a[n][o],this.resultLabels$.next(a)};this.currentSlots$.pipe((0,E.w)(()=>this.plinkoService.betResolver$),(0,q.M)(this.userService.userId$,this.rows$,this.plinkoFacade.showOtherPlayerBets$),(0,z.h)(([n,o,a,s])=>!(o!==n.user.id&&!s)&&n.pins===a),(0,jp.z)(([n,o])=>{const a=n.slot.slotIndex,s=t(n);return e(a,!0),this.playSound(n,o),(0,Zs.H)(500).pipe((0,tt.b)(()=>e(a,!1)),(0,$p.g)(1e3),(0,tt.b)(()=>r(a,s)))}),(0,et.t)(this)).subscribe()}playSound(e,t){let r;if(t===e.user.id){switch(No(e.multiplier)){case"high":r="PLINKO_OWN_REWARD_HIGH";break;case"med":r="PLINKO_OWN_REWARD_MID";break;case"low":r="PLINKO_OWN_REWARD_LOW"}this.plinkoService.playSound$.next(r)}}};tr.\u0275fac=function(e){return new(e||tr)(u.Y36(k),u.Y36(Q.KDu),u.Y36(U))},tr.\u0275cmp=u.Xpm({type:tr,selectors:[["cw-plinko-outcomes"]],inputs:{slots:"slots",risk:"risk",rows:"rows"},features:[u.qOj],decls:4,vars:4,consts:function(){let i;return i=$localize`:␟5eaa4d0cbc536d20ddaa6f90cdd25e768e4e0659␟1710621351506887136:Odds`,[["triggers","manual",3,"animated","ngClass","ngbTooltip","mouseenter","mouseleave",4,"ngFor","ngForOf","ngForTrackBy"],["roundsInfo",""],["triggers","manual",3,"ngClass","ngbTooltip","mouseenter","mouseleave"],["t","ngbTooltip"],[4,"ngrxLet"],[4,"ngFor","ngForOf"],["class","reward-multiplier",4,"ngIf"],[1,"reward-multiplier"],[3,"balance","currency"],[1,"slot-odds"],[1,"label"],i,[1,"value"]]},template:function(e,t){1&e&&(u.YNc(0,Jp,6,8,"div",0),u.ALo(1,"ngrxPush"),u.YNc(2,tv,7,6,"ng-template",null,1,u.W1O)),2&e&&u.Q6J("ngForOf",u.lcZ(1,2,t.currentSlots$))("ngForTrackBy",t.trackByIndex)},directives:[Ie.sg,Ie.mk,rn.oO,Fo._L,Jt.eJ,Ie.O5,nn.q],pipes:[Jt.fM,Ie.JJ,Qs],styles:[".no-scrollbar[_ngcontent-%COMP%]{scrollbar-width:none;-ms-overflow-style:none}.no-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}[_nghost-%COMP%]{position:absolute;right:8px;bottom:.5rem;left:8px;display:flex;justify-content:space-between;grid-gap:4px;gap:4px;font-size:.8rem}@media (max-width: 767.98px){[_nghost-%COMP%]{font-size:.45rem;bottom:.4rem}}[_nghost-%COMP%] > *[_ngcontent-%COMP%]{min-width:0;position:relative;text-align:center;flex:1;border-radius:.25rem;color:var(--text-contrast);padding-block:.5%;background-color:var(--success);font-weight:500;-webkit-user-select:none;user-select:none;transition:color .35s,background-color .35s}@media (max-width: 767.98px){[_nghost-%COMP%] > *[_ngcontent-%COMP%]{padding-block:.075rem}}[_nghost-%COMP%] > *.low[_ngcontent-%COMP%]{color:var(--game-low);background-color:var(--game-low-bg)}[_nghost-%COMP%] > *.med[_ngcontent-%COMP%]{color:var(--game-med);background-color:var(--game-med-bg)}[_nghost-%COMP%] > *.high[_ngcontent-%COMP%]{color:var(--game-high);background-color:var(--game-high-bg)}[_nghost-%COMP%] > *.animated[_ngcontent-%COMP%]{animation:move .15s ease-out 2 alternate}.reward-multiplier[_ngcontent-%COMP%]{position:absolute;top:0;right:0;bottom:0;left:0;margin:auto;animation:multiplier-animation 1.5s ease-out 1;font-weight:600}.reward-multiplier[_ngcontent-%COMP%]   cw-pretty-balance[_ngcontent-%COMP%]{display:block;animation:balance-animation 1.5s ease-out 1}@keyframes multiplier-animation{50%{opacity:1;transform:translateY(-300%)}to{opacity:0;transform:translateY(-1000%)}}@keyframes balance-animation{0%{transform:translateY(-100%);opacity:0}50%{transform:translateY(-250%);opacity:1;color:var(--text-contrast)}to{transform:translateY(-250%)}}@keyframes move{to{transform:translateY(50%)}}.slot-odds[_ngcontent-%COMP%]{padding:.5rem;text-align:left}.slot-odds[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{opacity:.6}.slot-odds[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:500}"],data:{animation:[(0,Wp.XG)({duration:250})]},changeDetection:0}),tr=(0,X.gn)([(0,et.c)(),(0,X.w6)("design:paramtypes",[k,Q.KDu,U])],tr);var ev=y(10215),rv=y(17007),iv=y(27737);function nv(i,e){1&i&&u._UZ(0,"img",8),2&i&&u.Q6J("src",e.ngIf,u.LSH)}const ov=function(i){return["/player",i]};let Js=(()=>{class i{get getRewardClass(){var t;return No(null===(t=this.plinkoBet)||void 0===t?void 0:t.multiplier)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=u.Xpm({type:i,selectors:[["cw-plinko-bet"]],hostVars:2,hostBindings:function(t,r){2&t&&u.Tol(r.getRewardClass)},inputs:{plinkoBet:"plinkoBet"},decls:9,vars:8,consts:[[1,"d-flex","flex-justify-between","align-items-center","gap-1"],[1,"avatar"],[3,"routerLink"],[3,"user"],[1,"skin-img"],[3,"src",4,"ngIf"],[3,"currency","balance"],[1,"multiplier"],[3,"src"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0),u.TgZ(1,"span",1),u.TgZ(2,"a",2),u._UZ(3,"cw-user-avatar-badge",3),u.qZA(),u.qZA(),u.TgZ(4,"span",4),u.YNc(5,nv,1,1,"img",5),u.qZA(),u._UZ(6,"cw-pretty-balance",6),u.qZA(),u.TgZ(7,"div",7),u._uU(8),u.qZA()),2&t&&(u.xp6(2),u.Q6J("routerLink",u.VKq(6,ov,r.plinkoBet.user.id)),u.xp6(1),u.Q6J("user",r.plinkoBet.user),u.xp6(2),u.Q6J("ngIf",null==r.plinkoBet.winItemVariant?null:r.plinkoBet.winItemVariant.iconUrl),u.xp6(1),u.Q6J("currency",r.plinkoBet.currency)("balance",r.plinkoBet.totalPayout),u.xp6(2),u.hij("",r.plinkoBet.multiplier,"x"))},directives:[Bt.yS,iv.i,Ie.O5,nn.q],styles:['.no-scrollbar[_ngcontent-%COMP%]{scrollbar-width:none;-ms-overflow-style:none}.no-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}[_nghost-%COMP%]{margin-bottom:.313rem;border-radius:6px;position:relative;z-index:1;padding:.25rem .875rem;display:flex;justify-content:space-between;grid-gap:1rem;gap:1rem;color:#fff}.animated[_nghost-%COMP%]{animation:betEnterAnim .75s}.animated[_nghost-%COMP%]   .avatar[_ngcontent-%COMP%]{animation:avatarEnterAnim .75s}[_nghost-%COMP%]:before{content:"";opacity:.5;position:absolute;top:0;right:0;bottom:0;left:0;z-index:-1}.low[_nghost-%COMP%]:before, .low[_nghost-%COMP%]   .multiplier[_ngcontent-%COMP%]{background-color:var(--game-low-bg);color:var(--game-low)}.med[_nghost-%COMP%]:before, .med[_nghost-%COMP%]   .multiplier[_ngcontent-%COMP%]{background-color:var(--game-med-bg);color:var(--game-med)}.high[_nghost-%COMP%]:before, .high[_nghost-%COMP%]   .multiplier[_ngcontent-%COMP%]{background-color:var(--game-high-bg);color:var(--game-high)}[_nghost-%COMP%]     cw-user-avatar-badge .user-avatar{transform:scale3d(.875,.875,.875)}.skin-img[_ngcontent-%COMP%]{width:3rem;height:2rem}.skin-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain}.multiplier[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding-inline:.5rem;min-width:4.375rem;border-radius:4px}'],changeDetection:0}),i})();function av(i,e){if(1&i&&u._UZ(0,"cw-plinko-bet",8),2&i){const t=e.$implicit,r=u.oxw(3);u.ekj("animated",r.animationsEnabled&&t.animated),u.Q6J("plinkoBet",t)}}function sv(i,e){if(1&i&&(u.ynx(0),u.YNc(1,av,1,3,"cw-plinko-bet",7),u.BQk()),2&i){const t=u.oxw().$implicit,r=u.oxw();u.xp6(1),u.Q6J("ngForOf",t)("ngForTrackBy",r.trackById)}}function hv(i,e){if(1&i&&(u.ynx(0),u.YNc(1,sv,2,2,"ng-container",6),u.BQk()),2&i){const t=u.oxw();u.xp6(1),u.Q6J("ngIf","top"===t.mode)}}function lv(i,e){if(1&i&&u._UZ(0,"cw-plinko-bet",8),2&i){const t=e.$implicit,r=u.oxw(3);u.ekj("animated",r.animationsEnabled&&t.animated),u.Q6J("plinkoBet",t)}}function uv(i,e){if(1&i&&(u.ynx(0),u.YNc(1,lv,1,3,"cw-plinko-bet",7),u.BQk()),2&i){const t=u.oxw().$implicit,r=u.oxw();u.xp6(1),u.Q6J("ngForOf",t)("ngForTrackBy",r.trackById)}}function fv(i,e){if(1&i&&(u.ynx(0),u.YNc(1,uv,2,2,"ng-container",6),u.BQk()),2&i){const t=u.oxw();u.xp6(1),u.Q6J("ngIf","recent"===t.mode)}}let er=class extends((0,en.AF)(Qi.t)){constructor(e){super(),this.plinkoFacade=e,this.mode="recent"}ngOnInit(){this.recentWins$=this.plinkoFacade.recentWins$,this.topWins$=this.plinkoFacade.topWins$,this.plinkoFacade.fetchRecentWins(),this.plinkoFacade.fetchTopWins()}changeMode(e){this.mode!==e&&(this.mode=e,this.animationsEnabled=!1)}};er.\u0275fac=function(e){return new(e||er)(u.Y36(U))},er.\u0275cmp=u.Xpm({type:er,selectors:[["cw-plinko-bet-list"]],features:[u.qOj],decls:8,vars:7,consts:function(){let i,e;return i=$localize`:␟8e65504e3eda81cd442fa638c3aa55f85e889679␟315482217381688590:Recent Wins`,e=$localize`:␟91b743abea1548a3c47aa77dec04a2d89c2e502a␟6816704591517905198:Top Wins`,[[1,"modes"],[3,"click"],i,e,[1,"mt-4","flex-1",3,"scrollY"],[4,"ngrxLet"],[4,"ngIf"],[3,"animated","plinkoBet",4,"ngFor","ngForOf","ngForTrackBy"],[3,"plinkoBet"]]},template:function(e,t){1&e&&(u.TgZ(0,"div",0),u.TgZ(1,"span",1),u.NdJ("click",function(){return t.changeMode("recent")}),u.SDv(2,2),u.qZA(),u.TgZ(3,"span",1),u.NdJ("click",function(){return t.changeMode("top")}),u.SDv(4,3),u.qZA(),u.qZA(),u.TgZ(5,"cw-scroll",4),u.YNc(6,hv,2,1,"ng-container",5),u.YNc(7,fv,2,1,"ng-container",5),u.qZA()),2&e&&(u.xp6(1),u.ekj("text-contrast","recent"===t.mode),u.xp6(2),u.ekj("text-contrast","top"===t.mode),u.xp6(2),u.Q6J("scrollY",!0),u.xp6(1),u.Q6J("ngrxLet",t.topWins$),u.xp6(1),u.Q6J("ngrxLet",t.recentWins$))},directives:[rv.l,Jt.eJ,Ie.O5,Ie.sg,Js],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;width:20rem}.modes[_ngcontent-%COMP%]{margin-top:.5rem;text-transform:uppercase}.modes[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{cursor:pointer}.modes[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:first-of-type{margin-right:1rem}"],changeDetection:0}),er=(0,X.gn)([(0,et.c)(),(0,X.w6)("design:paramtypes",[U])],er);var cv=y(43343);function _v(i,e){if(1&i){const t=u.EpF();u.TgZ(0,"div",4),u.TgZ(1,"span",5),u.NdJ("click",function(){return u.CHM(t),u.oxw().toggleSound()}),u.ALo(2,"ngrxPush"),u.qZA(),u.TgZ(3,"cw-plinko-board",6),u.ALo(4,"ngrxPush"),u._UZ(5,"cw-plinko-outcomes",7),u.ALo(6,"ngrxPush"),u.ALo(7,"ngrxPush"),u.qZA(),u.qZA()}if(2&i){const t=e.$implicit,r=u.oxw();u.xp6(1),u.ekj("opacity-25",!u.lcZ(2,8,r.soundEnabled$)),u.Q6J("inlineSVG","assets/icons/audio.svg"),u.xp6(2),u.Q6J("rows",t)("availableSizes",u.lcZ(4,10,r.availableSizes$)),u.xp6(2),u.Q6J("rows",t)("risk",u.lcZ(6,12,r.currentRisk$))("slots",u.lcZ(7,14,r.betSlots$))}}function dv(i,e){if(1&i&&(u.TgZ(0,"div",8),u._UZ(1,"cw-emoticon-buttons",9),u.ALo(2,"appConfig"),u._UZ(3,"cw-plinko-bet-list",10),u.qZA()),2&i){const t=u.oxw();u.xp6(1),u.Q6J("emoticons",u.lcZ(2,2,"plinko.emojis"))("gameId",t.emojiRoom)}}let rr=class{constructor(e,t,r,n,o,a,s){this.plinkoService=e,this.apollo=r,this.appNotificationsService=n,this.userService=o,this.layoutService=a,this.plinkoFacade=s,this.emojiRoom="PLINKO_GAME",this.availableSizes$=new nt.X(null)}ngOnInit(){this.currentBoardSize$=this.plinkoFacade.currentBoardSize$,this.currentRisk$=this.plinkoFacade.currentRisk$,this.soundEnabled$=this.plinkoFacade.soundEnabled$,this.betSlots$=this.apollo.query({query:F}).pipe((0,Y.U)(({data:t})=>t.plinkoBetSlots),(0,tt.b)(t=>this.availableSizes$.next(Array.from({length:t.pinsMax-t.pinsMin+1},(r,n)=>t.pinsMin+n))),(0,Y.U)(t=>t.slots)),this.apollo.subscribe({query:ce}).pipe((0,q.M)(this.currentBoardSize$,this.layoutService.documentVisible$),(0,et.t)(this)).subscribe(([{data:t},r,n])=>{const o=t.createPlinkoBet.plinkoBet;o.pins===r&&n?this.plinkoService.addLiveBet(o):this.plinkoService.betResolver$.next(o)});const e=this.plinkoService.betResolver$.pipe((0,Y.U)(t=>t.id));this.appNotificationsService.addDelay((0,Q.ahw)(vt.v.PLINKO_WIN),e,!0),this.userService.addDelayToBalanceUpdate(W.a.PLINKO_WIN,e,!0),this.plinkoService.betResolver$.pipe((0,et.t)(this)).subscribe(t=>this.plinkoFacade.addBetToList(t))}toggleSound(){this.plinkoFacade.toggleSound()}changePinAmount(e){this.plinkoFacade.changePinAmount(e)}changeRisk(e){this.plinkoFacade.changeRisk(e)}ngOnDestroy(){this.appNotificationsService.removeDelay((0,Q.ahw)(vt.v.PLINKO_WIN)),this.userService.removeDelayFromBalanceUpdate(W.a.PLINKO_WIN)}};rr.\u0275fac=function(e){return new(e||rr)(u.Y36(k),u.Y36(Q.qBz),u.Y36(T._M),u.Y36(Q.n1p),u.Y36(Q.KDu),u.Y36(Q.Pb3),u.Y36(U))},rr.\u0275cmp=u.Xpm({type:rr,selectors:[["cw-plinko"]],decls:5,vars:5,consts:[[1,"d-flex","flex-column","flex-1","min-w-0"],["class","plinko-board-container",4,"ngrxLet"],["ngClass.lt-sm","mt-4",3,"availableSizes","riskChange","pinAmountChange"],["class","d-flex flex-column gap-1",4,"cwMediaIf"],[1,"plinko-board-container"],[1,"audio-toggle",3,"inlineSVG","click"],[3,"rows","availableSizes"],[3,"rows","risk","slots"],[1,"d-flex","flex-column","gap-1"],[3,"emoticons","gameId"],[1,"flex-1"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u.YNc(1,_v,8,16,"div",1),u.TgZ(2,"cw-plinko-bet-form",2),u.NdJ("riskChange",function(n){return t.changeRisk(n)})("pinAmountChange",function(n){return t.changePinAmount(n)}),u.ALo(3,"ngrxPush"),u.qZA(),u.qZA(),u.YNc(4,dv,4,4,"div",3)),2&e&&(u.xp6(1),u.Q6J("ngrxLet",t.currentBoardSize$),u.xp6(1),u.Q6J("availableSizes",u.lcZ(3,3,t.availableSizes$)),u.xp6(2),u.Q6J("cwMediaIf","gt-md"))},directives:[Jt.eJ,$e,rn.oO,Oh.h,wo.d$,Je,tr,ev.H,er],pipes:[Jt.fM,cv.O],styles:[".no-scrollbar[_ngcontent-%COMP%]{scrollbar-width:none;-ms-overflow-style:none}.no-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;grid-gap:1.5rem;gap:1.5rem}@media (min-width: 1200px){[_nghost-%COMP%]{flex-direction:row;height:calc(100vh - 4.375rem - (var(--vertical-spacing) * 2))}}.audio-toggle[_ngcontent-%COMP%]{cursor:pointer;width:1rem;color:#dadada;position:absolute;top:1rem;right:1rem}.plinko-board-container[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;align-items:center;flex:1;border-radius:6px 6px 0 0;background-color:var(--plinko-board-bg);min-height:0}@media (max-width: 767.98px){.plinko-board-container[_ngcontent-%COMP%]{margin:calc(var(--vertical-spacing) * -1) calc(var(--horizontal-spacing) * -1);padding:1rem}.plinko-board-container[_ngcontent-%COMP%]   cw-plinko-outcomes[_ngcontent-%COMP%]{bottom:-.2rem}}"],changeDetection:0}),rr=(0,X.gn)([(0,et.c)(),(0,X.w6)("design:paramtypes",[k,Object,T._M,Q.n1p,Q.KDu,Q.Pb3,U])],rr);const pv=[{path:"",component:rr}];let vv=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[[Bt.Bz.forChild(pv)],Bt.Bz]}),i})();var Ev=y(88279),mv=y(36822),gv=y(1297),Tv=y(45990);y(90217),y(80928);let th=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[[Tv.vY,mv.Fc,Ji.UserItemSharedModule,Ev.p0,gv.MA]]}),i})(),Ov=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({providers:[U,k],imports:[[vv,th,w.Aw.forFeature(ot,Ut),V.sQ.forFeature([Tt])]]}),i})()},90217:(Lt,lt,y)=>{"use strict";y.d(lt,{b:()=>Bt});var V=y(23600),w=y(93114),ft=y(97443),tt=y(54004),K=y(23457),E=y(80928),q=y(81727),Y=y(39478),X=y(26105);const Q=Y.ZP`
  fragment PlinkoBetTable on PlinkoBet {
    id
    createdAt
    currency
    bet
    totalBet
    riskMode
    totalPayout
    multiplier
    pins
    ...PlinkoProvablyFairModal
  }

  ${X.V}
`,et=Y.ZP`
  query PlinkoBetTable(
    $after: String
    $before: String
    $first: PaginationAmount
    $last: PaginationAmount
    $orderBy: [PlinkoBetOrderBy]
    $userIds: [ID!]
  ) {
    plinkoBets(after: $after, before: $before, first: $first, last: $last, orderBy: $orderBy, userIds: $userIds) {
      pageInfo {
        startCursor
        endCursor
        hasNextPage
        hasPreviousPage
      }
      edges {
        node {
          ...PlinkoBetTable
        }
      }
    }
  }
  ${Q}
`;var T=y(5e3),At=y(13302),z=y(93075),Xt=y(48966),Ct=y(69808),Pt=y(69177),gt=y(77093),kt=y(67322),te=y(74107),Yt=y(47423),ee=y(79586),me=y(98833),D=y(90508),ct=y(88279),x=y(4807),bt=y(78644),ot=y(89847);function Rt(W,vt){1&W&&(T.TgZ(0,"mat-form-field"),T.TgZ(1,"mat-label"),T.SDv(2,11),T.qZA(),T._UZ(3,"input",12),T.qZA())}function Z(W,vt){if(1&W&&(T.TgZ(0,"mat-option",13),T._uU(1),T.qZA()),2&W){const nt=vt.$implicit;T.Q6J("value",nt.value),T.xp6(1),T.Oqu(nt.label)}}function p(W,vt){if(1&W){const nt=T.EpF();T.ynx(0),T.TgZ(1,"form",4),T.NdJ("ngSubmit",function(){return T.CHM(nt),T.oxw().filter()}),T.YNc(2,Rt,4,0,"mat-form-field",2),T.TgZ(3,"mat-form-field"),T.TgZ(4,"mat-label"),T.SDv(5,5),T.qZA(),T.TgZ(6,"mat-select",6),T.YNc(7,Z,2,2,"mat-option",7),T.ALo(8,"ngrxPush"),T.qZA(),T.qZA(),T.TgZ(9,"button",8),T.TgZ(10,"cw-loader",9),T.SDv(11,10),T.ALo(12,"ngrxPush"),T.qZA(),T.qZA(),T.qZA(),T.BQk()}if(2&W){const nt=T.oxw();T.xp6(1),T.Q6J("formGroup",nt.form),T.xp6(1),T.Q6J("ngIf",!nt.userId),T.xp6(5),T.Q6J("ngForOf",T.lcZ(8,5,nt.orderOptions$))("ngForTrackBy",nt.trackByIndex),T.xp6(3),T.Q6J("loading",T.lcZ(12,7,nt.dataSource.loading$))}}function O(W,vt){1&W&&(T.TgZ(0,"th",28),T._uU(1,"ID"),T.qZA())}function S(W,vt){if(1&W&&(T.TgZ(0,"td",29),T._UZ(1,"cw-id-field",30),T.qZA()),2&W){const nt=vt.$implicit;T.xp6(1),T.Q6J("id",nt.id)}}function M(W,vt){1&W&&(T.TgZ(0,"th",28),T._uU(1,"When"),T.qZA())}function b(W,vt){if(1&W&&(T.TgZ(0,"td",29),T.TgZ(1,"div"),T.TgZ(2,"div"),T._uU(3),T.ALo(4,"date"),T.qZA(),T.TgZ(5,"small"),T._uU(6),T.ALo(7,"date"),T.qZA(),T.qZA(),T.qZA()),2&W){const nt=vt.$implicit;T.xp6(3),T.Oqu(T.xi3(4,2,nt.createdAt,"mediumDate")),T.xp6(3),T.Oqu(T.xi3(7,5,nt.createdAt,"mediumTime"))}}function A(W,vt){1&W&&(T.TgZ(0,"th",28),T._uU(1,"Bet"),T.qZA())}function P(W,vt){if(1&W&&(T.TgZ(0,"td",29),T._UZ(1,"cw-pretty-balance",31),T.qZA()),2&W){const nt=vt.$implicit;T.xp6(1),T.Q6J("balance",nt.bet)("currency",nt.currency)}}function u(W,vt){1&W&&(T.TgZ(0,"th",28),T._uU(1,"Risk Mode"),T.qZA())}function U(W,vt){if(1&W&&(T.TgZ(0,"td",29),T._uU(1),T.qZA()),2&W){const nt=vt.$implicit;T.xp6(1),T.Oqu(nt.riskMode)}}function L(W,vt){1&W&&(T.TgZ(0,"th",28),T._uU(1,"Multiplier"),T.qZA())}function Et(W,vt){if(1&W&&(T.TgZ(0,"td",29),T._uU(1),T.qZA()),2&W){const nt=vt.$implicit;T.ekj("text-success",nt.multiplier>1)("text-danger",nt.multiplier<1),T.xp6(1),T.hij(" x",nt.multiplier," ")}}function F(W,vt){1&W&&(T.TgZ(0,"th",28),T._uU(1,"Total Payout"),T.qZA())}function it(W,vt){if(1&W&&(T.TgZ(0,"td",29),T._UZ(1,"cw-pretty-balance",31),T.qZA()),2&W){const nt=vt.$implicit;T.xp6(1),T.Q6J("balance",nt.totalPayout)("currency",nt.currency)}}function rt(W,vt){1&W&&T._UZ(0,"th",28)}function k(W,vt){if(1&W){const nt=T.EpF();T.TgZ(0,"td",29),T.TgZ(1,"div",32),T.NdJ("click",function(){const Jt=T.CHM(nt).$implicit;return T.oxw(2).openPlinkoProvablyFairModal(Jt)}),T.SDv(2,33),T.qZA(),T.qZA()}}function Tt(W,vt){1&W&&T._UZ(0,"tr",34)}function Ht(W,vt){1&W&&T._UZ(0,"tr",35)}function Ut(W,vt){if(1&W&&(T.ynx(0),T.TgZ(1,"table",14),T.ynx(2,15),T.YNc(3,O,2,0,"th",16),T.YNc(4,S,2,1,"td",17),T.BQk(),T.ynx(5,18),T.YNc(6,M,2,0,"th",16),T.YNc(7,b,8,8,"td",17),T.BQk(),T.ynx(8,19),T.YNc(9,A,2,0,"th",16),T.YNc(10,P,2,2,"td",17),T.BQk(),T.ynx(11,20),T.YNc(12,u,2,0,"th",16),T.YNc(13,U,2,1,"td",17),T.BQk(),T.ynx(14,21),T.YNc(15,L,2,0,"th",16),T.YNc(16,Et,2,5,"td",22),T.BQk(),T.ynx(17,23),T.YNc(18,F,2,0,"th",16),T.YNc(19,it,2,2,"td",17),T.BQk(),T.ynx(20,24),T.YNc(21,rt,1,0,"th",16),T.YNc(22,k,3,0,"td",17),T.BQk(),T.YNc(23,Tt,1,0,"tr",25),T.YNc(24,Ht,1,0,"tr",26),T.qZA(),T._UZ(25,"cw-table-footer",27),T.ALo(26,"ngrxPush"),T.BQk()),2&W){const nt=vt.$implicit,Vt=T.oxw();T.xp6(1),T.Q6J("dataSource",nt)("trackBy",Vt.trackById),T.xp6(22),T.Q6J("matHeaderRowDef",Vt.columns),T.xp6(1),T.Q6J("matRowDefColumns",Vt.columns),T.xp6(1),T.Q6J("dataSource",Vt.dataSource)("loading",T.lcZ(26,7,Vt.dataSource.loading$))("data",nt)}}let Bt=(()=>{class W extends((0,K.AF)(w.t)){constructor(nt,Vt,ce,Jt){super(),this.apollo=nt,this.fb=Vt,this.dialog=ce,this.userService=Jt,this.userId="",this.showFilters=!1,this.columns=["id","createdAt","bet","riskMode","multiplier","totalPayout","actions"],this.orderOptions$=this.userService.roles$.pipe((0,tt.U)(he=>[...q.Yj,...he.includes(ft.i.MANAGER)?[{label:"USER PROFIT",value:"USER_PROFIT"},{label:"USER PROFIT DESC",value:"USER_PROFIT_DESC"}]:[]]))}ngOnInit(){this.form=this.fb.group({userId:this.userId,orderBy:"ID_DESC"}),this.dataSource=new V.g3E(this.apollo,{query:et,field:"plinkoBets",variables:this.getVariables()}),this.data$=this.dataSource.connect()}filter(){this.dataSource.filter(this.getVariables())}openPlinkoProvablyFairModal(nt){this.dialog.open(E.t,{data:{plinkoBet:nt},panelClass:["modal-lg","modal-full-mobile"]})}getVariables(){return{first:V.UZ,userIds:[this.userId],orderBy:this.form.controls.orderBy.value}}}return W.\u0275fac=function(nt){return new(nt||W)(T.Y36(At._M),T.Y36(z.qu),T.Y36(Xt.uw),T.Y36(V.KDu))},W.\u0275cmp=T.Xpm({type:W,selectors:[["cw-plinko-bet-table"]],inputs:{userId:"userId",showFilters:"showFilters"},features:[T.qOj],decls:4,vars:2,consts:function(){let vt,nt,Vt,ce,Jt;return vt=$localize`:␟400c30183b9b6cf5b3decf8491a929e10fa21a3b␟3951121764366844614:Order by`,nt=$localize`:␟5ca707824ab93066c7d9b44e1b8bf216725c2c22␟8829497237648100098:Filter`,Vt=$localize`:␟83c4d4d764d2e2725ab8e919ec16ac400e1f290a␟2128755808672960949:User ID`,ce=$localize`:␟eee0ffe01fd8c3f50ef18ba3e923efae0382d5f8␟8543535162971154127:VXNlcjox or 1`,Jt=$localize`:␟27c7bfba7033cc8dbf4caf42b40b6b3c87197838␟8913794084097958305:Verify`,[[1,"card"],[1,"card-body"],[4,"ngIf"],[4,"ngrxLet"],["fxLayout","row wrap","fxLayoutAlign","start center","fxLayoutGap",".5rem",3,"formGroup","ngSubmit"],vt,["formControlName","orderBy"],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],["type","submit","mat-flat-button","","color","primary"],[3,"loading"],nt,Vt,["matInput","","type","text","placeholder",ce,"formControlName","userId"],[3,"value"],["mat-table","",1,"w-100",3,"dataSource","trackBy"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","createdAt"],["matColumnDef","bet"],["matColumnDef","riskMode"],["matColumnDef","multiplier"],["mat-cell","",3,"text-success","text-danger",4,"matCellDef"],["matColumnDef","totalPayout"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"dataSource","loading","data"],["mat-header-cell",""],["mat-cell",""],[3,"id"],[3,"balance","currency"],[1,"verify","px-1","py-2","text-uppercase",3,"click"],Jt,["mat-header-row",""],["mat-row",""]]},template:function(nt,Vt){1&nt&&(T.TgZ(0,"div",0),T.TgZ(1,"div",1),T.YNc(2,p,13,9,"ng-container",2),T.YNc(3,Ut,27,9,"ng-container",3),T.qZA(),T.qZA()),2&nt&&(T.xp6(2),T.Q6J("ngIf",Vt.showFilters),T.xp6(1),T.Q6J("ngrxLet",Vt.data$))},directives:[Ct.O5,Pt.eJ,z._Y,z.JL,gt.xw,gt.Wh,gt.SQ,z.sg,kt.KE,kt.hX,te.gD,z.JJ,z.u,Ct.sg,Yt.lW,ee.R,me.Nt,z.Fj,D.ey,ct.BZ,ct.w1,ct.fO,ct.Dz,ct.as,ct.nj,x.G,ct.ge,ct.ev,bt.m,ot.q,ct.XQ,ct.Gk],pipes:[Pt.fM,Ct.uU],styles:["cw-id-field[_ngcontent-%COMP%]{width:220px}.verify[_ngcontent-%COMP%]{color:var(--box-opening-verify-color);border-radius:3px;cursor:pointer;font-size:.6rem;font-weight:600}"],changeDetection:0}),W})()},80928:(Lt,lt,y)=>{"use strict";y.d(lt,{t:()=>bt});var V=y(48966),w=y(61135),ft=y(54004),tt=y(95698),K=y(26105),E=y(5e3),q=y(13302),Y=y(31495),X=y(96298),Q=y(47423),et=y(69808),T=y(77093),At=y(67322),z=y(98833),Xt=y(85904),Ct=y(17774),Pt=y(35357),gt=y(69177);function kt(ot,Rt){if(1&ot&&(E.TgZ(0,"mat-form-field",37),E.TgZ(1,"mat-label"),E.SDv(2,38),E.qZA(),E._UZ(3,"input",10),E.ALo(4,"ngrxPush"),E.qZA()),2&ot){const Z=E.oxw(2);E.xp6(3),E.Q6J("value",E.lcZ(4,1,Z.serverSeedValue$))}}function te(ot,Rt){if(1&ot){const Z=E.EpF();E.ynx(0),E.TgZ(1,"cw-change-seed-form",39),E.NdJ("change",function(O){return E.CHM(Z),E.oxw(2).onSeedsChange(O)}),E.ALo(2,"ngrxPush"),E.qZA(),E.BQk()}if(2&ot){const Z=E.oxw(2);E.xp6(1),E.Q6J("value",E.lcZ(2,1,Z.serverSeedValue$))}}function Yt(ot,Rt){if(1&ot&&(E.TgZ(0,"span",19),E._uU(1),E.qZA()),2&ot){const Z=E.oxw().ngIf;E.xp6(1),E.hij(" ",Z.roll.value," ")}}const ee=function(){return["/info/provably-fair"]};function me(ot,Rt){if(1&ot){const Z=E.EpF();E.TgZ(0,"span",19),E.TgZ(1,"a",41),E.NdJ("click",function(){return E.CHM(Z),E.oxw(3).close()}),E._uU(2,"Verify"),E.qZA(),E.qZA()}2&ot&&(E.xp6(1),E.Q6J("routerLink",E.DdM(1,ee)))}function D(ot,Rt){if(1&ot&&(E.ynx(0,11),E.YNc(1,me,3,2,"span",40),E.BQk()),2&ot){const Z=E.oxw().ngIf;E.Q6J("ngSwitch",Z.pfVersion),E.xp6(1),E.Q6J("ngSwitchCase","CRYPTO_V2")}}function ct(ot,Rt){1&ot&&(E.TgZ(0,"p"),E.SDv(1,42),E.qZA())}function x(ot,Rt){if(1&ot&&(E.TgZ(0,"mat-dialog-content"),E.TgZ(1,"p"),E.TgZ(2,"b"),E.SDv(3,6),E.qZA(),E._uU(4),E.ALo(5,"date"),E.qZA(),E.TgZ(6,"section",7),E.TgZ(7,"mat-form-field",8),E.TgZ(8,"mat-label"),E.SDv(9,9),E.qZA(),E._UZ(10,"input",10),E.qZA(),E.TgZ(11,"div",8),E.ynx(12,11),E.ALo(13,"ngrxPush"),E.YNc(14,kt,5,3,"mat-form-field",12),E.YNc(15,te,3,3,"ng-container",13),E.BQk(),E.qZA(),E.qZA(),E.TgZ(16,"section",14),E.TgZ(17,"div",15),E._UZ(18,"cw-icon",16),E.TgZ(19,"span",17),E.SDv(20,18),E.qZA(),E.TgZ(21,"span",19),E._uU(22),E.qZA(),E.qZA(),E.TgZ(23,"div",15),E._UZ(24,"cw-icon",20),E.TgZ(25,"span",17),E.SDv(26,21),E.qZA(),E.YNc(27,Yt,2,1,"span",22),E.ALo(28,"ngrxPush"),E.YNc(29,D,2,2,"ng-template",null,23,E.W1O),E.qZA(),E.qZA(),E.TgZ(31,"h2",24),E.SDv(32,25),E.qZA(),E.TgZ(33,"p"),E.SDv(34,26),E.qZA(),E.TgZ(35,"p"),E.tHW(36,27),E._UZ(37,"strong"),E.N_p(),E.qZA(),E.TgZ(38,"p"),E.tHW(39,28),E._UZ(40,"strong"),E.N_p(),E.qZA(),E.TgZ(41,"p"),E.tHW(42,29),E._UZ(43,"strong"),E.N_p(),E.qZA(),E.YNc(44,ct,2,0,"p",5),E.ALo(45,"ngrxPush"),E._UZ(46,"cw-roll-calculator",30),E.ALo(47,"ngrxPush"),E.ALo(48,"ngrxPush"),E.TgZ(49,"h2",31),E.SDv(50,32),E.qZA(),E.TgZ(51,"p"),E.tHW(52,33),E._UZ(53,"br"),E.N_p(),E.qZA(),E.TgZ(54,"section",14),E.TgZ(55,"div",15),E.TgZ(56,"span",17),E.SDv(57,34),E.qZA(),E.TgZ(58,"span",19),E._uU(59),E.ALo(60,"number"),E.qZA(),E.qZA(),E.TgZ(61,"div",15),E.TgZ(62,"span",17),E.SDv(63,35),E.qZA(),E.TgZ(64,"span",19),E._uU(65),E.ALo(66,"number"),E.qZA(),E.qZA(),E.TgZ(67,"div",15),E.TgZ(68,"span",17),E.SDv(69,36),E.qZA(),E.TgZ(70,"span",19),E._uU(71),E.ALo(72,"number"),E.qZA(),E.qZA(),E.qZA(),E.qZA()),2&ot){const Z=Rt.ngIf,p=E.MAs(30),O=E.oxw();E.xp6(4),E.hij(" ",E.xi3(5,19,Z.createdAt,"medium"),""),E.xp6(6),E.Q6J("value",Z.roll.clientSeed.value),E.xp6(2),E.Q6J("ngSwitch",E.lcZ(13,22,O.isServerSeedMasked$)),E.xp6(2),E.Q6J("ngSwitchCase",!1),E.xp6(1),E.Q6J("ngSwitchCase",!0),E.xp6(7),E.Oqu(Z.roll.nonce),E.xp6(5),E.Q6J("ngIf",!E.lcZ(28,24,O.isServerSeedMasked$))("ngIfElse",p),E.xp6(17),E.Q6J("ngIf",E.lcZ(45,26,O.isServerSeedMasked$)),E.xp6(2),E.Q6J("game",O.gameType)("serverSeed",E.lcZ(47,28,O.isServerSeedMasked$)?null:E.lcZ(48,30,O.serverSeedValue$))("clientSeed",Z.roll.clientSeed.value)("nonce",Z.roll.nonce)("pfVersion",Z.pfVersion)("minRoll",0)("maxRoll",134217727),E.xp6(13),E.hij(" ",E.lcZ(60,32,Z.roll.value)," "),E.xp6(6),E.hij(" ",E.lcZ(66,34,Z.slot.slotMinRoll)," "),E.xp6(6),E.hij(" ",E.lcZ(72,36,Z.slot.slotMaxRoll)," ")}}let bt=(()=>{class ot{constructor(Z,p,O,S){this.input=Z,this.dialogRef=p,this.apollo=O,this.ngZone=S,this.serverSeedChange=new w.X(null),this.plinkoBetChange=new w.X(null),this.plinkoBet$=this.plinkoBetChange.asObservable(),this.serverSeedValue$=this.serverSeedChange.asObservable().pipe((0,ft.U)(M=>null==M?void 0:M.value)),this.isServerSeedMasked$=this.serverSeedChange.pipe((0,ft.U)(M=>!M||M.value===M.hash)),this.gameType="PLINKO"}ngOnInit(){const{plinkoBet:Z}=this.input;!Z||(this.plinkoBetChange.next(Z),this.serverSeedChange.next(Z.roll.serverSeed))}onSeedsChange(){var Z;this.apollo.query({fetchPolicy:"network-only",query:K._,variables:{id:null===(Z=this.plinkoBetChange.getValue())||void 0===Z?void 0:Z.roll.id}}).pipe((0,tt.q)(1)).subscribe(({data:p})=>this.serverSeedChange.next(p.roll.serverSeed))}close(){this.ngZone.run(()=>{this.dialogRef.close()})}}return ot.\u0275fac=function(Z){return new(Z||ot)(E.Y36(V.WI),E.Y36(V.so),E.Y36(q._M),E.Y36(E.R0b))},ot.\u0275cmp=E.Xpm({type:ot,selectors:[["cw-plinko-provably-fair-modal"]],decls:8,vars:3,consts:function(){let Rt,Z,p,O,S,M,b,A,P,u,U,L,Et,F,it,rt,k;return Rt=$localize`:␟c589a8d7a1af74b8666fb5edd0f1cf47af83adb0␟2349806508115805101:${"\ufffd#2\ufffd"}:START_TAG_DIV:${"\ufffd#3\ufffd"}:START_TAG_CW_ICON:${"[\ufffd/#3\ufffd|\ufffd/#5\ufffd]"}:CLOSE_TAG_CW_ICON: Provably Fair ${"\ufffd/#2\ufffd"}:CLOSE_TAG_DIV:${"\ufffd#4\ufffd"}:START_TAG_BUTTON:${"\ufffd#5\ufffd"}:START_TAG_CW_ICON_1:${"[\ufffd/#3\ufffd|\ufffd/#5\ufffd]"}:CLOSE_TAG_CW_ICON:${"\ufffd/#4\ufffd"}:CLOSE_TAG_BUTTON:`,Rt=E.Zx4(Rt),Z=$localize`:␟1325091a645dc13221312f0166934d85fa569ae6␟2824799897324778254:Created at:`,p=$localize`:␟618d99b7e5a7a658f9ff2c16b6dbffbc51a219bd␟7317108036610646566:Client Seed`,O=$localize`:␟c30bf36543110fc7aac983e4f0866b75d805bd0b␟8534560073330554352:Play count`,S=$localize`:␟80ebb1b82fed892345531fff2ba095160972dd86␟2525230676386818985:Result`,M=$localize`:␟af8cc8a13ea7f5bb7d841e45cd63ab5d1b041755␟7535514262422389882:Generation`,b=$localize`:␟2e99753e98dd5c08bc7e6ff896ff3c005e284559␟9049963033822615881: Each plinko game is assigned a roll number - and there are 134_217_728 (2^27) potential roll numbers to land on starting from 0 to (134_217_728 - 1) Each roll is determined by a combination of three individual elements: `,A=$localize`:␟5af0348b0a25f97c5eea9d6cf04f475aa7e58bbe␟5949315165472936750:${"\ufffd#37\ufffd"}:START_TAG_STRONG:Client Seed${"\ufffd/#37\ufffd"}:CLOSE_TAG_STRONG:: This is a passphrase that comes from you and your browser. You’ll be able to see and even change it before you play, if you feel like that’s going to help you.. You can also check other players’ seeds to see their outcomes. `,P=$localize`:␟8fdefff26319f2a8df94182aaf02fc6779a3d92b␟9101010718043243185:${"\ufffd#40\ufffd"}:START_TAG_STRONG:Server Seed:${"\ufffd/#40\ufffd"}:CLOSE_TAG_STRONG: This is a really, really long number that comes from us. Before you play, we’ll show you an encrypted version, or hash, so that we can guarantee that it’s a predetermined result without actually allowing you to work out the outcome beforehand. It’s about keeping it fair for everyone, right? `,u=$localize`:␟3e435f3f77130374fb51af63f1f866a187f20cf4␟3557476331630266186:${"\ufffd#43\ufffd"}:START_TAG_STRONG:Play Count:${"\ufffd/#43\ufffd"}:CLOSE_TAG_STRONG: This one’s pretty simple - it’s the number of games you’ve played. This number means that even if you had the same Client Seed and Server Seed from a previous game, the outcome in your next game would still be different, since the Play Count would have increased by one. `,U=$localize`:␟e09f72c5890033673f40e5214dfdd394eabe4b93␟8029849602084929394:Winning Slot`,L=$localize`:␟feb0e2b8d25dea151c3b8011f8de4fd5e1e2f79b␟7135440857610270991: Each plinko game has a winning slot which is determined by roll number generated by process explained above. ${"\ufffd#53\ufffd\ufffd/#53\ufffd"}:LINE_BREAK: Roll number has to be bigger or equal to min roll AND smaller or equal to max roll of a winning slot. `,Et=$localize`:␟7b48def39d4cb0e50fa3b16db25ec99d807b01e0␟8660166140026207938:Roll Number`,F=$localize`:␟8f371166213bb2d8086122551e5a5f671a38da9d␟4713277981243114752:Slot Min Roll`,it=$localize`:␟f1a9d1adda54efc1641524de5d6cf4842f989fa1␟4940292217533633764:Slot Max Roll`,rt=$localize`:␟d1fff822632be1aef883cfa3c4eee453971f742f␟5184566143739320866:Server Seed (Revealed)`,k=$localize`:␟e3bbe0664123afd3a9d673a4211e5cd7f3931ebc␟6270490735034698578: Server Seed is currently in-use and a secret. Once revealed above the result for an opening can be calculated. `,[["mat-dialog-title",""],Rt,["inlineSVG","assets/icons/shield-check.svg",1,"title-icon"],["mat-icon-button","",1,"close",3,"click"],["inlineSVG","assets/icons/close.svg",1,"close-modal-icon"],[4,"ngIf"],Z,["fxLayout","","fxLayout.lt-sm","column","fxLayoutAlign"," center","fxLayoutAlign.lt-sm"," stretch","fxLayoutGap","1rem"],["fxFlex",""],p,["matInput","","type","text","disabled","true",3,"value"],[3,"ngSwitch"],["class","w-100",4,"ngSwitchCase"],[4,"ngSwitchCase"],[1,"stats"],[1,"stat"],["inlineSVG","assets/icons/counter.svg",1,"counter"],[1,"label"],O,[1,"value"],["inlineSVG","assets/icons/dice-20.svg",1,"result"],S,["class","value",4,"ngIf","ngIfElse"],["verify",""],[1,"h5","mt-4"],M,b,A,P,u,[3,"game","serverSeed","clientSeed","nonce","pfVersion","minRoll","maxRoll"],[1,"h5"],U,L,Et,F,it,[1,"w-100"],rt,["label","Server Seed (Hashed)","type","SERVER",3,"value","change"],["class","value",4,"ngSwitchCase"],[3,"routerLink","click"],k]},template:function(Z,p){1&Z&&(E.TgZ(0,"h1",0),E.tHW(1,1),E.TgZ(2,"div"),E._UZ(3,"cw-icon",2),E.qZA(),E.TgZ(4,"button",3),E.NdJ("click",function(){return p.close()}),E._UZ(5,"cw-icon",4),E.qZA(),E.N_p(),E.qZA(),E.YNc(6,x,73,38,"mat-dialog-content",5),E.ALo(7,"ngrxPush")),2&Z&&(E.xp6(6),E.Q6J("ngIf",E.lcZ(7,1,p.plinkoBet$)))},directives:[V.uh,Y.o,X.d$,Q.lW,et.O5,V.xY,T.xw,T.Wh,T.SQ,At.KE,T.yH,At.hX,z.Nt,et.RF,et.n9,Xt.g,Ct.o,Pt.yS],pipes:[gt.fM,et.uU,et.JJ],styles:[".title-icon[_ngcontent-%COMP%]{margin-right:.5rem;color:#00c74d}.stats[_ngcontent-%COMP%]{display:flex}.stat[_ngcontent-%COMP%]{margin:.5rem 2rem 0 .25rem;line-height:1;display:flex;align-items:center;justify-content:center}.stat[_ngcontent-%COMP%]   cw-icon[_ngcontent-%COMP%]{width:2rem;margin:0 .5rem 0 0}.label[_ngcontent-%COMP%]{margin-right:.5rem}.value[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:500;vertical-align:text-bottom}@media (max-width: 767.98px){mat-dialog-content[_ngcontent-%COMP%]{max-height:unset}}"],changeDetection:0}),ot})()},26105:(Lt,lt,y)=>{"use strict";y.d(lt,{V:()=>w,_:()=>ft});var V=y(39478);const w=V.Ps`
  fragment PlinkoProvablyFairModal on PlinkoBet {
    id
    createdAt
    pfVersion
    slot {
      pins
      slotMaxRoll
      slotMinRoll
      slotMultiplier
    }
    roll {
      id
      value
      nonce
      serverSeed {
        id
        hash
        value
      }
      clientSeed {
        id
        hash
        value
      }
    }
  }
`,ft=V.Ps`
  query PlinkoGetRoll($id: ID!) {
    roll(id: $id) {
      id
      serverSeed {
        id
        hash
        value
      }
    }
  }
`},81727:(Lt,lt,y)=>{"use strict";y.d(lt,{UX:()=>w,Yj:()=>ft,YM:()=>tt,Gr:()=>K});var V=y(36787);const w={ballSpeed:275,ballRotationSpeed:8,topSpacing:40,bottomSpacing:40,pinRadius:4,width:560,height:480,betBallSize:23,rippleEffectRadius:60,maxBetCountInLists:35,debug:!1},ft=[{label:"CREATED",value:"ID"},{label:"CREATED DESC",value:"ID_DESC"},{label:"MULTIPLIER",value:"MULTIPLIER"},{label:"MULTIPLIER DESC",value:"MULTIPLIER_DESC"},{label:"TOTAL BET",value:"TOTAL_BET"},{label:"TOTAL BET DESC",value:"TOTAL_BET_DESC"},{label:"TOTAL PAYOUT",value:"TOTAL_PAYOUT"},{label:"TOTAL PAYOUT DESC",value:"TOTAL_PAYOUT_DESC"}],tt={first:w.maxBetCountInLists,orderBy:V.dd.ID_DESC},K={first:w.maxBetCountInLists,orderBy:V.dd.ID_DESC,bigWin:!0}},36787:(Lt,lt,y)=>{"use strict";y.d(lt,{Z_:()=>V,Qo:()=>w,lB:()=>ft,dd:()=>tt});var V=(()=>{return(K=V||(V={})).LOW="LOW",K.MEDIUM="MEDIUM",K.HIGH="HIGH",V;var K})(),w=(()=>{return(K=w||(w={})).LEFT="LEFT",K.RIGHT="RIGHT",w;var K})(),ft=(()=>{return(K=ft||(ft={})).COINS_ONLY="COINS_ONLY",K.ITEMS_AND_COINS="ITEMS_AND_COINS",ft;var K})(),tt=(()=>{return(K=tt||(tt={})).ID="ID",K.ID_DESC="ID_DESC",K.MULTIPLIER="MULTIPLIER",K.MULTIPLIER_DESC="MULTIPLIER_DESC",K.TOTAL_BET="TOTAL_BET",K.TOTAL_BET_DESC="TOTAL_BET_DESC",K.TOTAL_PAYOUT="TOTAL_PAYOUT",K.TOTAL_PAYOUT_DESC="TOTAL_PAYOUT_DESC",K.USER_PROFIT="USER_PROFIT",K.USER_PROFIT_DESC="USER_PROFIT_DESC",tt;var K})()},5469:Lt=>{"use strict";function lt(p,O,S){S=S||2;var u,U,L,Et,F,it,rt,M=O&&O.length,b=M?O[0]*S:p.length,A=y(p,0,b,S,!0),P=[];if(!A||A.next===A.prev)return P;if(M&&(A=function(p,O,S,M){var A,P,L,b=[];for(A=0,P=O.length;A<P;A++)(L=y(p,O[A]*M,A<P-1?O[A+1]*M:p.length,M,!1))===L.next&&(L.steiner=!0),b.push(Xt(L));for(b.sort(Y),A=0;A<b.length;A++)S=V(S=X(b[A],S),S.next);return S}(p,O,A,S)),p.length>80*S){u=L=p[0],U=Et=p[1];for(var k=S;k<b;k+=S)(F=p[k])<u&&(u=F),(it=p[k+1])<U&&(U=it),F>L&&(L=F),it>Et&&(Et=it);rt=0!==(rt=Math.max(L-u,Et-U))?1/rt:0}return w(A,P,S,u,U,rt),P}function y(p,O,S,M,b){var A,P;if(b===Z(p,O,S,M)>0)for(A=O;A<S;A+=M)P=bt(A,p[A],p[A+1],P);else for(A=S-M;A>=O;A-=M)P=bt(A,p[A],p[A+1],P);return P&&kt(P,P.next)&&(ot(P),P=P.next),P}function V(p,O){if(!p)return p;O||(O=p);var M,S=p;do{if(M=!1,S.steiner||!kt(S,S.next)&&0!==gt(S.prev,S,S.next))S=S.next;else{if(ot(S),(S=O=S.prev)===S.next)break;M=!0}}while(M||S!==O);return O}function w(p,O,S,M,b,A,P){if(p){!P&&A&&function(p,O,S,M){var b=p;do{null===b.z&&(b.z=z(b.x,b.y,O,S,M)),b.prevZ=b.prev,b.nextZ=b.next,b=b.next}while(b!==p);b.prevZ.nextZ=null,b.prevZ=null,function(p){var O,S,M,b,A,P,u,U,L=1;do{for(S=p,p=null,A=null,P=0;S;){for(P++,M=S,u=0,O=0;O<L&&(u++,M=M.nextZ);O++);for(U=L;u>0||U>0&&M;)0!==u&&(0===U||!M||S.z<=M.z)?(b=S,S=S.nextZ,u--):(b=M,M=M.nextZ,U--),A?A.nextZ=b:p=b,b.prevZ=A,A=b;S=M}A.nextZ=null,L*=2}while(P>1)}(b)}(p,M,b,A);for(var U,L,u=p;p.prev!==p.next;)if(U=p.prev,L=p.next,A?tt(p,M,b,A):ft(p))O.push(U.i/S),O.push(p.i/S),O.push(L.i/S),ot(p),p=L.next,u=L.next;else if((p=L)===u){P?1===P?w(p=K(V(p),O,S),O,S,M,b,A,2):2===P&&E(p,O,S,M,b,A):w(V(p),O,S,M,b,A,1);break}}}function ft(p){var O=p.prev,S=p,M=p.next;if(gt(O,S,M)>=0)return!1;for(var b=p.next.next;b!==p.prev;){if(Ct(O.x,O.y,S.x,S.y,M.x,M.y,b.x,b.y)&&gt(b.prev,b,b.next)>=0)return!1;b=b.next}return!0}function tt(p,O,S,M){var b=p.prev,A=p,P=p.next;if(gt(b,A,P)>=0)return!1;for(var L=b.x>A.x?b.x>P.x?b.x:P.x:A.x>P.x?A.x:P.x,Et=b.y>A.y?b.y>P.y?b.y:P.y:A.y>P.y?A.y:P.y,F=z(b.x<A.x?b.x<P.x?b.x:P.x:A.x<P.x?A.x:P.x,b.y<A.y?b.y<P.y?b.y:P.y:A.y<P.y?A.y:P.y,O,S,M),it=z(L,Et,O,S,M),rt=p.prevZ,k=p.nextZ;rt&&rt.z>=F&&k&&k.z<=it;){if(rt!==p.prev&&rt!==p.next&&Ct(b.x,b.y,A.x,A.y,P.x,P.y,rt.x,rt.y)&&gt(rt.prev,rt,rt.next)>=0||(rt=rt.prevZ,k!==p.prev&&k!==p.next&&Ct(b.x,b.y,A.x,A.y,P.x,P.y,k.x,k.y)&&gt(k.prev,k,k.next)>=0))return!1;k=k.nextZ}for(;rt&&rt.z>=F;){if(rt!==p.prev&&rt!==p.next&&Ct(b.x,b.y,A.x,A.y,P.x,P.y,rt.x,rt.y)&&gt(rt.prev,rt,rt.next)>=0)return!1;rt=rt.prevZ}for(;k&&k.z<=it;){if(k!==p.prev&&k!==p.next&&Ct(b.x,b.y,A.x,A.y,P.x,P.y,k.x,k.y)&&gt(k.prev,k,k.next)>=0)return!1;k=k.nextZ}return!0}function K(p,O,S){var M=p;do{var b=M.prev,A=M.next.next;!kt(b,A)&&te(b,M,M.next,A)&&D(b,A)&&D(A,b)&&(O.push(b.i/S),O.push(M.i/S),O.push(A.i/S),ot(M),ot(M.next),M=p=A),M=M.next}while(M!==p);return V(M)}function E(p,O,S,M,b,A){var P=p;do{for(var u=P.next.next;u!==P.prev;){if(P.i!==u.i&&Pt(P,u)){var U=x(P,u);return P=V(P,P.next),U=V(U,U.next),w(P,O,S,M,b,A),void w(U,O,S,M,b,A)}u=u.next}P=P.next}while(P!==p)}function Y(p,O){return p.x-O.x}function X(p,O){var S=function(p,O){var P,S=O,M=p.x,b=p.y,A=-1/0;do{if(b<=S.y&&b>=S.next.y&&S.next.y!==S.y){var u=S.x+(b-S.y)*(S.next.x-S.x)/(S.next.y-S.y);if(u<=M&&u>A){if(A=u,u===M){if(b===S.y)return S;if(b===S.next.y)return S.next}P=S.x<S.next.x?S:S.next}}S=S.next}while(S!==O);if(!P)return null;if(M===A)return P;var it,U=P,L=P.x,Et=P.y,F=1/0;S=P;do{M>=S.x&&S.x>=L&&M!==S.x&&Ct(b<Et?M:A,b,L,Et,b<Et?A:M,b,S.x,S.y)&&(it=Math.abs(b-S.y)/(M-S.x),D(S,p)&&(it<F||it===F&&(S.x>P.x||S.x===P.x&&et(P,S)))&&(P=S,F=it)),S=S.next}while(S!==U);return P}(p,O);if(!S)return O;var M=x(S,p),b=V(S,S.next);return V(M,M.next),O===S?b:O}function et(p,O){return gt(p.prev,p,O.prev)<0&&gt(O.next,p,p.next)<0}function z(p,O,S,M,b){return(p=1431655765&((p=858993459&((p=252645135&((p=16711935&((p=32767*(p-S)*b)|p<<8))|p<<4))|p<<2))|p<<1))|(O=1431655765&((O=858993459&((O=252645135&((O=16711935&((O=32767*(O-M)*b)|O<<8))|O<<4))|O<<2))|O<<1))<<1}function Xt(p){var O=p,S=p;do{(O.x<S.x||O.x===S.x&&O.y<S.y)&&(S=O),O=O.next}while(O!==p);return S}function Ct(p,O,S,M,b,A,P,u){return(b-P)*(O-u)-(p-P)*(A-u)>=0&&(p-P)*(M-u)-(S-P)*(O-u)>=0&&(S-P)*(A-u)-(b-P)*(M-u)>=0}function Pt(p,O){return p.next.i!==O.i&&p.prev.i!==O.i&&!function(p,O){var S=p;do{if(S.i!==p.i&&S.next.i!==p.i&&S.i!==O.i&&S.next.i!==O.i&&te(S,S.next,p,O))return!0;S=S.next}while(S!==p);return!1}(p,O)&&(D(p,O)&&D(O,p)&&function(p,O){var S=p,M=!1,b=(p.x+O.x)/2,A=(p.y+O.y)/2;do{S.y>A!=S.next.y>A&&S.next.y!==S.y&&b<(S.next.x-S.x)*(A-S.y)/(S.next.y-S.y)+S.x&&(M=!M),S=S.next}while(S!==p);return M}(p,O)&&(gt(p.prev,p,O.prev)||gt(p,O.prev,O))||kt(p,O)&&gt(p.prev,p,p.next)>0&&gt(O.prev,O,O.next)>0)}function gt(p,O,S){return(O.y-p.y)*(S.x-O.x)-(O.x-p.x)*(S.y-O.y)}function kt(p,O){return p.x===O.x&&p.y===O.y}function te(p,O,S,M){var b=ee(gt(p,O,S)),A=ee(gt(p,O,M)),P=ee(gt(S,M,p)),u=ee(gt(S,M,O));return!!(b!==A&&P!==u||0===b&&Yt(p,S,O)||0===A&&Yt(p,M,O)||0===P&&Yt(S,p,M)||0===u&&Yt(S,O,M))}function Yt(p,O,S){return O.x<=Math.max(p.x,S.x)&&O.x>=Math.min(p.x,S.x)&&O.y<=Math.max(p.y,S.y)&&O.y>=Math.min(p.y,S.y)}function ee(p){return p>0?1:p<0?-1:0}function D(p,O){return gt(p.prev,p,p.next)<0?gt(p,O,p.next)>=0&&gt(p,p.prev,O)>=0:gt(p,O,p.prev)<0||gt(p,p.next,O)<0}function x(p,O){var S=new Rt(p.i,p.x,p.y),M=new Rt(O.i,O.x,O.y),b=p.next,A=O.prev;return p.next=O,O.prev=p,S.next=b,b.prev=S,M.next=S,S.prev=M,A.next=M,M.prev=A,M}function bt(p,O,S,M){var b=new Rt(p,O,S);return M?(b.next=M.next,b.prev=M,M.next.prev=b,M.next=b):(b.prev=b,b.next=b),b}function ot(p){p.next.prev=p.prev,p.prev.next=p.next,p.prevZ&&(p.prevZ.nextZ=p.nextZ),p.nextZ&&(p.nextZ.prevZ=p.prevZ)}function Rt(p,O,S){this.i=p,this.x=O,this.y=S,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Z(p,O,S,M){for(var b=0,A=O,P=S-M;A<S;A+=M)b+=(p[P]-p[A])*(p[A+1]+p[P+1]),P=A;return b}Lt.exports=lt,Lt.exports.default=lt,lt.deviation=function(p,O,S,M){var b=O&&O.length,P=Math.abs(Z(p,0,b?O[0]*S:p.length,S));if(b)for(var u=0,U=O.length;u<U;u++)P-=Math.abs(Z(p,O[u]*S,u<U-1?O[u+1]*S:p.length,S));var F=0;for(u=0;u<M.length;u+=3){var it=M[u]*S,rt=M[u+1]*S,k=M[u+2]*S;F+=Math.abs((p[it]-p[k])*(p[rt+1]-p[it+1])-(p[it]-p[rt])*(p[k+1]-p[it+1]))}return 0===P&&0===F?0:Math.abs((F-P)/P)},lt.flatten=function(p){for(var O=p[0][0].length,S={vertices:[],holes:[],dimensions:O},M=0,b=0;b<p.length;b++){for(var A=0;A<p[b].length;A++)for(var P=0;P<O;P++)S.vertices.push(p[b][A][P]);b>0&&S.holes.push(M+=p[b-1].length)}return S}},62005:Lt=>{"use strict";var lt=Object.prototype.hasOwnProperty,y="~";function V(){}function w(E,q,Y){this.fn=E,this.context=q,this.once=Y||!1}function ft(E,q,Y,X,Q){if("function"!=typeof Y)throw new TypeError("The listener must be a function");var et=new w(Y,X||E,Q),T=y?y+q:q;return E._events[T]?E._events[T].fn?E._events[T]=[E._events[T],et]:E._events[T].push(et):(E._events[T]=et,E._eventsCount++),E}function tt(E,q){0==--E._eventsCount?E._events=new V:delete E._events[q]}function K(){this._events=new V,this._eventsCount=0}Object.create&&(V.prototype=Object.create(null),(new V).__proto__||(y=!1)),K.prototype.eventNames=function(){var Y,X,q=[];if(0===this._eventsCount)return q;for(X in Y=this._events)lt.call(Y,X)&&q.push(y?X.slice(1):X);return Object.getOwnPropertySymbols?q.concat(Object.getOwnPropertySymbols(Y)):q},K.prototype.listeners=function(q){var X=this._events[y?y+q:q];if(!X)return[];if(X.fn)return[X.fn];for(var Q=0,et=X.length,T=new Array(et);Q<et;Q++)T[Q]=X[Q].fn;return T},K.prototype.listenerCount=function(q){var X=this._events[y?y+q:q];return X?X.fn?1:X.length:0},K.prototype.emit=function(q,Y,X,Q,et,T){var At=y?y+q:q;if(!this._events[At])return!1;var Ct,Pt,z=this._events[At],Xt=arguments.length;if(z.fn){switch(z.once&&this.removeListener(q,z.fn,void 0,!0),Xt){case 1:return z.fn.call(z.context),!0;case 2:return z.fn.call(z.context,Y),!0;case 3:return z.fn.call(z.context,Y,X),!0;case 4:return z.fn.call(z.context,Y,X,Q),!0;case 5:return z.fn.call(z.context,Y,X,Q,et),!0;case 6:return z.fn.call(z.context,Y,X,Q,et,T),!0}for(Pt=1,Ct=new Array(Xt-1);Pt<Xt;Pt++)Ct[Pt-1]=arguments[Pt];z.fn.apply(z.context,Ct)}else{var kt,gt=z.length;for(Pt=0;Pt<gt;Pt++)switch(z[Pt].once&&this.removeListener(q,z[Pt].fn,void 0,!0),Xt){case 1:z[Pt].fn.call(z[Pt].context);break;case 2:z[Pt].fn.call(z[Pt].context,Y);break;case 3:z[Pt].fn.call(z[Pt].context,Y,X);break;case 4:z[Pt].fn.call(z[Pt].context,Y,X,Q);break;default:if(!Ct)for(kt=1,Ct=new Array(Xt-1);kt<Xt;kt++)Ct[kt-1]=arguments[kt];z[Pt].fn.apply(z[Pt].context,Ct)}}return!0},K.prototype.on=function(q,Y,X){return ft(this,q,Y,X,!1)},K.prototype.once=function(q,Y,X){return ft(this,q,Y,X,!0)},K.prototype.removeListener=function(q,Y,X,Q){var et=y?y+q:q;if(!this._events[et])return this;if(!Y)return tt(this,et),this;var T=this._events[et];if(T.fn)T.fn===Y&&(!Q||T.once)&&(!X||T.context===X)&&tt(this,et);else{for(var At=0,z=[],Xt=T.length;At<Xt;At++)(T[At].fn!==Y||Q&&!T[At].once||X&&T[At].context!==X)&&z.push(T[At]);z.length?this._events[et]=1===z.length?z[0]:z:tt(this,et)}return this},K.prototype.removeAllListeners=function(q){var Y;return q?this._events[Y=y?y+q:q]&&tt(this,Y):(this._events=new V,this._eventsCount=0),this},K.prototype.off=K.prototype.removeListener,K.prototype.addListener=K.prototype.on,K.prefixed=y,K.EventEmitter=K,Lt.exports=K},35943:Lt=>{"use strict";var lt=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable;function w(tt){if(null==tt)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(tt)}Lt.exports=function(){try{if(!Object.assign)return!1;var tt=new String("abc");if(tt[5]="de","5"===Object.getOwnPropertyNames(tt)[0])return!1;for(var K={},E=0;E<10;E++)K["_"+String.fromCharCode(E)]=E;if("0123456789"!==Object.getOwnPropertyNames(K).map(function(X){return K[X]}).join(""))return!1;var Y={};return"abcdefghijklmnopqrst".split("").forEach(function(X){Y[X]=X}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},Y)).join("")}catch(X){return!1}}()?Object.assign:function(tt,K){for(var E,Y,q=w(tt),X=1;X<arguments.length;X++){for(var Q in E=Object(arguments[X]))y.call(E,Q)&&(q[Q]=E[Q]);if(lt){Y=lt(E);for(var et=0;et<Y.length;et++)V.call(E,Y[et])&&(q[Y[et]]=E[Y[et]])}}return q}},90516:Lt=>{"use strict";function lt(y,V){return Object.prototype.hasOwnProperty.call(y,V)}Lt.exports=function(y,V,w,ft){w=w||"=";var tt={};if("string"!=typeof y||0===y.length)return tt;var K=/\+/g;y=y.split(V=V||"&");var E=1e3;ft&&"number"==typeof ft.maxKeys&&(E=ft.maxKeys);var q=y.length;E>0&&q>E&&(q=E);for(var Y=0;Y<q;++Y){var et,T,At,z,X=y[Y].replace(K,"%20"),Q=X.indexOf(w);Q>=0?(et=X.substr(0,Q),T=X.substr(Q+1)):(et=X,T=""),At=decodeURIComponent(et),z=decodeURIComponent(T),lt(tt,At)?Array.isArray(tt[At])?tt[At].push(z):tt[At]=[tt[At],z]:tt[At]=z}return tt}},75776:Lt=>{"use strict";var lt=function(y){switch(typeof y){case"string":return y;case"boolean":return y?"true":"false";case"number":return isFinite(y)?y:"";default:return""}};Lt.exports=function(y,V,w,ft){return V=V||"&",w=w||"=",null===y&&(y=void 0),"object"==typeof y?Object.keys(y).map(function(tt){var K=encodeURIComponent(lt(tt))+w;return Array.isArray(y[tt])?y[tt].map(function(E){return K+encodeURIComponent(lt(E))}).join(V):K+encodeURIComponent(lt(y[tt]))}).join(V):ft?encodeURIComponent(lt(ft))+w+encodeURIComponent(lt(y)):""}},17137:(Lt,lt,y)=>{"use strict";lt.decode=lt.parse=y(90516),lt.encode=lt.stringify=y(75776)},11308:function(Lt,lt,y){var V;Lt=y.nmd(Lt),function(w){"object"==typeof global&&global;var E,q=2147483647,Y=36,Ct=/^xn--/,Pt=/[^\x20-\x7E]/,gt=/[\x2E\u3002\uFF0E\uFF61]/g,kt={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Yt=Math.floor,ee=String.fromCharCode;function D(A){throw RangeError(kt[A])}function ct(A,P){for(var u=A.length,U=[];u--;)U[u]=P(A[u]);return U}function x(A,P){var u=A.split("@"),U="";return u.length>1&&(U=u[0]+"@",A=u[1]),U+ct((A=A.replace(gt,".")).split("."),P).join(".")}function bt(A){for(var L,Et,P=[],u=0,U=A.length;u<U;)(L=A.charCodeAt(u++))>=55296&&L<=56319&&u<U?56320==(64512&(Et=A.charCodeAt(u++)))?P.push(((1023&L)<<10)+(1023&Et)+65536):(P.push(L),u--):P.push(L);return P}function ot(A){return ct(A,function(P){var u="";return P>65535&&(u+=ee((P-=65536)>>>10&1023|55296),P=56320|1023&P),u+ee(P)}).join("")}function Rt(A){return A-48<10?A-22:A-65<26?A-65:A-97<26?A-97:Y}function Z(A,P){return A+22+75*(A<26)-((0!=P)<<5)}function p(A,P,u){var U=0;for(A=u?Yt(A/700):A>>1,A+=Yt(A/P);A>455;U+=Y)A=Yt(A/35);return Yt(U+36*A/(A+38))}function O(A){var U,it,rt,k,Tt,Ht,Ut,Bt,W,vt,P=[],u=A.length,L=0,Et=128,F=72;for((it=A.lastIndexOf("-"))<0&&(it=0),rt=0;rt<it;++rt)A.charCodeAt(rt)>=128&&D("not-basic"),P.push(A.charCodeAt(rt));for(k=it>0?it+1:0;k<u;){for(Tt=L,Ht=1,Ut=Y;k>=u&&D("invalid-input"),((Bt=Rt(A.charCodeAt(k++)))>=Y||Bt>Yt((q-L)/Ht))&&D("overflow"),L+=Bt*Ht,!(Bt<(W=Ut<=F?1:Ut>=F+26?26:Ut-F));Ut+=Y)Ht>Yt(q/(vt=Y-W))&&D("overflow"),Ht*=vt;F=p(L-Tt,U=P.length+1,0==Tt),Yt(L/U)>q-Et&&D("overflow"),Et+=Yt(L/U),L%=U,P.splice(L++,0,Et)}return ot(P)}function S(A){var P,u,U,L,Et,F,it,rt,k,Tt,Ht,Bt,W,vt,nt,Ut=[];for(Bt=(A=bt(A)).length,P=128,u=0,Et=72,F=0;F<Bt;++F)(Ht=A[F])<128&&Ut.push(ee(Ht));for(U=L=Ut.length,L&&Ut.push("-");U<Bt;){for(it=q,F=0;F<Bt;++F)(Ht=A[F])>=P&&Ht<it&&(it=Ht);for(it-P>Yt((q-u)/(W=U+1))&&D("overflow"),u+=(it-P)*W,P=it,F=0;F<Bt;++F)if((Ht=A[F])<P&&++u>q&&D("overflow"),Ht==P){for(rt=u,k=Y;!(rt<(Tt=k<=Et?1:k>=Et+26?26:k-Et));k+=Y)Ut.push(ee(Z(Tt+(nt=rt-Tt)%(vt=Y-Tt),0))),rt=Yt(nt/vt);Ut.push(ee(Z(rt,0))),Et=p(u,W,U==L),u=0,++U}++u,++P}return Ut.join("")}E={version:"1.3.2",ucs2:{decode:bt,encode:ot},decode:O,encode:S,toASCII:function(A){return x(A,function(P){return Pt.test(P)?"xn--"+S(P):P})},toUnicode:function(A){return x(A,function(P){return Ct.test(P)?O(P.slice(4).toLowerCase()):P})}},void 0!==(V=function(){return E}.call(lt,y,lt,Lt))&&(Lt.exports=V)}()},68762:(Lt,lt,y)=>{"use strict";var w=y(11308),ft=y(70796);function tt(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}lt.Qc=te,lt.DB=function(D,ct){return te(D,!1,!0).resolve(ct)},lt.WU=function(D){return ft.isString(D)&&(D=te(D)),D instanceof tt?D.format():tt.prototype.format.call(D)};var K=/^([a-z0-9.+-]+:)/i,E=/:[0-9]*$/,q=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,X=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),Q=["'"].concat(X),et=["%","/","?",";","#"].concat(Q),T=["/","?","#"],z=/^[+a-z0-9A-Z_-]{0,63}$/,Xt=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Ct={javascript:!0,"javascript:":!0},Pt={javascript:!0,"javascript:":!0},gt={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},kt=y(17137);function te(D,ct,x){if(D&&ft.isObject(D)&&D instanceof tt)return D;var bt=new tt;return bt.parse(D,ct,x),bt}tt.prototype.parse=function(D,ct,x){if(!ft.isString(D))throw new TypeError("Parameter 'url' must be a string, not "+typeof D);var bt=D.indexOf("?"),ot=-1!==bt&&bt<D.indexOf("#")?"?":"#",Rt=D.split(ot);Rt[0]=Rt[0].replace(/\\/g,"/");var p=D=Rt.join(ot);if(p=p.trim(),!x&&1===D.split("#").length){var O=q.exec(p);if(O)return this.path=p,this.href=p,this.pathname=O[1],O[2]?(this.search=O[2],this.query=ct?kt.parse(this.search.substr(1)):this.search.substr(1)):ct&&(this.search="",this.query={}),this}var S=K.exec(p);if(S){var M=(S=S[0]).toLowerCase();this.protocol=M,p=p.substr(S.length)}if(x||S||p.match(/^\/\/[^@\/]+@[^@\/]+/)){var b="//"===p.substr(0,2);b&&(!S||!Pt[S])&&(p=p.substr(2),this.slashes=!0)}if(!Pt[S]&&(b||S&&!gt[S])){for(var A=-1,P=0;P<T.length;P++)-1!==(u=p.indexOf(T[P]))&&(-1===A||u<A)&&(A=u);var U,L;for(-1!==(L=-1===A?p.lastIndexOf("@"):p.lastIndexOf("@",A))&&(U=p.slice(0,L),p=p.slice(L+1),this.auth=decodeURIComponent(U)),A=-1,P=0;P<et.length;P++){var u;-1!==(u=p.indexOf(et[P]))&&(-1===A||u<A)&&(A=u)}-1===A&&(A=p.length),this.host=p.slice(0,A),p=p.slice(A),this.parseHost(),this.hostname=this.hostname||"";var Et="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!Et)for(var F=this.hostname.split(/\./),it=(P=0,F.length);P<it;P++){var rt=F[P];if(rt&&!rt.match(z)){for(var k="",Tt=0,Ht=rt.length;Tt<Ht;Tt++)rt.charCodeAt(Tt)>127?k+="x":k+=rt[Tt];if(!k.match(z)){var Ut=F.slice(0,P),Bt=F.slice(P+1),W=rt.match(Xt);W&&(Ut.push(W[1]),Bt.unshift(W[2])),Bt.length&&(p="/"+Bt.join(".")+p),this.hostname=Ut.join(".");break}}}this.hostname=this.hostname.length>255?"":this.hostname.toLowerCase(),Et||(this.hostname=w.toASCII(this.hostname)),this.host=(this.hostname||"")+(this.port?":"+this.port:""),this.href+=this.host,Et&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==p[0]&&(p="/"+p))}if(!Ct[M])for(P=0,it=Q.length;P<it;P++){var Vt=Q[P];if(-1!==p.indexOf(Vt)){var ce=encodeURIComponent(Vt);ce===Vt&&(ce=escape(Vt)),p=p.split(Vt).join(ce)}}var Jt=p.indexOf("#");-1!==Jt&&(this.hash=p.substr(Jt),p=p.slice(0,Jt));var he=p.indexOf("?");return-1!==he?(this.search=p.substr(he),this.query=p.substr(he+1),ct&&(this.query=kt.parse(this.query)),p=p.slice(0,he)):ct&&(this.search="",this.query={}),p&&(this.pathname=p),gt[M]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(this.path=(this.pathname||"")+(this.search||"")),this.href=this.format(),this},tt.prototype.format=function(){var D=this.auth||"";D&&(D=(D=encodeURIComponent(D)).replace(/%3A/i,":"),D+="@");var ct=this.protocol||"",x=this.pathname||"",bt=this.hash||"",ot=!1,Rt="";this.host?ot=D+this.host:this.hostname&&(ot=D+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(ot+=":"+this.port)),this.query&&ft.isObject(this.query)&&Object.keys(this.query).length&&(Rt=kt.stringify(this.query));var Z=this.search||Rt&&"?"+Rt||"";return ct&&":"!==ct.substr(-1)&&(ct+=":"),this.slashes||(!ct||gt[ct])&&!1!==ot?(ot="//"+(ot||""),x&&"/"!==x.charAt(0)&&(x="/"+x)):ot||(ot=""),bt&&"#"!==bt.charAt(0)&&(bt="#"+bt),Z&&"?"!==Z.charAt(0)&&(Z="?"+Z),ct+ot+(x=x.replace(/[?#]/g,function(p){return encodeURIComponent(p)}))+(Z=Z.replace("#","%23"))+bt},tt.prototype.resolve=function(D){return this.resolveObject(te(D,!1,!0)).format()},tt.prototype.resolveObject=function(D){if(ft.isString(D)){var ct=new tt;ct.parse(D,!1,!0),D=ct}for(var x=new tt,bt=Object.keys(this),ot=0;ot<bt.length;ot++){var Rt=bt[ot];x[Rt]=this[Rt]}if(x.hash=D.hash,""===D.href)return x.href=x.format(),x;if(D.slashes&&!D.protocol){for(var Z=Object.keys(D),p=0;p<Z.length;p++){var O=Z[p];"protocol"!==O&&(x[O]=D[O])}return gt[x.protocol]&&x.hostname&&!x.pathname&&(x.path=x.pathname="/"),x.href=x.format(),x}if(D.protocol&&D.protocol!==x.protocol){if(!gt[D.protocol]){for(var S=Object.keys(D),M=0;M<S.length;M++){var b=S[M];x[b]=D[b]}return x.href=x.format(),x}if(x.protocol=D.protocol,D.host||Pt[D.protocol])x.pathname=D.pathname;else{for(var it=(D.pathname||"").split("/");it.length&&!(D.host=it.shift()););D.host||(D.host=""),D.hostname||(D.hostname=""),""!==it[0]&&it.unshift(""),it.length<2&&it.unshift(""),x.pathname=it.join("/")}return x.search=D.search,x.query=D.query,x.host=D.host||"",x.auth=D.auth,x.hostname=D.hostname||D.host,x.port=D.port,(x.pathname||x.search)&&(x.path=(x.pathname||"")+(x.search||"")),x.slashes=x.slashes||D.slashes,x.href=x.format(),x}var u=x.pathname&&"/"===x.pathname.charAt(0),U=D.host||D.pathname&&"/"===D.pathname.charAt(0),L=U||u||x.host&&D.pathname,Et=L,F=x.pathname&&x.pathname.split("/")||[],rt=(it=D.pathname&&D.pathname.split("/")||[],x.protocol&&!gt[x.protocol]);if(rt&&(x.hostname="",x.port=null,x.host&&(""===F[0]?F[0]=x.host:F.unshift(x.host)),x.host="",D.protocol&&(D.hostname=null,D.port=null,D.host&&(""===it[0]?it[0]=D.host:it.unshift(D.host)),D.host=null),L=L&&(""===it[0]||""===F[0])),U)x.host=D.host||""===D.host?D.host:x.host,x.hostname=D.hostname||""===D.hostname?D.hostname:x.hostname,x.search=D.search,x.query=D.query,F=it;else if(it.length)F||(F=[]),F.pop(),F=F.concat(it),x.search=D.search,x.query=D.query;else if(!ft.isNullOrUndefined(D.search))return rt&&(x.hostname=x.host=F.shift(),(k=!!(x.host&&x.host.indexOf("@")>0)&&x.host.split("@"))&&(x.auth=k.shift(),x.host=x.hostname=k.shift())),x.search=D.search,x.query=D.query,(!ft.isNull(x.pathname)||!ft.isNull(x.search))&&(x.path=(x.pathname?x.pathname:"")+(x.search?x.search:"")),x.href=x.format(),x;if(!F.length)return x.pathname=null,x.path=x.search?"/"+x.search:null,x.href=x.format(),x;for(var Tt=F.slice(-1)[0],Ht=(x.host||D.host||F.length>1)&&("."===Tt||".."===Tt)||""===Tt,Ut=0,Bt=F.length;Bt>=0;Bt--)"."===(Tt=F[Bt])?F.splice(Bt,1):".."===Tt?(F.splice(Bt,1),Ut++):Ut&&(F.splice(Bt,1),Ut--);if(!L&&!Et)for(;Ut--;Ut)F.unshift("..");L&&""!==F[0]&&(!F[0]||"/"!==F[0].charAt(0))&&F.unshift(""),Ht&&"/"!==F.join("/").substr(-1)&&F.push("");var k,W=""===F[0]||F[0]&&"/"===F[0].charAt(0);return rt&&(x.hostname=x.host=W?"":F.length?F.shift():"",(k=!!(x.host&&x.host.indexOf("@")>0)&&x.host.split("@"))&&(x.auth=k.shift(),x.host=x.hostname=k.shift())),(L=L||x.host&&F.length)&&!W&&F.unshift(""),F.length?x.pathname=F.join("/"):(x.pathname=null,x.path=null),(!ft.isNull(x.pathname)||!ft.isNull(x.search))&&(x.path=(x.pathname?x.pathname:"")+(x.search?x.search:"")),x.auth=D.auth||x.auth,x.slashes=x.slashes||D.slashes,x.href=x.format(),x},tt.prototype.parseHost=function(){var D=this.host,ct=E.exec(D);ct&&(":"!==(ct=ct[0])&&(this.port=ct.substr(1)),D=D.substr(0,D.length-ct.length)),D&&(this.hostname=D)}},70796:Lt=>{"use strict";Lt.exports={isString:function(lt){return"string"==typeof lt},isObject:function(lt){return"object"==typeof lt&&null!==lt},isNull:function(lt){return null===lt},isNullOrUndefined:function(lt){return null==lt}}}}]);