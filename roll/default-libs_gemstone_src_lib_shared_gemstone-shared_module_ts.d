"use strict";(self.webpackChunkcsgoroll=self.webpackChunkcsgoroll||[]).push([["default-libs_gemstone_src_lib_shared_gemstone-shared_module_ts"],{66769:(H,b,o)=>{o.d(b,{CF:()=>_,bY:()=>S,kY:()=>v,sM:()=>t,Ws:()=>M,uD:()=>u,Xd:()=>I,ZU:()=>h,CO:()=>D});var i=o(39478),n=o(75424);const _=i.Ps`
  fragment GemstoneLeaderboardItem on GemstoneGameLeaderboardNode {
    position
    userId
    user {
      ...UserBadge
    }
    winAmount
    spent
    boxes {
      winAmount
      box {
        id
        enabled
        name
        iconUrl
        currency
        slug
        market {
          id
          slug
        }
      }
    }
  }

  ${n.userBadgeFragment}
`,S=i.Ps`
  query GemstoneLeaderboard(
    $limit: Int!
    $walletType: WalletType!
    $teamId: ID
    $createdAtMinDate: SequelizeDate
    $createdAtMaxDate: SequelizeDate
  ) {
    gemstoneGameLeaderboard(
      limit: $limit
      walletType: $walletType
      teamId: $teamId
      createdAtMinDate: $createdAtMinDate
      createdAtMaxDate: $createdAtMaxDate
    ) {
      board {
        ...GemstoneLeaderboardItem
      }
      myItem {
        ...GemstoneLeaderboardItem
      }
    }
  }

  ${_}
`,v=i.Ps`
  fragment GemstoneBoostInfoItemVariant on ItemVariant {
    id
    iconUrl
    itemId
    name
    externalId
    value
  }
`,t=i.Ps`
  fragment GemstoneBoostInfo on GemstoneBoostInfo {
    gemstoneBoost {
      id
      startAt
      endAt
      activationPeriod

      amountMultiplier
      status

      userGemstoneThreshold
      teamGemstoneThreshold

      teamBoostActivatedByItemVariant {
        ...GemstoneBoostInfoItemVariant
      }
      userBoostActivatedByItemVariant {
        ...GemstoneBoostInfoItemVariant
      }
    }
    teamsInfo {
      pointThreshold
      totalActivationsByPoints
      totalActivationsByItemVariant
      totalPoints
      currentPoints
      teamId
      team {
        id
        name
      }
    }
    # Not needed for now..
    # userInfo {
    #   pointThreshold
    #   totalActivationsByPoints
    #   totalPoints
    #   currentPoints
    #   user {
    #     id
    #     name
    #     avatar
    #   }
    # }
  }
  ${v}
`,M=i.Ps`
  query GemstoneBoostInfoQuery($teamIds: [ID!]!, $walletType: WalletType!) {
    gemstoneBoostInfo(teamIds: $teamIds, walletType: $walletType) {
      ...GemstoneBoostInfo
    }
  }
  ${t}
`,u=i.Ps`
  fragment GemstoneBoostActivation on GemstoneBoostActivation {
    id
    gemstoneBoostId
    # activatedByUserId
    # activatedByUser
    activatedByItemVariant {
      id
      externalId
      iconUrl
      name
    }
    amountMultiplier
    endAt
    startAt
    teamId
    userId
  }
`,I=i.Ps`
  query GemstoneBoostActivations(
    $active: Boolean
    $after: String
    $first: PaginationAmount
    $gemstoneBoostId: ID
    $orderBy: [GemstoneBoostActivationOrderBy!]
    $teamIds: [ID!]
  ) {
    gemstoneBoostActivations(
      active: $active
      after: $after
      first: $first
      gemstoneBoostId: $gemstoneBoostId
      orderBy: $orderBy
      teamIds: $teamIds
    ) {
      pageInfo {
        hasNextPage
        endCursor
      }
      edges {
        node {
          ...GemstoneBoostActivation
        }
      }
    }
  }
  ${u}
`,h=i.Ps`
  subscription GemstoneBoostActivationCreated {
    createGemstoneBoostActivation {
      gemstoneBoostActivation {
        ...GemstoneBoostActivation
      }
    }
  }

  ${u}
`,D=i.Ps`
  subscription GemstoneBoostActivationCreated {
    updateGemstoneBoostInfo {
      gemstoneBoostInfo {
        ...GemstoneBoostInfo
      }
    }
  }
  ${t}
`},78488:(H,b,o)=>{o.d(b,{c:()=>x});var i=o(23600),n=o(5e3),_=o(48966),S=o(47423),v=o(31495),t=o(96298),M=o(76688),u=o(69808),I=o(10217),h=o(966),D=o(308);function O(p,A){if(1&p&&(n.TgZ(0,"p"),n.tHW(1,16),n._UZ(2,"img",17),n.N_p(),n.qZA()),2&p){const d=A.ngIf,e=n.oxw();n.xp6(2),n.Q6J("src",d.iconUrl,n.LSH)("ngbTooltip",d.name),n.pQV(e.gemstoneBoost.amountMultiplier)(e.gemstoneLabel)(d.externalId||d.name),n.QtT(1)}}function f(p,A){1&p&&n._UZ(0,"cw-game-tile",18),2&p&&n.Q6J("mat-dialog-close",!0)}function N(p,A){1&p&&n._UZ(0,"cw-game-tile",19),2&p&&n.Q6J("mat-dialog-close",!0)}function W(p,A){1&p&&n._UZ(0,"cw-game-tile",20),2&p&&n.Q6J("link","/boxes/"+A.ngIf.slug+"/list")("mat-dialog-close",!0)}function $(p,A){1&p&&n._UZ(0,"cw-game-tile",21),2&p&&n.Q6J("mat-dialog-close",!0)}let x=(()=>{class p{constructor(d,e){var G,R;this.appConfig=d,this.userService=e,this.gemstoneLabel=(null===(G=this.appConfig.gemstones)||void 0===G?void 0:G.label)||"Gemstone",this.gemstoneLabelPlural=(null===(R=this.appConfig.gemstones)||void 0===R?void 0:R.pluralLabel)||"Gemstones",this.market$=this.userService.market$}}return p.\u0275fac=function(d){return new(d||p)(n.Y36(i.qBz),n.Y36(i.KDu))},p.\u0275cmp=n.Xpm({type:p,selectors:[["cw-gemstone-boost-how-it-works-modal"]],inputs:{gemstoneBoost:"gemstoneBoost"},decls:22,vars:17,consts:function(){let A,d,e,G,R;return A=$localize`:␟bacc997e8d0c83c23b233cde9c90359a1bbf3b7e␟5780412220476382063:How to activate a boost?`,d=$localize`:␟c3556bfa20ece1c43515b33a6b27457bccfb5dea␟726101847271000494:Complete these requirements:`,e=$localize`:␟8681090018af81c5a49649cb5897fb8ad2038b29␟8687618292946896736: Collect ${"\ufffd#10\ufffd"}:START_TAG_CW_GEMSTONE_BALANCE:${"\ufffd/#10\ufffd"}:CLOSE_TAG_CW_GEMSTONE_BALANCE: ${"[\ufffd0\ufffd|\ufffd1\ufffd]"}:INTERPOLATION: as a team, once you do, your team will earn ${"[\ufffd0\ufffd|\ufffd1\ufffd]"}:INTERPOLATION: at a ${"\ufffd2\ufffd"}:INTERPOLATION_1:X faster rate than usual, for a limited amount of time. `,e=n.Zx4(e),G=$localize`:␟ade8295548d9d8105ea964ee32fa57f8ca2cc565␟439157473879764455:${"\ufffd#14\ufffd"}:START_SMALL_TEXT:All Boosts and related ${"\ufffd0\ufffd"}:INTERPOLATION: counters will reset at ${"\ufffd1\ufffd"}:INTERPOLATION_1:${"\ufffd/#14\ufffd"}:CLOSE_SMALL_TEXT:`,R=$localize`:␟27187806aeb28e475d392951e3692f462c6c3450␟8419895848351742564: ${"\ufffd0\ufffd"}:INTERPOLATION:X ${"\ufffd1\ufffd"}:INTERPOLATION_1: Boost for the whole team, each time your team unboxes ${"\ufffd2\ufffd"}:INTERPOLATION_2: ${"\ufffd#2\ufffd\ufffd/#2\ufffd"}:TAG_IMG:`,[["mat-dialog-title",""],["mat-icon-button","",1,"close",3,"mat-dialog-close"],["inlineSVG","assets/icons/close.svg"],[1,"text-uppercase","mb-4"],A,[1,"mb-2"],d,e,["imgHeight","0.625rem",1,"p-0",3,"balance"],[4,"ngIf"],G,["gdGap","1rem","gdColumns","1fr 1fr"],["image","assets/games/roll.png","label","Roll","link","/roll",3,"mat-dialog-close",4,"ngIf"],["image","assets/games/crash.png","label","Crash","link","/crash",3,"mat-dialog-close",4,"ngIf"],["image","assets/games/unboxing.png","label","Unboxing",3,"link","mat-dialog-close",4,"ngIf"],["image","assets/games/dice.png","label","Dice","link","/dice",3,"mat-dialog-close",4,"ngIf"],R,[1,"ml-2",2,"height","2rem",3,"src","ngbTooltip"],["image","assets/games/roll.png","label","Roll","link","/roll",3,"mat-dialog-close"],["image","assets/games/crash.png","label","Crash","link","/crash",3,"mat-dialog-close"],["image","assets/games/unboxing.png","label","Unboxing",3,"link","mat-dialog-close"],["image","assets/games/dice.png","label","Dice","link","/dice",3,"mat-dialog-close"]]},template:function(d,e){1&d&&(n.TgZ(0,"h2",0),n.TgZ(1,"button",1),n._UZ(2,"cw-icon",2),n.qZA(),n.qZA(),n.TgZ(3,"mat-dialog-content"),n.TgZ(4,"h3",3),n.SDv(5,4),n.qZA(),n.TgZ(6,"h6",5),n.SDv(7,6),n.qZA(),n.TgZ(8,"p"),n.tHW(9,7),n._UZ(10,"cw-gemstone-balance",8),n.N_p(),n.qZA(),n.YNc(11,O,3,5,"p",9),n.TgZ(12,"p"),n.tHW(13,10),n._UZ(14,"small"),n.ALo(15,"date"),n.N_p(),n.qZA(),n.TgZ(16,"div",11),n.YNc(17,f,1,1,"cw-game-tile",12),n.YNc(18,N,1,1,"cw-game-tile",13),n.YNc(19,W,1,2,"cw-game-tile",14),n.ALo(20,"async"),n.YNc(21,$,1,1,"cw-game-tile",15),n.qZA(),n.qZA()),2&d&&(n.xp6(1),n.Q6J("mat-dialog-close",!0),n.xp6(9),n.Q6J("balance",e.gemstoneBoost.teamGemstoneThreshold),n.pQV(e.gemstoneLabelPlural)(e.gemstoneLabelPlural)(e.gemstoneBoost.amountMultiplier),n.QtT(9),n.xp6(1),n.Q6J("ngIf",e.gemstoneBoost.teamBoostActivatedByItemVariant),n.xp6(4),n.pQV(e.gemstoneLabel)(n.xi3(15,12,e.gemstoneBoost.endAt,"medium")),n.QtT(13),n.xp6(2),n.Q6J("ngIf",e.appConfig.products.roulette),n.xp6(1),n.Q6J("ngIf",e.appConfig.products.crash),n.xp6(1),n.Q6J("ngIf",n.lcZ(20,15,e.appConfig.products.boxes&&e.market$)),n.xp6(2),n.Q6J("ngIf",e.appConfig.products.dice))},directives:[_.uh,S.lW,_.ZT,v.o,t.d$,_.xY,M.P,u.O5,I.Gx,I.A0,h._L,D.t],pipes:[u.uU,u.Ov],styles:[""],changeDetection:0}),p})()},2658:(H,b,o)=>{o.d(b,{R:()=>w});var i=o(23600),n=o(62650),_=(()=>{return(c=_||(_={})).ENABLED="ENABLED",c.DISABLED="DISABLED",_;var c})(),S=o(70653),v=o(50727),t=o(77579),M=o(68675),u=o(39300),I=o(95698),h=o(63900),D=o(39841),O=o(54004),f=o(34782),N=o(5963),W=o(56451),$=o(39646),x=o(11365),p=o(71884),A=o(66769),d=o(78488),e=o(5e3),G=o(13302),R=o(48966),y=o(69808),J=o(96298),Y=o(31495),z=o(57963),X=o(23322),j=o(1475),k=o(88634),V=o(65124),q=o(59864),ee=o(2620);function te(c,C){if(1&c&&e._UZ(0,"cw-countdown",24),2&c){const s=C.ngIf;e.Q6J("doubleDigits",!0)("dLabel","D ")("hLabel",":")("mLabel",":")("until",s)}}function oe(c,C){if(1&c&&(e.ynx(0),e.YNc(1,te,1,5,"cw-countdown",22),e.ALo(2,"asyncInner"),e._UZ(3,"img",23),e.BQk()),2&c){const s=e.oxw().$implicit,m=e.oxw(3);e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,m.teamEndAtObservables[s.team.id]))}}function ne(c,C){if(1&c&&(e.ynx(0),e._UZ(1,"img",18),e.ALo(2,"seasonalBranding"),e.TgZ(3,"div",28),e.TgZ(4,"div",29),e._uU(5),e.qZA(),e.TgZ(6,"div",30),e.SDv(7,31),e.qZA(),e.qZA(),e.BQk()),2&c){const s=e.oxw().ngIf;e.xp6(1),e.Q6J("src",e.lcZ(2,2,"assets/gemstone/gem-boost.svg"),e.LSH),e.xp6(4),e.hij("",s.activeBoost.amountMultiplier,"X")}}function se(c,C){if(1&c&&(e.TgZ(0,"div",32),e._UZ(1,"img",33),e.ALo(2,"seasonalBranding"),e.TgZ(3,"div",34,35),e.ALo(5,"pureFunction"),e._UZ(6,"img",18),e.ALo(7,"seasonalBranding"),e.qZA(),e.qZA(),e.TgZ(8,"span",28),e._uU(9),e.ALo(10,"number"),e.qZA()),2&c){const s=e.MAs(4),m=e.oxw().ngIf,r=e.oxw(4);e.xp6(1),e.Q6J("src",e.lcZ(2,4,"assets/gemstone/gem-bg.svg"),e.LSH),e.xp6(2),e.Q6J("ngStyle",e.gM2(5,6,r.getProgress,m.percent,s.clientWidth,s.clientHeight)),e.xp6(3),e.Q6J("src",e.lcZ(7,11,"assets/gemstone/gem.svg"),e.LSH),e.xp6(3),e.hij("",e.xi3(10,13,m.percent,"1.0-0"),"%")}}function ae(c,C){if(1&c&&(e.TgZ(0,"div",25),e.YNc(1,ne,8,4,"ng-container",26),e.YNc(2,se,11,16,"ng-template",null,27,e.W1O),e.qZA()),2&c){const s=C.ngIf,m=e.MAs(3);e.Udp("gap",s.activeBoost?"":"0.5rem"),e.xp6(1),e.Q6J("ngIf",s.activeBoost)("ngIfElse",m)}}const ie=function(c,C){return{percent:c,activeBoost:C}};function _e(c,C){if(1&c){const s=e.EpF();e.TgZ(0,"div",10),e.NdJ("mouseenter",function(){const T=e.CHM(s).$implicit;return e.oxw(3).hovered.next(T.team.id)})("mouseleave",function(){return e.CHM(s),e.oxw(3).hovered.next()}),e.TgZ(1,"div",11),e.ALo(2,"asyncInner"),e.TgZ(3,"img",12),e.ALo(4,"async"),e.qZA(),e.YNc(5,oe,4,3,"ng-container",0),e.ALo(6,"async"),e.YNc(7,ae,4,4,"div",13),e.ALo(8,"async"),e.TgZ(9,"div",14),e._uU(10),e.ALo(11,"number"),e.ALo(12,"asyncInner"),e.ALo(13,"ticker"),e.qZA(),e.TgZ(14,"div",15),e._uU(15),e.ALo(16,"number"),e.qZA(),e.qZA(),e.TgZ(17,"div",16),e.ALo(18,"asyncInner"),e.TgZ(19,"div",17),e._UZ(20,"img",18),e.ALo(21,"seasonalBranding"),e.TgZ(22,"span",19),e._uU(23),e.ALo(24,"number"),e.qZA(),e.qZA(),e.TgZ(25,"div",20),e.TgZ(26,"div"),e._uU(27),e.ALo(28,"number"),e.qZA(),e.TgZ(29,"div",21),e._uU(30,"until Boost"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&c){const s=C.$implicit,m=e.oxw(3);e.xp6(1),e.ekj("d-flex",e.lcZ(2,15,m.hovered$)!==s.team.id),e.xp6(2),e.ekj("team-boost",e.lcZ(4,17,m.teamActiveBoostObservables[s.team.id])),e.MGl("src","assets/teams/avatar/",s.team.id,".png",e.LSH),e.Q6J("title",s.team.name),e.xp6(2),e.Q6J("ngIf",e.lcZ(6,19,m.teamActiveBoostObservables[s.team.id])),e.xp6(2),e.Q6J("ngIf",e.WLB(44,ie,m.getTeamPercent(s),e.lcZ(8,21,m.teamActiveBoostObservables[s.team.id]))),e.xp6(3),e.hij(" ",e.xi3(11,23,e.lcZ(12,26,e.xi3(13,28,s.totalPoints,"gemstoneBoostInfo:totalPoints:teamId"+s.team.id)),"1.0-0")," "),e.xp6(5),e.hij(" of ",e.xi3(16,31,s.totalPoints-s.currentPoints+s.pointThreshold,"1.0-0")," "),e.xp6(2),e.ekj("d-flex",e.lcZ(18,34,m.hovered$)===s.team.id),e.xp6(3),e.Q6J("src",e.lcZ(21,36,"assets/gemstone/gem.svg"),e.LSH),e.xp6(3),e.Oqu(e.xi3(24,38,s.totalPoints,"1.0-0")),e.xp6(4),e.Oqu(e.xi3(28,41,m.getPointsUntilNextBoost(s),"1.0-0"))}}function re(c,C){if(1&c){const s=e.EpF();e.TgZ(0,"div",2),e.TgZ(1,"h6",3),e.TgZ(2,"div"),e.SDv(3,4),e.qZA(),e.TgZ(4,"span",5),e.NdJ("click",function(){return e.CHM(s),e.oxw(2).openHowItWorks()}),e.qZA(),e.TgZ(5,"div",6),e.TgZ(6,"cw-icon",7),e.NdJ("click",function(){return e.CHM(s),e.oxw(2).showShrinkedView(!0)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"div",8),e.YNc(8,_e,31,47,"div",9),e.qZA(),e.qZA()}if(2&c){const s=e.oxw().ngIf,m=e.oxw();e.xp6(3),e.pQV(m.gemstoneLabel),e.QtT(3),e.xp6(5),e.Q6J("ngForOf",s.teamsInfo)("ngForTrackBy",m.getByTeamId)}}function a(c,C){if(1&c&&(e._UZ(0,"cw-progress",46),e.ALo(1,"seasonalBranding")),2&c){const s=C.ngIf,m=e.oxw().ngIf,r=e.oxw(3);e.Q6J("total",100)("now",r.getTeamPercent(m))("showPin",!0)("pinImage",e.lcZ(1,5,"assets/gemstone/gem-boost.svg"))("text",s.amountMultiplier+"X")}}function g(c,C){if(1&c&&(e._UZ(0,"cw-progress",47),e.ALo(1,"seasonalBranding")),2&c){const s=e.oxw().ngIf,m=e.oxw(3);e.Q6J("total",100)("now",m.getTeamPercent(s))("showPin",!0)("pinImage",e.lcZ(1,4,"assets/gemstone/gem.svg"))}}function l(c,C){if(1&c&&e._UZ(0,"cw-countdown",48),2&c){const s=C.ngIf;e.Q6J("doubleDigits",!0)("dLabel","D ")("hLabel",":")("mLabel",":")("until",s)}}function E(c,C){1&c&&e._UZ(0,"img",23)}function F(c,C){if(1&c){const s=e.EpF();e.TgZ(0,"div",37),e.TgZ(1,"div",38),e.TgZ(2,"img",12),e.ALo(3,"async"),e.qZA(),e.YNc(4,a,2,7,"cw-progress",39),e.ALo(5,"async"),e.YNc(6,g,2,6,"ng-template",null,40,e.W1O),e.TgZ(8,"div",41),e.TgZ(9,"div",42),e.ALo(10,"async"),e._uU(11),e.qZA(),e.YNc(12,l,1,5,"cw-countdown",43),e.ALo(13,"asyncInner"),e.YNc(14,E,1,0,"img",44),e.ALo(15,"async"),e.qZA(),e.qZA(),e.TgZ(16,"cw-icon",45),e.NdJ("click",function(){return e.CHM(s),e.oxw(3).showShrinkedView(!1)}),e.qZA(),e.qZA()}if(2&c){const s=C.ngIf,m=e.MAs(7),r=e.oxw(3);e.xp6(2),e.ekj("team-boost",e.lcZ(3,11,r.teamActiveBoostObservables[s.team.id])),e.MGl("src","assets/teams/avatar/",s.team.id,".png",e.LSH),e.Q6J("title",s.team.name),e.xp6(2),e.Q6J("ngIf",e.lcZ(5,13,r.teamActiveBoostObservables[s.team.id]))("ngIfElse",m),e.xp6(5),e.ekj("team-boost",e.lcZ(10,15,r.teamActiveBoostObservables[s.team.id])),e.xp6(2),e.hij(" ",r.getTeamPercent(s),"% "),e.xp6(1),e.Q6J("ngIf",e.lcZ(13,17,r.teamEndAtObservables[s.team.id])),e.xp6(2),e.Q6J("ngIf",e.lcZ(15,19,r.teamActiveBoostObservables[s.team.id]))}}function Z(c,C){if(1&c&&(e.ynx(0),e.YNc(1,F,17,21,"div",36),e.ALo(2,"async"),e.BQk()),2&c){const s=e.oxw(2);e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,s.userTeamInfo$))}}function U(c,C){if(1&c&&(e.ynx(0),e.YNc(1,re,9,3,"div",1),e.ALo(2,"asyncInner"),e.ALo(3,"asyncInner"),e.YNc(4,Z,3,3,"ng-container",0),e.ALo(5,"asyncInner"),e.ALo(6,"asyncInner"),e.BQk()),2&c){const s=e.oxw();e.xp6(1),e.Q6J("ngIf",e.lcZ(2,2,s.showView$)&&!e.lcZ(3,4,s.showShrinkedView$)),e.xp6(3),e.Q6J("ngIf",e.lcZ(5,6,s.showView$)&&e.lcZ(6,8,s.showShrinkedView$))}}let w=(()=>{class c{constructor(s,m,r,T,L,P,B){var Q;this.apollo=s,this.dialog=m,this.appConfig=r,this.localStorage=T,this.settingService=L,this.teamService=P,this.userService=B,this.subscription=new v.w0,this.showShrinkedViewChange=new t.x,this.teamActiveBoostObservables={},this.teamEndAtObservables={},this.showShrinkedView$=this.showShrinkedViewChange.asObservable().pipe((0,M.O)("true"===this.localStorage.get(n.F.GEMSTONE_BOOST_INFO_SHRINKED))),this.hovered=new t.x,this.hovered$=this.hovered.asObservable().pipe((0,M.O)("")),this.gemstoneLabel=(null===(Q=this.appConfig.gemstones)||void 0===Q?void 0:Q.label)||"Gemstone"}ngOnInit(){this.gemstoneBoostInfo$=this.teamService.teams$.pipe((0,u.h)(s=>!!s),(0,I.q)(1),(0,h.w)(s=>{this.gemstoneBoostInfoQueryRef=this.apollo.watchQuery({query:A.Ws,variables:{teamIds:s.map(r=>r.id),walletType:S.w.GEMSTONE}});const m=this.gemstoneBoostInfoQueryRef.subscribeToMore({document:A.CO,updateQuery:(r,{subscriptionData:T})=>{var L,P,B,Q;if(!T.data)return r;const K=T.data.updateGemstoneBoostInfo.gemstoneBoostInfo;if(K.gemstoneBoost&&K.gemstoneBoost.id<(null===(L=r.gemstoneBoostInfo.gemstoneBoost)||void 0===L?void 0:L.id)&&(null===(P=r.gemstoneBoostInfo.gemstoneBoost)||void 0===P?void 0:P.status)===_.ENABLED||K.gemstoneBoost&&K.gemstoneBoost.id>(null===(B=r.gemstoneBoostInfo.gemstoneBoost)||void 0===B?void 0:B.id)&&(null===(Q=K.gemstoneBoost)||void 0===Q?void 0:Q.status)===_.DISABLED)return r;const me=K.userInfo?Object.assign(Object.assign({},r.gemstoneBoostInfo.userInfo),K.userInfo):null,ge=r.gemstoneBoostInfo.teamsInfo.map(ce=>{const le=K.teamsInfo.find(pe=>pe.team.id===ce.team.id);return le?Object.assign(Object.assign({},ce),le):ce}),de=Object.assign(Object.assign({},r.gemstoneBoostInfo.gemstoneBoost),K.gemstoneBoost);return Object.assign(Object.assign({},r),{gemstoneBoostInfo:Object.assign(Object.assign({},r.gemstoneBoostInfo),{gemstoneBoost:de,teamsInfo:ge,userInfo:me})})}});return this.subscription.add(m),(0,D.a)([this.gemstoneBoostInfoQueryRef.valueChanges,this.settingService.getSetting("maintenance:gemstone:boost")]).pipe((0,O.U)(([{data:r},T])=>(null==T?void 0:T.value)?null:r.gemstoneBoostInfo))}),(0,f.d)(1)),this.gemstoneBoostActivations$=this.teamService.teams$.pipe((0,u.h)(s=>!!s),(0,I.q)(1),(0,h.w)(s=>{this.activationsQueryRef=this.apollo.watchQuery({query:A.Xd,variables:{teamIds:s.map(r=>r.id),orderBy:"ID_DESC"}});const m=this.activationsQueryRef.subscribeToMore({document:A.ZU,updateQuery:(r,{subscriptionData:T})=>{if(!T.data)return r;const L={node:T.data.createGemstoneBoostActivation.gemstoneBoostActivation,__typename:"GemstoneBoostActivationEdge"};return Object.assign({},r,Object.assign(Object.assign({},r),{gemstoneBoostActivations:Object.assign(Object.assign({},r.gemstoneBoostActivations),{edges:[L,...r.gemstoneBoostActivations.edges]})}))}});return this.subscription.add(m),this.activationsQueryRef.valueChanges.pipe((0,h.w)(({data:r})=>{const T=r.gemstoneBoostActivations.edges.map(B=>B.node),L=new Date,P=T.map(B=>{if(!(new Date(B.startAt)<L))return(0,N.H)(new Date(B.startAt).getTime()-Date.now()).pipe((0,O.U)(()=>T))}).filter(B=>!!B);return(0,W.T)((0,$.of)(T),...P)}))}),(0,f.d)(1)),this.gemstoneBoostActivations$.pipe((0,x.M)(this.teamService.teams$),(0,I.q)(1)).subscribe(([s,m])=>{m.forEach(r=>{this.teamActiveBoostObservables[r.id]=this.getTeamActiveBoost(r.id),this.teamEndAtObservables[r.id]=this.getTeamActiveBoostEndAt(r.id)})}),this.showView$=this.gemstoneBoostInfo$.pipe((0,O.U)(s=>s.gemstoneBoost&&s.teamsInfo.length&&s.gemstoneBoost.status===_.ENABLED),(0,p.x)()),this.gemstoneBoostTeamsInfo$=this.gemstoneBoostInfo$.pipe((0,O.U)(s=>s.teamsInfo)),this.gemstoneBoostUserInfo$=this.gemstoneBoostInfo$.pipe((0,O.U)(s=>s.userInfo)),this.userTeamInfo$=this.gemstoneBoostTeamsInfo$.pipe((0,x.M)(this.userService.user$),(0,O.U)(([s,m])=>m?s.find(r=>{var T;return r.team.id===(null===(T=m.team)||void 0===T?void 0:T.id)}):s[0]))}ngOnDestroy(){this.subscription.unsubscribe()}openHowItWorks(){this.gemstoneBoostInfo$.pipe((0,I.q)(1)).subscribe(s=>{this.dialog.open(d.c).componentInstance.gemstoneBoost=s.gemstoneBoost})}getPointsUntilNextBoost(s){return s.pointThreshold-s.currentPoints}getTeamPercent(s){return Math.floor(s.totalPoints/(s.totalPoints-s.currentPoints+s.pointThreshold)*100)}getTeamActiveBoost(s){return this.gemstoneBoostActivations$.pipe((0,x.M)(this.gemstoneBoostInfo$),(0,h.w)(([m,r])=>{const T=new Date,L=m.find(P=>{var B;return(null===(B=r.gemstoneBoost)||void 0===B?void 0:B.id)===P.gemstoneBoostId&&P.teamId===s&&T>=new Date(P.startAt)&&T<=new Date(P.endAt)});return L?(0,W.T)((0,$.of)(L),(0,N.H)(new Date(L.endAt).valueOf()-Date.now()).pipe((0,O.U)(()=>null))):(0,$.of)(null)}),(0,f.d)(1))}getTeamActiveBoostEndAt(s){return this.gemstoneBoostActivations$.pipe((0,x.M)(this.teamActiveBoostObservables[s]),(0,O.U)(([m,r])=>{if(!r)return null;const T=m.filter(B=>B.gemstoneBoostId===r.gemstoneBoostId&&B.teamId===s).sort((B,Q)=>Q.endAt.localeCompare(B.endAt))[0],L=new Date,P=new Date(r.endAt);if(T&&new Date(T.startAt)>L){const B=new Date(T.endAt).valueOf()-P.valueOf();return P.setUTCMilliseconds(P.getUTCMilliseconds()+B),P}return P}))}getByTeamId(s,m){return m.team.id}getProgress(s,m,r){const L=r*(s=100-(0,i.uZ5)(s,0,100))/100;return{"clip-path":`path('M0,${L} C${m/2},${L-5} ${m/2},${L+5} ${m},${L} L ${m} ${r} L 0 ${r}, Z')`}}showShrinkedView(s){this.showShrinkedViewChange.next(s),this.localStorage.set(n.F.GEMSTONE_BOOST_INFO_SHRINKED,`${s}`)}}return c.\u0275fac=function(s){return new(s||c)(e.Y36(G._M),e.Y36(R.uw),e.Y36(i.qBz),e.Y36(i.Vtq),e.Y36(i.RCL),e.Y36(i.U1h),e.Y36(i.KDu))},c.\u0275cmp=e.Xpm({type:c,selectors:[["cw-gemstone-boost-info"]],decls:2,vars:3,consts:function(){let C,s;return C=$localize`:␟1dcf50ccb67ca894254ab6281c9d40d8054d957f␟2715464599848052006:${"\ufffd0\ufffd"}:INTERPOLATION: Boosts`,s=$localize`:␟51b8d6c6a653a9e44b009b1b3a401375ac668674␟858411970096763989:Boost!`,[[4,"ngIf"],["class","view",4,"ngIf"],[1,"view"],[1,"d-flex","flex-row","align-items-center",2,"gap","0.5rem"],C,["inlineSVG","assets/icons/info.svg",1,"softer","pointer",3,"click"],[1,"flex-grow-1","align-self-start","text-right"],["inlineSVG","assets/icons/close.svg",1,"softer","smaller","pointer",3,"click"],[1,"d-flex","flex-row","justify-content-center",2,"gap","0.25rem"],["class","team",3,"mouseenter","mouseleave",4,"ngFor","ngForOf","ngForTrackBy"],[1,"team",3,"mouseenter","mouseleave"],[1,"d-none","flex-column","align-items-center"],["loading","lazy",3,"src","title"],["class","d-flex flex-row align-items-center justify-content-center",3,"gap",4,"ngIf"],[1,"team-text","small","mt-1"],[1,"team-text","small","soft"],[1,"d-none","flex-column","align-items-center","justify-content-center","h-100"],[1,"mb-1"],[3,"src"],[1,"team-text","small","ml-2"],[1,"team-text","soft"],[1,"small"],["class","team-timer text-danger",3,"doubleDigits","dLabel","hLabel","mLabel","until",4,"ngIf"],["src","assets/gemstone/gem-fire.svg",1,"fire"],[1,"team-timer","text-danger",3,"doubleDigits","dLabel","hLabel","mLabel","until"],[1,"d-flex","flex-row","align-items-center","justify-content-center"],[4,"ngIf","ngIfElse"],["progress",""],[1,"team-text"],[1,"h5","m-0","team-text","big"],[1,"h6","m-0","team-text","team-boost"],s,[1,"position-relative"],[1,"position-absolute",3,"src"],[1,"gem-progress",3,"ngStyle"],["gemProgress",""],["class","view shrinked d-flex flex-row align-items-center",4,"ngIf"],[1,"view","shrinked","d-flex","flex-row","align-items-center"],[1,"user-team","flex-grow-1","d-flex","flex-row","align-items-center"],["class","team-boost flex-grow-1",3,"total","now","showPin","pinImage","text",4,"ngIf","ngIfElse"],["nonActive",""],[1,"position-relative","d-flex","flex-column","align-items-center"],[1,"team-text","smaller","line-height-1"],[3,"doubleDigits","dLabel","hLabel","mLabel","until",4,"ngIf"],["class","fire","src","assets/gemstone/gem-fire.svg",4,"ngIf"],["inlineSVG","assets/icons/chevron-down-solid.svg",1,"small","pointer","ml-1",3,"click"],[1,"team-boost","flex-grow-1",3,"total","now","showPin","pinImage","text"],[1,"flex-grow-1",3,"total","now","showPin","pinImage"],[3,"doubleDigits","dLabel","hLabel","mLabel","until"]]},template:function(s,m){1&s&&(e.YNc(0,U,7,10,"ng-container",0),e.ALo(1,"async")),2&s&&e.Q6J("ngIf",e.lcZ(1,1,m.gemstoneBoostInfo$))},directives:[y.O5,J.d$,Y.o,y.sg,z.M,y.PC,X.Zl,j.t],pipes:[y.Ov,k.d,y.JJ,V.t,q.A,ee.M],styles:["[_nghost-%COMP%]{--gemstone-boost-info-view-padding: .5rem;--gemstone-boost-countdown-font-family: monospace;--gemstone-boost-countdown-font-size: .5rem}.view[_ngcontent-%COMP%]{background:var(--gemstone-boost-info-view-background);padding:var(--gemstone-boost-info-view-padding);font-weight:600}.view.shrinked[_ngcontent-%COMP%]   .user-team[_ngcontent-%COMP%]{padding:.25rem .5rem;overflow:hidden}.view.shrinked[_ngcontent-%COMP%]   .fire[_ngcontent-%COMP%]{height:calc(150% + .5rem);bottom:calc(-50% + .25rem)}.view.shrinked[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:16px}img[_ngcontent-%COMP%]{object-fit:contain;height:30px;z-index:1}img.team-boost[_ngcontent-%COMP%]{border-radius:100%;box-shadow:0 0 4px #fdf5a799}.team[_ngcontent-%COMP%]{position:relative;background:var(--gemstone-boost-info-team-background);border-radius:6px;padding:.5rem;flex:0 0 33.333%;height:120px}.team-timer[_ngcontent-%COMP%]{position:absolute;top:0;right:var(--gemstone-boost-info-view-padding);z-index:2}cw-countdown[_ngcontent-%COMP%]{font-family:var(--gemstone-boost-countdown-font-family);font-size:var(--gemstone-boost-countdown-font-size);color:#fff;z-index:1}cw-countdown[_ngcontent-%COMP%]     .span{line-height:1}cw-countdown[_ngcontent-%COMP%]     .countdown-label{margin-right:0}.team-total[_ngcontent-%COMP%]{height:18px}.team-text[_ngcontent-%COMP%]{z-index:1;font-size:.75rem;font-weight:600;color:#fff}.team-text.team-boost[_ngcontent-%COMP%]{color:var(--gemstone-boost-active-color)}.soft[_ngcontent-%COMP%]{color:var(--gemstone-boost-info-soft-color)}.softer[_ngcontent-%COMP%]{color:var(--gemstone-boost-info-softer-color)}.big[_ngcontent-%COMP%]{font-size:1rem}.small[_ngcontent-%COMP%]{font-size:.75rem}.smaller[_ngcontent-%COMP%]{font-size:.625rem}.fire[_ngcontent-%COMP%]{position:absolute;bottom:0;margin:0 auto;height:73%;z-index:0}cw-progress[_ngcontent-%COMP%]{line-height:16px}cw-progress[_ngcontent-%COMP%]     .progress{height:8px;border-radius:6px}cw-progress[_ngcontent-%COMP%]     .progress-bar{background-image:linear-gradient(90deg,#b02c22 0%,#ff5548 100%);animation:1s ease-out 0s 1 progress-width;transition:transform .5s ease-in-out}cw-progress[_ngcontent-%COMP%]     .pin{top:-4px;height:16px}cw-progress.team-boost[_ngcontent-%COMP%]     .progress{background-color:#c9af5a}cw-progress.team-boost[_ngcontent-%COMP%]     .progress-bar{background-image:linear-gradient(90deg,#c6ac57 0%,#f9efa1 41%,#f9efa1 64%,#c6ac57 100%);box-shadow:0 0 4px #fdf5a799}cw-progress.team-boost[_ngcontent-%COMP%]     .pin{top:-8px;height:24px}cw-progress.team-boost[_ngcontent-%COMP%]     .text{top:-4px;left:4px;font-size:8px;color:#795511}.user-team[_ngcontent-%COMP%]{grid-gap:8px;gap:8px;border-radius:6px;background:var(--gemstone-boost-info-team-background)}"],changeDetection:0}),c})()},64440:(H,b,o)=>{o.d(b,{V:()=>I});var i=o(23600),n=o(5e3),_=o(48966),S=o(47423),v=o(31495),t=o(96298),M=o(76089),u=o(59864);let I=(()=>{class h{constructor(O){this.appConfig=O,this.prettyScrollbar=!0}}return h.\u0275fac=function(O){return new(O||h)(n.Y36(i.qBz))},h.\u0275cmp=n.Xpm({type:h,selectors:[["cw-gemstone-how-it-works-modal"]],hostVars:2,hostBindings:function(O,f){2&O&&n.ekj("pretty-scrollbar",f.prettyScrollbar)},decls:10,vars:4,consts:[["mat-dialog-title",""],["mat-icon-button","",1,"close",3,"mat-dialog-close"],["inlineSVG","assets/icons/close.svg"],[1,"content-wrapper"],[1,"gemstone-wrapper","mr-4"],[1,"gemstone",3,"src"],[1,"info"],["slug","gemstones-how-it-works"]],template:function(O,f){1&O&&(n.TgZ(0,"h2",0),n.TgZ(1,"button",1),n._UZ(2,"cw-icon",2),n.qZA(),n.qZA(),n.TgZ(3,"mat-dialog-content"),n.TgZ(4,"div",3),n.TgZ(5,"div",4),n._UZ(6,"img",5),n.ALo(7,"seasonalBranding"),n.qZA(),n.TgZ(8,"div",6),n._UZ(9,"cw-cms-embedded-copy",7),n.qZA(),n.qZA(),n.qZA()),2&O&&(n.xp6(1),n.Q6J("mat-dialog-close",!0),n.xp6(5),n.Q6J("src",n.lcZ(7,2,"/assets/gemstone/gemstone-jason.png"),n.LSH))},directives:[_.uh,S.lW,_.ZT,v.o,t.d$,_.xY,M.I],pipes:[u.A],styles:["@media (max-width: 767.98px){[_nghost-%COMP%]{height:100%}[_nghost-%COMP%]   .mat-dialog-content[_ngcontent-%COMP%]{max-height:unset;height:100%;overflow:hidden scroll}}.mat-dialog-title[_ngcontent-%COMP%]{margin-top:2.5rem}h4[_ngcontent-%COMP%]{display:flex;align-items:center;grid-gap:1rem;gap:1rem;color:#fff}.gemstone-wrapper[_ngcontent-%COMP%]{flex:1}.gemstone[_ngcontent-%COMP%]{width:100%;height:auto}.content-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;padding:0 1.5rem}@media (max-width: 767.98px){.content-wrapper[_ngcontent-%COMP%]{flex-direction:column}}.info[_ngcontent-%COMP%]{flex:2}.info[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:900;color:#00e258;margin-bottom:1.5rem}.info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.875rem;font-weight:400;line-height:1.688}.tile[_ngcontent-%COMP%]{cursor:pointer}.tile[_ngcontent-%COMP%]:hover{opacity:.9}@media (max-width: 767.98px){.close[_ngcontent-%COMP%]{margin:2rem .5rem}}"],changeDetection:0}),h})()},23142:(H,b,o)=>{o.d(b,{$:()=>n});var i=o(5e3);let n=(()=>{class _{transform(v,t){return v.filter(M=>M.box.slug===t)[0]}}return _.\u0275fac=function(v){return new(v||_)},_.\u0275pipe=i.Yjl({name:"gemstoneLeaderboardBoxPipe",type:_,pure:!0}),_})()},53511:(H,b,o)=>{o.d(b,{X:()=>re});var i=o(23600),n=o(93114),_=o(70653),S=o(54004),v=o(66769),t=o(5e3),M=o(13302),u=o(88279),I=o(69808),h=o(34875),D=o(89847),O=o(76688),f=o(35357),N=o(23142);function W(a,g){1&a&&t._UZ(0,"th",19)}function $(a,g){if(1&a&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&a){const l=g.$implicit;t.xp6(1),t.hij(" ",l.position," ")}}function x(a,g){1&a&&(t.TgZ(0,"th",21),t.SDv(1,22),t.qZA())}function p(a,g){if(1&a&&t._UZ(0,"cw-user-badge",25),2&a){const l=t.oxw().$implicit;t.Q6J("user",l.user)("showHorizontalAvatar",!0)("showProgress",!1)("showLevel",!1)}}function A(a,g){if(1&a&&(t.TgZ(0,"td",23),t.YNc(1,p,1,4,"cw-user-badge",24),t.qZA()),2&a){const l=g.$implicit;t.xp6(1),t.Q6J("ngIf",l.user)}}function d(a,g){1&a&&t._UZ(0,"th",26)}function e(a,g){if(1&a&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&a){const l=g.$implicit;t.xp6(1),t.hij(" ",null==l.user?null:l.user.name," ")}}function G(a,g){1&a&&(t.TgZ(0,"th",21),t.SDv(1,30),t.qZA())}function R(a,g){if(1&a&&t._UZ(0,"cw-pretty-balance",33),2&a){const l=t.oxw(3);t.Q6J("balance",l.appConfig.teams.leaderPrize)}}function y(a,g){if(1&a&&(t.TgZ(0,"td",31),t.YNc(1,R,1,1,"cw-pretty-balance",32),t.qZA()),2&a){const l=g.$implicit;t.xp6(1),t.Q6J("ngIf",1===l.position)}}function J(a,g){1&a&&(t.ynx(0,28),t.YNc(1,G,2,0,"th",5),t.YNc(2,y,2,1,"td",29),t.BQk())}function Y(a,g){1&a&&(t.TgZ(0,"th",21),t.SDv(1,34),t.qZA())}function z(a,g){if(1&a&&t._UZ(0,"cw-pretty-balance",33),2&a){const l=t.oxw().$implicit,E=t.oxw(2);t.Q6J("balance",E.appConfig.gemstones.topLeaderPrizes[l.position-1])}}function X(a,g){if(1&a&&(t.TgZ(0,"td",31),t.YNc(1,z,1,1,"cw-pretty-balance",32),t.qZA()),2&a){const l=g.$implicit,E=t.oxw(2);t.xp6(1),t.Q6J("ngIf",l.position<=E.appConfig.gemstones.topLeaderPrizes.length)}}function j(a,g){1&a&&(t.ynx(0,28),t.YNc(1,Y,2,0,"th",5),t.YNc(2,X,2,1,"td",29),t.BQk())}function k(a,g){1&a&&(t.TgZ(0,"th",35),t.SDv(1,36),t.qZA())}function V(a,g){if(1&a&&(t.TgZ(0,"td",37),t._UZ(1,"cw-gemstone-balance",33),t.qZA()),2&a){const l=g.$implicit;t.xp6(1),t.Q6J("balance",l.winAmount)}}function q(a,g){1&a&&(t.TgZ(0,"th",21),t.SDv(1,38),t.qZA())}function ee(a,g){if(1&a&&(t.TgZ(0,"td",39),t._UZ(1,"cw-gemstone-balance",33),t.qZA()),2&a){const l=g.$implicit;t.xp6(1),t.Q6J("balance",l.spent)}}const te=function(a,g){return["/boxes/view/",a,g]};function oe(a,g){if(1&a&&(t.TgZ(0,"th",21),t.tHW(1,42),t._UZ(2,"img",43),t.N_p(),t.qZA()),2&a){const l=t.oxw().$implicit;t.xp6(2),t.Q6J("src",l.iconUrl,t.LSH)("routerLink",t.WLB(2,te,l.market.slug,l.slug))}}function ne(a,g){if(1&a&&t._UZ(0,"cw-pretty-balance",47),2&a){const l=g.ngIf;t.Q6J("balance",l.winAmount)("currency",l.currency)}}function se(a,g){if(1&a&&(t.TgZ(0,"td",44),t.TgZ(1,"div",45),t.YNc(2,ne,1,2,"cw-pretty-balance",46),t.ALo(3,"gemstoneLeaderboardBoxPipe"),t.qZA(),t.qZA()),2&a){const l=g.$implicit,E=t.oxw().$implicit;t.xp6(2),t.Q6J("ngIf",t.xi3(3,1,l.boxes,E.slug))}}function ae(a,g){1&a&&(t.ynx(0,40),t.YNc(1,oe,3,5,"th",5),t.YNc(2,se,4,4,"td",41),t.BQk()),2&a&&t.Q6J("matColumnDef",g.$implicit.slug)}function ie(a,g){1&a&&t._UZ(0,"tr",48)}function _e(a,g){if(1&a&&t._UZ(0,"tr",49),2&a){const l=g.$implicit,E=t.oxw();t.ekj("myself",!!E.myItem&&E.myItem.userId===l.userId)}}let re=(()=>{class a extends((0,n.A)(n.t)){constructor(l,E){super(),this.appConfig=l,this.apollo=E,this.columns=["position","user","userName","prize","winAmount","spent"],this.boxes=[],this.tooltipText="How lucky a user was to receive Gems. 100% means they received as many as should be expected, 200% means they were super lucky and the RNG God is on their side!"}get teamId(){return this._teamId}set teamId(l){this._teamId=l,this.filter()}ngOnInit(){this.queryRef=this.apollo.watchQuery({query:v.bY,fetchPolicy:"cache-and-network",variables:this.getVariables()}),this.data$=this.queryRef.valueChanges.pipe((0,S.U)(({data:l})=>{var E;if(!l||!l.gemstoneGameLeaderboard)return[];const F=l.gemstoneGameLeaderboard.board.slice(0,50),{myItem:Z}=l.gemstoneGameLeaderboard;if(this.myItem=Z,F.forEach(U=>{!U||U.boxes.forEach(w=>{w.box.enabled&&!this.boxes.map(c=>c.slug).includes(w.box.slug)&&this.boxes.push(w.box)})}),this.boxes.forEach(U=>{this.columns.includes(U.slug)||this.columns.push(U.slug)}),Z&&this.teamId&&this.teamId===(null===(E=Z.user)||void 0===E?void 0:E.teamId)&&-1===F.findIndex(w=>w.userId===Z.userId)){const w=F.map(({position:c})=>c).reduce((c,C)=>Math.max(c,C));return[...F,Object.assign(Object.assign({},Z),{position:w+1})]}return F}))}filter(){!this.queryRef||this.queryRef.setVariables(this.getVariables())}getVariables(){var l,E,F,Z;return{limit:50,walletType:_.w.GEMSTONE,createdAtMinDate:null!==(E=null===(l=this.appConfig.gemstones)||void 0===l?void 0:l.minDate)&&void 0!==E?E:null,createdAtMaxDate:null!==(Z=null===(F=this.appConfig.gemstones)||void 0===F?void 0:F.maxDate)&&void 0!==Z?Z:null,teamId:this.teamId}}}return a.\u0275fac=function(l){return new(l||a)(t.Y36(i.qBz),t.Y36(M._M))},a.\u0275cmp=t.Xpm({type:a,selectors:[["cw-gemstone-leaderboard"]],inputs:{teamId:"teamId"},features:[t.qOj],decls:22,vars:9,consts:function(){let g,l,E,F,Z,U;return g=$localize`:␟31e56a2f712af52c9aa37878da61d3afeb3873f8␟1094126720610876136:Collector`,l=$localize`:␟fcb13f73ae556b7de8a2ed1b85486dd26838b8b4␟7956603970671173354:Prize`,E=$localize`:␟fcb13f73ae556b7de8a2ed1b85486dd26838b8b4␟7956603970671173354:Prize`,F=$localize`:␟c8eb3f4d32872a09eb1f67c7b7f45ef60f2e3a6d␟71313633147182790:Earned`,Z=$localize`:␟69fe8781a5e4efdbba54b73f9855377378c46a14␟5901651232151264423:Spent`,U=$localize`:␟37bcc9c58bb842df121295250030917670c93e4b␟3612179851917229868:${"\ufffd#2\ufffd\ufffd/#2\ufffd"}:TAG_IMG:`,[["mat-table","",1,"w-100","mt-4",3,"dataSource","trackBy"],["matColumnDef","position"],["mat-header-cell","","class","position-header",4,"matHeaderCellDef"],["mat-cell","","class","position-cell",4,"matCellDef"],["matColumnDef","user"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","userName"],["mat-header-cell","","class","xs-hide",4,"matHeaderCellDef"],["mat-cell","","class","user-name pl-2",4,"matCellDef"],["matColumnDef","prize",4,"ngIf"],["matColumnDef","winAmount"],["mat-header-cell","","class","score",4,"matHeaderCellDef"],["mat-cell","","class","score text-center px-2",4,"matCellDef"],["matColumnDef","spent"],["mat-cell","","class","spent text-center px-2",4,"matCellDef"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"myself",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"position-header"],["mat-cell","",1,"position-cell"],["mat-header-cell",""],g,["mat-cell",""],[3,"user","showHorizontalAvatar","showProgress","showLevel",4,"ngIf"],[3,"user","showHorizontalAvatar","showProgress","showLevel"],["mat-header-cell","",1,"xs-hide"],["mat-cell","",1,"user-name","pl-2"],["matColumnDef","prize"],["mat-cell","","class","prize text-center px-2",4,"matCellDef"],l,["mat-cell","",1,"prize","text-center","px-2"],[3,"balance",4,"ngIf"],[3,"balance"],E,["mat-header-cell","",1,"score"],F,["mat-cell","",1,"score","text-center","px-2"],Z,["mat-cell","",1,"spent","text-center","px-2"],[3,"matColumnDef"],["mat-cell","","class","boxes text-center",4,"matCellDef"],U,[1,"pointer","mx-2","my-1",3,"src","routerLink"],["mat-cell","",1,"boxes","text-center"],[1,"box-balance","px-2"],[3,"balance","currency",4,"ngIf"],[3,"balance","currency"],["mat-header-row",""],["mat-row",""]]},template:function(l,E){1&l&&(t.TgZ(0,"table",0),t.ALo(1,"async"),t.ynx(2,1),t.YNc(3,W,1,0,"th",2),t.YNc(4,$,2,1,"td",3),t.BQk(),t.ynx(5,4),t.YNc(6,x,2,0,"th",5),t.YNc(7,A,2,1,"td",6),t.BQk(),t.ynx(8,7),t.YNc(9,d,1,0,"th",8),t.YNc(10,e,2,1,"td",9),t.BQk(),t.YNc(11,J,3,0,"ng-container",10),t.YNc(12,j,3,0,"ng-container",10),t.ynx(13,11),t.YNc(14,k,2,0,"th",12),t.YNc(15,V,2,1,"td",13),t.BQk(),t.ynx(16,14),t.YNc(17,q,2,0,"th",5),t.YNc(18,ee,2,1,"td",15),t.BQk(),t.YNc(19,ae,3,1,"ng-container",16),t.YNc(20,ie,1,0,"tr",17),t.YNc(21,_e,1,2,"tr",18),t.qZA()),2&l&&(t.Q6J("dataSource",t.lcZ(1,7,E.data$))("trackBy",E.trackById),t.xp6(11),t.Q6J("ngIf",E.appConfig.teams.enabled&&E.appConfig.teams.leaderPrize),t.xp6(1),t.Q6J("ngIf",!E.appConfig.teams.enabled&&E.appConfig.gemstones.topLeaderPrizes),t.xp6(7),t.Q6J("ngForOf",E.boxes),t.xp6(1),t.Q6J("matHeaderRowDef",E.columns),t.xp6(1),t.Q6J("matRowDefColumns",E.columns))},directives:[u.BZ,u.w1,u.fO,u.Dz,I.O5,I.sg,u.as,u.nj,u.ge,u.ev,h.f,D.q,O.P,f.rH,u.XQ,u.Gk],pipes:[I.Ov,N.$],styles:["@media (max-width: 991.98px){[_nghost-%COMP%]   .mat-table[_ngcontent-%COMP%]{margin-right:calc(var(--horizontal-spacing) * -1);margin-left:calc(var(--horizontal-spacing) * -1);width:calc(100% + 2 * var(--horizontal-spacing))}}@media only screen and (max-width: 450px){[_nghost-%COMP%]   .xs-hide[_ngcontent-%COMP%], [_nghost-%COMP%]   .user-name[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .score[_ngcontent-%COMP%]{padding-left:0}[_nghost-%COMP%]   .boxes[_ngcontent-%COMP%]{display:none}}.mat-table[_ngcontent-%COMP%]{background:transparent}.mat-cell[_ngcontent-%COMP%]{height:80px;color:#fff;font-weight:600}.position-header[_ngcontent-%COMP%], .position-cell[_ngcontent-%COMP%]{text-align:center}.myself[_ngcontent-%COMP%]{background-color:var(--user-item-selected-background-color)}.mat-header-cell[_ngcontent-%COMP%]{background-color:#0003;border:none;text-transform:uppercase;text-align:center;text-shadow:1px 2px rgba(0,0,0,.35);font-size:.85rem;color:#fff}.mat-header-cell[_ngcontent-%COMP%]:first-child{border-radius:.625rem 0 0 .625rem}.mat-header-cell[_ngcontent-%COMP%]:last-child{border-radius:0 .625rem .625rem 0}.mat-header-cell[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:5rem}.box[_ngcontent-%COMP%]{display:inline-block}.box[_ngcontent-%COMP%]:not(:last-child){margin-right:1.25rem}.box[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:4rem;margin-right:.75rem;border-radius:50%}.box[_ngcontent-%COMP%] > .box-balance[_ngcontent-%COMP%]{display:inline-block;height:100%;vertical-align:middle}.luck[_ngcontent-%COMP%]    >.value{height:42px;display:flex;align-items:center}cw-user-badge[_ngcontent-%COMP%]     .avatar{transform:scale(1)!important}"],changeDetection:0}),a})()},8639:(H,b,o)=>{o.d(b,{S:()=>$});var i=o(67751),n=o(84528),_=o(75424),S=o(45990),f=(o(78488),o(2658),o(64440),o(23142),o(53511),o(63285),o(66754),o(53079),o(5e3));const N=[i.BoxSharedModule,n.Bt,_.SharedUserModule,S.vY];let $=(()=>{class x{}return x.\u0275fac=function(A){return new(A||x)},x.\u0275mod=f.oAB({type:x}),x.\u0275inj=f.cJS({imports:[N,i.BoxSharedModule,n.Bt,_.SharedUserModule,S.vY]}),x})()},63285:(H,b,o)=>{o.d(b,{B:()=>t});var i=o(5e3),n=o(69808),_=o(76688),S=o(71712);function v(M,u){if(1&M&&i._UZ(0,"cw-gemstone-balance",5),2&M){const I=i.oxw();i.Q6J("balance",I.team.totalGemstones)}}let t=(()=>{class M{constructor(){this.active=!1,this.showGemstones=!0}}return M.\u0275fac=function(I){return new(I||M)},M.\u0275cmp=i.Xpm({type:M,selectors:[["cw-gemstone-team"]],inputs:{team:"team",active:"active",showGemstones:"showGemstones"},decls:8,vars:8,consts:[[1,"team"],[1,"img","mb-3"],[1,"team-avatar"],[1,"name"],[3,"balance",4,"ngIf"],[3,"balance"]],template:function(I,h){1&I&&(i.TgZ(0,"div",0),i.TgZ(1,"div",1),i.TgZ(2,"div",2),i.ALo(3,"cssUrl"),i.qZA(),i.qZA(),i.TgZ(4,"div",3),i.TgZ(5,"h3"),i._uU(6),i.qZA(),i.YNc(7,v,1,1,"cw-gemstone-balance",4),i.qZA(),i.qZA()),2&I&&(i.ekj("active",h.active),i.xp6(2),i.Udp("background-image",i.lcZ(3,6,"assets/teams/"+h.team.id+".png")),i.xp6(4),i.Oqu(h.team.name),i.xp6(1),i.Q6J("ngIf",h.showGemstones))},directives:[n.O5,_.P],pipes:[S.u],styles:['.team[_ngcontent-%COMP%]{position:relative;padding:2rem 1rem 1rem;cursor:pointer;border-radius:12px;background:var(--gray-dark);border:2px solid transparent}.team[_ngcontent-%COMP%]:hover   .team-avatar[_ngcontent-%COMP%]{background-size:100%}.team.active[_ngcontent-%COMP%]{border-color:var(--accent-color)}.img[_ngcontent-%COMP%]{height:0;position:relative;padding-bottom:87.8481012658%}.img[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;right:0;bottom:0;left:0;background:linear-gradient(to top,var(--gray-dark),transparent 40%)}.team-avatar[_ngcontent-%COMP%]{position:absolute;top:0;right:0;bottom:0;left:0;background-position:center center;background-repeat:no-repeat;background-size:95%;transition:background-size .15s}.name[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;right:0;text-align:center;padding:1rem}h3[_ngcontent-%COMP%]{margin:0}'],changeDetection:0}),M})()},66754:(H,b,o)=>{o.d(b,{j:()=>h});var i=o(23600),n=o(9124),_=o(5e3),S=o(10217),v=o(69808),t=o(63285),M=o(53511);function u(D,O){if(1&D){const f=_.EpF();_.TgZ(0,"cw-gemstone-team",3),_.NdJ("click",function(){const $=_.CHM(f).$implicit;return _.oxw().select($)}),_.qZA()}if(2&D){const f=O.$implicit,N=_.oxw();_.Q6J("team",f)("active",N.selectedTeam===f)}}function I(D,O){if(1&D&&(_.TgZ(0,"div",4),_._UZ(1,"cw-gemstone-leaderboard",5),_.qZA()),2&D){const f=_.oxw();_.Q6J("@fadeInLeft",void 0),_.xp6(1),_.Q6J("teamId",f.selectedTeam.id)}}let h=(()=>{class D{constructor(f){this.teams$=f.teams$}get team(){return this._team}set team(f){this._team=f,this.selectedTeam=f}select(f){this.selectedTeam=f}}return D.\u0275fac=function(f){return new(f||D)(_.Y36(i.U1h))},D.\u0275cmp=_.Xpm({type:D,selectors:[["cw-gemstone-teams"]],inputs:{team:"team"},decls:4,vars:4,consts:[["gdGap","1rem","gdColumns","repeat(auto-fill, minmax(250px, 1fr))",1,"teams"],[3,"team","active","click",4,"ngFor","ngForOf"],["class","leaderboard",4,"ngIf"],[3,"team","active","click"],[1,"leaderboard"],[3,"teamId"]],template:function(f,N){1&f&&(_.TgZ(0,"section",0),_.YNc(1,u,1,2,"cw-gemstone-team",1),_.ALo(2,"async"),_.qZA(),_.YNc(3,I,2,2,"div",2)),2&f&&(_.xp6(1),_.Q6J("ngForOf",_.lcZ(2,2,N.teams$)),_.xp6(2),_.Q6J("ngIf",N.selectedTeam))},directives:[S.Gx,S.A0,v.sg,v.O5,t.B,M.X],pipes:[v.Ov],styles:[""],data:{animation:[(0,n.Sf)({anchor:"fadeInLeft",duration:750}),(0,n.ev)({anchor:"fadeInRight",duration:750})]},changeDetection:0}),D})()},53079:(H,b,o)=>{o.d(b,{h:()=>x});var i=o(23600),n=o(61135),_=o(95698),S=o(63900),v=o(28746),t=o(5e3),M=o(48966),u=o(10217),I=o(69808),h=o(47423),D=o(79586),O=o(63285),f=o(89847),N=o(20975);function W(p,A){if(1&p){const d=t.EpF();t.TgZ(0,"cw-gemstone-team",10),t.NdJ("click",function(){const R=t.CHM(d).$implicit;return t.oxw().select(R)}),t.qZA()}if(2&p){const d=A.$implicit,e=t.oxw();t.Q6J("team",d)("active",e.selectedTeam===d)("showGemstones",!1)}}function $(p,A){if(1&p&&(t.TgZ(0,"section",11),t.TgZ(1,"h3",12),t.SDv(2,13),t.qZA(),t.TgZ(3,"h4",14),t._UZ(4,"cw-pretty-balance",15),t.qZA(),t.TgZ(5,"p"),t._uU(6,"The top player from each team will receive the MVP Prize at the end of the week"),t.qZA(),t.qZA()),2&p){const d=t.oxw();t.xp6(4),t.Q6J("balance",d.appConfig.teams.leaderPrize)}}let x=(()=>{class p{constructor(d,e,G,R){this.appConfig=d,this.dialogRef=e,this.userService=G,this.loading$=new n.X(!1),this.teams$=R.teams$}select(d){this.selectedTeam=d}onConfirm(d){return this.loading$.next(!0),this.userService.userId$.pipe((0,_.q)(1),(0,S.w)(e=>this.userService.updateUser({userId:e,teamId:d.id})),(0,v.x)(()=>{this.loading$.next(!1),this.dialogRef.close()})).subscribe()}}return p.\u0275fac=function(d){return new(d||p)(t.Y36(i.qBz),t.Y36(M.so),t.Y36(i.KDu),t.Y36(i.U1h))},p.\u0275cmp=t.Xpm({type:p,selectors:[["cw-team-select-dialog"]],decls:14,vars:10,consts:function(){let A,d,e;return A=$localize`:␟0d06e94bc2e6a3bfbe619c7bd3b4947e2f931607␟6625710194550160724:Select a team`,d=$localize`:␟68e710782ccb5398b3acb8844caf0b199da2c3da␟9178182467454450952:Confirm`,e=$localize`:␟5d59a4621d0db3eccdddef84b118b93a12566235␟2296592663014682902:Weekly MVP Prize`,[["mat-dialog-title","",1,"text-center"],A,[1,"content-wrapper"],["gdGap","1rem","gdColumns","repeat(auto-fill, minmax(250px, 1fr))",1,"teams"],[3,"team","active","showGemstones","click",4,"ngFor","ngForOf"],["class","mvp-prize mt-4",4,"ngIf"],["align","center"],["type","button","mat-flat-button","","color","accent",1,"mat-button-3d",3,"disabled","click"],[3,"loading"],d,[3,"team","active","showGemstones","click"],[1,"mvp-prize","mt-4"],[1,"text-yellow","mb-0"],e,[1,"mb-0"],[3,"balance"]]},template:function(d,e){1&d&&(t.TgZ(0,"h4",0),t.SDv(1,1),t.qZA(),t.TgZ(2,"mat-dialog-content"),t.TgZ(3,"div",2),t.TgZ(4,"section",3),t.YNc(5,W,1,3,"cw-gemstone-team",4),t.ALo(6,"async"),t.qZA(),t.YNc(7,$,7,1,"section",5),t.qZA(),t.qZA(),t.TgZ(8,"mat-dialog-actions",6),t.TgZ(9,"button",7),t.NdJ("click",function(){return e.onConfirm(e.selectedTeam)}),t.ALo(10,"async"),t.TgZ(11,"cw-loader",8),t.SDv(12,9),t.ALo(13,"push"),t.qZA(),t.qZA(),t.qZA()),2&d&&(t.xp6(5),t.Q6J("ngForOf",t.lcZ(6,4,e.teams$)),t.xp6(2),t.Q6J("ngIf",e.appConfig.teams.leaderPrize),t.xp6(2),t.Q6J("disabled",!e.selectedTeam||!0===t.lcZ(10,6,e.loading$)),t.xp6(2),t.Q6J("loading",t.lcZ(13,8,e.loading$)))},directives:[M.uh,M.xY,u.Gx,u.A0,I.sg,I.O5,M.H8,h.lW,D.R,O.B,f.q],pipes:[I.Ov,N.f],styles:[".mvp-prize[_ngcontent-%COMP%]{text-align:center;color:#fff}.mvp-prize[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .mvp-prize[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{line-height:1.2}"],changeDetection:0}),p})()}}]);