"use strict";(self.webpackChunkcsgoroll=self.webpackChunkcsgoroll||[]).push([["default-libs_trade_src_lib_process_index_ts"],{49750:(Ie,ee,o)=>{o.d(ee,{H:()=>s,o:()=>e});var s=(()=>{return(l=s||(s={})).ID="ID",l.ID_DESC="ID_DESC",l.CREATED_AT="CREATED_AT",l.CREATED_AT_DESC="CREATED_AT_DESC",l.DEPOSIT_VALUE="DEPOSIT_VALUE",l.DEPOSIT_VALUE_DESC="DEPOSIT_VALUE_DESC",l.LOCK_EXPIRES_AT="LOCK_EXPIRES_AT",l.LOCK_EXPIRES_AT_DESC="LOCK_EXPIRES_AT_DESC",s;var l})(),e=(()=>{return(l=e||(e={})).CSGO="CSGO",l.DOTA2="DOTA2",l.H1Z1="H1Z1",l.PUBG="PUBG",l.RUST="RUST",l.STEAM="STEAM",e;var l})()},23086:(Ie,ee,o)=>{o.d(ee,{xU:()=>s,H5:()=>e,OC:()=>l,yL:()=>p});var s=(()=>{return(w=s||(s={})).ID="ID",w.ID_DESC="ID_DESC",w.CREATED_AT="CREATED_AT",w.CREATED_AT_DESC="CREATED_AT_DESC",w.VALUE="VALUE",w.VALUE_DESC="VALUE_DESC",w.UPDATED_AT="UPDATED_AT",w.UPDATED_AT_DESC="UPDATED_AT_DESC",s;var w})(),e=(()=>{return(w=e||(e={})).BEST_DEALS_ASC="BEST_DEALS_ASC",w.BEST_DEALS_DESC="BEST_DEALS_DESC",w.PRICE_ASC="PRICE_ASC",w.PRICE_DESC="PRICE_DESC",e;var w})(),l=(()=>{return(w=l||(l={})).COMPLETED="COMPLETED",w.DECLINED_AND_REFUNDED="DECLINED_AND_REFUNDED",w.EXCEPTION="EXCEPTION",w.PROCESSING="PROCESSING",w.SENT="SENT",w.WAITING="WAITING",w.WAITING_FOR_SELLER_CONFIRMATION="WAITING_FOR_SELLER_CONFIRMATION",l;var w})(),p=(()=>{return(w=p||(p={})).COMPLETED="COMPLETED",w.CREATED="CREATED",w.FAILED="FAILED",w.PROCESSING="PROCESSING",p;var w})()},6233:(Ie,ee,o)=>{o.d(ee,{Cn:()=>s.C,Fv:()=>e.F,rl:()=>y});var s=o(95871),e=o(65391),l=o(45990),p=o(5e3);const w=[l.vY];let y=(()=>{class P{}return P.\u0275fac=function(R){return new(R||P)},P.\u0275mod=p.oAB({type:P}),P.\u0275inj=p.cJS({imports:[w,l.vY]}),P})()},95871:(Ie,ee,o)=>{o.d(ee,{C:()=>I});var s=o(70655),e=o(5e3),l=o(93075),p=o(44987),w=o(13302),c=o(39646),y=o(70262),P=o(18505);const R=o(39478).Ps`
  mutation ChangeSteamApiKey($input: UpdateUserInput!) {
    updateUser(input: $input) {
      user {
        id
        steamApiKey
      }
    }
  }
`;var W,L=o(69808),S=o(67322),J=o(98833),_=o(77093),b=o(30446),v=o(47423),Y=o(79586);function U(f,E){if(1&f&&(e.TgZ(0,"div",9),e.TgZ(1,"button",10),e.TgZ(2,"cw-loader",11),e.SDv(3,12),e.qZA(),e.qZA(),e.qZA()),2&f){const M=e.oxw(2);e.xp6(1),e.Q6J("disabled",M.saving),e.xp6(1),e.Q6J("loading",M.saving)}}function D(f,E){if(1&f){const M=e.EpF();e.TgZ(0,"form",2),e.NdJ("ngSubmit",function(){return e.CHM(M),e.oxw().onSubmit()}),e.TgZ(1,"mat-form-field",3),e.TgZ(2,"mat-label"),e.SDv(3,4),e.qZA(),e._UZ(4,"input",5),e.YNc(5,U,4,2,"div",6),e.TgZ(6,"mat-hint"),e.TgZ(7,"a",7),e._uU(8,"You can create it here."),e.qZA(),e.qZA(),e.TgZ(9,"mat-error"),e._UZ(10,"cw-form-errors",8),e.qZA(),e.qZA(),e.qZA()}if(2&f){const M=e.oxw();e.Q6J("formGroup",M.form),e.xp6(4),e.uIk("disabled",M.saving?"":null),e.xp6(1),e.Q6J("ngIf",M.showConfirmButton),e.xp6(5),e.Q6J("control",M.form.get("steamApiKey"))("errors",M.form.get("steamApiKey").errors)("show",!0)}}function O(f,E){if(1&f){const M=e.EpF();e.TgZ(0,"div",13),e.TgZ(1,"div",14),e._uU(2," Your current API key starts with "),e.TgZ(3,"strong"),e._uU(4),e.qZA(),e.qZA(),e.TgZ(5,"button",15),e.NdJ("click",function(){return e.CHM(M),e.oxw().onRevoke()}),e.TgZ(6,"cw-loader",11),e.SDv(7,16),e.qZA(),e.qZA(),e.qZA()}if(2&f){const M=e.oxw();e.xp6(4),e.Oqu(M.user.steamApiKey),e.xp6(1),e.Q6J("disabled",M.saving),e.xp6(1),e.Q6J("loading",M.saving)}}let I=W=class{constructor(E,M,ie){this.apollo=E,this.changeRef=M,this.fb=ie,this.saving=!1,this.showConfirmButton=!0,this.updated=new e.vpe}set user(E){this._user=E,this.setForm()}get user(){return this._user}ngOnInit(){var E,M;this.form=this.fb.group({userId:null===(E=this.user)||void 0===E?void 0:E.id,steamApiKey:[null===(M=this.user)||void 0===M?void 0:M.steamApiKey,[this.steamApiKeyValidator]]}),this.setForm()}mutateSteamApiKey(E,M=""){return this.apollo.mutate({mutation:R,variables:{input:{userId:E,steamApiKey:M}}})}onSubmit(E=!0){if(!this.form.valid)return(0,c.of)(!1);const M=this.getVariables(),{userId:ie,steamApiKey:de}=M;if(this.user.steamApiKey&&de===this.user.steamApiKey)return(0,c.of)(!0);if(!this.user.steamApiKey&&!de)return(0,c.of)(!1);this.saving=!0;const j=this.mutateSteamApiKey(ie,de).pipe((0,y.K)(()=>(0,c.of)(!1)),(0,p.t)(this),(0,P.b)(Ee=>{this.onSubmitEnd(!!Ee)}));return E?j.subscribe():j}onRevoke(){this.form.patchValue({steamApiKey:""}),this.onSubmit()}getVariables(){const E=this.form.getRawValue();return Object.assign(Object.assign({},E),{steamApiKey:E.steamApiKey})}setForm(){this.form&&this.user&&this.form.patchValue({userId:this.user.id,steamApiKey:this.user.steamApiKey})}onSubmitEnd(E){this.saving=!1,this.changeRef.markForCheck(),this.updated.next(E)}steamApiKeyValidator(E){return!E.value||W.steamApiKeyRegex.test(E.value)?null:{steamApiKeyError:`${E.value} is not a valid Steam API Key`}}};I.steamApiKeyRegex=/^(\w{32})$/,I.\u0275fac=function(E){return new(E||I)(e.Y36(w._M),e.Y36(e.sBO),e.Y36(l.qu))},I.\u0275cmp=e.Xpm({type:I,selectors:[["cw-steam-api-key-edit-form"]],inputs:{user:"user",saving:"saving",showConfirmButton:"showConfirmButton"},outputs:{updated:"updated"},decls:2,vars:2,consts:function(){let f,E,M,ie;return f=$localize`:␟f6221615871510acb5bba32a5b1eb832dc8108d8␟5558215238788871479:Steam API Key`,E=$localize`:␟acc4d78247b4526c383e4a6ffa7c48d9894c373a␟4781059280670502995:API Key: e.g. FE430948C76487F26...`,M=$localize`:␟68e710782ccb5398b3acb8844caf0b199da2c3da␟9178182467454450952:Confirm`,ie=$localize`:␟53ea2772322e7d4d21515bb0c6dead283f8e18a5␟135077277733987408:Revoke`,[["novalidate","",3,"formGroup","ngSubmit",4,"ngIf"],["class","w-100","fxLayout","row wrap","fxLayoutAlign","start center",4,"ngIf"],["novalidate","",3,"formGroup","ngSubmit"],[1,"w-100"],f,["matInput","","type","search","autocomplete","off","formControlName","steamApiKey","fxFlex","","placeholder",E],["class","form-field-buttons",4,"ngIf"],["href","https://steamcommunity.com/dev/apikey","target","_blank","rel","noreferrer"],[1,"text-danger",3,"control","errors","show"],[1,"form-field-buttons"],["type","submit","mat-flat-button","","color","accent",3,"disabled"],[3,"loading"],M,["fxLayout","row wrap","fxLayoutAlign","start center",1,"w-100"],["fxFlex","",1,"message-block"],["type","button","fxFlex","nogrow","mat-flat-button","","color","accent",3,"disabled","click"],ie]},template:function(E,M){1&E&&(e.YNc(0,D,11,6,"form",0),e.YNc(1,O,8,3,"div",1)),2&E&&(e.Q6J("ngIf",!M.user.steamApiKey),e.xp6(1),e.Q6J("ngIf",M.user.steamApiKey))},directives:[L.O5,l._Y,l.JL,l.sg,S.KE,S.hX,J.Nt,l.Fj,l.JJ,l.u,_.yH,S.bx,S.TO,b.A,v.lW,Y.R,_.xw,_.Wh],styles:[".message-block[_ngcontent-%COMP%]{padding:.875rem 1.5rem;background:var(--item-bg);border-radius:.375rem;text-align:center}"],changeDetection:0}),I=W=(0,s.gn)([(0,p.c)(),(0,s.w6)("design:paramtypes",[w._M,e.sBO,l.qu])],I)},65391:(Ie,ee,o)=>{o.d(ee,{F:()=>U});var s=o(70655),e=o(5e3),l=o(93075),p=o(45990),w=o(44987),c=o(13302),y=o(39646),P=o(28746),F=o(18505);const L=o(39478).Ps`
  mutation ChangeSteamTradeUrl($input: UpdateUserInput!) {
    updateUser(input: $input) {
      user {
        id
        steamTradeUrl
      }
    }
  }
`;var S=o(67322),J=o(98833),_=o(77093),b=o(69808),v=o(47423),Y=o(79586);function W(D,O){if(1&D&&(e.TgZ(0,"div",6),e.TgZ(1,"button",7),e.TgZ(2,"cw-loader",8),e.SDv(3,9),e.qZA(),e.qZA(),e.qZA()),2&D){const I=e.oxw();e.xp6(1),e.Q6J("disabled",I.saving),e.xp6(1),e.Q6J("loading",I.saving)}}let U=class{constructor(O,I,f){this.apollo=O,this.fb=I,this.changeRef=f,this.steamTradeUrlRegex=/^https:\/\/steamcommunity\.com\/tradeoffer\/new\/\?partner=\d+&token=[\w-]+$/,this.showConfirmButton=!0,this.saving=!1,this.updated=new e.vpe,this.submitted=!1,this.form=this.fb.group({userId:"",steamTradeUrl:["",[p.WR,l.kI.pattern(this.steamTradeUrlRegex)]]})}set user(O){this._user=O,this.form.patchValue({userId:O.id,steamTradeUrl:O.steamTradeUrl})}get user(){return this._user}ngOnDestroy(){this.updated.complete()}mutateSteamTradeUrl(O,I){return this.apollo.mutate({mutation:L,variables:{input:{userId:O,steamTradeUrl:I}}})}onSubmit(O=!0){if(this.submitted=!0,!this.form.valid)return(0,y.of)(!1);const{userId:I,steamTradeUrl:f}=this.form.value;if(this.user.steamTradeUrl&&f===this.user.steamTradeUrl)return(0,y.of)(!0);if(!this.user.steamTradeUrl&&!f)return(0,y.of)(!1);this.saving=!0;const E=this.mutateSteamTradeUrl(I,f).pipe((0,P.x)(()=>{this.saving=!1,this.submitted=!1,this.changeRef.markForCheck()}),(0,w.t)(this),(0,F.b)(()=>this.updated.next()));return O?E.subscribe():E}};U.\u0275fac=function(O){return new(O||U)(e.Y36(c._M),e.Y36(l.qu),e.Y36(e.sBO))},U.\u0275cmp=e.Xpm({type:U,selectors:[["cw-steam-trade-url-edit-form"]],inputs:{showConfirmButton:"showConfirmButton",saving:"saving",user:"user"},outputs:{updated:"updated"},decls:9,vars:3,consts:function(){let D,O;return D=$localize`:␟db6a59d49a71fd05dfbf68f5f87f34e5b04c3970␟6534739768860899207:Steam trade URL`,O=$localize`:␟68e710782ccb5398b3acb8844caf0b199da2c3da␟9178182467454450952:Confirm`,[["novalidate","",3,"formGroup","ngSubmit"],[1,"w-100"],D,["matInput","","type","text","formControlName","steamTradeUrl","fxFlex",""],["class","form-field-buttons",4,"ngIf"],["href","https://steamcommunity.com/my/tradeoffers/privacy#trade_offer_access_url","target","_blank","rel","noreferrer"],[1,"form-field-buttons"],["type","submit","mat-flat-button","","color","accent",3,"disabled"],[3,"loading"],O]},template:function(O,I){1&O&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return I.onSubmit()}),e.TgZ(1,"mat-form-field",1),e.TgZ(2,"mat-label"),e.SDv(3,2),e.qZA(),e._UZ(4,"input",3),e.YNc(5,W,4,2,"div",4),e.TgZ(6,"mat-hint"),e.TgZ(7,"a",5),e._uU(8,"You can find it here. "),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&O&&(e.Q6J("formGroup",I.form),e.xp6(4),e.uIk("disabled",I.saving),e.xp6(1),e.Q6J("ngIf",I.showConfirmButton))},directives:[l._Y,l.JL,l.sg,S.KE,S.hX,J.Nt,l.Fj,l.JJ,l.u,_.yH,b.O5,S.bx,v.lW,Y.R],styles:[""],changeDetection:0}),U=(0,s.gn)([(0,w.c)(),(0,s.w6)("design:paramtypes",[c._M,l.qu,e.sBO])],U)},36603:(Ie,ee,o)=>{o.d(ee,{oz:()=>L}),o(85441),o(93900);var l=o(85899),p=o(99623),w=o(35588),c=o(45990),y=o(72201),P=o(5e3);const F=[c.vY,l.Cv,p.$M,y._4,w.KD];let L=(()=>{class S{}return S.\u0275fac=function(_){return new(_||S)},S.\u0275mod=P.oAB({type:S}),S.\u0275inj=P.cJS({imports:[F,c.vY,l.Cv,p.$M,y._4,w.KD]}),S})()},85441:(Ie,ee,o)=>{o.d(ee,{e:()=>$e});var Ke,s=o(70655),e=o(5e3),l=o(93075),p=o(23600),w=o(93114),c=o(62650),y=o(49750),P=o(44987),F=o(13302),R=o(61135),L=o(4707),S=o(54004),J=o(39300),_=o(94813),b=o(56451),v=o(68675),Y=o(78372),W=o(71884),U=o(39841),D=o(63900),O=o(70262),I=o(39646),f=o(18505),E=o(13099),M=o(11365),ie=o(34782),de=o(95698),j=o(41999),Ee=o(79586),ae=o(69808),N=o(43631),x=o(77093),G=o(23322),ne=o(67322),te=o(31495),Oe=o(96298),Re=o(98833),pe=o(32368),Me=o(966),be=o(89847),fe=o(74107),he=o(90508),gt=o(95149),it=o(46907),ue=o(9224),Ze=o(47423),nt=o(20975),_t=o(88634);const rt=["depletedTooltip"],mt=["notTradableTooltip"],St=["cantDepositTooltip"],It=["maxItemsSelectedTooltip"],Be=["allowSelectionRuleTooltip"];function Dt(K,$){1&K&&(e.TgZ(0,"mat-form-field",19),e.TgZ(1,"mat-label"),e.SDv(2,22),e.qZA(),e.TgZ(3,"mat-select",23),e.TgZ(4,"mat-option",24),e._uU(5,"CSGO"),e.qZA(),e.TgZ(6,"mat-option",25),e._uU(7,"DOTA2"),e.qZA(),e.qZA(),e.qZA())}function pt(K,$){if(1&K&&(e.ynx(0),e.TgZ(1,"form",8),e.TgZ(2,"div"),e.TgZ(3,"mat-form-field",9),e.TgZ(4,"mat-label"),e.tHW(5,10),e._UZ(6,"cw-icon",11),e.N_p(),e.qZA(),e._UZ(7,"input",12),e.qZA(),e.YNc(8,Dt,8,0,"mat-form-field",13),e.qZA(),e.TgZ(9,"div",14),e.TgZ(10,"mat-slide-toggle",15),e.SDv(11,16),e.ALo(12,"asyncInner"),e.qZA(),e.TgZ(13,"mat-slide-toggle",17),e.SDv(14,18),e.qZA(),e.qZA(),e.TgZ(15,"div",19),e.TgZ(16,"span",20),e._uU(17,"Valuation:"),e.qZA(),e._uU(18,"\xa0\xa0"),e._UZ(19,"cw-pretty-balance",21),e.ALo(20,"asyncInner"),e.ALo(21,"asyncInner"),e.qZA(),e.qZA(),e.BQk()),2&K){const B=e.oxw(),_e=e.MAs(26);e.xp6(1),e.Q6J("formGroup",B.form),e.xp6(7),e.Q6J("ngIf",!B.steamAppName),e.xp6(2),e.Q6J("ngbTooltip",e.lcZ(12,5,B.canDepositMoreThanOne$)?"":_e),e.xp6(9),e.Q6J("balance",e.lcZ(20,7,B.inventoryTotalValue$))("currency",e.lcZ(21,9,B.currency$))}}const st=function(K){return{$implicit:K}};function At(K,$){if(1&K&&(e.TgZ(0,"div",31,32),e.GkF(2,33),e.qZA()),2&K){const B=$.ngIf;e.oxw(2);const _e=e.MAs(4);e.xp6(2),e.Q6J("ngTemplateOutlet",_e)("ngTemplateOutletContext",e.VKq(2,st,B))}}function ft(K,$){if(1&K&&(e.TgZ(0,"virtual-scroller",29,30),e.YNc(2,At,3,4,"div",27),e.qZA()),2&K){const B=e.MAs(1),_e=e.oxw().ngIf,Fe=e.oxw(2);e.Q6J("items",_e)("parentScroll",Fe.elementRef.nativeElement),e.xp6(2),e.Q6J("ngIf",B.viewPortItems)}}function xe(K,$){if(1&K&&(e.TgZ(0,"div",31),e.GkF(1,33),e.qZA()),2&K){const B=e.oxw().ngIf,_e=e.MAs(4);e.xp6(1),e.Q6J("ngTemplateOutlet",_e)("ngTemplateOutletContext",e.VKq(2,st,B))}}function Ct(K,$){if(1&K){const B=e.EpF();e.TgZ(0,"cw-item",35),e.NdJ("click",function(){const Ge=e.CHM(B).$implicit;return e.oxw(4).onSelectItem(Ge)}),e.ALo(1,"async"),e.ALo(2,"async"),e.qZA()}if(2&K){const B=$.$implicit,_e=e.oxw(4);e.Q6J("banned",!1)("ngbTooltip",_e.getTooltipTemplateRef(B))("itemVariant",B.itemVariant)("selected",e.lcZ(1,12,_e.isItemSelected(B)))("isDepleted",B.depleted)("selectable",_e.isItemSelectable(B)&&!(_e.isMaxAmountOfItemsSelected&&!e.lcZ(2,14,_e.isItemSelected(B))))("allowOverlay",!1)("userOwned",!0)("showDepositSpeed",!0)("rarityRadialBackground",!0)("hideImageBgIcon",!0)("cacheExpiration",B.cacheExpiration)}}function we(K,$){if(1&K&&e.YNc(0,Ct,3,16,"cw-item",34),2&K){const B=$.$implicit,_e=e.oxw(3);e.Q6J("ngForOf",B)("ngForTrackBy",_e.trackById)}}function Pe(K,$){1&K&&(e.TgZ(0,"p"),e._uU(1,"You have no items available."),e.qZA())}function Ne(K,$){if(1&K&&(e.ynx(0),e.YNc(1,ft,3,3,"virtual-scroller",26),e.YNc(2,xe,2,4,"div",27),e.YNc(3,we,1,2,"ng-template",null,28,e.W1O),e.YNc(5,Pe,2,0,"p",1),e.BQk()),2&K){const B=$.ngIf,_e=e.oxw(2);e.xp6(1),e.Q6J("ngIf",_e.useScrollContainer),e.xp6(1),e.Q6J("ngIf",!_e.useScrollContainer),e.xp6(3),e.Q6J("ngIf",0===B.length)}}function Rt(K,$){if(1&K&&(e.ynx(0),e.YNc(1,Ne,6,3,"ng-container",1),e.ALo(2,"asyncInner"),e.BQk()),2&K){const B=e.oxw();e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,B.inventorySelectableVariants$))}}function Ot(K,$){if(1&K&&(e.TgZ(0,"mat-card-footer"),e.TgZ(1,"a",39),e.SDv(2,40),e.qZA(),e.qZA()),2&K){const B=$.ngIf,_e=e.oxw(2);e.xp6(1),e.Q6J("href",_e.USER_STEAM_SETTINGS(B),e.LSH)}}function ve(K,$){if(1&K&&(e.ynx(0),e.TgZ(1,"mat-card",36),e.TgZ(2,"mat-card-header"),e.TgZ(3,"mat-card-title"),e.SDv(4,37),e.qZA(),e.qZA(),e.TgZ(5,"mat-card-content"),e.TgZ(6,"p"),e.SDv(7,38),e.qZA(),e.qZA(),e.YNc(8,Ot,3,1,"mat-card-footer",1),e.ALo(9,"asyncInner"),e.qZA(),e.BQk()),2&K){const B=e.oxw();e.xp6(8),e.Q6J("ngIf",e.lcZ(9,1,B.userSteamId$))}}function ht(K,$){1&K&&(e.ynx(0),e.TgZ(1,"mat-card",41),e.TgZ(2,"mat-card-header"),e.TgZ(3,"mat-card-title"),e.SDv(4,42),e.qZA(),e.qZA(),e.TgZ(5,"mat-card-content"),e.TgZ(6,"p"),e.SDv(7,43),e.qZA(),e.qZA(),e.qZA(),e.BQk())}function Pt(K,$){1&K&&(e.TgZ(0,"span"),e.SDv(1,44),e.qZA())}function ze(K,$){1&K&&(e.TgZ(0,"span"),e.SDv(1,45),e.qZA())}function qe(K,$){1&K&&(e.TgZ(0,"span"),e.SDv(1,46),e.qZA())}function lt(K,$){if(1&K&&(e.TgZ(0,"span"),e.SDv(1,47),e.qZA()),2&K){const B=e.oxw();e.xp6(1),e.pQV(B.maxItemsPerTrade),e.QtT(1)}}function ct(K,$){1&K&&(e.TgZ(0,"span"),e.SDv(1,48),e.qZA())}let $e=Ke=class extends((0,w.A)(w.t)){constructor($,B,_e,Fe,Ge,Le,h,A,u){super(),this.apollo=$,this.elementRef=B,this.fb=_e,this.appConfig=Fe,this.layoutService=Ge,this.localStorage=Le,this.tradeDialogService=h,this.tradeService=A,this.userService=u,this.useScrollContainer=!1,this.loading$=new R.X(!0),this.currency$=this.userService.currency$,this.canDepositVariant=this.tradeService.canDepositVariant.bind(this.tradeService),this.userId$=new L.t,this.maxItemsPerTrade=this.appConfig.trading.maxItems||50,this.canDepositMoreThanOne$=this.userService.hasTradeApiKeySet$.pipe((0,S.U)(X=>this.tradeService.canDepositMoreThanOne(X))),this.hasPublicInventory$=new R.X(!0),this.isSteamError$=new R.X(!1),this.USER_STEAM_SETTINGS=X=>`https://steamcommunity.com/profiles/${X}/edit/settings`,this.selectedItemVariants$=this.tradeService.selectedItemVariants$,this.totalValueDeposit$=this.tradeService.totalValueDeposit$,this.userSteamId$=u.user$.pipe((0,J.h)(X=>!!X),(0,_.j)("steamId"),(0,J.h)(X=>!!X)),this.form=this.fb.group({name:"",steamAppName:y.o.CSGO,showUnpopular:"false"!==this.localStorage.get(c.F.TRADE_DEPOSIT_SHOW_UNPOPULAR),selectAll:!1});const H=(0,b.T)(this.form.get("name").valueChanges,this.form.get("showUnpopular").valueChanges).pipe((0,v.O)(this.form.getRawValue()),(0,S.U)(()=>this.form.getRawValue()),(0,Y.b)(250));this.form.get("showUnpopular").valueChanges.pipe((0,P.t)(this)).subscribe(X=>this.localStorage.set(c.F.TRADE_DEPOSIT_SHOW_UNPOPULAR,`${X}`));const z=this.form.get("steamAppName"),oe=z.valueChanges.pipe((0,v.O)(z.value),(0,W.x)()),Q=(0,U.a)([this.userId$.pipe((0,W.x)()),oe]).pipe((0,D.w)(([X,re])=>{var se;const d=this.apollo.watchQuery({query:p.xme,fetchPolicy:"cache-and-network",variables:{steamAppName:re,userId:X}});return this.selected||null===(se=this.selectedCollection)||void 0===se||se.items$.pipe((0,P.t)(this)).subscribe(m=>this.selected=m),d.valueChanges.pipe((0,P.t)(this),(0,O.K)((m,g)=>(this.loading$.next(!1),m.message.includes(Ke.PRIVATE_INVENTORY_ERR_MESSAGE)?this.hasPublicInventory$.next(!1):m.message.includes(Ke.UNABLE_TO_GET_YOUR_STEAM_INVENTORY_ERR_MESSAGE)&&this.isSteamError$.next(!0),(0,I.of)({data:{inventoryItemVariants:{activeTradeItems:[],steamItems:[]}}}))),(0,f.b)(({loading:m})=>this.loading$.next(!!m)),(0,S.U)(({data:m})=>null==m?void 0:m.inventoryItemVariants),(0,J.h)(m=>!!m))}),(0,E.B)()),Z=Q.pipe((0,S.U)(X=>X.steamItems.map(re=>({itemVariant:re.itemVariant,depleted:!1,tradable:re.tradable,cacheExpiration:re.cacheExpiration}))));this.inventorySelectableVariants$=(0,U.a)([Z,this.tradeService.userDepositsActive$,H]).pipe((0,M.M)(this.selectedItemVariants$),(0,S.U)(([[X,re,se],d])=>{X.forEach(g=>{if(!g.tradable)return;const V=re.filter(De=>De.tradeItems.findIndex(ye=>ye.itemVariant.id===g.itemVariant.id)>-1).length,Te=X.filter(De=>De.depleted&&De.itemVariant.id===g.itemVariant.id).length;g.depleted=g.depleted?V>=Te:V>Te});const m=new RegExp(`.*${se.name.replace(/[\s,\*]/g,".*")}.*`,"i");return X.filter(g=>(se.showUnpopular||g.itemVariant.depositable)&&m.test(g.itemVariant.externalId)).sort((g,V)=>g.tradable&&!V.tradable?-1:1)}),(0,ie.d)({refCount:!0,bufferSize:1})),this.tradeService.minimumItemValueDeposit$.pipe((0,P.t)(this)).subscribe(X=>this.minimumItemValueDeposit=X),this.form.get("selectAll").valueChanges.pipe((0,Y.b)(200),(0,W.x)(),(0,P.t)(this)).subscribe(X=>{X&&this.allowSelectionRule()?this.inventorySelectableVariants$.pipe((0,de.q)(1)).subscribe(re=>{const se=re.filter(d=>this.isItemSelectable(d)).slice(0,this.maxItemsPerTrade);this.tradeService.inventoryCollection.set(se)}):this.tradeService.inventoryCollection.set([])}),this.inventoryTotalValue$=Q.pipe((0,M.M)(this.tradeService.minimumItemValueDeposit$),(0,S.U)(([X,re])=>X.steamItems.filter(se=>this.tradeService.canDepositVariant(se.itemVariant,re)).reduce((se,d)=>se+d.itemVariant.displayValue,0))),this.userService.hasTradeApiKeySet$.pipe((0,P.t)(this)).subscribe(X=>this.hasTradeApiKey=X),this.canDepositMoreThanOne$.pipe((0,P.t)(this)).subscribe(X=>{const re=this.form.get("selectAll");X&&re.disabled?re.enable():!X&&re.enabled&&re.disable()})}set userId($){this.userId$.next($)}get steamAppName(){return this._steamAppName}set steamAppName($){this._steamAppName=$,this.form.patchValue({steamAppName:$})}get isMaxAmountOfItemsSelected(){var $;return(null===($=this.selected)||void 0===$?void 0:$.length)>=this.maxItemsPerTrade}ngOnDestroy(){var $;null===($=this.selectedCollection)||void 0===$||$.clear()}onSelectItem($){var B;if(!this.selectedCollection||!this.isItemSelectable($)||(this.layoutService.openSidenavElementForMediaSize("gt-xs","trade"),$.customPrice=$.itemVariant.depositable?null:$.itemVariant.value,(null===(B=this.selected)||void 0===B?void 0:B.length)>=this.maxItemsPerTrade&&!this.selected.some(Fe=>Fe===$)))return;const _e=Fe=>this.tradeDialogService.openCloseSteamUrlDialog({hideTradeUrlSection:Fe});this.allowSelectionRule($)||this.userService.hasTradeUrlSet$.pipe((0,P.t)(this),(0,de.q)(1),(0,D.w)(Fe=>Fe?this.tradeDialogService.openSteamEnforceApiKeyDialog({mustSupplyAnAPIKey:!0,disableClose:!1}).pipe((0,f.b)(Ge=>{const{steamApiKeySubmitted:Le}=Ge||{steamApiKeySubmitted:!1};Le||this.selectedCollection.set([])})):_e(Fe))).subscribe(),this.selectedCollection.toggle($)}isItemSelected($){return this.selectedCollection?this.selectedCollection.items$.pipe((0,S.U)(B=>B.includes($))):(0,I.of)(!1)}isItemSelectable($){return!$.depleted&&$.tradable&&this.tradeService.canDepositVariant($.itemVariant,this.minimumItemValueDeposit)}getTooltipTemplateRef($){return $.depleted?this.depletedTooltip:this.tradeService.canDepositVariant($.itemVariant,this.minimumItemValueDeposit)?$.tradable?this.isMaxAmountOfItemsSelected&&!this.selected.some(B=>B===$)?this.maxItemsSelectedTooltip:this.allowSelectionRule($)?void 0:this.allowSelectionRuleTooltip:this.notTradableTooltip:this.cantDepositTooltip}allowSelectionRule($){var B;return this.tradeService.canDepositMoreThanOne(this.hasTradeApiKey)||!(null===(B=this.selected)||void 0===B?void 0:B.length)||$&&this.selected.some(_e=>_e===$)}};$e.PRIVATE_INVENTORY_ERR_MESSAGE="Unable to get inventory",$e.UNABLE_TO_GET_YOUR_STEAM_INVENTORY_ERR_MESSAGE="We were unable to get your Steam inventory",$e.\u0275fac=function($){return new($||$e)(e.Y36(F._M),e.Y36(e.SBq),e.Y36(l.qu),e.Y36(p.qBz),e.Y36(p.Pb3),e.Y36(p.Vtq),e.Y36(j.a),e.Y36(p.Xxg),e.Y36(p.KDu))},$e.\u0275cmp=e.Xpm({type:$e,selectors:[["cw-steam-inventory-search-grid"]],viewQuery:function($,B){if(1&$&&(e.Gf(rt,5),e.Gf(mt,5),e.Gf(St,5),e.Gf(It,5),e.Gf(Be,5)),2&$){let _e;e.iGM(_e=e.CRH())&&(B.depletedTooltip=_e.first),e.iGM(_e=e.CRH())&&(B.notTradableTooltip=_e.first),e.iGM(_e=e.CRH())&&(B.cantDepositTooltip=_e.first),e.iGM(_e=e.CRH())&&(B.maxItemsSelectedTooltip=_e.first),e.iGM(_e=e.CRH())&&(B.allowSelectionRuleTooltip=_e.first)}},inputs:{userId:"userId",steamAppName:"steamAppName",selectedCollection:"selectedCollection",useScrollContainer:"useScrollContainer"},features:[e.qOj],decls:27,vars:32,consts:function(){let K,$,B,_e,Fe,Ge,Le,h,A,u,H,z,oe,Q;return K=$localize`:␟7349f3032b3909797c00a1c8606d40982a51a8b3␟3157416199793851553:${"\ufffd#6\ufffd"}:START_TAG_CW_ICON:${"\ufffd/#6\ufffd"}:CLOSE_TAG_CW_ICON: Search `,$=$localize`:␟eb39f610d89e1a4f949e4110922d007e81b3eaa2␟5169595873368621054:Select/Unselect All`,B=$localize`:␟8395f50c3ded4fd074e148a2bf1f2e18e53cdd87␟1015186038239207016:Show Unpopular Items`,_e=$localize`:␟037a3df8427573a68a3af095c28803b64b55caa7␟482684328114111442:Steam App`,Fe=$localize`:␟7afbe83c54bfe82b111048da2fb36b303c4159f5␟4188596864287793790:Your inventory or profile is private`,Ge=$localize`:␟b4a92fe5dc934fffc339ac33fe96b060682ba6ee␟1356210696180382167:You need to set your profile and inventory to "Public" before you can make deposits.`,Le=$localize`:␟0f3295fe4f2c0bfca29928a633312498bd84e44d␟507880896090985380: Update settings `,h=$localize`:␟317d95beb978d7900528913632cf2fa886abb13c␟2073717894845571855:Unable to get Steam inventory`,A=$localize`:␟4bab07231bd41bb88178ecea287a3af7b173ab69␟4564359117116066310:Please try again later...`,u=$localize`:␟1e9db6f434a398558d8a63f05319aeeb6c92eac6␟8145783776058652743:You have already listed this item for deposit.`,H=$localize`:␟ce717844131398230176b7068d2d150aabe9509a␟208466934744764465:This item is not tradable.`,z=$localize`:␟cdd4067932f6d0553253137c6aff76639ce006f2␟5841510445313973129:Value of this item is too low.`,oe=$localize`:␟64a026e1771615e3457b15e2a9e1fbe8b1dd1a16␟4144463780003474231:Max amount of ${"\ufffd0\ufffd"}:INTERPOLATION: items already selected.`,Q=$localize`:␟972292ecfd42be97351c4949afdd1970b0ccc91a␟6936143921628891054:To deposit more than one item, please provide us Steam API Key`,[[1,"absolute",3,"loading","diameter","type"],[4,"ngIf"],[3,"tradesCount","totalValue","action"],["depletedTooltip",""],["notTradableTooltip",""],["cantDepositTooltip",""],["maxItemsSelectedTooltip",""],["allowSelectionRuleTooltip",""],["fxLayout","row wrap","fxLayoutAlign","space-between center","fxLayoutGap",".5rem","ngClass.lt-md","mb-3",3,"formGroup"],["fxFlex","nogrow","fxFlex.lt-md","1 1 calc(50% - 0.25rem)"],K,["inlineSVG","assets/icons/search.svg"],["matInput","","type","search","autocomplete","off","formControlName","name"],["class","ml-3","fxFlex","nogrow",4,"ngIf"],["fxFlex","noshrink","fxFlex.lt-md","1 1 calc(50% - 0.25rem)","fxFlexAlign","center","ngClass.gt-xs","text-right","ngClass.lt-md","text-left"],["formControlName","selectAll",1,"mr-2",3,"ngbTooltip"],$,["formControlName","showUnpopular"],B,["fxFlex","nogrow",1,"ml-3"],[1,"text-softer"],[3,"balance","currency"],_e,["formControlName","steamAppName"],["value","CSGO"],["value","DOTA2"],[3,"items","parentScroll",4,"ngIf"],["class","grid",4,"ngIf"],["grid",""],[3,"items","parentScroll"],["scroll",""],[1,"grid"],["container",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"banned","ngbTooltip","itemVariant","selected","isDepleted","selectable","allowOverlay","userOwned","showDepositSpeed","rarityRadialBackground","hideImageBgIcon","cacheExpiration","click",4,"ngFor","ngForOf","ngForTrackBy"],[3,"banned","ngbTooltip","itemVariant","selected","isDepleted","selectable","allowOverlay","userOwned","showDepositSpeed","rarityRadialBackground","hideImageBgIcon","cacheExpiration","click"],[1,"inventory-private-card"],Fe,Ge,["mat-flat-button","","color","accent","target","_blank","rel","noreferrer",1,"mat-button-3d",3,"href"],Le,[1,"steam-error-card"],h,A,u,H,z,oe,Q]},template:function($,B){1&$&&(e._UZ(0,"cw-loader",0),e.ALo(1,"push"),e.YNc(2,pt,22,11,"ng-container",1),e.ALo(3,"asyncInner"),e.ALo(4,"asyncInner"),e.ALo(5,"asyncInner"),e.YNc(6,Rt,3,3,"ng-container",1),e.ALo(7,"asyncInner"),e.YNc(8,ve,10,3,"ng-container",1),e.ALo(9,"asyncInner"),e.ALo(10,"asyncInner"),e.YNc(11,ht,8,0,"ng-container",1),e.ALo(12,"asyncInner"),e.ALo(13,"asyncInner"),e._UZ(14,"cw-trade-footer",2),e.ALo(15,"asyncInner"),e.ALo(16,"asyncInner"),e.YNc(17,Pt,2,0,"ng-template",null,3,e.W1O),e.YNc(19,ze,2,0,"ng-template",null,4,e.W1O),e.YNc(21,qe,2,0,"ng-template",null,5,e.W1O),e.YNc(23,lt,2,1,"ng-template",null,6,e.W1O),e.YNc(25,ct,2,0,"ng-template",null,7,e.W1O)),2&$&&(e.Q6J("loading",e.lcZ(1,10,B.loading$))("diameter",36)("type","view"),e.xp6(2),e.Q6J("ngIf",!1===e.lcZ(3,12,B.loading$)&&!1===e.lcZ(4,14,B.isSteamError$)&&e.lcZ(5,16,B.hasPublicInventory$)),e.xp6(4),e.Q6J("ngIf",!1===e.lcZ(7,18,B.isSteamError$)),e.xp6(2),e.Q6J("ngIf",!1===e.lcZ(9,20,B.loading$)&&!1===e.lcZ(10,22,B.hasPublicInventory$)),e.xp6(3),e.Q6J("ngIf",!1===e.lcZ(12,24,B.loading$)&&e.lcZ(13,26,B.isSteamError$)),e.xp6(3),e.Q6J("tradesCount",e.lcZ(15,28,B.selectedItemVariants$).length)("totalValue",e.lcZ(16,30,B.totalValueDeposit$))("action","Deposit"))},directives:[Ee.R,ae.O5,N.G,l._Y,l.JL,x.xw,x.Wh,x.SQ,G.oO,l.sg,ne.KE,x.yH,ne.hX,te.o,Oe.d$,Re.Nt,l.Fj,l.JJ,l.u,x.XD,pe.Rr,Me._L,be.q,fe.gD,he.ey,gt.Vw,ae.tP,ae.sg,it.P,ue.a8,ue.dk,ue.n5,ue.dn,ue.rt,Ze.zs],pipes:[nt.f,_t.d,ae.Ov],styles:[".no-scrollbar[_ngcontent-%COMP%]{scrollbar-width:none;-ms-overflow-style:none}.no-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}[_nghost-%COMP%]{position:relative;display:block;min-height:500px;scrollbar-width:none;-ms-overflow-style:none}[_nghost-%COMP%]::-webkit-scrollbar{display:none}[_nghost-%COMP%]   .steam-error-card[_ngcontent-%COMP%], [_nghost-%COMP%]   .inventory-private-card[_ngcontent-%COMP%]{max-width:550px;margin:0 auto}[_nghost-%COMP%]   .steam-error-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%], [_nghost-%COMP%]   .steam-error-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%], [_nghost-%COMP%]   .steam-error-card[_ngcontent-%COMP%]   mat-card-footer[_ngcontent-%COMP%], [_nghost-%COMP%]   .inventory-private-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%], [_nghost-%COMP%]   .inventory-private-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%], [_nghost-%COMP%]   .inventory-private-card[_ngcontent-%COMP%]   mat-card-footer[_ngcontent-%COMP%]{text-align:center}[_nghost-%COMP%]   .steam-error-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%], [_nghost-%COMP%]   .inventory-private-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#fff;text-transform:uppercase}[_nghost-%COMP%]   .steam-error-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]     .mat-card-header-text, [_nghost-%COMP%]   .inventory-private-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]     .mat-card-header-text{width:100%}[_nghost-%COMP%]   .steam-error-card[_ngcontent-%COMP%]   mat-card-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], [_nghost-%COMP%]   .inventory-private-card[_ngcontent-%COMP%]   mat-card-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-transform:capitalize;color:#000}cw-item[_ngcontent-%COMP%]:not(.selectable){opacity:.3}cw-item[_ngcontent-%COMP%]     img.background-img{left:10%;top:10%;width:80%;height:80%}.grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));grid-gap:1rem;gap:1rem}"],changeDetection:0}),$e=Ke=(0,s.gn)([(0,P.c)(),(0,s.w6)("design:paramtypes",[F._M,e.SBq,l.qu,Object,p.Pb3,p.Vtq,j.a,p.Xxg,p.KDu])],$e)},93900:(Ie,ee,o)=>{o.d(ee,{D:()=>Le});var s=o(70655),e=o(5e3),l=o(93075),p=o(23600),w=o(93114),c=o(69178),y=o(62650),P=o(49750),F=o(97443),R=o(23086),L=o(99623),S=o(72201),J=o(44987),_=o(13302),b=o(50727),v=o(61135),Y=o(68675),W=o(71884),U=o(39841),D=o(35684),O=o(78372),I=o(63900),f=o(54004),E=o(39646),M=o(34782),ie=o(18505),de=o(56451),j=o(54968),Ee=o(95698),ae=o(39300),N=o(66026),x=(()=>{return(h=x||(x={}))[h.TRADE=0]="TRADE",h[h.ITEM_VARIANT=1]="ITEM_VARIANT",h[h.WAX_PEER_ITEM=2]="WAX_PEER_ITEM",x;var h})();const G=[R.H5.BEST_DEALS_ASC,R.H5.BEST_DEALS_DESC];function ne(h){switch(h){case c.j.ID:case c.j.CREATED_AT:return"ID";case c.j.ID_DESC:case c.j.CREATED_AT_DESC:return"ID_DESC";case c.j.VALUE:return"TOTAL_VALUE";case c.j.VALUE_DESC:return"TOTAL_VALUE_DESC";case c.j.UPDATED_AT:return"UPDATED_AT";case c.j.UPDATED_AT_DESC:return"UPDATED_AT_DESC";case c.j.AVAILABLE_ASSETS:case c.j.AVAILABLE_ASSETS_DESC:return"TOTAL_VALUE_DESC";case R.H5.BEST_DEALS_ASC:return"BEST_DEALS";default:return"TOTAL_VALUE_DESC"}}var Re=o(79586),pe=o(69808),Me=o(77093),be=o(67322),fe=o(31495),he=o(96298),gt=o(98833),it=o(74107),ue=o(90508),Ze=o(35502),nt=o(29598),_t=o(78029),Ke=o(95149),rt=o(97550),mt=o(53409),St=o(34830),It=o(46907),Be=o(20975);function Dt(h,A){if(1&h&&(e.TgZ(0,"mat-option",20),e.SDv(1,21),e.qZA()),2&h){const u=A.$implicit;e.Q6J("value",u.value),e.xp6(1),e.pQV(u.text),e.QtT(1)}}function pt(h,A){if(1&h){const u=e.EpF();e.TgZ(0,"mat-form-field",4),e.TgZ(1,"mat-label"),e.SDv(2,17),e.qZA(),e.TgZ(3,"mat-select",18),e.NdJ("selectionChange",function(){return e.CHM(u),e.oxw(2).filterTrades()}),e.YNc(4,Dt,2,2,"mat-option",19),e.qZA(),e.qZA()}if(2&h){const u=e.oxw(2);e.xp6(4),e.Q6J("ngForOf",u.maxMarkupList)}}function st(h,A){if(1&h&&(e.TgZ(0,"mat-option",20),e.SDv(1,24),e.qZA()),2&h){const u=A.$implicit;e.Q6J("value",u),e.xp6(1),e.pQV(u),e.QtT(1)}}function At(h,A){if(1&h){const u=e.EpF();e.TgZ(0,"mat-form-field",4),e.TgZ(1,"mat-label"),e.SDv(2,22),e.qZA(),e.TgZ(3,"mat-select",23),e.NdJ("selectionChange",function(){return e.CHM(u),e.oxw(2).filterTrades()}),e.YNc(4,st,2,2,"mat-option",19),e.qZA(),e.qZA()}if(2&h){const u=e.oxw(2);e.xp6(4),e.Q6J("ngForOf",u.tradeStatusList)}}function ft(h,A){if(1&h){const u=e.EpF();e.ynx(0),e.TgZ(1,"cw-item-category-select",25),e.NdJ("selectionChange",function(){return e.CHM(u),e.oxw(2).filterItemVariants()}),e.qZA(),e.BQk()}if(2&h){const u=e.oxw(2);e.xp6(1),e.Q6J("ctrl",u.form.get("categoryId"))}}function xe(h,A){if(1&h){const u=e.EpF();e.TgZ(0,"div",26),e.TgZ(1,"cw-range-slider",27),e.NdJ("rangeChange",function(z){return e.CHM(u),e.oxw(2).priceRangeChange(z)}),e.qZA(),e.qZA()}if(2&h){const u=e.oxw(2);e.xp6(1),e.Q6J("min",u.minRange)("max",u.maxRange)("displayValues",!0)}}function Ct(h,A){1&h&&(e.ynx(0),e.TgZ(1,"mat-form-field",4),e.TgZ(2,"mat-label"),e.SDv(3,28),e.qZA(),e._UZ(4,"input",29),e.qZA(),e.TgZ(5,"mat-form-field",4),e.TgZ(6,"mat-label"),e.SDv(7,30),e.qZA(),e._UZ(8,"input",31),e.qZA(),e.BQk())}function we(h,A){if(1&h&&(e.ynx(0),e.TgZ(1,"mat-option",13),e.SDv(2,32),e.qZA(),e.TgZ(3,"mat-option",13),e.SDv(4,33),e.qZA(),e.BQk()),2&h){const u=e.oxw(2);e.xp6(1),e.Q6J("value",u.itemOrderBy.ID_DESC),e.xp6(2),e.Q6J("value",u.itemOrderBy.ID)}}function Pe(h,A){if(1&h&&(e.ynx(0),e.TgZ(1,"mat-option",13),e.SDv(2,34),e.qZA(),e.TgZ(3,"mat-option",13),e.SDv(4,35),e.qZA(),e.BQk()),2&h){const u=e.oxw(2);e.xp6(1),e.Q6J("value",u.itemOrderBy.AVAILABLE_ASSETS),e.xp6(2),e.Q6J("value",u.itemOrderBy.AVAILABLE_ASSETS_DESC)}}function Ne(h,A){if(1&h&&(e.ynx(0),e.TgZ(1,"mat-option",13),e.SDv(2,36),e.qZA(),e.BQk()),2&h){const u=e.oxw(2);e.xp6(1),e.Q6J("value",u.WaxPeerItemOrderBy.BEST_DEALS_ASC)}}function Rt(h,A){if(1&h){const u=e.EpF();e.TgZ(0,"div",37),e.TgZ(1,"mat-label",38),e.tHW(2,39),e._UZ(3,"small"),e.N_p(),e.qZA(),e.TgZ(4,"mat-slider",40),e.NdJ("input",function(z){return e.CHM(u),e.oxw(2).updateWaitTime(z)}),e.qZA(),e.TgZ(5,"mat-label",41),e.tHW(6,42),e._UZ(7,"small"),e.N_p(),e.qZA(),e.qZA()}if(2&h){const u=e.oxw(2);e.xp6(4),e.Q6J("min",0)("max",8)("displayWith",u.formatSliderLabel.bind(u))}}function Ot(h,A){if(1&h){const u=e.EpF();e.ynx(0),e.TgZ(1,"mat-form-field"),e.TgZ(2,"mat-label"),e.SDv(3,43),e.qZA(),e.TgZ(4,"mat-select",44),e.NdJ("selectionChange",function(){return e.CHM(u),e.oxw(2).filter()}),e.TgZ(5,"mat-option",13),e.SDv(6,45),e.qZA(),e.TgZ(7,"mat-option",13),e.SDv(8,46),e.qZA(),e.TgZ(9,"mat-option",13),e.SDv(10,47),e.qZA(),e.qZA(),e.qZA(),e.BQk()}2&h&&(e.xp6(5),e.Q6J("value",null),e.xp6(2),e.Q6J("value",!1),e.xp6(2),e.Q6J("value",!0))}const ve=function(h,A){return[h,A]};function ht(h,A){if(1&h&&(e.TgZ(0,"form",3),e.TgZ(1,"mat-form-field",4),e.TgZ(2,"mat-label"),e.tHW(3,5),e._UZ(4,"cw-icon",6),e.N_p(),e.qZA(),e._UZ(5,"input",7),e.qZA(),e._UZ(6,"br"),e.YNc(7,pt,5,1,"mat-form-field",8),e.YNc(8,At,5,1,"mat-form-field",8),e.YNc(9,ft,2,1,"ng-container",9),e.YNc(10,xe,2,3,"div",10),e.YNc(11,Ct,9,0,"ng-container",9),e.TgZ(12,"mat-form-field",4),e.TgZ(13,"mat-label"),e.SDv(14,11),e.qZA(),e.TgZ(15,"mat-select",12),e.TgZ(16,"mat-option",13),e.SDv(17,14),e.qZA(),e.TgZ(18,"mat-option",13),e.SDv(19,15),e.qZA(),e.YNc(20,we,5,2,"ng-container",9),e.YNc(21,Pe,5,2,"ng-container",9),e.YNc(22,Ne,3,1,"ng-container",9),e.qZA(),e.qZA(),e.YNc(23,Rt,8,3,"div",16),e.YNc(24,Ot,11,3,"ng-container",9),e.qZA()),2&h){const u=e.oxw();e.Q6J("formGroup",u.form),e.xp6(7),e.Q6J("ngIf",u.showMaxMarkupFilter()),e.xp6(1),e.Q6J("ngIf",u.showTradeStatusFilter()),e.xp6(1),e.Q6J("ngIf",u.showAdvancedFilters),e.xp6(1),e.Q6J("ngIf",u.showRangeSlider),e.xp6(1),e.Q6J("ngIf",!u.showRangeSlider),e.xp6(5),e.Q6J("value",u.itemOrderBy.VALUE_DESC),e.xp6(2),e.Q6J("value",u.itemOrderBy.VALUE),e.xp6(2),e.Q6J("ngIf",u.showAdvancedFilters),e.xp6(1),e.Q6J("ngIf",u.showAvailableAssetesOrder()),e.xp6(1),e.Q6J("ngIf",u.showBestDealsFilter()),e.xp6(1),e.Q6J("ngIf",e.WLB(13,ve,u.WithdrawType.OUR_STOCK,u.WithdrawType.ALL).includes(u.form.get("withdrawType").value)),e.xp6(1),e.Q6J("ngIf",u.admin)}}function Pt(h,A){1&h&&e._UZ(0,"cw-loader",57),2&h&&e.Q6J("loading",!0)("type","view")}const ze=function(h){return{$implicit:h}};function qe(h,A){if(1&h){const u=e.EpF();e.TgZ(0,"virtual-scroller",51,52),e.NdJ("vsEnd",function(z){e.CHM(u);const oe=e.oxw().ngIf,Q=e.oxw();return z.endIndex===oe.length-1&&Q.fetchMore()}),e.TgZ(2,"div",53,54),e.GkF(4,55),e.YNc(5,Pt,1,2,"cw-loader",56),e.ALo(6,"push"),e.qZA(),e.qZA()}if(2&h){const u=e.MAs(1),H=e.oxw().ngIf,z=e.MAs(6),oe=e.oxw();e.Q6J("items",H)("parentScroll",oe.elementRef.nativeElement)("bufferAmount",5),e.xp6(4),e.Q6J("ngTemplateOutlet",z)("ngTemplateOutletContext",e.VKq(8,ze,u.viewPortItems)),e.xp6(1),e.Q6J("ngIf",e.lcZ(6,6,oe.fetchingMore$))}}function lt(h,A){1&h&&e._UZ(0,"cw-loader",61),2&h&&e.Q6J("loading",!0)}function ct(h,A){if(1&h){const u=e.EpF();e.TgZ(0,"section",59),e.NdJ("visibilityChange",function(){return e.CHM(u),e.oxw(3).fetchMore()}),e._uU(1," \xa0"),e.YNc(2,lt,1,1,"cw-loader",60),e.ALo(3,"push"),e._uU(4,"\xa0 "),e.qZA()}if(2&h){const u=e.oxw(3);e.Q6J("intersectionSkipNotVisible",!0),e.xp6(2),e.Q6J("ngIf",e.lcZ(3,2,u.fetchingMore$))}}function $e(h,A){if(1&h&&(e.TgZ(0,"div",53),e.GkF(1,55),e.YNc(2,ct,5,4,"section",58),e.ALo(3,"push"),e.ALo(4,"push"),e.qZA()),2&h){const u=e.oxw().ngIf,H=e.MAs(6),z=e.oxw();e.xp6(1),e.Q6J("ngTemplateOutlet",H)("ngTemplateOutletContext",e.VKq(7,ze,u)),e.xp6(1),e.Q6J("ngIf",!e.lcZ(3,3,z.loading$)||e.lcZ(4,5,z.fetchingMore$))}}function K(h,A){if(1&h){const u=e.EpF();e.TgZ(0,"cw-trade",66),e.NdJ("selectTrade",function(){e.CHM(u);const z=e.oxw().$implicit;return e.oxw(3).onSelectTrade(z.trade)})("click",function(){e.CHM(u);const z=e.oxw().$implicit;return e.oxw(3).onSelectTrade(z.trade)}),e.qZA()}if(2&h){const u=e.oxw().$implicit;e.Q6J("trade",u.trade)("selectable",!0)}}function $(h,A){if(1&h){const u=e.EpF();e.ynx(0),e.TgZ(1,"cw-exchange-item",67),e.NdJ("toggle",function(){return e.CHM(u),e.oxw(4).toggleExchangeItem()}),e.qZA(),e.TgZ(2,"div",68),e._uU(3,"\xa0"),e.qZA(),e.BQk()}if(2&h){const u=e.oxw().$implicit,H=e.oxw(3);e.xp6(1),e.Q6J("itemVariant",u.itemVariant)("selectedCollection",H.selectedItemVariantCollection)("showValue",H.showValue)}}function B(h,A){if(1&h){const u=e.EpF();e.ynx(0),e.TgZ(1,"cw-item",69),e.NdJ("click",function(){e.CHM(u);const z=e.oxw().$implicit;return e.oxw(3).onSelectWaxPeerItem(z.waxPeerItem)}),e.ALo(2,"push"),e.ALo(3,"async"),e.ALo(4,"number"),e.qZA(),e.TgZ(5,"div",68),e._uU(6,"\xa0"),e.qZA(),e.BQk()}if(2&h){const u=e.oxw().$implicit,H=e.oxw(3);e.xp6(1),e.Q6J("itemVariant",u.waxPeerItem.itemVariant)("selectable",!0)("allowOverlay",!1)("customPrice",H.isWaxPeerItemCustomPriced(u.waxPeerItem)?u.value:null)("customPriceShowDifference",e.lcZ(2,14,H.showItemPriceDifference$)||u.value-u.waxPeerItem.itemVariant.value<0)("tradeItem",!0)("selected",e.lcZ(3,16,H.isWaxPeerItemSelected(u.waxPeerItem)))("showStockDetails",!1)("showAvailableAtDetails",!0)("isTradeDeposited",!0)("showValue",H.showValue)("externalIconUrl",u.waxPeerItem.iconUrl)("externalColorTooltip",u.waxPeerItem.float?"Float: "+e.xi3(4,18,u.waxPeerItem.float,"1.2-8"):"Float not known")("banned",!1)}}function _e(h,A){if(1&h&&(e.TgZ(0,"div",63),e.YNc(1,K,1,2,"cw-trade",64),e.YNc(2,$,4,3,"ng-container",65),e.YNc(3,B,7,21,"ng-container",65),e.qZA()),2&h){const u=A.$implicit,H=e.oxw(3);e.Q6J("ngSwitch",u.type),e.xp6(1),e.Q6J("ngSwitchCase",H.DistinctType.TRADE),e.xp6(1),e.Q6J("ngSwitchCase",H.DistinctType.ITEM_VARIANT),e.xp6(1),e.Q6J("ngSwitchCase",H.DistinctType.WAX_PEER_ITEM)}}function Fe(h,A){if(1&h&&e.YNc(0,_e,4,4,"div",62),2&h){const u=A.$implicit,H=e.oxw(2);e.Q6J("ngForOf",u)("ngForTrackBy",H.trackById)}}function Ge(h,A){if(1&h&&(e.TgZ(0,"div"),e.ALo(1,"push"),e.ALo(2,"push"),e.YNc(3,qe,7,10,"virtual-scroller",48),e.YNc(4,$e,5,9,"div",49),e.YNc(5,Fe,1,2,"ng-template",null,50,e.W1O),e.qZA()),2&h){const u=e.oxw();e.ekj("d-none",e.lcZ(1,4,u.loading$)&&!e.lcZ(2,6,u.fetchingMore$)),e.xp6(3),e.Q6J("ngIf",u.useScrollContainer),e.xp6(1),e.Q6J("ngIf",!u.useScrollContainer)}}let Le=class extends((0,w.A)(w.t)){constructor(A,u,H,z,oe,Q,Z,X,re,se,d,m){super(),this.appConfig=A,this.apollo=u,this.elementRef=H,this.fb=z,this.soundService=oe,this.localStorage=Q,this.layoutService=Z,this.platformService=X,this.tradeService=re,this.itemService=se,this.userService=d,this.waxPeerTradeService=m,this._waxPeerItemsFrom=null,this.subscription=new b.w0,this.admin=!1,this.limit=50,this.valueMultiplier=1,this.disabled=!1,this.showFilters=!0,this.showAdvancedFilters=!1,this.showValue=!0,this.allowOverlay=!0,this.banned=!1,this.showStockDetails=!1,this.showAvailableAtDetails=!1,this.showRangeSlider=!1,this.includeAvailableAssetsOrder=!1,this.useScrollContainer=!1,this.canTradeMultiple=!1,this.fetchingMore$=new v.X(!1),this.tradeStatusList=(0,p.BF8)(),this.maxMarkupList=(0,p.EQx)(),this.itemOrderBy=c.j,this.DistinctType=x,this.WaxPeerItemOrderBy=R.H5,this.WithdrawType=N.o,this.defaultSort=c.j.VALUE_DESC}set steamAppName(A){!A||(this._steamAppName=A,this.form&&this.form.patchValue({steamAppName:A}))}set withdrawType(A){!A||(this._withdrawType=A,this.form&&this.form.patchValue({withdrawType:A}))}set user(A){this._user=A,this.form&&this.form.patchValue({marketId:A.market.id})}get user(){return this._user}ngOnInit(){this.form=this.fb.group({name:"",steamAppName:this._steamAppName,withdrawType:this._withdrawType,minValue:void 0,maxValue:void 0,orderBy:this.defaultSort,categoryId:"",banned:this.banned,marketId:"",tradeStatus:"LISTED",maxMarkupPercent:isNaN(parseInt(this.localStorage.getRaw(y.F.TRADE_WITHDRAW_MARKUP_PERCENT),10))?void 0:parseInt(this.localStorage.getRaw(y.F.TRADE_WITHDRAW_MARKUP_PERCENT),10),waitTimeInDays:isNaN(parseInt(this.localStorage.getRaw(y.F.TRADE_WITHDRAW_FILTERS),10))?8:this.localStorage.getRaw(y.F.TRADE_WITHDRAW_FILTERS)}),this.showCombinedLimit=this.limit,this.tradeDataSource=new p.g3E(this.apollo,{query:p.UvF,field:"trades",variables:this.getTradeVariables()}),this.subscribeToTrades(),this.itemDataSource=this.itemService.getDataSource(this.getItemVariables());const A=this.form.get("steamAppName").valueChanges.pipe((0,Y.O)(this._steamAppName),(0,W.x)()),u=this.form.get("withdrawType").valueChanges.pipe((0,Y.O)(this._withdrawType),(0,W.x)());(0,U.a)([A.pipe((0,D.T)(1)),u.pipe((0,D.T)(1))]).pipe((0,O.b)(0),(0,J.t)(this)).subscribe(()=>this.filter()),this.itemVariants$=(0,U.a)([A,u]).pipe((0,I.w)(([Z,X])=>[P.o.CSGO,P.o.DOTA2].includes(Z)&&[N.o.OUR_STOCK,N.o.ALL].includes(X)?this.itemDataSource.connect().pipe((0,f.U)(re=>this.itemService.flattenAvailableAssets(re)),(0,f.U)(re=>this.filterAndSortItemVariants(re))):(0,E.of)([])));const H=(0,U.a)([A,u]).pipe((0,I.w)(([Z,X])=>[P.o.CSGO,P.o.DOTA2].includes(Z)&&[N.o.P2P,N.o.ALL].includes(X)?this.tradeDataSource.connect().pipe((0,f.U)(re=>re.filter(se=>se.tradeItems.length))):(0,E.of)([])));this.trades$=(0,U.a)([H,this.tradeService.selectedTrades$,this.userService.userId$,this.userService.canTradeMultiple$,this.userService.suspectedTrader$,this.tradeService.maintenanceTradeEnabled$]).pipe((0,f.U)(([Z,X,re,se,d,m])=>{const g=(new Date).toISOString();let V=Z.filter(Te=>!X.includes(Te));return re&&(V=V.filter(Te=>{var De;return(null===(De=Te.depositor)||void 0===De?void 0:De.id)!==re&&(!d||Te.suspectedTraderCanJoinAfter.localeCompare(g)<0)})),se?V:m?V.filter(Te=>["API_KEY_DEPOSITOR"].includes(Te.trackingType)):V}),(0,f.U)(Z=>this.filterAndSortTrades(Z)),(0,M.d)({refCount:!0,bufferSize:1})),this.selectedWaxPeerItemCollection=this.waxPeerTradeService.selectedWaxPeerItemCollection,this.waxPeerItemDataSource=this.waxPeerTradeService.getItemsDataSource(this.getWaxPeerItemVariables()),this.waxPeerItemDopplerDataSource=this.waxPeerTradeService.getItemsDataSource({first:100,marketHashName:"Doppler",orderBy:R.H5.PRICE_DESC}),this.waxPeerItems$=(0,U.a)([A,u,this.waxPeerTradeService.maintainanceEnabled$]).pipe((0,I.w)(([Z,X,re])=>Z===P.o.CSGO&&[N.o.ALL,N.o.THIRD_PARTY].includes(X)&&!re?(0,U.a)([this.waxPeerItemDataSource.connect(),this.waxPeerItemDopplerDataSource.connect()]).pipe((0,ie.b)(([se,d])=>{var m;return this._waxPeerItemsFrom=null===(m=se[se.length-1])||void 0===m?void 0:m.value}),(0,f.U)(([se,d])=>{const m=se.map(Te=>Te.id),g=d.filter(Te=>m.findIndex(De=>Te.id===De)<0),V=this.getWaxPeerItemVariables();return this.waxPeerTradeService.sortWaxPeerItems(se,V.orderBy).concat(this.waxPeerTradeService.filterAndSortWaxPeerItems(g,V))})):(0,E.of)([])));const z=(0,U.a)([A,u]).pipe((0,I.w)(([Z,X])=>[P.o.CSGO,P.o.DOTA2].includes(Z)&&[N.o.P2P,N.o.ALL].includes(X)?this.tradeDataSource.loading$:(0,E.of)(!1))),oe=(0,U.a)([A,u]).pipe((0,I.w)(([Z,X])=>[P.o.CSGO,P.o.DOTA2].includes(Z)&&[N.o.OUR_STOCK,N.o.ALL].includes(X)?this.itemDataSource.loading$:(0,E.of)(!1))),Q=(0,U.a)([A,u]).pipe((0,I.w)(([Z,X])=>Z===P.o.CSGO&&[N.o.THIRD_PARTY,N.o.ALL].includes(X)?(0,U.a)([this.waxPeerItemDataSource.loading$,this.waxPeerItemDopplerDataSource.loading$]).pipe((0,f.U)(([re,se])=>re||se)):(0,E.of)(!1)));this.loading$=(0,U.a)([Q,z,oe]).pipe((0,f.U)(([Z,X,re])=>Z||X||re)),this.combinedData$=(0,U.a)([this.trades$.pipe((0,W.x)((Z,X)=>!(Z.length>0||X.length>0))),this.itemVariants$.pipe((0,W.x)((Z,X)=>!(Z.length>0||X.length>0))),this.waxPeerItems$.pipe((0,W.x)((Z,X)=>!(Z.length>0||X.length>0)))]).pipe((0,f.U)(([Z,X,re])=>this.joinCombined(Z,X,re).slice(0,this.showCombinedLimit))),this.form.controls.name.valueChanges.pipe((0,O.b)(250),(0,W.x)(),(0,J.t)(this)).subscribe(()=>this.filter()),this.form.controls.waitTimeInDays.valueChanges.pipe((0,O.b)(250),(0,W.x)(),(0,J.t)(this)).subscribe(Z=>{this.filterItemVariants(),this.localStorage.set(y.F.TRADE_WITHDRAW_FILTERS,Z)}),this.form.controls.maxMarkupPercent.valueChanges.pipe((0,J.t)(this)).subscribe(Z=>{this.localStorage.set(y.F.TRADE_WITHDRAW_MARKUP_PERCENT,Z)}),this.showItemPriceDifference$=this.form.get("orderBy").valueChanges.pipe((0,Y.O)(this.defaultSort),(0,f.U)(Z=>!!G.includes(Z)),(0,M.d)(1)),this.showRangeSlider&&this.setMinMaxPriceRange(),this.showRangeSlider||(0,de.T)(this.form.controls.minValue.valueChanges,this.form.controls.maxValue.valueChanges).pipe((0,O.b)(250),(0,W.x)(),(0,J.t)(this)).subscribe(()=>{this.filter()}),(0,j.R)(this.platformService.document,"CW_WEB_SOCKET_RECONNECTED").pipe((0,J.t)(this)).subscribe(()=>{this.tradeDataSource&&this.tradeDataSource.queryRef.refetch(this.getTradeVariables())}),this.form.get("orderBy").valueChanges.pipe((0,J.t)(this)).subscribe(()=>this.filter())}ngOnDestroy(){this.subscription.unsubscribe()}formatSliderLabel(A){if(0===A)return"Instant";const u=A>1?"days":"day";return 8===A&&(A="8-30"),`Up to ${A} ${u}`}updateWaitTime(A){this.form.patchValue({waitTimeInDays:A.value})}getItemVariables(){const A={first:this.limit,minValue:this.minValue||this.form.get("minValue").value,maxValue:this.maxValue||this.form.get("maxValue").value,categoryId:this.form.get("categoryId").value,marketId:this.form.get("marketId").value,name:this.form.get("name").value||null,orderBy:(h=this.form.get("orderBy").value,G.includes(h)?c.j.VALUE_DESC:h),canBuy:this.purchasableItems,type:this.form.get("steamAppName").value},u=this.form.get("waitTimeInDays").value;var h;if(8!==u){const z=new Date;A.maxAvailableAt=new Date(z.setDate(z.getDate()+u))}this.showStockDetails&&([c.j.VALUE,c.j.VALUE_DESC].includes(A.orderBy)?A.orderBy=[A.orderBy,c.j.AVAILABLE_ASSETS]:[c.j.AVAILABLE_ASSETS,c.j.AVAILABLE_ASSETS_DESC].includes(A.orderBy)&&(A.orderBy=[A.orderBy,c.j.VALUE_DESC]));const H=this.form.get("banned").value;return"boolean"==typeof H&&(A.usable=!H,A.obtainable=!H,A.withdrawable=!H),A}getTradeVariables(){return{first:this.limit,orderBy:ne(this.form.get("orderBy").value),status:this.form.get("tradeStatus").value,minTotalValue:this.form.get("minValue").value||void 0,maxTotalValue:this.form.get("maxValue").value||void 0,marketName:this.form.get("name").value||null,steamAppName:this.form.get("steamAppName").value,maxMarkupPercent:this.form.get("maxMarkupPercent").value}}filterTrades(){this.tradeDataSource&&[P.o.CSGO,P.o.DOTA2].includes(this.form.get("steamAppName").value)&&[N.o.P2P,N.o.ALL].includes(this.form.get("withdrawType").value)&&this.tradeDataSource.filter(this.getTradeVariables())}filterItemVariants(){this.itemDataSource&&[P.o.CSGO,P.o.DOTA2].includes(this.form.get("steamAppName").value)&&[N.o.OUR_STOCK,N.o.ALL].includes(this.form.get("withdrawType").value)&&this.itemDataSource.filter(this.getItemVariables())}filter(){this.showCombinedLimit=this.limit,this.filterTrades(),this.filterItemVariants(),this.filterWaxPeerItems()}fetchMore(){this.fetchingMore$.getValue()||(this.fetchingMore$.next(!0),Promise.all([this.itemDataSource.fetchMore(),this.tradeDataSource.fetchMore(),this.waxPeerItemDataSource.fetchMore({from:this._waxPeerItemsFrom})]).finally(()=>this.fetchingMore$.next(!1)).catch(()=>this.fetchingMore$.next(!1)),this.showCombinedLimit+=this.limit)}toggleExchangeItem(){return(0,s.mG)(this,void 0,void 0,function*(){!this.selectedItemVariantCollection||(yield this.layoutService.openSidenavElementForMediaSize("gt-xs","trade"),this.soundService.playSound("SELECT"))})}onSelectTrade(A){this.tradeService.tradeCollection.items$.pipe((0,Ee.q)(1)).subscribe(u=>(0,s.mG)(this,void 0,void 0,function*(){if(this.appConfig.trading.maxTrades!==u.length-1){if(u.length&&!this.canTradeMultiple){const H=u.filter(z=>"API_KEY_DEPOSITOR"===z.trackingType);if("API_KEY_DEPOSITOR"!==A.trackingType&&H.length<u.length){const z=u.filter(oe=>"API_KEY_DEPOSITOR"!==oe.trackingType);this.tradeService.tradeCollection.removeByKey("id",z[z.length-1].id)}}yield this.layoutService.openSidenavElementForMediaSize("gt-xs","trade"),this.tradeService.tradeCollection.add(A)}}))}filterAndSortTrades(A){const u=this.getTradeVariables(),H=new RegExp(`.*(${(u.marketName||"").replace(" ",".*")}).*`,"i"),z=A.filter(oe=>!((u.minTotalValue||0===u.minTotalValue)&&oe.totalValue<u.minTotalValue||u.steamAppName&&u.steamAppName!==oe.steamAppName||(u.maxTotalValue||0===u.maxTotalValue)&&oe.totalValue>=u.maxTotalValue||u.marketName&&oe.tradeItems.findIndex(Q=>H.test(Q.itemVariant.externalId))<0||u.status!==oe.status||(u.maxMarkupPercent||0===u.maxMarkupPercent)&&oe.tradeItems.find(Q=>Q.markupPercent>u.maxMarkupPercent)));switch(u.orderBy){case"ID":case"CREATED_AT":return z.sort((oe,Q)=>oe.createdAt.localeCompare(Q.createdAt));case"ID_DESC":case"CREATED_AT_DESC":return z.sort((oe,Q)=>Q.createdAt.localeCompare(oe.createdAt));case"TOTAL_VALUE":return z.sort((oe,Q)=>oe.totalValue-Q.totalValue);case"TOTAL_VALUE_DESC":return z.sort((oe,Q)=>Q.totalValue-oe.totalValue);case"BEST_DEALS":return z.sort((oe,Q)=>{if(!oe.customValue&&!Q.customValue)return Q.totalValue-oe.totalValue;const Z=oe.tradeItems.reduce((re,se)=>re+se.itemVariant.value,0),X=Q.tradeItems.reduce((re,se)=>re+se.itemVariant.value,0);return+(oe.totalValue/Z-Q.totalValue/X).toFixed(4)||Q.totalValue-oe.totalValue});default:return z}}filterAndSortItemVariants(A){return this.itemService.filterAndSortItems(A,this.getItemVariables())}joinCombined(A,u,H){const z=[...A.map(Q=>({type:x.TRADE,trade:Q,value:Q.totalValue,id:Q.id})),...u.map(Q=>({type:x.ITEM_VARIANT,itemVariant:Q,value:Q.value,id:Q.id})),...H.map(Q=>({type:x.WAX_PEER_ITEM,waxPeerItem:Q,value:Q.value,id:Q.id}))];switch(this.form.get("orderBy").value){case c.j.VALUE:return z.sort((Q,Z)=>Q.value-Z.value);case c.j.VALUE_DESC:return z.sort((Q,Z)=>Z.value-Q.value);case c.j.AVAILABLE_ASSETS_DESC:return z.sort((Q,Z)=>Q.type===Z.type?1:Z.type===x.TRADE||Z.type===x.WAX_PEER_ITEM?-1:1);default:return z}}filterWaxPeerItems(){this.waxPeerItemDataSource&&this.form.get("steamAppName").value===P.o.CSGO&&[N.o.THIRD_PARTY,N.o.ALL].includes(this.form.get("withdrawType").value)&&(this._waxPeerItemsFrom=null,this.waxPeerItemDataSource.filter(this.getWaxPeerItemVariables()))}onSelectWaxPeerItem(A){this.selectedWaxPeerItemCollection.toggle(A)}isWaxPeerItemSelected(A){return this.selectedWaxPeerItemCollection.items$.pipe((0,f.U)(u=>u.find(H=>H.id===A.id)))}isWaxPeerItemCustomPriced(A){return this.waxPeerTradeService.isWaxPeerCustomPriced(A)}getWaxPeerItemVariables(){const A=this.form.getRawValue();return{first:100,markup:15,from:this._waxPeerItemsFrom,marketHashName:A.name||null,orderBy:(h=A.orderBy,G.includes(h)?h:h===c.j.VALUE?R.H5.PRICE_ASC:R.H5.PRICE_DESC),minValue:A.minValue||void 0,maxValue:A.maxValue||void 0};var h}showBestDealsFilter(){return this.form.get("steamAppName").value===P.o.CSGO&&[N.o.P2P,N.o.THIRD_PARTY,N.o.ALL].includes(this.form.get("withdrawType").value)}showTradeStatusFilter(){var A;return[N.o.P2P,N.o.ALL].includes(this.form.get("withdrawType").value)&&(null===(A=this.user)||void 0===A?void 0:A.roles.includes(F.i.MANAGER))}showMaxMarkupFilter(){var A;return[N.o.P2P,N.o.ALL].includes(this.form.get("withdrawType").value)&&(null===(A=this.user)||void 0===A?void 0:A.roles.includes(F.i.USER))}showAvailableAssetesOrder(){return this.includeAvailableAssetsOrder&&[N.o.OUR_STOCK,N.o.ALL].includes(this.form.get("withdrawType").value)}subscribeToTrades(){this.subscription.add(this.tradeService.subscribeToCreatedTrades(this.tradeDataSource.queryRef)),this.subscription.add(this.tradeService.subscribeToRemoveFromTradeListedTrades(this.tradeDataSource.queryRef)),this.subscription.add(this.tradeService.subscribeToUpdatedTrades(this.tradeDataSource.queryRef,{status:"LISTED"}))}priceRangeChange(A){this.minValue=parseInt(A.minValue,10),this.maxValue=parseInt(A.maxValue,10),this.filter()}setMinMaxPriceRange(){this.minRange=this.form.get("minValue").value||0,this.maxRange=this.form.get("minValue").value||5e4;const A=parseFloat(this.localStorage.get(y.F.MAX_ITEM_VARIANT_PRICE)),u=parseInt(this.localStorage.get(y.F.MAX_ITEM_VARIANT_PRICE_DATE),10);isNaN(A)||Date.now()-u>864e5?this.apollo.watchQuery({query:p.U$y,variables:{first:1,orderBy:"VALUE_DESC",categoryId:""},fetchPolicy:"cache-and-network"}).valueChanges.pipe((0,ae.h)(({data:H})=>void 0!==H),(0,f.U)(({data:H})=>H.itemVariants.edges.map(z=>z.node)),(0,J.t)(this)).subscribe(H=>{this.maxRange=H.length?H[0].value:5e4,this.localStorage.set(y.F.MAX_ITEM_VARIANT_PRICE,this.maxRange),this.localStorage.set(y.F.MAX_ITEM_VARIANT_PRICE_DATE,Date.now())}):this.maxRange=A}};Le.\u0275fac=function(A){return new(A||Le)(e.Y36(p.qBz),e.Y36(_._M),e.Y36(e.SBq),e.Y36(l.qu),e.Y36(p.yu5),e.Y36(p.Vtq),e.Y36(p.Pb3),e.Y36(p.mix),e.Y36(p.Xxg),e.Y36(L.en),e.Y36(p.KDu),e.Y36(S.Fb))},Le.\u0275cmp=e.Xpm({type:Le,selectors:[["cw-withdraw-search-grid"]],inputs:{admin:"admin",limit:"limit",valueMultiplier:"valueMultiplier",minValue:"minValue",maxValue:"maxValue",disabled:"disabled",showFilters:"showFilters",showAdvancedFilters:"showAdvancedFilters",showValue:"showValue",allowOverlay:"allowOverlay",banned:"banned",showStockDetails:"showStockDetails",showAvailableAtDetails:"showAvailableAtDetails",purchasableItems:"purchasableItems",selectedItemVariantCollection:"selectedItemVariantCollection",showRangeSlider:"showRangeSlider",includeAvailableAssetsOrder:"includeAvailableAssetsOrder",useScrollContainer:"useScrollContainer",steamAppName:"steamAppName",withdrawType:"withdrawType",canTradeMultiple:"canTradeMultiple",user:"user"},features:[e.qOj],decls:6,vars:11,consts:function(){let h,A,u,H,z,oe,Q,Z,X,re,se,d,m,g,V,Te,De,ye,at,dt,Ft;return h=$localize`:␟c824fde7681bd34e043c0dbdcce768c611901d3e␟6992597991924994180:${"\ufffd#4\ufffd"}:START_TAG_CW_ICON:${"\ufffd/#4\ufffd"}:CLOSE_TAG_CW_ICON: Search `,A=$localize`:␟400c30183b9b6cf5b3decf8491a929e10fa21a3b␟3951121764366844614:Order by`,u=$localize`:␟f2348be93b99b7160b2c9d689998a47ee117fc3f␟5005331664702150813:Highest price first`,H=$localize`:␟17afda20ac9e236f244a2b60f0cde4e3e9b24237␟6470200664331935333:Lowest price first`,z=$localize`:␟7d12b64594329e06e84b91c766f642e7f9ccc342␟7977541845007459725:Max Markup %`,oe=$localize`:␟893f7bbe4db6b3dc29ea4608b634d7baa8689ceb␟9029325888238260030:${"\ufffd0\ufffd"}:INTERPOLATION:`,Q=$localize`:␟9098bcd81aa860644c32667471fe20f86db7a245␟6314385962063525028:Trade status`,Z=$localize`:␟5359aedc9e29d1e4747a822217201b4dfcbcbc68␟7511373128567898434:${"\ufffd0\ufffd"}:INTERPOLATION:`,X=$localize`:␟5b0a7c898f279fed61eba8a17c378db53a305969␟5180929788417132963:Min Price`,re=$localize`:␟04ec3fdb880381939cf59949face23c6bdf15859␟9034794484778404742:Max Price`,se=$localize`:␟e7f88c481ecdda90467acd3f4dbe934465cee30f␟2317673285989169654:Newest first`,d=$localize`:␟58843dffadc1ddeeddb217ee89b66611fbcd5a64␟7788789394151316565:Oldest first`,m=$localize`:␟8cee054c10dc9c74a4b3951a5663cd4f487525ee␟6124015603076426850:Available soonest`,g=$localize`:␟f6737cf0fdcfd60c7c647a8106871d4f831baaa1␟3645639703388446650:Available latest`,V=$localize`:␟5a7412ed2da2817201be2c61f7ea12771ff1db15␟311171623981417557:Best deals`,Te=$localize`:␟b1693168fb2e9ca5bf4aa118af06cad7b6b64762␟963106686763212925:${"\ufffd#3\ufffd"}:START_SMALL_TEXT:Instant${"\ufffd/#3\ufffd"}:CLOSE_SMALL_TEXT:`,De=$localize`:␟94dbfbcc4296b81050f93d0cc9cf97efc68f947a␟4854799599766475900:${"\ufffd#7\ufffd"}:START_SMALL_TEXT:8-30 days${"\ufffd/#7\ufffd"}:CLOSE_SMALL_TEXT:`,ye=$localize`:␟bd2edf99dd6562385ccec19a7ab2d1898e626605␟2999492056553212422:Banned`,at=$localize`:␟af9a77fdafa012a84fb658db039d5a587c394ba8␟272877040283117691:Banned or Unbanned`,dt=$localize`:␟61fc26cd3ee5950d1510722e071090841ce7c258␟9071417955963366778:Unbanned`,Ft=$localize`:␟bd2edf99dd6562385ccec19a7ab2d1898e626605␟2999492056553212422:Banned`,[[1,"absolute",3,"loading","diameter","type"],["fxLayout","row wrap","fxLayout.xs","column","fxLayoutAlign","start center","fxLayoutAlign.xs","start stretch","fxLayoutGap",".5rem","class","my-4",3,"formGroup",4,"ngIf"],[3,"d-none",4,"ngIf"],["fxLayout","row wrap","fxLayout.xs","column","fxLayoutAlign","start center","fxLayoutAlign.xs","start stretch","fxLayoutGap",".5rem",1,"my-4",3,"formGroup"],["fxFlex","nogrow"],h,["inlineSVG","assets/icons/search.svg"],["matInput","","type","search","autocomplete","off","formControlName","name"],["fxFlex","nogrow",4,"ngIf"],[4,"ngIf"],["class","x2-small","fxFlex","nogrow",4,"ngIf"],A,["formControlName","orderBy"],[3,"value"],u,H,["class","wait-time-slider","fxFlex","nogrow","fxLayoutAlign","center center",4,"ngIf"],z,["formControlName","maxMarkupPercent",3,"selectionChange"],["class","text-titlecase",3,"value",4,"ngFor","ngForOf"],[1,"text-titlecase",3,"value"],oe,Q,["formControlName","tradeStatus",3,"selectionChange"],Z,["fxFlex","nogrow",3,"ctrl","selectionChange"],["fxFlex","nogrow",1,"x2-small"],[3,"min","max","displayValues","rangeChange"],X,["matInput","","formControlName","minValue","type","number"],re,["matInput","","formControlName","maxValue","type","number"],se,d,m,g,V,["fxFlex","nogrow","fxLayoutAlign","center center",1,"wait-time-slider"],[1,"mr-3"],Te,["fxFlex","1 1 0%","color","accent","thumbLabel","","step","1","formControlName","waitTimeInDays",1,"mt-2",3,"min","max","displayWith","input"],[1,"ml-3"],De,ye,["formControlName","banned",3,"selectionChange"],at,dt,Ft,[3,"items","parentScroll","bufferAmount","vsEnd",4,"ngIf"],["class","grid",4,"ngIf"],["grid",""],[3,"items","parentScroll","bufferAmount","vsEnd"],["scroll",""],[1,"grid"],["container",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"loading","type",4,"ngIf"],[3,"loading","type"],["class","text-center loader","cwIntersectionObserver","",3,"intersectionSkipNotVisible","visibilityChange",4,"ngIf"],["cwIntersectionObserver","",1,"text-center","loader",3,"intersectionSkipNotVisible","visibilityChange"],[3,"loading",4,"ngIf"],[3,"loading"],[3,"ngSwitch",4,"ngFor","ngForOf","ngForTrackBy"],[3,"ngSwitch"],[3,"trade","selectable","selectTrade","click",4,"ngSwitchCase"],[4,"ngSwitchCase"],[3,"trade","selectable","selectTrade","click"],[3,"itemVariant","selectedCollection","showValue","toggle"],[1,"time-ago"],[3,"itemVariant","selectable","allowOverlay","customPrice","customPriceShowDifference","tradeItem","selected","showStockDetails","showAvailableAtDetails","isTradeDeposited","showValue","externalIconUrl","externalColorTooltip","banned","click"]]},template:function(A,u){1&A&&(e._UZ(0,"cw-loader",0),e.ALo(1,"push"),e.ALo(2,"push"),e.YNc(3,ht,25,16,"form",1),e.YNc(4,Ge,7,8,"div",2),e.ALo(5,"push")),2&A&&(e.Q6J("loading",e.lcZ(1,5,u.loading$)&&!e.lcZ(2,7,u.fetchingMore$))("diameter",120)("type","view"),e.xp6(3),e.Q6J("ngIf",u.showFilters),e.xp6(1),e.Q6J("ngIf",e.lcZ(5,9,u.combinedData$)))},directives:[Re.R,pe.O5,l._Y,l.JL,Me.xw,Me.Wh,Me.SQ,l.sg,be.KE,Me.yH,be.hX,fe.o,he.d$,gt.Nt,l.Fj,l.JJ,l.u,it.gD,ue.ey,pe.sg,Ze.w,nt.A,l.wV,_t.pH,Ke.Vw,pe.tP,rt.Z,pe.RF,pe.n9,mt.L,St.l,It.P],pipes:[Be.f,pe.Ov,pe.JJ],styles:[".no-scrollbar[_ngcontent-%COMP%]{scrollbar-width:none;-ms-overflow-style:none}.no-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}[_nghost-%COMP%]{position:relative;display:flex;flex-direction:column;flex:1;scrollbar-width:none;-ms-overflow-style:none}[_nghost-%COMP%]::-webkit-scrollbar{display:none}@media (max-width: 767.98px){[_nghost-%COMP%]   mat-form-field[_ngcontent-%COMP%]{display:block}}[_nghost-%COMP%]     cw-item{transform:translateZ(0)}.disabled[_ngcontent-%COMP%]{opacity:.5}.x2-small[_ngcontent-%COMP%]{margin-top:-1.25rem;height:100%;min-width:240px}.time-ago[_ngcontent-%COMP%]{height:1.25rem;-webkit-user-select:none;user-select:none}cw-loader.absolute[_ngcontent-%COMP%]{bottom:10%}.wait-time-slider[_ngcontent-%COMP%]{align-self:flex-start;background-color:#1a1e23;border-radius:6px;padding-inline:12px;height:52px;margin-top:3px}@media (max-width: 767.98px){.wait-time-slider[_ngcontent-%COMP%]{width:100%}}  .mat-slider-thumb-label{transform:rotate(45deg)!important;background:transparent!important;width:100px!important}  .mat-slider-horizontal .mat-slider-thumb-label{right:-50px!important}  .mat-slider-thumb{transform:scale(1)!important}  .mat-slider-thumb-label-text{opacity:1!important}.grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));grid-gap:1rem;gap:1rem}.grid[_ngcontent-%COMP%]    >.loader, .grid[_ngcontent-%COMP%]    >cw-loader{grid-column:1/-1}"],changeDetection:0}),Le=(0,s.gn)([(0,J.c)(),(0,s.w6)("design:paramtypes",[Object,_._M,e.SBq,l.qu,p.yu5,p.Vtq,p.Pb3,p.mix,p.Xxg,L.en,p.KDu,S.Fb])],Le)},49361:(Ie,ee,o)=>{o.r(ee),o.d(ee,{DepositAcceptedTradeInfoDialogComponent:()=>w,DepositCompleteDialogComponent:()=>P,DepositConfirmCancelDialogComponent:()=>O,DepositCooldownComponent:()=>at,DepositCooldownDialogComponent:()=>f,DepositCustomPriceInfoDialogComponent:()=>he,DepositCustomPriceSetDialogComponent:()=>Be,DepositExpiredDialogComponent:()=>xe,DepositJoinedComponent:()=>Je,DepositJoinedDialogComponent:()=>ve,DepositJoinedExpiredDialogComponent:()=>ze,DepositListedComponent:()=>Ye,DepositListedDialogComponent:()=>Q,DepositProcessingComponent:()=>Ve,DepositProcessingDialogComponent:()=>V,PlayerToPlayerDepositComponent:()=>He,SteamOfferMutationDialogComponent:()=>ut,TradeDepositDialogService:()=>ye,TradeDepositModule:()=>_n,TradeDialogService:()=>Te.a,TradeProcessModule:()=>di,TradeSidebarComponent:()=>un,TradeType:()=>Xe,TradeWithdrawDialogService:()=>Lt,TradeWithdrawModule:()=>mn,WithdrawCompleteDialogComponent:()=>an,WithdrawComponent:()=>Et,WithdrawCooldownComponent:()=>Tn,WithdrawCooldownDialogComponent:()=>rn,WithdrawCustomPriceWarningDialogComponent:()=>sn,WithdrawExpiredDialogComponent:()=>ln,WithdrawJoinedComponent:()=>En,WithdrawJoinedDialogComponent:()=>cn,WithdrawJoinedExpiredDialogComponent:()=>on,WithdrawProcessingComponent:()=>gn,WithdrawProcessingDialogComponent:()=>dn,WithdrawTradeType:()=>Mt});var s=o(48966),e=o(5e3),l=o(23837),p=o(47423);let w=(()=>{class n{constructor(t,i){this.data=t,this.dialogRef=i;const{trades:r}=this.data,[T]=Array.isArray(r)?r:[r];this.trade=T}close(){this.dialogRef.close()}}return n.dialogName="DEPOSIT_ACCEPTED_TRADE_INFO",n.\u0275fac=function(t){return new(t||n)(e.Y36(s.WI),e.Y36(s.so))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cw-deposit-accepted-trade-info-dialog"]],inputs:{trade:"trade"},decls:15,vars:0,consts:function(){let a,t,i,r;return a=$localize`:␟7d0cc981302eedc2ea12ec6a814001c327515437␟3610636318174019679:Deposit Processing`,t=$localize`:␟fbfbfb65f0beccc1723037059a64649a59beb6e6␟7240347105829512140:${"\ufffd#5\ufffd"}:START_PARAGRAPH:Don't worry! There is a 5 minute window for you to cancel the trade after it expires.${"[\ufffd/#5\ufffd|\ufffd/#6\ufffd]"}:CLOSE_PARAGRAPH:${"\ufffd#6\ufffd"}:START_PARAGRAPH_1: If the other user has already accepted your trade offer before you had a chance to cancel it, then you will be credited within the next 30 seconds. ${"[\ufffd/#5\ufffd|\ufffd/#6\ufffd]"}:CLOSE_PARAGRAPH:`,t=e.Zx4(t),i=$localize`:␟b6dab236d1138c79a86396c0cbc4d872e6d6dc6c␟3610400387653153278:${"\ufffd#9\ufffd"}:START_SMALL_TEXT:If you have not been credited after 5 minutes, please ${"\ufffd#10\ufffd"}:START_LINK:contact support${"\ufffd/#10\ufffd"}:CLOSE_LINK:${"\ufffd/#9\ufffd"}:CLOSE_SMALL_TEXT:`,r=$localize`:␟7e6c975ebea8b5f8b120905ca7acf9f8edf59d8e␟8998179362936748717:OK`,[["mat-dialog-title",""],a,[1,"message-block","message-block-small","mb-3"],t,[1,"mb-0"],[1,"mb-3"],i,["tabindex","-1","cwOpenZendesk","",1,"pointer"],["align","center"],["mat-flat-button","","color","accent",1,"w-100","mat-button-3d",3,"click"],r]},template:function(t,i){1&t&&(e.TgZ(0,"h1",0),e.SDv(1,1),e.qZA(),e.TgZ(2,"mat-dialog-content"),e.TgZ(3,"div",2),e.tHW(4,3),e._UZ(5,"p"),e._UZ(6,"p",4),e.N_p(),e.qZA(),e.TgZ(7,"p",5),e.tHW(8,6),e.TgZ(9,"small"),e._UZ(10,"a",7),e.qZA(),e.N_p(),e.qZA(),e.qZA(),e.TgZ(11,"mat-dialog-actions",8),e.TgZ(12,"button",9),e.NdJ("click",function(){return i.close()}),e.TgZ(13,"span"),e.SDv(14,10),e.qZA(),e.qZA(),e.qZA())},directives:[s.uh,s.xY,l.n,s.H8,p.lW],styles:["cw-pretty-balance.negative[_ngcontent-%COMP%]{color:#ff5548}cw-pretty-balance.positive[_ngcontent-%COMP%]{color:#00e258}"],changeDetection:0}),n})();var c=o(23600),y=o(89847);let P=(()=>{class n{constructor(t,i,r,T){this.data=t,this.dialogRef=i,this.tradeService=r,this.userService=T,this.user$=this.userService.user$;const{trades:C}=this.data,[k]=Array.isArray(C)?C:[C];this.trade=k}get total(){return(0,c.jSO)(this.trade.totalValue,this.trade.promoCode)}ngOnDestroy(){this.tradeService.tradeCollection.clear()}close(){this.dialogRef.close()}}return n.dialogName="DEPOSIT_COMPLETE",n.\u0275fac=function(t){return new(t||n)(e.Y36(s.WI),e.Y36(s.so),e.Y36(c.Xxg),e.Y36(c.KDu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cw-deposit-complete-dialog"]],decls:10,vars:1,consts:function(){let a,t,i;return a=$localize`:␟61f3cba2247fd09266f231a715fb5b56075dca84␟2779396616831776185:Trade Complete`,t=$localize`:␟5b3660de47129f43ce9883ec607bcb5d759d9778␟8070097243460306463: You received ${"\ufffd#5\ufffd"}:START_TAG_CW_PRETTY_BALANCE:${"\ufffd/#5\ufffd"}:CLOSE_TAG_CW_PRETTY_BALANCE:`,i=$localize`:␟7e6c975ebea8b5f8b120905ca7acf9f8edf59d8e␟8998179362936748717:OK`,[["mat-dialog-title",""],a,[1,"message-block","message-block-small","mb-3"],t,["currency","TKN",1,"positive",3,"balance"],["align","center"],["mat-flat-button","","color","accent",1,"w-100","mat-button-3d","mat-button-lg",3,"click"],i]},template:function(t,i){1&t&&(e.TgZ(0,"h1",0),e.SDv(1,1),e.qZA(),e.TgZ(2,"mat-dialog-content"),e.TgZ(3,"p",2),e.tHW(4,3),e._UZ(5,"cw-pretty-balance",4),e.N_p(),e.qZA(),e.qZA(),e.TgZ(6,"mat-dialog-actions",5),e.TgZ(7,"button",6),e.NdJ("click",function(){return i.close()}),e.TgZ(8,"span"),e.SDv(9,7),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(5),e.Q6J("balance",i.total))},directives:[s.uh,s.xY,y.q,s.H8,p.lW],styles:["cw-pretty-balance.negative[_ngcontent-%COMP%]{color:#ff5548}cw-pretty-balance.positive[_ngcontent-%COMP%]{color:#00e258}"],changeDetection:0}),n})();var F=o(70655),R=o(44987),L=o(28746),S=o(69808),J=o(77446),_=o(93075),b=o(79586),v=o(46907),Y=o(48194),W=o(17150);function U(n,a){if(1&n&&(e._UZ(0,"cw-item",11),e.ALo(1,"pluck")),2&n){const t=e.oxw();e.Q6J("itemVariant",e.xi3(1,7,t.trade.tradeItems[0],"itemVariant"))("customPrice",t.trade.tradeItems[0].customValue?t.trade.tradeItems[0].value:null)("banned",!1)("userOwned",!0)("horizontal",!0)("allowOverlay",!1)("rarityRadialBackground",!0)}}function D(n,a){if(1&n&&(e._UZ(0,"cw-item-bundle",12),e.ALo(1,"pluck")),2&n){const t=e.oxw();e.Q6J("itemVariants",e.xi3(1,5,t.trade.tradeItems,"itemVariant"))("trade",t.trade)("userOwned",!0)("horizontal",!0)("alwaysOpenBundle",!0)}}let O=class{constructor(a,t,i){this.data=a,this.tradeService=t,this.dialogRef=i,this.checked=!1,this.cancelling=!1;const{trades:r}=this.data,[T]=Array.isArray(r)?r:[r];this.trade=T}close(){if(this.checked)return this.cancelling=!0,this.tradeService.cancelTrades(this.trade.id).pipe((0,L.x)(()=>this.cancelling=!1),(0,R.t)(this)).subscribe(()=>{this.dialogRef.close()})}ngOnDestroy(){this.tradeService.inventoryCollection.clear()}};O.dialogName="DEPOSIT_CONFIRM_CANCELLED",O.\u0275fac=function(a){return new(a||O)(e.Y36(s.WI),e.Y36(c.Xxg),e.Y36(s.so))},O.\u0275cmp=e.Xpm({type:O,selectors:[["cw-deposit-confirm-cancel-dialog"]],decls:13,vars:5,consts:function(){let n,a,t;return n=$localize`:␟71c5a2d85870556e50fb868c43cb7946cff2a77a␟3830545533208110206:Warning!`,a=$localize`:␟f87273e20564891ecf43b836638ed0f38980ecd9␟7634447090914120920:Are you sure you want to cancel this trade?`,t=$localize`:␟c8e95e2b525687924ce9719f7302271851ffe179␟5076158126436661492:Cancel Trade`,[["mat-dialog-title",""],n,[1,"text-danger","mb-3"],a,[3,"itemVariant","customPrice","banned","userOwned","horizontal","allowOverlay","rarityRadialBackground",4,"ngIf"],[3,"itemVariants","trade","userOwned","horizontal","alwaysOpenBundle",4,"ngIf"],[1,"mt-3",3,"ngModel","ngModelChange"],["align","center"],["mat-flat-button","","color","warn",1,"w-100","mat-button-3d","mat-button-lg",3,"disabled","click"],[3,"loading"],t,[3,"itemVariant","customPrice","banned","userOwned","horizontal","allowOverlay","rarityRadialBackground"],[3,"itemVariants","trade","userOwned","horizontal","alwaysOpenBundle"]]},template:function(a,t){1&a&&(e.TgZ(0,"h1",0),e.SDv(1,1),e.qZA(),e.TgZ(2,"mat-dialog-content"),e.TgZ(3,"p",2),e.SDv(4,3),e.qZA(),e.YNc(5,U,2,10,"cw-item",4),e.YNc(6,D,2,8,"cw-item-bundle",5),e.TgZ(7,"mat-checkbox",6),e.NdJ("ngModelChange",function(r){return t.checked=r}),e._uU(8,"I confirm I have cancelled all outgoing trades"),e.qZA(),e.qZA(),e.TgZ(9,"mat-dialog-actions",7),e.TgZ(10,"button",8),e.NdJ("click",function(){return t.close()}),e.TgZ(11,"cw-loader",9),e.SDv(12,10),e.qZA(),e.qZA(),e.qZA()),2&a&&(e.xp6(5),e.Q6J("ngIf",1===t.trade.tradeItems.length),e.xp6(1),e.Q6J("ngIf",t.trade.tradeItems.length>1),e.xp6(1),e.Q6J("ngModel",t.checked),e.xp6(3),e.Q6J("disabled",!t.checked||t.cancelling),e.xp6(1),e.Q6J("loading",t.cancelling))},directives:[s.uh,s.xY,S.O5,J.oG,_.JJ,_.On,s.H8,p.lW,b.R,v.P,Y._],pipes:[W.F],styles:[""],changeDetection:0}),O=(0,F.gn)([(0,R.c)(),(0,F.w6)("design:paramtypes",[Object,c.Xxg,s.so])],O);var I=o(53409);let f=(()=>{class n{constructor(t,i){this.data=t,this.steamService=i;const{trades:r}=this.data,[T]=Array.isArray(r)?r:[r];this.trade=T}getProfileTradeOffersUrl(){var t;return this.steamService.getProfileTradeOffersUrl(null===(t=this.trade.depositor)||void 0===t?void 0:t.steamId)}}return n.dialogName="DEPOSIT_COOLDOWN",n.\u0275fac=function(t){return new(t||n)(e.Y36(s.WI),e.Y36(c.qe3))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cw-deposit-cooldown-dialog"]],decls:10,vars:5,consts:function(){let a,t,i;return a=$localize`:␟b4d8e2453f7c501544455c6924f10b11060fb3c6␟4817873797734376754:Trade Cooldown`,t=$localize`:␟55cbcd3696670e573278a47e5b8c6c9ac0b3ae90␟6113173697893661380: Trade went into cooldown. You cannot cancel it anymore. If you have sent the ${"\ufffd#6\ufffd"}:START_LINK:trade offer on Steam${"\ufffd/#6\ufffd"}:CLOSE_LINK:, please try to cancel it. `,i=$localize`:␟7e6c975ebea8b5f8b120905ca7acf9f8edf59d8e␟8998179362936748717:OK`,[["mat-dialog-title",""],a,[1,"mb-3",3,"trade","rarityRadialBackground","horizontal"],[1,"mb-3"],t,["target","_blank",3,"href"],["align","center"],["mat-flat-button","","color","primary",1,"w-100","mat-button-3d","mat-button-lg",3,"mat-dialog-close"],i]},template:function(t,i){1&t&&(e.TgZ(0,"h1",0),e.SDv(1,1),e.qZA(),e.TgZ(2,"mat-dialog-content"),e._UZ(3,"cw-trade",2),e.TgZ(4,"p",3),e.tHW(5,4),e._UZ(6,"a",5),e.N_p(),e.qZA(),e.qZA(),e.TgZ(7,"mat-dialog-actions",6),e.TgZ(8,"button",7),e.SDv(9,8),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Q6J("trade",i.trade)("rarityRadialBackground",!0)("horizontal",!0),e.xp6(3),e.Q6J("href",i.getProfileTradeOffersUrl(),e.LSH),e.xp6(2),e.Q6J("mat-dialog-close",!0))},directives:[s.uh,s.xY,I.L,s.H8,p.lW,s.ZT],styles:[""],changeDetection:0}),n})();var E=o(62650),M=o(72755),ie=o(5396),de=o(39300),j=o(54004),Ee=o(68675),ae=o(11520),N=o(39646),x=o(95698),G=o(63900),ne=o(97272),te=o(60515),Oe=o(57359),Re=o(54482);const Me=(n,a)=>(n.push(a),n);function be(){return(0,Re.e)((n,a)=>{(function(n,a){return(0,Re.e)((0,Oe.U)(n,a,arguments.length>=2,!1,!0))})(Me,[])(n).subscribe(a)})}var fe=o(18505);let he=(()=>{class n{constructor(t,i){this.dialogRef=t,this.localStorage=i,this.componentName="DEPOSIT_CUSTOM_PRICE_INFO",this.dontShowAgain=!1,this.continuing=!1,this.cancelling=!1}agree(){return this.dialogRef.close(!0)}cancel(){return this.dialogRef.close(!1)}setDontShowAnymore(){this.dontShowAgain?this.localStorage.addToArray(E.F.TRADE_DIALOGS_DONT_SHOW_ANYMORE,this.componentName):this.localStorage.removeFromArray(E.F.TRADE_DIALOGS_DONT_SHOW_ANYMORE,this.componentName)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(s.so),e.Y36(c.Vtq))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cw-deposit-custom-price-info-dialog"]],decls:15,vars:3,consts:function(){let a,t,i,r;return a=$localize`:␟19d3ab44ecafe9f5e8de114c3aecaaec411f29bc␟1247552238176215421:Custom price`,t=$localize`:␟f13f07f83a15cea49e68e48da8886e9de622c31b␟2899685259273490411: You are about to deposit some items with a custom price, this deposit may take longer than usual. `,i=$localize`:␟ac10a3d9b59575640797c1a8e6aea642cf5d5e77␟6962699013778688473:Continue`,r=$localize`:␟d7b35c384aecd25a516200d6921836374613dfe7␟2159130950882492111:Cancel`,[["mat-dialog-title","",1,"text-center"],a,[1,"text-center"],[1,"message-block","mb-3"],t,[1,"message","mb-3"],[3,"ngModel","ngModelChange"],["mat-flat-button","","color","accent",1,"mat-button-3d","mat-button-lg","w-100","mb-2",3,"click"],[3,"loading"],i,["mat-flat-button","","color","warn",1,"mat-button-3d","ml-0","mat-button-lg","w-100",3,"click"],r]},template:function(t,i){1&t&&(e.TgZ(0,"h1",0),e.SDv(1,1),e.qZA(),e.TgZ(2,"mat-dialog-content",2),e.TgZ(3,"p",3),e.SDv(4,4),e.qZA(),e.TgZ(5,"div",5),e.TgZ(6,"mat-checkbox",6),e.NdJ("ngModelChange",function(T){return i.dontShowAgain=T})("ngModelChange",function(){return i.setDontShowAnymore()}),e._uU(7," Don't show this again "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"mat-dialog-actions"),e.TgZ(9,"button",7),e.NdJ("click",function(){return i.agree()}),e.TgZ(10,"cw-loader",8),e.SDv(11,9),e.qZA(),e.qZA(),e.TgZ(12,"button",10),e.NdJ("click",function(){return i.cancel()}),e.TgZ(13,"cw-loader",8),e.SDv(14,11),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(6),e.Q6J("ngModel",i.dontShowAgain),e.xp6(4),e.Q6J("loading",i.continuing),e.xp6(3),e.Q6J("loading",i.cancelling))},directives:[s.uh,s.xY,J.oG,_.JJ,_.On,s.H8,p.lW,b.R],styles:[".message-block[_ngcontent-%COMP%]{padding:1rem .5rem;background:var(--item-bg);border-radius:.375rem;text-align:center}"],changeDetection:0}),n})();var gt=o(4128),it=o(50590),ue=o(77093),Ze=o(67322),nt=o(20820),_t=o(98833),Ke=o(30446),rt=o(78029);function mt(n,a){1&n&&(e.TgZ(0,"p"),e.TgZ(1,"strong"),e._uU(2,"Note:"),e.qZA(),e._uU(3,"\xa0 We can not guarantee that the suggested price shown above is accurate, it should only be taken as a very rough guide. "),e.qZA())}function St(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"mat-slider",21),e.NdJ("input",function(r){return e.CHM(t),e.oxw().updateCustomPrice(r)}),e.qZA(),e.BQk()}if(2&n){const t=a.$implicit,i=e.oxw();e.xp6(1),e.Q6J("min",i.minimumItemValueDeposit)("max",i.maxCustomPrice)("displayWith",i.formatSliderLabel.bind(i))("ngModel",t)}}const It=function(n,a){return{min:n,max:a}};let Be=class{constructor(a,t,i,r,T){this.dialogRef=t,this.formBuilder=i,this.settingService=r,this.tradeService=T,this.itemVariant=a.itemVariant}ngOnInit(){this.suggestedValue=this.itemVariant.value,this.form=this.formBuilder.group({customPrice:this.suggestedValue}),this.customPriceValue$=this.form.get("customPrice").valueChanges.pipe((0,Ee.O)(this.suggestedValue)),(0,gt.D)([this.settingService.getSetting("trade:maximum_custom_value_percent_markup").pipe((0,it.P)()),this.tradeService.minimumItemValueDeposit$.pipe((0,it.P)())]).pipe((0,R.t)(this),(0,fe.b)(([a,t])=>{const i=parseInt(a.value,10);this.maxCustomPercent=isNaN(i)?10:i,this.maxCustomPrice=Math.floor(100*(this.suggestedValue+this.suggestedValue*this.maxCustomPercent/100))/100,this.form.setValidators([_.kI.min(t),_.kI.max(this.maxCustomPrice)])})).subscribe()}formatSliderLabel(a){if(this.itemVariant&&a!==this.itemVariant.value){const t=Math.round((a-this.itemVariant.value)/this.itemVariant.value*100);return t>=0?`+${t}%`:`${t}%`}return a}updateCustomPrice(a){a.value&&this.form.get("customPrice").patchValue(a.value)}confirm(){this.form.valid&&this.dialogRef.close({customPrice:this.form.get("customPrice").value})}cancel(){this.dialogRef.close()}};function Dt(n,a){1&n&&(e.tHW(0,2,1),e.ynx(1),e._UZ(2,"span",16),e._UZ(3,"br"),e._UZ(4,"br"),e.BQk(),e.N_p())}function pt(n,a){if(1&n&&(e._UZ(0,"cw-item",17),e.ALo(1,"pluck")),2&n){const t=e.oxw();e.Q6J("itemVariant",e.xi3(1,7,t.trade.tradeItems[0],"itemVariant"))("customPrice",t.trade.tradeItems[0].customValue?t.trade.tradeItems[0].value:null)("banned",!1)("userOwned",!0)("horizontal",!0)("allowOverlay",!1)("rarityRadialBackground",!0)}}function st(n,a){if(1&n&&(e._UZ(0,"cw-item-bundle",18),e.ALo(1,"pluck")),2&n){const t=e.oxw();e.Q6J("itemVariants",e.xi3(1,5,t.trade.tradeItems,"itemVariant"))("trade",t.trade)("userOwned",!0)("horizontal",!0)("alwaysOpenBundle",!0)}}function At(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"a",19),e.NdJ("click",function(){return e.CHM(t),e.oxw().openDepositAcceptedTradeInfoDialog()}),e.TgZ(1,"small"),e._uU(2,"The other user has already accepted the trade offer!"),e.qZA(),e.qZA()}}function ft(n,a){1&n&&e._uU(0,"This trade has now expired. ")}Be.\u0275fac=function(a){return new(a||Be)(e.Y36(s.WI),e.Y36(s.so),e.Y36(_.qu),e.Y36(c.RCL),e.Y36(c.Xxg))},Be.\u0275cmp=e.Xpm({type:Be,selectors:[["cw-deposit-custom-price-set-dialog"]],decls:29,vars:19,consts:function(){let n,a,t,i,r;return n=$localize`:␟f9ed4d6f33d5194760ca3f297843c879c7f63534␟9197290347307679837:Set custom price`,a=$localize`:␟5197c5b1d7e2a2a0a36a2f823495edf7d7bbb4c5␟3547464159287231073:${"\ufffd#13\ufffd"}:START_SMALL_TEXT:Adjust Price${"\ufffd/#13\ufffd"}:CLOSE_SMALL_TEXT:`,t=$localize`:␟ede833a4994b262309a543c019d36f5dd0f3e56d␟9169536482631773339:Set Price`,i=$localize`:␟d7b35c384aecd25a516200d6921836374613dfe7␟2159130950882492111:Cancel`,r=$localize`:␟68e710782ccb5398b3acb8844caf0b199da2c3da␟9178182467454450952:Confirm`,[["mat-dialog-title","",1,"text-center"],n,["fxLayout","column","fxLayoutGap","0.5rem","fxLayoutAlign","center stretch"],["fxFlex","1 0 100%",1,"text-center","item-container"],[3,"itemVariant","banned","allowOverlay","horizontal","customPrice","suggestedPrice","tradeItem","userOwned","showDepositSpeed","rarityRadialBackground"],[1,"text-warning"],[4,"ngIf"],["fxFlex","1 0 100%","fxLayoutAlign","center center"],[1,"mr-3"],a,[4,"rxLet"],["fxFlex","1 0 100%",3,"formGroup"],[1,"w-100"],t,["matInput","","type","number","pattern","\\d.*","formControlName","customPrice","cdkFocusIniital",""],[3,"control","show","errors"],["align","end"],["mat-flat-button","","color","warn",3,"click"],i,["mat-flat-button","","color","accent",1,"mat-button-3d",3,"click"],r,["fxFlex","1 1 0%","color","primary","thumbLabel","","step","0.01",3,"min","max","displayWith","ngModel","input"]]},template:function(a,t){1&a&&(e.TgZ(0,"h1",0),e.SDv(1,1),e.qZA(),e.TgZ(2,"mat-dialog-content"),e.TgZ(3,"div",2),e.TgZ(4,"div",3),e._UZ(5,"cw-item",4),e.TgZ(6,"p",5),e.TgZ(7,"small"),e._uU(8,"Depositing items with a custom price may take longer than usual."),e.qZA(),e.qZA(),e.qZA(),e.YNc(9,mt,4,0,"p",6),e.TgZ(10,"div",7),e.TgZ(11,"mat-label",8),e.tHW(12,9),e._UZ(13,"small"),e.N_p(),e.qZA(),e.YNc(14,St,2,4,"ng-container",10),e.qZA(),e.TgZ(15,"form",11),e.TgZ(16,"mat-form-field",12),e.TgZ(17,"mat-label"),e.SDv(18,13),e.qZA(),e._UZ(19,"input",14),e.TgZ(20,"mat-error"),e._UZ(21,"cw-form-errors",15),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(22,"mat-dialog-actions",16),e.TgZ(23,"button",17),e.NdJ("click",function(){return t.cancel()}),e.TgZ(24,"cw-loader"),e.SDv(25,18),e.qZA(),e.qZA(),e.TgZ(26,"button",19),e.NdJ("click",function(){return t.confirm()}),e.TgZ(27,"cw-loader"),e.SDv(28,20),e.qZA(),e.qZA(),e.qZA()),2&a&&(e.xp6(5),e.Q6J("itemVariant",t.itemVariant)("banned",!1)("allowOverlay",!1)("horizontal",!0)("customPrice",t.form.get("customPrice").value)("suggestedPrice",!0)("tradeItem",!0)("userOwned",!0)("showDepositSpeed",!0)("rarityRadialBackground",!0),e.xp6(4),e.Q6J("ngIf",!t.itemVariant.depositable),e.xp6(5),e.Q6J("rxLet",t.customPriceValue$),e.xp6(1),e.Q6J("formGroup",t.form),e.xp6(6),e.Q6J("control",t.form.controls.customPrice)("show",t.form.get("customPrice").invalid)("errors",e.WLB(16,It,"You can not list this item for less than "+t.minimumItemValueDeposit,"You can not list this item for more than "+t.maxCustomPrice+" ("+t.maxCustomPercent+"% markup)")))},directives:[s.uh,s.xY,ue.xw,ue.SQ,ue.Wh,ue.yH,v.P,S.O5,Ze.hX,nt.e,_._Y,_.JL,_.sg,Ze.KE,_t.Nt,_.wV,_.Fj,_.c5,_.JJ,_.u,Ze.TO,Ke.A,s.H8,p.lW,b.R,rt.pH,_.On],styles:["cw-item[_ngcontent-%COMP%]{display:inline-block!important;text-align:center!important}.item-container[_ngcontent-%COMP%]{max-width:20rem;margin-left:auto;margin-right:auto}  .mat-slider-thumb-label{transform:rotate(45deg)!important;background:transparent!important}  .mat-slider-thumb{transform:scale(1)!important}  .mat-slider-thumb-label-text{opacity:1!important}"],changeDetection:0}),Be=(0,F.gn)([(0,R.c)(),(0,F.w6)("design:paramtypes",[Object,s.so,_.qu,c.RCL,c.Xxg])],Be);let xe=class{constructor(a,t,i,r){this.data=a,this.dialog=t,this.dialogRef=i,this.tradeService=r,this.checked=!1,this.cancelling=!1;const{trades:T}=this.data,[C]=Array.isArray(T)?T:[T];this.trade=C}close(){if(this.checked)return this.cancelling=!0,this.tradeService.cancelTrades(this.trade.id).pipe((0,L.x)(()=>this.cancelling=!1),(0,R.t)(this)).subscribe(()=>{this.dialogRef.close()})}openDepositAcceptedTradeInfoDialog(){this.dialog.closeAll();const{trade:a}=this;this.dialog.open(w,{width:"500px",data:{trade:a}})}ngOnDestroy(){this.tradeService.inventoryCollection.clear()}isAutomaticallyCancelled(){return"REVOKED_API_KEY"===this.trade.cancelReason}};xe.dialogName="DEPOSIT_EXPIRED",xe.\u0275fac=function(a){return new(a||xe)(e.Y36(s.WI),e.Y36(s.uw),e.Y36(s.so),e.Y36(c.Xxg))},xe.\u0275cmp=e.Xpm({type:xe,selectors:[["cw-deposit-expired-dialog"]],decls:20,vars:12,consts:function(){let n,a,t,i;return n=$localize`:␟71c5a2d85870556e50fb868c43cb7946cff2a77a␟3830545533208110206:Warning!`,a=$localize`:␟d6fea69440e7252e36d699c2d94537fe4c30efce␟1161458861021322715:I confirm I have not sent the trade and have cancelled all outgoing trades`,t=$localize`:␟f4e529ae5ffd73001d1ff4bbdeeb0a72e342e5c8␟7819314041543176992:Close`,i=$localize`:␟aeb8219bf7c992a72d088b69926f12c4b683f284␟1786591858318828596:${"\ufffd*5:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_NG_CONTAINER:${"\ufffd#2:1\ufffd"}:START_TAG_SPAN:Warning:${"\ufffd/#2:1\ufffd"}:CLOSE_TAG_SPAN: Your deposit was cancelled automatically because you revoked your API Key! ${"[\ufffd#3:1\ufffd\ufffd/#3:1\ufffd|\ufffd#4:1\ufffd\ufffd/#4:1\ufffd]"}:LINE_BREAK:${"[\ufffd#3:1\ufffd\ufffd/#3:1\ufffd|\ufffd#4:1\ufffd\ufffd/#4:1\ufffd]"}:LINE_BREAK:${"\ufffd/#1:1\ufffd\ufffd/*5:1\ufffd"}:CLOSE_TAG_NG_CONTAINER: If you have sent the trade offer on Steam, please ${"\ufffd#6\ufffd"}:START_LINK:cancel it now.${"\ufffd/#6\ufffd"}:CLOSE_LINK:`,i=e.Zx4(i),[["mat-dialog-title",""],n,i,[4,"ngIf","ngIfElse"],["href","https://steamcommunity.com/id/me/tradeoffers/sent/","target","_blank","rel","noreferrer"],[3,"itemVariant","customPrice","banned","userOwned","horizontal","allowOverlay","rarityRadialBackground",4,"ngIf"],[3,"itemVariants","trade","userOwned","horizontal","alwaysOpenBundle",4,"ngIf"],[1,"mb-3",3,"ngModel","ngModelChange"],a,["align","center"],["mat-flat-button","","color","warn",1,"w-100","mat-button-3d","mat-button-lg",3,"disabled","click"],[3,"loading"],t,["mat-flat-button","","color","accent","href","https://steamcommunity.com/id/me/tradeoffers/sent/","target","_blank","rel","noreferrer",1,"w-100","mat-button-3d","mat-button-lg"],["class","pointer","tabindex","-1",3,"click",4,"ngIf"],["expiredText",""],[1,"text-danger"],[3,"itemVariant","customPrice","banned","userOwned","horizontal","allowOverlay","rarityRadialBackground"],[3,"itemVariants","trade","userOwned","horizontal","alwaysOpenBundle"],["tabindex","-1",1,"pointer",3,"click"]]},template:function(a,t){if(1&a&&(e.TgZ(0,"h1",0),e.SDv(1,1),e.qZA(),e.TgZ(2,"mat-dialog-content"),e.TgZ(3,"p"),e.tHW(4,2),e.YNc(5,Dt,5,0,"ng-container",3),e._UZ(6,"a",4),e.N_p(),e.qZA(),e.YNc(7,pt,2,10,"cw-item",5),e.YNc(8,st,2,8,"cw-item-bundle",6),e.TgZ(9,"mat-checkbox",7),e.NdJ("ngModelChange",function(r){return t.checked=r}),e.SDv(10,8),e.qZA(),e.qZA(),e.TgZ(11,"mat-dialog-actions",9),e.TgZ(12,"button",10),e.NdJ("click",function(){return t.close()}),e.TgZ(13,"cw-loader",11),e.SDv(14,12),e.qZA(),e.qZA(),e.TgZ(15,"a",13),e._uU(16," Cancel Steam Offer "),e.qZA(),e.YNc(17,At,3,0,"a",14),e.qZA(),e.YNc(18,ft,1,0,"ng-template",null,15,e.W1O)),2&a){const i=e.MAs(19);e.xp6(5),e.Q6J("ngIf",t.isAutomaticallyCancelled())("ngIfElse",i),e.xp6(2),e.Q6J("ngIf",1===t.trade.tradeItems.length),e.xp6(1),e.Q6J("ngIf",t.trade.tradeItems.length>1),e.xp6(1),e.Q6J("ngModel",t.checked),e.xp6(3),e.ekj("d-none",!t.checked),e.Q6J("disabled",t.cancelling),e.xp6(1),e.Q6J("loading",t.cancelling),e.xp6(2),e.ekj("d-none",t.checked),e.xp6(2),e.Q6J("ngIf","CANCELLED"!==t.trade.status)}},directives:[s.uh,s.xY,S.O5,J.oG,_.JJ,_.On,s.H8,p.lW,b.R,p.zs,v.P,Y._],pipes:[W.F],styles:[".mat-dialog-content[_ngcontent-%COMP%]{overflow-y:hidden;height:auto}"],changeDetection:0}),xe=(0,F.gn)([(0,R.c)(),(0,F.w6)("design:paramtypes",[Object,s.uw,s.so,c.Xxg])],xe);var Ct=o(70262),we=o(57963),Pe=o(85899),Ne=o(88634);function Rt(n,a){if(1&n&&(e._UZ(0,"cw-item",13),e.ALo(1,"pluck")),2&n){const t=e.oxw();e.Q6J("itemVariant",e.xi3(1,7,t.trade.tradeItems[0],"itemVariant"))("customPrice",t.trade.tradeItems[0].customValue?t.trade.tradeItems[0].value:null)("banned",!1)("userOwned",!0)("horizontal",!0)("allowOverlay",!1)("rarityRadialBackground",!0)}}function Ot(n,a){if(1&n&&(e._UZ(0,"cw-item-bundle",14),e.ALo(1,"pluck")),2&n){const t=e.oxw();e.Q6J("itemVariants",e.xi3(1,5,t.trade.tradeItems,"itemVariant"))("trade",t.trade)("userOwned",!0)("horizontal",!0)("alwaysOpenBundle",!0)}}let ve=class{constructor(a,t,i,r){this.data=a,this.dialogRef=t,this.soundService=i,this.tradeService=r,this.processing=!1;const{trades:T}=this.data,[C]=Array.isArray(T)?T:[T];this.trade=C}ngOnInit(){this.expiredPercentage$=this.tradeService.getElapsedPercentage(this.trade),this.soundService.playSound("OFFER_JOINED")}close(){this.dialogRef.close()}processTrade(a){this.processing=!0,this.tradeService.processTrade(a).pipe((0,L.x)(()=>this.processing=!1),(0,Ct.K)(t=>(0,N.of)(t)),(0,R.t)(this)).subscribe(()=>this.close())}ngOnDestroy(){this.soundService.stopSound("OFFER_JOINED")}};function ht(n,a){if(1&n&&(e._UZ(0,"cw-item",10),e.ALo(1,"pluck")),2&n){const t=e.oxw();e.Q6J("itemVariant",e.xi3(1,7,t.trade.tradeItems[0],"itemVariant"))("customPrice",t.trade.tradeItems[0].customValue?t.trade.tradeItems[0].value:null)("banned",!1)("userOwned",!0)("horizontal",!0)("allowOverlay",!1)("rarityRadialBackground",!0)}}function Pt(n,a){if(1&n&&(e._UZ(0,"cw-item-bundle",11),e.ALo(1,"pluck")),2&n){const t=e.oxw();e.Q6J("itemVariants",e.xi3(1,5,t.trade.tradeItems,"itemVariant"))("trade",t.trade)("userOwned",!0)("horizontal",!0)("alwaysOpenBundle",!0)}}ve.dialogName="DEPOSIT_JOINED",ve.\u0275fac=function(a){return new(a||ve)(e.Y36(s.WI),e.Y36(s.so),e.Y36(c.yu5),e.Y36(c.Xxg))},ve.\u0275cmp=e.Xpm({type:ve,selectors:[["cw-deposit-joined-dialog"]],decls:16,vars:8,consts:function(){let n,a,t,i;return n=$localize`:␟fc71b27011094f089f83cb201a9f2a7ab79ea470␟1292257904894655216:Trade Found`,a=$localize`:␟0a4f7baca48b57eb3a0b0cb30e3c144c556f9cc1␟2262217907299404982: Expires in: ${"\ufffd#7\ufffd"}:START_TAG_CW_COUNTDOWN:${"\ufffd/#7\ufffd"}:CLOSE_TAG_CW_COUNTDOWN:`,t=$localize`:␟bd62099d0173dda192f045f361a04f893a66176c␟4830885046139850247:Ready to start the trade?`,i=$localize`:␟e567b42377f1bedd2e932a60fdc48548aa61709f␟6864540329656918077:Yes, I'm ready`,[["mat-dialog-title","",1,"text-center"],n,[3,"itemVariant","customPrice","banned","userOwned","horizontal","allowOverlay","rarityRadialBackground",4,"ngIf"],[3,"itemVariants","trade","userOwned","horizontal","alwaysOpenBundle",4,"ngIf"],[1,"mb-3"],a,[1,"timer",3,"until"],["mode","determinate","color","accent",1,"mb-3",3,"value"],["align","center"],t,["mat-flat-button","","color","accent",1,"w-100","mat-button-3d","mat-button-lg",3,"disabled","click"],[3,"loading"],i,[3,"itemVariant","customPrice","banned","userOwned","horizontal","allowOverlay","rarityRadialBackground"],[3,"itemVariants","trade","userOwned","horizontal","alwaysOpenBundle"]]},template:function(a,t){1&a&&(e.TgZ(0,"h1",0),e.SDv(1,1),e.qZA(),e.TgZ(2,"mat-dialog-content"),e.YNc(3,Rt,2,10,"cw-item",2),e.YNc(4,Ot,2,8,"cw-item-bundle",3),e.TgZ(5,"p",4),e.tHW(6,5),e._UZ(7,"cw-countdown",6),e.N_p(),e.qZA(),e._UZ(8,"mat-progress-bar",7),e.ALo(9,"asyncInner"),e.qZA(),e.TgZ(10,"mat-dialog-actions",8),e.TgZ(11,"p",4),e.SDv(12,9),e.qZA(),e.TgZ(13,"button",10),e.NdJ("click",function(){return t.processTrade(t.trade.id)}),e.TgZ(14,"cw-loader",11),e.SDv(15,12),e.qZA(),e.qZA(),e.qZA()),2&a&&(e.xp6(3),e.Q6J("ngIf",1===t.trade.tradeItems.length),e.xp6(1),e.Q6J("ngIf",t.trade.tradeItems.length>1),e.xp6(3),e.Q6J("until",t.trade.expiresAt),e.xp6(1),e.Q6J("value",e.lcZ(9,6,t.expiredPercentage$)),e.xp6(5),e.Q6J("disabled",t.processing),e.xp6(1),e.Q6J("loading",t.processing))},directives:[s.uh,s.xY,S.O5,we.M,Pe.pW,s.H8,p.lW,b.R,v.P,Y._],pipes:[Ne.d,W.F],styles:[""],changeDetection:0}),ve=(0,F.gn)([(0,R.c)(),(0,F.w6)("design:paramtypes",[Object,s.so,c.yu5,c.Xxg])],ve);let ze=(()=>{class n{constructor(t,i,r){this.data=t,this.dialogRef=i,this.tradeService=r;const{trades:T}=this.data,[C]=Array.isArray(T)?T:[T];this.trade=C}close(){this.dialogRef.close()}ngOnDestroy(){this.tradeService.tradeCollection.clear()}}return n.dialogName="DEPOSIT_JOINED_EXPIRED",n.\u0275fac=function(t){return new(t||n)(e.Y36(s.WI),e.Y36(s.so),e.Y36(c.Xxg))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cw-deposit-joined-expired-dialog"]],decls:13,vars:2,consts:function(){let a,t,i,r;return a=$localize`:␟83caf503ef33dd64564e023ab83fa9bdf5d73ef0␟7130163132472891702:Trade Not Confirmed`,t=$localize`:␟424990e6cd3d51e9aa9589aff709b40bceba4257␟3665150827303863303:This trade has expired because you did not confirm the trade in time.`,i=$localize`:␟e39cd4d96e5027f7e6909ae4444fe5bc410b5e1b␟1163042304375858292: Failing this step too many times will result in you being temporarily blocked from listing deposits on the P2P system. `,r=$localize`:␟a86f5f7de4c99cfbf9ffbd8f6cb7aedb85ad8a1b␟374089746247684352:I Understand`,[["mat-dialog-title",""],a,[3,"itemVariant","customPrice","banned","userOwned","horizontal","allowOverlay","rarityRadialBackground",4,"ngIf"],[3,"itemVariants","trade","userOwned","horizontal","alwaysOpenBundle",4,"ngIf"],[1,"mb-1"],t,[1,"mb-3","text-danger"],i,["mat-flat-button","","color","warn",1,"w-100","mat-button-3d","mat-button-lg",3,"click"],r,[3,"itemVariant","customPrice","banned","userOwned","horizontal","allowOverlay","rarityRadialBackground"],[3,"itemVariants","trade","userOwned","horizontal","alwaysOpenBundle"]]},template:function(t,i){1&t&&(e.TgZ(0,"h1",0),e.SDv(1,1),e.qZA(),e.TgZ(2,"mat-dialog-content"),e.YNc(3,ht,2,10,"cw-item",2),e.YNc(4,Pt,2,8,"cw-item-bundle",3),e._UZ(5,"hr"),e.TgZ(6,"p",4),e.SDv(7,5),e.qZA(),e.TgZ(8,"p",6),e.SDv(9,7),e.qZA(),e.TgZ(10,"button",8),e.NdJ("click",function(){return i.close()}),e.TgZ(11,"span"),e.SDv(12,9),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngIf",1===i.trade.tradeItems.length),e.xp6(1),e.Q6J("ngIf",i.trade.tradeItems.length>1))},directives:[s.uh,s.xY,S.O5,p.lW,v.P,Y._],pipes:[W.F],styles:[""],changeDetection:0}),n})();var qe=o(61135),lt=o(58075),ct=o(23322),$e=o(20975);function K(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",5),e.TgZ(2,"h5",6),e.SDv(3,7),e.qZA(),e._UZ(4,"cw-countup",8),e.qZA(),e.BQk()),2&n){const t=a.ngIf;e.xp6(4),e.Q6J("date",t.createdAt)}}function $(n,a){if(1&n&&(e.ynx(0),e.YNc(1,K,5,1,"ng-container",2),e.BQk()),2&n){const t=e.oxw().ngIf;e.xp6(1),e.Q6J("ngIf",t[0])}}function B(n,a){if(1&n&&(e.ynx(0),e.YNc(1,$,2,1,"ng-container",2),e.BQk()),2&n){const t=a.ngIf;e.xp6(1),e.Q6J("ngIf",t.length>1)}}function _e(n,a){if(1&n&&(e._UZ(0,"cw-item",14),e.ALo(1,"pluck")),2&n){const t=e.oxw().$implicit;e.Q6J("itemVariant",e.xi3(1,8,t.tradeItems[0],"itemVariant"))("customPrice",t.tradeItems[0].customValue?t.tradeItems[0].value:null)("banned",!1)("userOwned",!0)("horizontal",!0)("allowOverlay",!1)("centerText",!1)("rarityRadialBackground",!0)}}function Fe(n,a){if(1&n&&(e._UZ(0,"cw-item-bundle",15),e.ALo(1,"pluck")),2&n){const t=e.oxw().$implicit;e.Q6J("itemVariants",e.xi3(1,5,t.tradeItems,"itemVariant"))("trade",t)("userOwned",!0)("horizontal",!0)("alwaysOpenBundle",!0)}}const Ge=function(n){return{"col-50":n}};function Le(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",11),e.ALo(2,"push"),e.YNc(3,_e,2,11,"cw-item",12),e.YNc(4,Fe,2,8,"cw-item-bundle",13),e.qZA(),e.BQk()),2&n){const t=a.$implicit,i=e.oxw(2);e.xp6(1),e.Q6J("ngClass.gt-sm",e.VKq(5,Ge,e.lcZ(2,3,i.isMultipleItemsTrade$))),e.xp6(2),e.Q6J("ngIf",1===t.tradeItems.length),e.xp6(1),e.Q6J("ngIf",t.tradeItems.length>1)}}function h(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",16),e.TgZ(2,"h4",17),e.SDv(3,18),e.qZA(),e._UZ(4,"cw-countup",8),e.qZA(),e.BQk()),2&n){const t=a.ngIf;e.xp6(4),e.Q6J("date",t.createdAt)}}function A(n,a){if(1&n&&(e.ynx(0),e.YNc(1,h,5,1,"ng-container",2),e.BQk()),2&n){const t=e.oxw().ngIf;e.xp6(1),e.Q6J("ngIf",t[0])}}function u(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",9),e.YNc(2,Le,5,7,"ng-container",10),e.qZA(),e.YNc(3,A,2,1,"ng-container",2),e.BQk()),2&n){const t=a.ngIf;e.xp6(2),e.Q6J("ngForOf",t),e.xp6(1),e.Q6J("ngIf",1===t.length)}}function H(n,a){1&n&&(e.ynx(0),e.TgZ(1,"p",19),e.SDv(2,20),e.qZA(),e.BQk())}function z(n,a){1&n&&(e.TgZ(0,"p",21),e.SDv(1,22),e.qZA())}function oe(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",9),e.TgZ(2,"div",23),e.TgZ(3,"button",24),e.NdJ("click",function(){const T=e.CHM(t).ngIf;return e.oxw().cancelTrade(T)}),e.ALo(4,"push"),e.TgZ(5,"cw-loader",25),e.SDv(6,26),e.ALo(7,"push"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"div",23),e.TgZ(9,"button",27),e.NdJ("click",function(){return e.CHM(t),e.oxw().close()}),e.SDv(10,28),e.ALo(11,"push"),e.qZA(),e.qZA(),e.qZA(),e.BQk()}if(2&n){const t=a.ngIf,i=e.oxw();e.xp6(1),e.ekj("flex-column",1===t.length),e.xp6(2),e.Q6J("disabled",e.lcZ(4,5,i.isLoading$)),e.xp6(2),e.Q6J("loading",e.lcZ(7,7,i.isLoading$)),e.xp6(4),e.Q6J("disabled",e.lcZ(11,9,i.isLoading$))}}let Q=class{constructor(a,t,i){this.data=a,this.dialogRef=t,this.tradeService=i,this.trades$=new qe.X([]),this.isLoading$=new qe.X(!1),this.isErrorCancelingTrades$=new qe.X(!1),this.isMultipleItemsTrade$=new qe.X(!1);const{trades:r}=this.data,T=Array.isArray(r)?r:[r];this.trades$.next(T),this.isMultipleItemsTrade$.next(T.length>1)}close(){this.dialogRef.close()}cancelTrade(a){this.isErrorCancelingTrades$.next(!1),this.isLoading$.next(!0);const t=a.map(({id:i})=>i);this.tradeService.cancelTrades(t).pipe((0,fe.b)(i=>{if(Array.isArray(i)&&i.some(r=>!r)){const r=this.trades$.getValue();this.trades$.next(r.filter((T,C)=>!i[C])),this.isErrorCancelingTrades$.next(!0)}else this.dialogRef.close()}),(0,L.x)(()=>this.isLoading$.next(!1)),(0,R.t)(this)).subscribe()}};Q.dialogName="DEPOSIT_LISTED",Q.\u0275fac=function(a){return new(a||Q)(e.Y36(s.WI),e.Y36(s.so),e.Y36(c.Xxg))},Q.\u0275cmp=e.Xpm({type:Q,selectors:[["cw-deposit-listed-dialog"]],decls:15,vars:13,consts:function(){let n,a,t,i,r,T,C;return n=$localize`:␟96c1d166ec9b527fc4119fc1d9a8164bf63c1676␟5686363192138930040:Deposit Listed`,a=$localize`:␟6c89d346793307b6c2e0f5e706526538e9eef477␟5950816940949525989:Waiting for a buyer...`,t=$localize`:␟6c89d346793307b6c2e0f5e706526538e9eef477␟5950816940949525989:Waiting for a buyer...`,i=$localize`:␟aa49f109e809723e36468a542205a4f2b435ce39␟8772569888482905434: Your deposit has been listed on the withdraw page. Please wait for another user to withdraw your item/s. It could happen at any time so be ready. `,r=$localize`:␟8ade751e9e344ea56e59e0588afa70244a638634␟6474883368189091709: Some of your deposits failed to be canceled. The items left in the view, couldn't be canceled! `,T=$localize`:␟be77d34e244c15d284c34f716724d4871812a3ef␟9032413180597561964:Cancel Trade/s`,C=$localize`:␟c2cb67132fccc3e5c627b23a589990818387cbc5␟6502562377064441895: OK `,[["mat-dialog-title",""],n,[4,"ngIf"],[4,"ngIf","ngIfElse"],["errorCancelingTradesTpl",""],[1,"text-center"],[1,"mat-h5","mb-0"],a,[1,"timer",3,"date"],[1,"row"],[4,"ngFor","ngForOf"],[1,"col-100",3,"ngClass.gt-sm"],[3,"itemVariant","customPrice","banned","userOwned","horizontal","allowOverlay","centerText","rarityRadialBackground",4,"ngIf"],[3,"itemVariants","trade","userOwned","horizontal","alwaysOpenBundle",4,"ngIf"],[3,"itemVariant","customPrice","banned","userOwned","horizontal","allowOverlay","centerText","rarityRadialBackground"],[3,"itemVariants","trade","userOwned","horizontal","alwaysOpenBundle"],[1,"message-block","mb-3"],[1,"mat-h4","mb-0"],t,[1,"mb-3"],i,[1,"mb-3","text-danger"],r,[1,"col-100"],["type","button","mat-button","",1,"w-100","mat-button-lg",3,"disabled","click"],[3,"loading"],T,["type","button","mat-flat-button","","color","accent",1,"w-100","mb-2","mat-button-3d","mat-button-lg",3,"disabled","click"],C]},template:function(a,t){if(1&a&&(e.TgZ(0,"div",0),e.TgZ(1,"h4"),e.SDv(2,1),e.qZA(),e.YNc(3,B,2,1,"ng-container",2),e.ALo(4,"push"),e.qZA(),e.TgZ(5,"mat-dialog-content"),e.YNc(6,u,4,2,"ng-container",2),e.ALo(7,"push"),e.YNc(8,H,3,0,"ng-container",3),e.ALo(9,"push"),e.YNc(10,z,2,0,"ng-template",null,4,e.W1O),e.qZA(),e.TgZ(12,"mat-dialog-actions"),e.YNc(13,oe,12,11,"ng-container",2),e.ALo(14,"push"),e.qZA()),2&a){const i=e.MAs(11);e.xp6(3),e.Q6J("ngIf",e.lcZ(4,5,t.trades$)),e.xp6(3),e.Q6J("ngIf",e.lcZ(7,7,t.trades$)),e.xp6(2),e.Q6J("ngIf",!1===e.lcZ(9,9,t.isErrorCancelingTrades$))("ngIfElse",i),e.xp6(5),e.Q6J("ngIf",e.lcZ(14,11,t.trades$))}},directives:[s.uh,S.O5,s.xY,s.H8,lt.O,S.sg,ct.oO,v.P,Y._,p.lW,b.R],pipes:[$e.f,W.F],styles:["[mat-dialog-title][_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding-left:.5rem;padding-right:.75rem}[mat-dialog-title][_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{line-height:0}.timer[_ngcontent-%COMP%]{font-size:.75rem}.row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;width:100%}.col-100[_ngcontent-%COMP%]{flex:0 1 100%}.col-50[_ngcontent-%COMP%]{flex:0 1 50%;padding-left:.5rem;padding-right:.5rem}"],changeDetection:0}),Q=(0,F.gn)([(0,R.c)(),(0,F.w6)("design:paramtypes",[Object,s.so,c.Xxg])],Q);var Z=o(31495),X=o(96298),re=o(71712);function se(n,a){if(1&n&&(e._UZ(0,"cw-item",26),e.ALo(1,"pluck")),2&n){const t=e.oxw();e.Q6J("itemVariant",e.xi3(1,9,t.trade.tradeItems[0],"itemVariant"))("customPrice",t.trade.tradeItems[0].customValue?t.trade.tradeItems[0].value:null)("banned",!1)("userOwned",!0)("horizontal",!0)("allowOverlay",!1)("showCopyToClipboard",!0)("rarityRadialBackground",!0)("hideImageBgIcon",!0)}}function d(n,a){if(1&n&&(e._UZ(0,"cw-item-bundle",27),e.ALo(1,"pluck")),2&n){const t=e.oxw();e.Q6J("itemVariants",e.xi3(1,6,t.trade.tradeItems,"itemVariant"))("trade",t.trade)("userOwned",!0)("horizontal",!0)("alwaysOpenBundle",!0)("showCopyToClipboard",!0)}}function m(n,a){1&n&&(e.TgZ(0,"p"),e.TgZ(1,"span",28),e._uU(2,"Warning:"),e.qZA(),e._uU(3," Revoking your API key will cancel the trade"),e.qZA())}function g(n,a){if(1&n&&(e.TgZ(0,"small",29),e._uU(1),e.qZA()),2&n){const t=a.ngIf;e.xp6(1),e.Oqu(t)}}let V=(()=>{class n{constructor(t,i,r,T,C,k,q){this.data=t,this.changeRef=i,this.dialogRef=r,this.steamOfferService=T,this.tradeService=C,this.platformService=k,this.loading=!1,this.promoCodeText$=q.promoCodeText$;const{trades:le}=this.data,[Se]=Array.isArray(le)?le:[le];this.trade=Se}ngOnInit(){this.expiredPercentage$=this.tradeService.getElapsedPercentage(this.trade)}close(){this.dialogRef.close()}readySteamOffer(){this.loading=!0,this.platformService.window.open(this.trade.withdrawerSteamTradeUrl,"_blank"),this.steamOfferService.readySteamOffer({tradeId:this.trade.id}).pipe((0,x.q)(1)).subscribe(()=>{this.loading=!1,this.changeRef.markForCheck()})}showSteamApiKeyWarning(){return"API_KEY_DEPOSITOR"===this.trade.trackingType}}return n.dialogName="DEPOSIT_PROCESSING",n.\u0275fac=function(t){return new(t||n)(e.Y36(s.WI),e.Y36(e.sBO),e.Y36(s.so),e.Y36(c.khI),e.Y36(c.Xxg),e.Y36(c.mix),e.Y36(c.KDu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cw-deposit-processing-dialog"]],decls:35,vars:18,consts:function(){let a,t,i,r,T;return a=$localize`:␟bf6b73d03f82cce4f2b4e3d703d5c748a6692551␟8328687910908497031:Complete Trade`,t=$localize`:␟6eb1f015293379a35aee26274404c7809586f5ab␟1042244735848539957: You have ${"\ufffd#17\ufffd"}:START_TAG_CW_COUNTDOWN:${"\ufffd/#17\ufffd"}:CLOSE_TAG_CW_COUNTDOWN:${"\ufffd#18\ufffd\ufffd/#18\ufffd"}:LINE_BREAK: to complete the trade. `,i=$localize`:␟d209e975f970c7178f74461b9625cac791349f23␟2480179618233315150: IMPORTANT: If the timer is about to expire and ${"\ufffd0\ufffd"}:INTERPOLATION: has not accepted your Steam trade offer yet, you must cancel it immediately on Steam. `,r=$localize`:␟d580238ef835c2348afafe29277748fd7b874bf8␟7264380481614272110: Send Items Now`,T=$localize`:␟c1989a3a0202701a0e12c820fb9d79e68919c2aa␟630904771225864278: You will receive  ${"\ufffd#32\ufffd"}:START_TAG_CW_PRETTY_BALANCE:${"\ufffd/#32\ufffd"}:CLOSE_TAG_CW_PRETTY_BALANCE:`,[["mat-dialog-title",""],a,[3,"itemVariant","customPrice","banned","userOwned","horizontal","allowOverlay","showCopyToClipboard","rarityRadialBackground","hideImageBgIcon",4,"ngIf"],[3,"itemVariants","trade","userOwned","horizontal","alwaysOpenBundle","showCopyToClipboard",4,"ngIf"],["fxLayoutAlign","center center"],[1,"mr-2"],["inlineSVG","assets/icons/chevron-right.svg",1,"animate-arrows"],["fxFlex","","fxLayoutAlign","start center",1,"message-block","message-block-small"],[1,"user-avatar","mr-2"],[1,"ellipsis"],[1,"mb-3"],t,[1,"timer",3,"until"],["mode","determinate","color","accent",1,"mb-3",3,"value"],[4,"ngIf"],[1,"mb-3","text-danger"],i,["align","center"],["mat-flat-button","","color","accent","fxLayout","","fxLayoutAlign","center center",1,"w-100","mat-button-3d","mat-button-lg","mb-3",3,"disabled","click"],["inlineSVG","assets/icons/steam.svg",1,"mr-1"],r,[1,"message-block","message-block-small"],[1,"inner"],T,["currency","TKN",1,"positive",3,"balance"],["class","d-block text-white mt-1",4,"ngIf"],[3,"itemVariant","customPrice","banned","userOwned","horizontal","allowOverlay","showCopyToClipboard","rarityRadialBackground","hideImageBgIcon"],[3,"itemVariants","trade","userOwned","horizontal","alwaysOpenBundle","showCopyToClipboard"],[1,"text-danger"],[1,"d-block","text-white","mt-1"]]},template:function(t,i){1&t&&(e.TgZ(0,"h1",0),e.SDv(1,1),e.qZA(),e.TgZ(2,"mat-dialog-content"),e.YNc(3,se,2,12,"cw-item",2),e.YNc(4,d,2,9,"cw-item-bundle",3),e.TgZ(5,"div",4),e.TgZ(6,"span",5),e._uU(7," Send to "),e._UZ(8,"cw-icon",6),e.qZA(),e.TgZ(9,"div",7),e.TgZ(10,"div",8),e.ALo(11,"cssUrl"),e.qZA(),e.TgZ(12,"span",9),e._uU(13),e.qZA(),e.qZA(),e.qZA(),e._UZ(14,"hr"),e.TgZ(15,"p",10),e.tHW(16,11),e._UZ(17,"cw-countdown",12),e._UZ(18,"br"),e.N_p(),e.qZA(),e._UZ(19,"mat-progress-bar",13),e.ALo(20,"asyncInner"),e.YNc(21,m,4,0,"p",14),e.TgZ(22,"p",15),e.SDv(23,16),e.qZA(),e.qZA(),e.TgZ(24,"mat-dialog-actions",17),e.TgZ(25,"a",18),e.NdJ("click",function(){return i.readySteamOffer()}),e._UZ(26,"cw-icon",19),e.TgZ(27,"span"),e.SDv(28,20),e.qZA(),e.qZA(),e.TgZ(29,"div",21),e.TgZ(30,"div",22),e.tHW(31,23),e._UZ(32,"cw-pretty-balance",24),e.N_p(),e.qZA(),e.YNc(33,g,2,1,"small",25),e.ALo(34,"async"),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngIf",1===i.trade.tradeItems.length),e.xp6(1),e.Q6J("ngIf",i.trade.tradeItems.length>1),e.xp6(6),e.Udp("background-image",e.lcZ(11,12,i.trade.withdrawer.avatar)),e.xp6(3),e.hij(" ",i.trade.withdrawer.steamDisplayName,""),e.xp6(4),e.Q6J("until",i.trade.expiresAt),e.xp6(2),e.Q6J("value",e.lcZ(20,14,i.expiredPercentage$)),e.xp6(2),e.Q6J("ngIf",i.showSteamApiKeyWarning()),e.xp6(2),e.pQV(i.trade.withdrawer.steamDisplayName),e.QtT(23),e.xp6(2),e.Q6J("disabled",i.loading),e.xp6(7),e.Q6J("balance",i.trade.totalValue),e.xp6(1),e.Q6J("ngIf",e.lcZ(34,16,i.trade.promoCode&&i.promoCodeText$)))},directives:[s.uh,s.xY,S.O5,ue.Wh,Z.o,X.d$,ue.yH,we.M,Pe.pW,s.H8,p.zs,ue.xw,y.q,v.P,Y._],pipes:[re.u,Ne.d,S.Ov,W.F],styles:["@keyframes arrow-animation{0%,to{transform:translate(0)}50%{transform:translate(.3rem)}}.send-to-user[_ngcontent-%COMP%]{display:flex}.message-block[_ngcontent-%COMP%]{overflow:hidden}.message-block[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}cw-pretty-balance.negative[_ngcontent-%COMP%]{color:#ff5548}cw-pretty-balance.positive[_ngcontent-%COMP%]{color:#00e258}.user-avatar[_ngcontent-%COMP%]{flex-shrink:0;width:2rem;height:2rem;border-radius:100%;background-position:center;background-repeat:no-repeat;background-size:cover}.animate-arrows[_ngcontent-%COMP%]{animation:arrow-animation 1s ease-in-out infinite}"],changeDetection:0}),n})();var Te=o(41999),De=o(87254);let ye=(()=>{class n{constructor(t,i,r,T,C){this.dialog=t,this.localStorage=i,this.tradeService=r,this.tradeDialogService=T,this.recaptchaDialogService=C,this.loading=!1,this.tradeService.userDeposits$.pipe((0,de.h)(k=>!!k),(0,j.U)(k=>k.sort((q,le)=>new Date(q.createdAt)>new Date(le.createdAt)?1:-1)),(0,Ee.O)([]),(0,ae.G)(),(0,j.U)(k=>{const[q,le]=k;return le.filter(ge=>{const ke=q.find(bt=>bt.id===ge.id);return!ke||!this.tradeDistinctUntilChanged(ke,ge)})})).subscribe(k=>{k.forEach(q=>{if("CANCELLED"===q.status){if("NO_CONFIRMATION"===q.cancelReason)return this.tradeDialogService.openDialog(q,ze,{width:"300px"},!1,!0);if("EXPIRED"===q.cancelReason)return this.tradeDialogService.openDialog(q,xe,{disableClose:!0,width:"300px"},!1,!0)}else{if("COMPLETED"===q.status||"COMPLETED_PRIVATE"===q.status||"COMPLETED_WITH_STORAGE_UNIT"===q.status)return this.tradeDialogService.openDialog(q,P,{width:"300px"},!1,!0);if("JOINED"===q.status)return this.openDepositJoinedDialog(q,!1,!0);if("PROCESSING"===q.status)return this.openDepositProcessingDialog(q);if("FROZEN"===q.status)return this.tradeDialogService.openFrozenDialog(q,!1,!0);if("COOLDOWN"===q.status)return this.openDepositCooldownDialog(q)}})})}openDepositSteamUrlDialog(t){return this.tradeDialogService.openSteamUrlDialog(Object.assign(Object.assign({},t),{isLoading:this.loading,obsToComplete$:[this.deposit(!!t.smartDeposit)]})).afterClosed()}openDepositJoinedDialog(t,i=!1,r=!1){return new Date(t.expiresAt)>new Date?this.tradeDialogService.openDialog(t,ve,{width:"300px"},i):new Date(t.expiresAt)<=new Date?this.tradeDialogService.openDialog(t,ze,{width:"300px"},i,r):void 0}openDepositAcceptedTradeInfoDialog(t,i=!1){this.tradeDialogService.openDialog(t,w,{width:"500px"},i)}openDepositProcessingDialog(t,i=!1){return this.tradeDialogService.openDialog(t,V,{width:"300px"},!0)}openDepositConfirmCancelDialog(t,i=!1){return this.tradeDialogService.openDialog(t,O,{width:"300px"},i)}openDepositCustomPriceInfoDialog(){return this.hasCheckedDialogAsDontShowAnymore("DEPOSIT_CUSTOM_PRICE_INFO")?(0,N.of)(void 0):this.dialog.open(he,{width:"300px"}).afterClosed().pipe((0,de.h)(t=>!!t))}openDepositCustomPriceSetDialog(t){return this.dialog.open(Be,{width:"500px",data:{itemVariant:t}}).afterClosed()}openDepositListedDialog(t,i=!1,r=!1){return this.tradeDialogService.openDialog(t,Q,{width:"300px"},i,r)}openDepositCompleteDialog(t,i=!1,r=!1){return this.tradeDialogService.openDialog(t,P,{width:"300px"},i,r)}openDepositCooldownDialog(t,i=!1){return this.tradeDialogService.openDialog(t,f,{width:"300px"},i)}openUserItemSellDialog(t){const i=this.dialog.open(ie.UserItemSellDialogComponent,{width:"500px"});return i.componentInstance.balanceTarget=t,i.afterClosed()}deposit(t=!1){return this.tradeService.selectedItemVariants$.pipe((0,x.q)(1),(0,G.w)(i=>{if(t){const k=this.tradeService.getGoodPricedItems(i),q=this.tradeService.getBadPricedItems(i).map(le=>[le]);return(0,ne.z)(k.length?this.tradeService.createTrades([k]).pipe(this.recaptchaDialogService.errorOp(le=>le?this.tradeService.createTrades([k],le):te.E)):te.E,...q.map(le=>this.tradeService.createTrades([le]).pipe(this.recaptchaDialogService.errorOp(Se=>Se?this.tradeService.createTrades([le],Se):te.E)))).pipe(be())}if(this.tradeService.allowBundles)return this.tradeService.createTrades([i]).pipe(this.recaptchaDialogService.errorOp(k=>k?this.tradeService.createTrades([i],k):te.E));const r=i.map(k=>[k]),[T,...C]=r;return(0,ne.z)(this.tradeService.createTrades([T]).pipe(this.recaptchaDialogService.errorOp(k=>k?this.tradeService.createTrades([T],k):te.E)),C.length?this.tradeService.createTrades(C):te.E).pipe(be())}),(0,fe.b)(i=>{const r=Array.isArray(i)?i.reduce((C,k)=>C.concat(k),[]):i,T=Array.isArray(r)&&r.length>1?"580px":"300px";this.tradeDialogService.openDialog(r,Q,{width:T})}),(0,L.x)(()=>{this.loading=!1,this.tradeService.inventoryCollection.clear()}))}tradeDistinctUntilChanged(t,i){let r=!1;return t.id===i.id&&t.status!==i.status&&(r=!0),t.id===i.id&&t.status===i.status&&["JOINED","PROCESSING","COOLDOWN"].includes(i.status)&&new Date(i.expiresAt)<new Date&&(r=!0),t.id===i.id&&!1===r}hasCheckedDialogAsDontShowAnymore(t){const i=JSON.parse(this.localStorage.get(E.F.TRADE_DIALOGS_DONT_SHOW_ANYMORE));return!!Array.isArray(i)&&i.includes(t)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(s.uw),e.LFG(De.n2),e.LFG(c.Xxg),e.LFG(Te.a),e.LFG(M.fQ))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),at=(()=>{class n{constructor(t,i){this.steamService=t,this.dialogService=i}getProfileTradeOffersUrl(){var t;return this.steamService.getProfileTradeOffersUrl(null===(t=this.trade.depositor)||void 0===t?void 0:t.steamId)}openDialog(){this.dialogService.openDepositCooldownDialog(this.trade,!0)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(c.qe3),e.Y36(ye))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cw-deposit-cooldown"]],inputs:{trade:"trade"},decls:9,vars:6,consts:function(){let a,t;return a=$localize`:␟075ad51062e3872dc392032364f6b8c274587d2c␟7315221710899233447:Deposit Cooldown`,t=$localize`:␟265d18ff5aafe06ec14cdef0ef7131331ba98938␟4675170461585896817: Trade went into cooldown. You cannot cancel it anymore.${"\ufffd#7\ufffd\ufffd/#7\ufffd"}:LINE_BREAK: If you have sent the ${"\ufffd#8\ufffd"}:START_LINK:trade offer on Steam${"\ufffd/#8\ufffd"}:CLOSE_LINK:, please try to cancel it.
`,[["fxLayoutAlign","start center",1,"mb-3"],["color","warn",1,"mr-2",3,"loading","diameter"],["fxFlexAlign","center"],a,[1,"mb-3",3,"trade","rarityRadialBackground","horizontal","click"],[1,"message","mb-3"],t,["target","_blank",3,"href"]]},template:function(t,i){1&t&&(e.TgZ(0,"header",0),e._UZ(1,"cw-loader",1),e.TgZ(2,"span",2),e.SDv(3,3),e.qZA(),e.qZA(),e.TgZ(4,"cw-trade",4),e.NdJ("click",function(){return i.openDialog()}),e.qZA(),e.TgZ(5,"p",5),e.tHW(6,6),e._UZ(7,"br"),e._UZ(8,"a",7),e.N_p(),e.qZA()),2&t&&(e.xp6(1),e.Q6J("loading",!0)("diameter",16),e.xp6(3),e.Q6J("trade",i.trade)("rarityRadialBackground",!0)("horizontal",!0),e.xp6(4),e.Q6J("href",i.getProfileTradeOffersUrl(),e.LSH))},directives:[ue.Wh,b.R,ue.XD,I.L],styles:["[_nghost-%COMP%]{display:block;padding:.75rem 1.25rem 1.25rem;cursor:pointer;transition:background 175ms ease-out}[_nghost-%COMP%]:nth-child(odd){background:#262a30}[_nghost-%COMP%]:nth-child(even){background:#21252b}[_nghost-%COMP%]:hover{background:#2c3037}.message[_ngcontent-%COMP%]{font-size:.875rem;padding:0 1.5rem;text-align:center}"],changeDetection:0}),n})();var dt=o(56284);function Ft(n,a){if(1&n&&(e._UZ(0,"cw-item",12),e.ALo(1,"pluck")),2&n){const t=e.oxw();e.Q6J("itemVariant",e.xi3(1,7,t.trade.tradeItems[0],"itemVariant"))("customPrice",t.trade.tradeItems[0].customValue?t.trade.tradeItems[0].value:null)("banned",!1)("userOwned",!0)("horizontal",!0)("allowOverlay",!1)("rarityRadialBackground",!0)}}function Ce(n,a){if(1&n&&(e._UZ(0,"cw-item-bundle",13),e.ALo(1,"pluck")),2&n){const t=e.oxw();e.Q6J("itemVariants",e.xi3(1,4,t.trade.tradeItems,"itemVariant"))("trade",t.trade)("userOwned",!0)("horizontal",!0)}}function Xt(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"p",14),e.SDv(2,15),e.qZA(),e.TgZ(3,"button",16),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return r.processTrade(r.trade.id)}),e.TgZ(4,"cw-loader",6),e.SDv(5,17),e.qZA(),e.qZA(),e._UZ(6,"mat-progress-bar",18),e.ALo(7,"asyncInner"),e.TgZ(8,"p",19),e.tHW(9,20),e.TgZ(10,"cw-countdown",21),e.NdJ("finished",function(){return e.CHM(t),e.oxw().setExpired()}),e.qZA(),e.N_p(),e.qZA(),e.BQk()}if(2&n){const t=e.oxw();e.xp6(3),e.Q6J("disabled",t.cancelling||t.processing),e.xp6(1),e.Q6J("loading",t.processing),e.xp6(2),e.Q6J("value",e.lcZ(7,4,t.expiredPercentage$)),e.xp6(4),e.Q6J("until",t.trade.expiresAt)}}function Jt(n,a){1&n&&(e.ynx(0),e.TgZ(1,"p",22),e.SDv(2,23),e.qZA(),e.BQk())}let Je=class{constructor(a,t){this.tradeService=a,this.dialogService=t,this.cancelling=!1,this.expired=!1,this.processing=!1}ngOnInit(){this.expiredPercentage$=this.tradeService.getElapsedPercentage(this.trade)}openDepositJoinedDialog(){this.dialogService.openDepositJoinedDialog(this.trade,!0)}processTrade(a){this.processing=!0,this.tradeService.processTrade(a).pipe((0,L.x)(()=>this.processing=!1),(0,R.t)(this)).subscribe()}cancelTrade(a){this.cancelling=!0,this.tradeService.cancelTrades(a).pipe((0,x.q)(1),(0,L.x)(()=>this.cancelling=!1),(0,R.t)(this)).subscribe()}setExpired(a=!0){this.expired=a}};function Yt(n,a){if(1&n&&(e._UZ(0,"cw-item",13),e.ALo(1,"pluck")),2&n){const t=e.oxw();e.Q6J("itemVariant",e.xi3(1,7,t.trade.tradeItems[0],"itemVariant"))("customPrice",t.trade.tradeItems[0].customValue?t.trade.tradeItems[0].value:null)("banned",!1)("userOwned",!0)("horizontal",!0)("allowOverlay",!1)("rarityRadialBackground",!0)}}function Vt(n,a){if(1&n&&(e._UZ(0,"cw-item-bundle",14),e.ALo(1,"pluck")),2&n){const t=e.oxw();e.Q6J("itemVariants",e.xi3(1,4,t.trade.tradeItems,"itemVariant"))("trade",t.trade)("userOwned",!0)("horizontal",!0)}}Je.\u0275fac=function(a){return new(a||Je)(e.Y36(c.Xxg),e.Y36(ye))},Je.\u0275cmp=e.Xpm({type:Je,selectors:[["cw-deposit-joined"]],inputs:{trade:"trade"},decls:15,vars:12,consts:function(){let n,a,t,i,r,T;return n=$localize`:␟cf06fa6d688bcb358f749f49f5f73deeb4be2a9c␟5213771062241898526:Deposit`,a=$localize`:␟d7b35c384aecd25a516200d6921836374613dfe7␟2159130950882492111:Cancel`,t=$localize`:␟bd62099d0173dda192f045f361a04f893a66176c␟4830885046139850247:Ready to start the trade?`,i=$localize`:␟e567b42377f1bedd2e932a60fdc48548aa61709f␟6864540329656918077:Yes, I'm ready`,r=$localize`:␟40b3f35be3144958a85087531deb8f494b951802␟5895946083236365630: You have ${"\ufffd#10\ufffd"}:START_TAG_CW_COUNTDOWN:${"\ufffd/#10\ufffd"}:CLOSE_TAG_CW_COUNTDOWN: to confirm the trade. `,T=$localize`:␟dec461dda4cdc864fbe19ef39d0fb5d082135427␟1258833575980216932:This trade has expired`,[["fxLayoutAlign","space-between center",1,"mb-3"],["fxLayoutAlign","center"],["color","accent",3,"loading","diameter"],["fxFlexAlign","center"],n,["mat-button","","color","primary",3,"disabled","click"],[3,"loading"],a,[1,"items","mb-2",3,"click"],[3,"itemVariant","customPrice","banned","userOwned","horizontal","allowOverlay","rarityRadialBackground",4,"ngIf"],[3,"itemVariants","trade","userOwned","horizontal",4,"ngIf"],[4,"ngIf"],[3,"itemVariant","customPrice","banned","userOwned","horizontal","allowOverlay","rarityRadialBackground"],[3,"itemVariants","trade","userOwned","horizontal"],[1,"message","mb-3"],t,["mat-flat-button","","color","accent",1,"w-100","mb-3","mat-button-3d","mat-button-lg",3,"disabled","click"],i,["mode","determinate","color","accent",1,"mb-3",3,"value"],[1,"message"],r,[1,"timer",3,"until","finished"],[1,"message","text-danger"],T]},template:function(a,t){1&a&&(e.TgZ(0,"header",0),e.TgZ(1,"div",1),e._UZ(2,"cw-loader",2),e.TgZ(3,"span",3),e.SDv(4,4),e.qZA(),e.qZA(),e.TgZ(5,"button",5),e.NdJ("click",function(){return t.cancelTrade(t.trade.id)}),e.TgZ(6,"cw-loader",6),e.SDv(7,7),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"div",8),e.NdJ("click",function(){return t.openDepositJoinedDialog()}),e.YNc(9,Ft,2,10,"cw-item",9),e.YNc(10,Ce,2,7,"cw-item-bundle",10),e.qZA(),e.YNc(11,Xt,11,6,"ng-container",11),e.ALo(12,"timeUntil"),e.YNc(13,Jt,3,0,"ng-container",11),e.ALo(14,"timeUntil")),2&a&&(e.xp6(2),e.Q6J("loading",!0)("diameter",16),e.xp6(3),e.Q6J("disabled",t.cancelling||t.processing),e.xp6(1),e.Q6J("loading",t.cancelling),e.xp6(3),e.Q6J("ngIf",1===t.trade.tradeItems.length),e.xp6(1),e.Q6J("ngIf",t.trade.tradeItems.length>1),e.xp6(1),e.Q6J("ngIf",!t.expired||e.lcZ(12,8,t.trade.expiresAt)>0),e.xp6(2),e.Q6J("ngIf",t.expired||e.lcZ(14,10,t.trade.expiresAt)<=0))},directives:[ue.Wh,b.R,ue.XD,p.lW,S.O5,v.P,Y._,Pe.pW,we.M],pipes:[dt.c,W.F,Ne.d],styles:["[_nghost-%COMP%]{display:block;padding:.75rem 1.25rem 1.25rem;cursor:pointer;transition:background 175ms ease-out}[_nghost-%COMP%]:nth-child(odd){background:#262a30}[_nghost-%COMP%]:nth-child(even){background:#21252b}[_nghost-%COMP%]:hover{background:#2c3037}cw-loader[_ngcontent-%COMP%]{display:inline-block;margin-right:.5rem}cw-item[_ngcontent-%COMP%], cw-item-bundle[_ngcontent-%COMP%]{cursor:pointer}.mat-progress-bar[_ngcontent-%COMP%]{width:auto}.timer[_ngcontent-%COMP%]{font-weight:500;color:#ecce75}.message[_ngcontent-%COMP%]{font-size:.875rem;padding:0 1.5rem;text-align:center;margin-bottom:0}"],changeDetection:0}),Je=(0,F.gn)([(0,R.c)(),(0,F.w6)("design:paramtypes",[c.Xxg,ye])],Je);let Ye=class{constructor(a,t,i){this.changeRef=a,this.dialog=t,this.tradeService=i,this.cancelling=!1}openDepositListedDialog(){this.dialog.open(Q,{width:"300px",data:{trades:[this.trade]}})}cancelTrade(a){this.cancelling=!0,this.tradeService.cancelTrades(a).pipe((0,x.q)(1),(0,L.x)(()=>{this.cancelling=!1,this.changeRef.markForCheck()}),(0,R.t)(this)).subscribe()}};function Ht(n,a){if(1&n&&(e._UZ(0,"cw-item",13),e.ALo(1,"pluck")),2&n){const t=e.oxw();e.Q6J("itemVariant",e.xi3(1,8,t.trade.tradeItems[0],"itemVariant"))("customPrice",t.trade.tradeItems[0].customValue?t.trade.tradeItems[0].value:null)("banned",!1)("horizontal",!0)("userOwned",!0)("allowOverlay",!1)("showCopyToClipboard",!0)("rarityRadialBackground",!0)}}function Qt(n,a){if(1&n&&(e._UZ(0,"cw-item-bundle",14),e.ALo(1,"pluck")),2&n){const t=e.oxw();e.Q6J("itemVariants",e.xi3(1,5,t.trade.tradeItems,"itemVariant"))("trade",t.trade)("userOwned",!0)("horizontal",!0)("showCopyToClipboard",!0)}}function kt(n,a){if(1&n&&(e.ynx(0),e._UZ(1,"mat-progress-bar",15),e.ALo(2,"asyncInner"),e.TgZ(3,"p",16),e.tHW(4,17),e._UZ(5,"cw-countdown",18),e.N_p(),e.qZA(),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("value",e.lcZ(2,2,t.expiredPercentage$)),e.xp6(4),e.Q6J("until",t.trade.expiresAt)}}function Kt(n,a){1&n&&(e.TgZ(0,"p",19),e.SDv(1,20),e.qZA())}Ye.\u0275fac=function(a){return new(a||Ye)(e.Y36(e.sBO),e.Y36(s.uw),e.Y36(c.Xxg))},Ye.\u0275cmp=e.Xpm({type:Ye,selectors:[["cw-deposit-listed"]],inputs:{trade:"trade"},decls:14,vars:7,consts:function(){let n,a,t;return n=$localize`:␟cf06fa6d688bcb358f749f49f5f73deeb4be2a9c␟5213771062241898526:Deposit`,a=$localize`:␟d7b35c384aecd25a516200d6921836374613dfe7␟2159130950882492111:Cancel`,t=$localize`:␟04fd5f8541e342892c6e7684361901a543e40893␟2329375289817519113:Waiting for a buyer... ${"\ufffd#13\ufffd"}:START_TAG_CW_COUNTUP:${"\ufffd/#13\ufffd"}:CLOSE_TAG_CW_COUNTUP:`,[["fxLayoutAlign","space-between center",1,"mb-3"],["fxLayoutAlign","center"],["color","accent",3,"loading","diameter"],["fxFlexAlign","center"],n,["mat-button","","color","primary",3,"disabled","click"],[3,"loading"],a,[1,"items","mb-2",3,"click"],[3,"itemVariant","customPrice","banned","userOwned","horizontal","allowOverlay","rarityRadialBackground",4,"ngIf"],[3,"itemVariants","trade","userOwned","horizontal",4,"ngIf"],t,[1,"timer",3,"date"],[3,"itemVariant","customPrice","banned","userOwned","horizontal","allowOverlay","rarityRadialBackground"],[3,"itemVariants","trade","userOwned","horizontal"]]},template:function(a,t){1&a&&(e.TgZ(0,"header",0),e.TgZ(1,"div",1),e._UZ(2,"cw-loader",2),e.TgZ(3,"span",3),e.SDv(4,4),e.qZA(),e.qZA(),e.TgZ(5,"button",5),e.NdJ("click",function(){return t.cancelTrade(t.trade.id)}),e.TgZ(6,"cw-loader",6),e.SDv(7,7),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"div",8),e.NdJ("click",function(){return t.openDepositListedDialog()}),e.YNc(9,Yt,2,10,"cw-item",9),e.YNc(10,Vt,2,7,"cw-item-bundle",10),e.qZA(),e.TgZ(11,"p"),e.tHW(12,11),e._UZ(13,"cw-countup",12),e.N_p(),e.qZA()),2&a&&(e.xp6(2),e.Q6J("loading",!0)("diameter",16),e.xp6(3),e.Q6J("disabled",t.cancelling),e.xp6(1),e.Q6J("loading",t.cancelling),e.xp6(3),e.Q6J("ngIf",1===t.trade.tradeItems.length),e.xp6(1),e.Q6J("ngIf",t.trade.tradeItems.length>1),e.xp6(3),e.Q6J("date",t.trade.createdAt))},directives:[ue.Wh,b.R,ue.XD,p.lW,S.O5,lt.O,v.P,Y._],pipes:[W.F],styles:["[_nghost-%COMP%]{display:block;padding:.75rem 1.25rem 1.25rem;cursor:pointer;transition:background 175ms ease-out}[_nghost-%COMP%]:nth-child(odd){background:#262a30}[_nghost-%COMP%]:nth-child(even){background:#21252b}[_nghost-%COMP%]:hover{background:#2c3037}cw-loader[_ngcontent-%COMP%]{display:inline-block;margin-right:.5rem}.timer[_ngcontent-%COMP%]{float:right;font-weight:500;color:#ecce75}.message[_ngcontent-%COMP%]{font-size:.875rem;margin-bottom:0}cw-item[_ngcontent-%COMP%], cw-item-bundle[_ngcontent-%COMP%]{cursor:pointer}"],changeDetection:0}),Ye=(0,F.gn)([(0,R.c)(),(0,F.w6)("design:paramtypes",[e.sBO,s.uw,c.Xxg])],Ye);let Ve=class{constructor(a,t,i){this.changeRef=a,this.tradeService=t,this.dialogService=i,this.cancelling=!1}ngOnInit(){this.expiredPercentage$=this.tradeService.getElapsedPercentage(this.trade)}openDepositProcessingDialog(){this.dialogService.openDepositProcessingDialog(this.trade,!0)}cancelTrade(){this.cancelling=!0,this.dialogService.openDepositConfirmCancelDialog(this.trade,!0).afterClosed().pipe((0,L.x)(()=>{this.cancelling=!1,this.changeRef.markForCheck()}),(0,R.t)(this)).subscribe()}};Ve.\u0275fac=function(a){return new(a||Ve)(e.Y36(e.sBO),e.Y36(c.Xxg),e.Y36(ye))},Ve.\u0275cmp=e.Xpm({type:Ve,selectors:[["cw-deposit-processing"]],inputs:{trade:"trade"},decls:15,vars:10,consts:function(){let n,a,t,i;return n=$localize`:␟cf06fa6d688bcb358f749f49f5f73deeb4be2a9c␟5213771062241898526:Deposit`,a=$localize`:␟d7b35c384aecd25a516200d6921836374613dfe7␟2159130950882492111:Cancel`,t=$localize`:␟82b237e192e267ac1134087e69c22bf9f3819d6d␟7534484972779820457: You have ${"\ufffd#5\ufffd"}:START_TAG_CW_COUNTDOWN:${"\ufffd/#5\ufffd"}:CLOSE_TAG_CW_COUNTDOWN: to complete the trade. `,i=$localize`:␟dec461dda4cdc864fbe19ef39d0fb5d082135427␟1258833575980216932:This trade has expired`,[["fxLayoutAlign","space-between center",1,"mb-3"],["fxLayoutAlign","center"],["color","accent",3,"loading","diameter"],["fxFlexAlign","center"],n,["mat-button","","color","primary",3,"disabled","click"],[3,"loading"],a,[1,"items","mb-3",3,"click"],[3,"itemVariant","customPrice","banned","horizontal","userOwned","allowOverlay","showCopyToClipboard","rarityRadialBackground",4,"ngIf"],[3,"itemVariants","trade","userOwned","horizontal","showCopyToClipboard",4,"ngIf"],[4,"ngIf","ngIfElse"],["expired",""],[3,"itemVariant","customPrice","banned","horizontal","userOwned","allowOverlay","showCopyToClipboard","rarityRadialBackground"],[3,"itemVariants","trade","userOwned","horizontal","showCopyToClipboard"],["mode","determinate","color","accent",1,"mb-2",3,"value"],[1,"message"],t,[1,"timer",3,"until"],[1,"message","text-danger"],i]},template:function(a,t){if(1&a&&(e.TgZ(0,"header",0),e.TgZ(1,"div",1),e._UZ(2,"cw-loader",2),e.TgZ(3,"span",3),e.SDv(4,4),e.qZA(),e.qZA(),e.TgZ(5,"button",5),e.NdJ("click",function(){return t.cancelTrade()}),e.TgZ(6,"cw-loader",6),e.SDv(7,7),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"div",8),e.NdJ("click",function(){return t.openDepositProcessingDialog()}),e.YNc(9,Ht,2,11,"cw-item",9),e.YNc(10,Qt,2,8,"cw-item-bundle",10),e.qZA(),e.YNc(11,kt,6,4,"ng-container",11),e.ALo(12,"asyncInner"),e.YNc(13,Kt,2,0,"ng-template",null,12,e.W1O)),2&a){const i=e.MAs(14);e.xp6(2),e.Q6J("loading",!0)("diameter",16),e.xp6(3),e.Q6J("disabled",t.cancelling),e.xp6(1),e.Q6J("loading",t.cancelling),e.xp6(3),e.Q6J("ngIf",1===t.trade.tradeItems.length),e.xp6(1),e.Q6J("ngIf",t.trade.tradeItems.length>1),e.xp6(1),e.Q6J("ngIf",e.lcZ(12,8,t.expiredPercentage$)<100)("ngIfElse",i)}},directives:[ue.Wh,b.R,ue.XD,p.lW,S.O5,v.P,Y._,Pe.pW,we.M],pipes:[Ne.d,W.F],styles:["[_nghost-%COMP%]{display:block;padding:.75rem 1.25rem 1.25rem;cursor:pointer;transition:background 175ms ease-out}[_nghost-%COMP%]:nth-child(odd){background:#262a30}[_nghost-%COMP%]:nth-child(even){background:#21252b}[_nghost-%COMP%]:hover{background:#2c3037}cw-loader[_ngcontent-%COMP%]{display:inline-block;margin-right:.5rem}cw-item[_ngcontent-%COMP%], cw-item-bundle[_ngcontent-%COMP%]{cursor:pointer}.message[_ngcontent-%COMP%]{font-size:.875rem;padding:0 1.5rem;text-align:center;margin-bottom:0}.timer[_ngcontent-%COMP%]{font-weight:500;color:#ecce75}"],changeDetection:0}),Ve=(0,F.gn)([(0,R.c)(),(0,F.w6)("design:paramtypes",[e.sBO,c.Xxg,ye])],Ve);var je=o(35357);function zt(n,a){if(1&n&&(e.TgZ(0,"small",7),e._uU(1),e.qZA()),2&n){const t=a.ngIf;e.xp6(1),e.Oqu(t)}}function qt(n,a){if(1&n&&(e._UZ(0,"cw-steam-inventory-search-grid",8),e.ALo(1,"asyncInner")),2&n){const t=a.ngIf,i=e.oxw();e.Q6J("userId",t)("steamAppName",e.lcZ(1,3,i.steamAppName$))("selectedCollection",i.inventoryCollection)}}const jt=function(){return["/top-up"]};let He=class{constructor(a,t,i,r){this.inventoryCollection=i.inventoryCollection,this.promoCodeText$=r.promoCodeText$,this.userId$=r.userId$,this.steamAppName$=t.paramMap.pipe((0,j.U)(T=>T.get("steamAppName").toUpperCase())),a.openSidenavElementForMediaSize("gt-xs","trade")}};He.\u0275fac=function(a){return new(a||He)(e.Y36(c.Pb3),e.Y36(je.gz),e.Y36(c.Xxg),e.Y36(c.KDu))},He.\u0275cmp=e.Xpm({type:He,selectors:[["cw-player-to-player-deposit"]],decls:11,vars:11,consts:function(){let n;return n=$localize`:␟a35ba727aee9a37b13a5fb11d9f4214ef694b120␟4303422921277701928:Back to Deposit Options`,[[1,"mb-4"],[1,"d-inline-block","w-50"],["class","text-success ml-1",4,"ngIf"],[1,"d-inline-block","w-50","text-right"],["mat-stroked-button","",1,"paymentBackButtonClass",3,"routerLink"],n,[3,"userId","steamAppName","selectedCollection",4,"ngIf"],[1,"text-success","ml-1"],[3,"userId","steamAppName","selectedCollection"]]},template:function(a,t){1&a&&(e.TgZ(0,"h3",0),e.TgZ(1,"div",1),e._uU(2),e.ALo(3,"appConfig"),e.YNc(4,zt,2,1,"small",2),e.ALo(5,"asyncInner"),e.qZA(),e.TgZ(6,"div",3),e.TgZ(7,"button",4),e.SDv(8,5),e.qZA(),e.qZA(),e.qZA(),e.YNc(9,qt,2,5,"cw-steam-inventory-search-grid",6),e.ALo(10,"async")),2&a&&(e.xp6(2),e.hij(" ",e.lcZ(3,4,"DEPOSIT_TEXT")," "),e.xp6(2),e.Q6J("ngIf",e.lcZ(5,6,t.promoCodeText$)),e.xp6(3),e.Q6J("routerLink",e.DdM(10,jt)),e.xp6(2),e.Q6J("ngIf",e.lcZ(10,8,t.userId$)))},styles:["cw-item[_ngcontent-%COMP%]:not(.selectable){opacity:.3}@media only screen and (max-width: 768px){[class*=paymentBackButtonClass][_ngcontent-%COMP%]{width:100%;white-space:normal}}"],changeDetection:0}),He=(0,F.gn)([(0,R.c)(),(0,F.w6)("design:paramtypes",[c.Pb3,je.gz,c.Xxg,c.KDu])],He);var Zt=o(13302);const tn=o(39478).Ps`
  mutation CreateSteamOffers($input: CreateSteamOffersInput!) {
    createSteamOffers(input: $input) {
      steamOffers {
        ... {
          id
        }
      }
    }
  }
`;function nn(n,a){1&n&&e.SDv(0,4,1)}function me(n,a){1&n&&e.SDv(0,4,2)}let ut=class{constructor(a,t,i,r){this.apollo=a,this.fb=t,this.changeRef=i,this.dialogRef=r,this.submitting=!1,this.form=this.fb.group({userId:""})}onSubmit(){if(this.form.valid)return this.submitting=!0,this.apollo.mutate({mutation:tn,variables:this.getVariables()}).pipe((0,x.q)(1),(0,R.t)(this)).subscribe(({data:a})=>{this.submitting=!1,this.changeRef.markForCheck(),this.dialogRef.close(a.createSteamOffers)})}getTotalValue(){return this.steamAssets?this.steamAssets.reduce((a,t)=>a+t.itemVariant.value,0):0}getVariables(){return{input:Object.assign(Object.assign({},this.form.getRawValue()),{steamAssetIds:this.steamAssets.map(a=>a.id)})}}};ut.\u0275fac=function(a){return new(a||ut)(e.Y36(Zt._M),e.Y36(_.qu),e.Y36(e.sBO),e.Y36(s.so))},ut.\u0275cmp=e.Xpm({type:ut,selectors:[["cw-steam-offer-mutation-dialog"]],inputs:{steamAssets:"steamAssets"},decls:22,vars:10,consts:function(){let n,a,t,i,r,T;return n=$localize`:␟7c48be888f83d017aa46a45a058bba34624d5f02␟2791114185146286314:Where To`,a=$localize`:␟766386c1813adcf9b02c459651f6dcd9c3e179b9␟6041548846737784185:Please enter the User ID of the recipient`,t=$localize`:␟83c4d4d764d2e2725ab8e919ec16ac400e1f290a␟2128755808672960949:User ID`,i=$localize`:␟eee0ffe01fd8c3f50ef18ba3e923efae0382d5f8␟8543535162971154127:VXNlcjox or 1`,r=$localize`:␟2c5ff8fa9c9aaec93f97e37c9a0edcd797194573␟6490688569532630280:Send`,T=$localize`:␟088dede4d29082102a0df0af0a7bb41220d10eb8␟1306288735949355626:You have selected ${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd*7:1\ufffd"}:START_TAG_NG_TEMPLATE: item ${"[\ufffd/*7:1\ufffd|\ufffd/*8:2\ufffd]"}:CLOSE_TAG_NG_TEMPLATE:${"\ufffd*8:2\ufffd"}:START_TAG_NG_TEMPLATE_1: items ${"[\ufffd/*7:1\ufffd|\ufffd/*8:2\ufffd]"}:CLOSE_TAG_NG_TEMPLATE: worth `,T=e.Zx4(T),[["mat-dialog-title","",1,"text-uppercase"],n,[3,"formGroup","ngSubmit"],[3,"ngPlural"],T,["ngPluralCase","one"],["ngPluralCase","other"],[3,"balance"],a,[1,"w-100"],t,["matInput","","type","search","autocomplete","off","formControlName","userId","placeholder",i],[1,"text-danger",3,"control","show","errors"],["align","end"],["type","submit","mat-flat-button","","color","accent",1,"mb-2",3,"disabled"],[3,"loading"],r]},template:function(a,t){1&a&&(e.TgZ(0,"h4",0),e.SDv(1,1),e.qZA(),e.TgZ(2,"form",2),e.NdJ("ngSubmit",function(){return t.onSubmit()}),e.TgZ(3,"mat-dialog-content"),e.TgZ(4,"p"),e.TgZ(5,"span",3),e.tHW(6,4),e.YNc(7,nn,1,0,"ng-template",5),e.YNc(8,me,1,0,"ng-template",6),e.N_p(),e.qZA(),e._UZ(9,"cw-pretty-balance",7),e.qZA(),e.TgZ(10,"p"),e.SDv(11,8),e.qZA(),e.TgZ(12,"mat-form-field",9),e.TgZ(13,"mat-label"),e.SDv(14,10),e.qZA(),e._UZ(15,"input",11),e.TgZ(16,"mat-error"),e._UZ(17,"cw-form-errors",12),e.qZA(),e.qZA(),e.qZA(),e.TgZ(18,"mat-dialog-actions",13),e.TgZ(19,"button",14),e.TgZ(20,"cw-loader",15),e.SDv(21,16),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&a&&(e.xp6(2),e.Q6J("formGroup",t.form),e.xp6(3),e.Q6J("ngPlural",t.steamAssets),e.xp6(3),e.pQV(t.steamAssets.length),e.QtT(6),e.xp6(1),e.Q6J("balance",t.getTotalValue()),e.xp6(6),e.uIk("disabled",t.steamAssets),e.xp6(2),e.Q6J("control",t.form.controls.userId)("show",t.form.get("userId").invalid)("errors",t.form.get("userId").errors),e.xp6(2),e.Q6J("disabled",t.form.invalid||t.submitting),e.xp6(1),e.Q6J("loading",t.submitting))},directives:[s.uh,_._Y,_.JL,_.sg,s.xY,S.iq,S.zE,y.q,Ze.KE,Ze.hX,_t.Nt,_.Fj,_.JJ,_.u,Ze.TO,Ke.A,s.H8,p.lW,b.R],styles:[""],changeDetection:0}),ut=(0,F.gn)([(0,R.c)(),(0,F.w6)("design:paramtypes",[Zt._M,_.qu,e.sBO,s.so])],ut);var Ue=o(99623),xt=o(6233),wt=o(36603),vt=o(35588),$t=o(45990),Qe=o(72201),On=o(85441),hn=o(43343);const Pn=[$t.vY,Pe.Cv,xt.rl,Ue.$M,vt.KD,wt.oz,Qe._4];let _n=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[Pn,$t.vY,Pe.Cv,xt.rl,Ue.$M,vt.KD,wt.oz,Qe._4]}),n})();e.B6R(He,[S.O5,p.lW,je.rH,On.e],[hn.O,Ne.d,S.Ov]);var Sn=o(28617),et=o(9318);function Fn(n,a){if(1&n&&(e._UZ(0,"cw-item",8),e.ALo(1,"pluck")),2&n){const t=e.oxw();e.Q6J("itemVariant",e.xi3(1,6,t.trade.tradeItems[0],"itemVariant"))("customPrice",t.trade.tradeItems[0].customValue?t.trade.tradeItems[0].value:null)("banned",!1)("horizontal",!0)("allowOverlay",!1)("rarityRadialBackground",!0)}}function Ln(n,a){if(1&n&&(e._UZ(0,"cw-item-bundle",9),e.ALo(1,"pluck")),2&n){const t=e.oxw();e.Q6J("itemVariants",e.xi3(1,4,t.trade.tradeItems,"itemVariant"))("trade",t.trade)("horizontal",!0)("alwaysOpenBundle",!0)}}let an=(()=>{class n{constructor(t,i,r){this.data=t,this.dialogRef=i,this.tradeService=r;const{trades:T}=this.data,[C]=Array.isArray(T)?T:[T];this.trade=C}close(){this.dialogRef.close()}ngOnDestroy(){this.tradeService.tradeCollection.clear()}}return n.dialogName="WITHDRAW_COMPLETE",n.\u0275fac=function(t){return new(t||n)(e.Y36(s.WI),e.Y36(s.so),e.Y36(c.Xxg))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cw-withdraw-complete-dialog"]],decls:11,vars:2,consts:function(){let a,t,i;return a=$localize`:␟61f3cba2247fd09266f231a715fb5b56075dca84␟2779396616831776185:Trade Complete`,t=$localize`:␟3f620f6a5ddd54e2747e261fde0d2f318a232627␟3433894944110166154:You received:`,i=$localize`:␟7e6c975ebea8b5f8b120905ca7acf9f8edf59d8e␟8998179362936748717:OK`,[["mat-dialog-title",""],a,t,[3,"itemVariant","customPrice","banned","horizontal","allowOverlay","rarityRadialBackground",4,"ngIf"],[3,"itemVariants","trade","horizontal","alwaysOpenBundle",4,"ngIf"],["align","center"],["mat-flat-button","","color","accent",1,"w-100","mat-button-3d","mat-button-lg","mt-3",3,"click"],i,[3,"itemVariant","customPrice","banned","horizontal","allowOverlay","rarityRadialBackground"],[3,"itemVariants","trade","horizontal","alwaysOpenBundle"]]},template:function(t,i){1&t&&(e.TgZ(0,"h1",0),e.SDv(1,1),e.qZA(),e.TgZ(2,"h6"),e.SDv(3,2),e.qZA(),e.TgZ(4,"mat-dialog-content"),e.YNc(5,Fn,2,9,"cw-item",3),e.YNc(6,Ln,2,7,"cw-item-bundle",4),e.qZA(),e.TgZ(7,"mat-dialog-actions",5),e.TgZ(8,"button",6),e.NdJ("click",function(){return i.close()}),e.TgZ(9,"span"),e.SDv(10,7),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(5),e.Q6J("ngIf",1===i.trade.tradeItems.length),e.xp6(1),e.Q6J("ngIf",i.trade.tradeItems.length>1))},directives:[s.uh,s.xY,S.O5,s.H8,p.lW,v.P,Y._],pipes:[W.F],styles:[""],changeDetection:0}),n})(),rn=(()=>{class n{constructor(t,i){this.data=t,this.steamService=i;const{trades:r}=this.data,[T]=Array.isArray(r)?r:[r];this.trade=T}getProfileTradeOffersUrl(){var t;return this.steamService.getProfileTradeOffersUrl(null===(t=this.trade.withdrawer)||void 0===t?void 0:t.steamId)}}return n.dialogName="WITHDRAW_COOLDOWN",n.\u0275fac=function(t){return new(t||n)(e.Y36(s.WI),e.Y36(c.qe3))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cw-withdraw-cooldown-dialog"]],decls:11,vars:5,consts:function(){let a,t,i;return a=$localize`:␟b4d8e2453f7c501544455c6924f10b11060fb3c6␟4817873797734376754:Trade Cooldown`,t=$localize`:␟9a7ff46dc0036615f9701f590930be8ea768edc0␟4223843727324548801: Trade went into cooldown. ${"\ufffd#6\ufffd\ufffd/#6\ufffd"}:LINE_BREAK:If you have received ${"\ufffd#7\ufffd"}:START_LINK:trade offer on Steam${"\ufffd/#7\ufffd"}:CLOSE_LINK:, please cancel it. `,i=$localize`:␟7e6c975ebea8b5f8b120905ca7acf9f8edf59d8e␟8998179362936748717:OK`,[["mat-dialog-title",""],a,[1,"mb-3",3,"trade","rarityRadialBackground","horizontal"],[1,"message","mb-3"],t,["target","_blank",3,"href"],["align","center"],["mat-flat-button","","color","primary",1,"w-100","mat-button-3d","mat-button-lg",3,"mat-dialog-close"],i]},template:function(t,i){1&t&&(e.TgZ(0,"h1",0),e.SDv(1,1),e.qZA(),e.TgZ(2,"mat-dialog-content"),e._UZ(3,"cw-trade",2),e.TgZ(4,"p",3),e.tHW(5,4),e._UZ(6,"br"),e._UZ(7,"a",5),e.N_p(),e.qZA(),e.qZA(),e.TgZ(8,"mat-dialog-actions",6),e.TgZ(9,"button",7),e.SDv(10,8),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Q6J("trade",i.trade)("rarityRadialBackground",!0)("horizontal",!0),e.xp6(4),e.Q6J("href",i.getProfileTradeOffersUrl(),e.LSH),e.xp6(2),e.Q6J("mat-dialog-close",!0))},directives:[s.uh,s.xY,I.L,s.H8,p.lW,s.ZT],styles:[""],changeDetection:0}),n})(),sn=(()=>{class n{constructor(t,i){this.dialogRef=t,this.localStorage=i,this.componentName="WITHDRAW_CUSTOM_PRICE_INFO",this.dontShowAgain=!1}agree(){this.dialogRef.close()}setDontShowAnymore(){this.dontShowAgain?this.localStorage.addToArray(E.F.TRADE_DIALOGS_DONT_SHOW_ANYMORE,this.componentName):this.localStorage.removeFromArray(E.F.TRADE_DIALOGS_DONT_SHOW_ANYMORE,this.componentName)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(s.so),e.Y36(c.Vtq))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cw-withdraw-custom-price-warning-dialog"]],decls:17,vars:1,consts:function(){let a,t,i,r,T;return a=$localize`:␟18a626bbf0a9148e776c0d860971031273895082␟1678234948603263880:Custom Priced Item Detected`,t=$localize`:␟f222920ed945e4e52da36e256c2486dbc57ccb60␟4347358720670431166: At least one of the items you are about to withdraw was listed by another user at a Custom Price and may be overvalued. `,i=$localize`:␟f69f37329c735422bab269497cbb41e9bb6cfd85␟3009696226866909463: Please take proper care when withdrawing Custom Priced items. Any losses resulting from a failure to do so will not be reimbursed. `,r=$localize`:␟c04a2cd9395a4e8eea8a17f1ad34859ed6d70586␟4826824375994428065:By withdrawing these items, you are agreeing to pay the listed Custom Price.${"\ufffd#9\ufffd\ufffd/#9\ufffd"}:LINE_BREAK:`,T=$localize`:␟a86f5f7de4c99cfbf9ffbd8f6cb7aedb85ad8a1b␟374089746247684352:I Understand`,[["mat-dialog-title","",1,"text-center","text-warning"],a,[1,"message-block","text-warning"],t,i,[1,"mb-3"],r,[1,"message-block","mb-3"],[3,"ngModel","ngModelChange"],["align","center"],["mat-flat-button","","color","accent",1,"w-100","mat-button-3d","mat-button-lg",3,"click"],T]},template:function(t,i){1&t&&(e.TgZ(0,"h1",0),e.SDv(1,1),e.qZA(),e.TgZ(2,"mat-dialog-content"),e.TgZ(3,"p",2),e.SDv(4,3),e.qZA(),e.TgZ(5,"p"),e.SDv(6,4),e.qZA(),e.TgZ(7,"p",5),e.tHW(8,6),e._UZ(9,"br"),e.N_p(),e.qZA(),e.TgZ(10,"div",7),e.TgZ(11,"mat-checkbox",8),e.NdJ("ngModelChange",function(T){return i.dontShowAgain=T})("ngModelChange",function(){return i.setDontShowAnymore()}),e._uU(12," Don't show this again "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"mat-dialog-actions",9),e.TgZ(14,"button",10),e.NdJ("click",function(){return i.agree()}),e.TgZ(15,"cw-loader"),e.SDv(16,11),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(11),e.Q6J("ngModel",i.dontShowAgain))},directives:[s.uh,s.xY,J.oG,_.JJ,_.On,s.H8,p.lW,b.R],styles:[".message-block[_ngcontent-%COMP%]{padding:1rem .5rem;background:var(--item-bg);border-radius:.375rem;text-align:center}"],changeDetection:0}),n})();function Mn(n,a){if(1&n&&(e._UZ(0,"cw-item",12),e.ALo(1,"pluck")),2&n){const t=e.oxw();e.Q6J("itemVariant",e.xi3(1,7,t.trade.tradeItems[0],"itemVariant"))("customPrice",t.trade.tradeItems[0].customValue?t.trade.tradeItems[0].value:null)("banned",!1)("horizontal",!0)("allowOverlay",!1)("tradeItem",!0)("rarityRadialBackground",!0)}}function Nn(n,a){if(1&n&&(e._UZ(0,"cw-item-bundle",13),e.ALo(1,"pluck")),2&n){const t=e.oxw();e.Q6J("itemVariants",e.xi3(1,4,t.trade.tradeItems,"itemVariant"))("trade",t.trade)("horizontal",!0)("alwaysOpenBundle",!0)}}function xn(n,a){1&n&&(e.tHW(0,6,1),e.GkF(1),e.N_p())}function wn(n,a){1&n&&(e.tHW(0,6,2),e.GkF(1),e.N_p())}function vn(n,a){1&n&&(e.tHW(0,6,3),e.GkF(1),e.N_p())}function $n(n,a){1&n&&(e.tHW(0,6,4),e.GkF(1),e.N_p())}function yn(n,a){1&n&&(e.tHW(0,6,5),e.GkF(1),e.N_p())}function Wn(n,a){1&n&&(e.TgZ(0,"p",14),e.SDv(1,15),e.qZA())}let ln=(()=>{class n{constructor(t,i,r){this.data=t,this.dialogRef=i,this.tradeService=r;const{trades:T}=this.data,[C]=Array.isArray(T)?T:[T];this.trade=C}close(){this.dialogRef.close()}ngOnDestroy(){this.tradeService.tradeCollection.clear()}}return n.dialogName="WITHDRAW_EXPIRED",n.\u0275fac=function(t){return new(t||n)(e.Y36(s.WI),e.Y36(s.so),e.Y36(c.Xxg))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cw-withdraw-expired-dialog"]],decls:18,vars:8,consts:function(){let a,t,i,r;return a=$localize`:␟71c5a2d85870556e50fb868c43cb7946cff2a77a␟3830545533208110206:Warning!`,t=$localize`:␟f4e529ae5ffd73001d1ff4bbdeeb0a72e342e5c8␟7819314041543176992:Close`,i=$localize`:␟f6c4114e8122738d939e624da772405df340431a␟6349841048926834264:${"[\ufffd*8:1\ufffd\ufffd#1:1\ufffd|\ufffd*12:5\ufffd\ufffd#1:5\ufffd]"}:START_TAG_NG_CONTAINER: This trade has expired. ${"[\ufffd/#1:1\ufffd\ufffd/*8:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*9:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*10:3\ufffd|\ufffd/#1:4\ufffd\ufffd/*11:4\ufffd|\ufffd/#1:5\ufffd\ufffd/*12:5\ufffd]"}:CLOSE_TAG_NG_CONTAINER:${"\ufffd*9:2\ufffd\ufffd#1:2\ufffd"}:START_TAG_NG_CONTAINER_1: The other user has cancelled this trade. ${"[\ufffd/#1:1\ufffd\ufffd/*8:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*9:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*10:3\ufffd|\ufffd/#1:4\ufffd\ufffd/*11:4\ufffd|\ufffd/#1:5\ufffd\ufffd/*12:5\ufffd]"}:CLOSE_TAG_NG_CONTAINER:${"\ufffd*10:3\ufffd\ufffd#1:3\ufffd"}:START_TAG_NG_CONTAINER_2: You have been refunded.${"[\ufffd/#1:1\ufffd\ufffd/*8:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*9:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*10:3\ufffd|\ufffd/#1:4\ufffd\ufffd/*11:4\ufffd|\ufffd/#1:5\ufffd\ufffd/*12:5\ufffd]"}:CLOSE_TAG_NG_CONTAINER:${"\ufffd*11:4\ufffd\ufffd#1:4\ufffd"}:START_TAG_NG_CONTAINER_3: You will be refunded shortly. ${"[\ufffd/#1:1\ufffd\ufffd/*8:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*9:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*10:3\ufffd|\ufffd/#1:4\ufffd\ufffd/*11:4\ufffd|\ufffd/#1:5\ufffd\ufffd/*12:5\ufffd]"}:CLOSE_TAG_NG_CONTAINER:${"[\ufffd*8:1\ufffd\ufffd#1:1\ufffd|\ufffd*12:5\ufffd\ufffd#1:5\ufffd]"}:START_TAG_NG_CONTAINER: Please make sure you keep an eye on your pending trades next time!${"[\ufffd/#1:1\ufffd\ufffd/*8:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*9:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*10:3\ufffd|\ufffd/#1:4\ufffd\ufffd/*11:4\ufffd|\ufffd/#1:5\ufffd\ufffd/*12:5\ufffd]"}:CLOSE_TAG_NG_CONTAINER:`,i=e.Zx4(i),r=$localize`:␟2fe2b39dfdcb4a2290e2e7546811c6618a2b1b9e␟7494424593515055889: Failing this step too many times will result in you being temporarily blocked from using the P2P system. `,[["mat-dialog-title",""],a,[1,"items","mb-3"],[3,"itemVariant","customPrice","banned","horizontal","allowOverlay","tradeItem","rarityRadialBackground",4,"ngIf"],[3,"itemVariants","trade","horizontal","alwaysOpenBundle",4,"ngIf"],[1,"mb-3"],i,[4,"ngIf"],["class","text-danger mb-3",4,"ngIf"],["align","center"],["mat-flat-button","","color","warn",1,"w-100","mat-button-3d","mat-button-lg",3,"click"],t,[3,"itemVariant","customPrice","banned","horizontal","allowOverlay","tradeItem","rarityRadialBackground"],[3,"itemVariants","trade","horizontal","alwaysOpenBundle"],[1,"text-danger","mb-3"],r]},template:function(t,i){1&t&&(e.TgZ(0,"h1",0),e.SDv(1,1),e.qZA(),e.TgZ(2,"mat-dialog-content"),e.TgZ(3,"div",2),e.YNc(4,Mn,2,10,"cw-item",3),e.YNc(5,Nn,2,7,"cw-item-bundle",4),e.qZA(),e.TgZ(6,"p",5),e.tHW(7,6),e.YNc(8,xn,2,0,"ng-container",7),e.YNc(9,wn,2,0,"ng-container",7),e.YNc(10,vn,2,0,"ng-container",7),e.YNc(11,$n,2,0,"ng-container",7),e.YNc(12,yn,2,0,"ng-container",7),e.N_p(),e.qZA(),e.YNc(13,Wn,2,0,"p",8),e.qZA(),e.TgZ(14,"mat-dialog-actions",9),e.TgZ(15,"button",10),e.NdJ("click",function(){return i.close()}),e.TgZ(16,"span"),e.SDv(17,11),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.Q6J("ngIf",1===i.trade.tradeItems.length),e.xp6(1),e.Q6J("ngIf",i.trade.tradeItems.length>1),e.xp6(3),e.Q6J("ngIf","EXPIRED"===i.trade.cancelReason||null===i.trade.cancelReason),e.xp6(1),e.Q6J("ngIf","USER_CANCELLED"===i.trade.cancelReason||"REVOKED_API_KEY"===i.trade.cancelReason),e.xp6(1),e.Q6J("ngIf","CANCELLED"===i.trade.status),e.xp6(1),e.Q6J("ngIf","CANCELLED"!==i.trade.status),e.xp6(1),e.Q6J("ngIf","EXPIRED"===i.trade.cancelReason||null===i.trade.cancelReason),e.xp6(1),e.Q6J("ngIf","EXPIRED"===i.trade.cancelReason||null===i.trade.cancelReason))},directives:[s.uh,s.xY,S.O5,s.H8,p.lW,v.P,Y._],pipes:[W.F],styles:[""],changeDetection:0}),n})();function bn(n,a){if(1&n&&(e._UZ(0,"cw-item",11),e.ALo(1,"pluck")),2&n){const t=e.oxw();e.Q6J("itemVariant",e.xi3(1,7,t.trade.tradeItems[0],"itemVariant"))("customPrice",t.trade.tradeItems[0].customValue?t.trade.tradeItems[0].value:null)("banned",!1)("horizontal",!0)("allowOverlay",!1)("tradeItem",!0)("rarityRadialBackground",!0)}}function Bn(n,a){if(1&n&&(e._UZ(0,"cw-item-bundle",12),e.ALo(1,"pluck")),2&n){const t=e.oxw();e.Q6J("itemVariants",e.xi3(1,4,t.trade.tradeItems,"itemVariant"))("trade",t.trade)("horizontal",!0)("alwaysOpenBundle",!0)}}let cn=(()=>{class n{constructor(t,i,r){this.data=t,this.dialogRef=i,this.tradeService=r;const{trades:T}=this.data,[C]=Array.isArray(T)?T:[T];this.trade=C}ngOnInit(){this.expiredPercentage$=this.tradeService.getElapsedPercentage(this.trade)}close(){this.dialogRef.close()}}return n.dialogName="WITHDRAW_JOINED",n.\u0275fac=function(t){return new(t||n)(e.Y36(s.WI),e.Y36(s.so),e.Y36(c.Xxg))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cw-withdraw-joined-dialog"]],decls:15,vars:6,consts:function(){let a,t,i;return a=$localize`:␟cdf2322f61bfe400f77645df90a630be3ad54ae1␟9001216289639080925:Waiting`,t=$localize`:␟9330c4e468a5f8bdc6851623e154f7aa83fbae7f␟483219422056333388: The other user has ${"\ufffd#9\ufffd"}:START_TAG_CW_COUNTDOWN:${"\ufffd/#9\ufffd"}:CLOSE_TAG_CW_COUNTDOWN:${"\ufffd#10\ufffd\ufffd/#10\ufffd"}:LINE_BREAK: to confirm they are ready to trade. `,i=$localize`:␟7e6c975ebea8b5f8b120905ca7acf9f8edf59d8e␟8998179362936748717:OK`,[["mat-dialog-title",""],a,[3,"itemVariant","customPrice","banned","horizontal","allowOverlay","tradeItem","rarityRadialBackground",4,"ngIf"],[3,"itemVariants","trade","horizontal","alwaysOpenBundle",4,"ngIf"],["mode","determinate","color","accent",1,"mb-3",3,"value"],[1,"mb-3"],t,[1,"timer",3,"until"],["align","center"],["mat-flat-button","","color","accent",1,"w-100","mat-button-3d","mat-button-lg",3,"click"],i,[3,"itemVariant","customPrice","banned","horizontal","allowOverlay","tradeItem","rarityRadialBackground"],[3,"itemVariants","trade","horizontal","alwaysOpenBundle"]]},template:function(t,i){1&t&&(e.TgZ(0,"h1",0),e.SDv(1,1),e.qZA(),e.TgZ(2,"mat-dialog-content"),e.YNc(3,bn,2,10,"cw-item",2),e.YNc(4,Bn,2,7,"cw-item-bundle",3),e._UZ(5,"mat-progress-bar",4),e.ALo(6,"asyncInner"),e.TgZ(7,"p",5),e.tHW(8,6),e._UZ(9,"cw-countdown",7),e._UZ(10,"br"),e.N_p(),e.qZA(),e.qZA(),e.TgZ(11,"mat-dialog-actions",8),e.TgZ(12,"button",9),e.NdJ("click",function(){return i.close()}),e.TgZ(13,"span"),e.SDv(14,10),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngIf",1===i.trade.tradeItems.length),e.xp6(1),e.Q6J("ngIf",i.trade.tradeItems.length>1),e.xp6(1),e.Q6J("value",e.lcZ(6,4,i.expiredPercentage$)),e.xp6(4),e.Q6J("until",i.trade.expiresAt))},directives:[s.uh,s.xY,S.O5,Pe.pW,we.M,s.H8,p.lW,v.P,Y._],pipes:[Ne.d,W.F],styles:[""],changeDetection:0}),n})();function Gn(n,a){if(1&n&&(e._UZ(0,"cw-item",8),e.ALo(1,"pluck")),2&n){const t=e.oxw();e.Q6J("itemVariant",e.xi3(1,7,t.trade.tradeItems[0],"itemVariant"))("customPrice",t.trade.tradeItems[0].customValue?t.trade.tradeItems[0].value:null)("banned",!1)("horizontal",!0)("allowOverlay",!1)("tradeItem",!0)("rarityRadialBackground",!0)}}function Zn(n,a){if(1&n&&(e._UZ(0,"cw-item-bundle",9),e.ALo(1,"pluck")),2&n){const t=e.oxw();e.Q6J("itemVariants",e.xi3(1,4,t.trade.tradeItems,"itemVariant"))("trade",t.trade)("horizontal",!0)("alwaysOpenBundle",!0)}}function Un(n,a){1&n&&(e.ynx(0),e.TgZ(1,"p",10),e.SDv(2,11),e.qZA(),e.BQk())}function Xn(n,a){1&n&&(e.tHW(0,12,1),e.GkF(1),e.N_p())}function Jn(n,a){1&n&&(e.tHW(0,12,2),e.GkF(1),e.N_p())}function Yn(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"p",10),e.tHW(2,12),e.YNc(3,Xn,2,0,"ng-container",4),e.YNc(4,Jn,2,0,"ng-container",4),e.N_p(),e.qZA(),e.BQk()),2&n){const t=e.oxw();e.xp6(3),e.Q6J("ngIf","CANCELLED"===t.trade.status),e.xp6(1),e.Q6J("ngIf","CANCELLED"!==t.trade.status)}}let on=(()=>{class n{constructor(t,i,r){this.data=t,this.dialogRef=i,this.tradeService=r;const{trades:T}=this.data,[C]=Array.isArray(T)?T:[T];this.trade=C}close(){this.dialogRef.close()}ngOnDestroy(){this.tradeService.tradeCollection.clear()}}return n.dialogName="WITHDRAW_JOINED_EXPIRED",n.\u0275fac=function(t){return new(t||n)(e.Y36(s.WI),e.Y36(s.so),e.Y36(c.Xxg))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cw-withdraw-joined-expired-dialog"]],decls:12,vars:4,consts:function(){let a,t,i,r;return a=$localize`:␟83caf503ef33dd64564e023ab83fa9bdf5d73ef0␟7130163132472891702:Trade Not Confirmed`,t=$localize`:␟7e6c975ebea8b5f8b120905ca7acf9f8edf59d8e␟8998179362936748717:OK`,i=$localize`:␟99f44afa2583113c5bd5cd781d8b792092c6f4da␟8207048518794084921:The other user has cancelled this trade. You have been refunded.`,r=$localize`:␟44c5105e0085a111f29293bf01e2c58e8f3c800e␟6273083195884372691: The other user did not confirm the trade in time. ${"\ufffd*3:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_NG_CONTAINER: You have been refunded.${"[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd]"}:CLOSE_TAG_NG_CONTAINER:${"\ufffd*4:2\ufffd\ufffd#1:2\ufffd"}:START_TAG_NG_CONTAINER_1: You will be refunded shortly.${"[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd]"}:CLOSE_TAG_NG_CONTAINER:`,r=e.Zx4(r),[["mat-dialog-title",""],a,[3,"itemVariant","customPrice","banned","horizontal","allowOverlay","tradeItem","rarityRadialBackground",4,"ngIf"],[3,"itemVariants","trade","horizontal","alwaysOpenBundle",4,"ngIf"],[4,"ngIf"],["align","center"],["mat-flat-button","","color","warn",1,"w-100","mat-button-3d","mat-button-lg",3,"click"],t,[3,"itemVariant","customPrice","banned","horizontal","allowOverlay","tradeItem","rarityRadialBackground"],[3,"itemVariants","trade","horizontal","alwaysOpenBundle"],[1,"mb-3"],i,r]},template:function(t,i){1&t&&(e.TgZ(0,"h1",0),e.SDv(1,1),e.qZA(),e.TgZ(2,"mat-dialog-content"),e.YNc(3,Gn,2,10,"cw-item",2),e.YNc(4,Zn,2,7,"cw-item-bundle",3),e._UZ(5,"hr"),e.YNc(6,Un,3,0,"ng-container",4),e.YNc(7,Yn,5,2,"ng-container",4),e.qZA(),e.TgZ(8,"mat-dialog-actions",5),e.TgZ(9,"button",6),e.NdJ("click",function(){return i.close()}),e.TgZ(10,"span"),e.SDv(11,7),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngIf",1===i.trade.tradeItems.length),e.xp6(1),e.Q6J("ngIf",i.trade.tradeItems.length>1),e.xp6(2),e.Q6J("ngIf","USER_CANCELLED"===i.trade.cancelReason),e.xp6(1),e.Q6J("ngIf","NO_CONFIRMATION"===i.trade.cancelReason||null===i.trade.cancelReason))},directives:[s.uh,s.xY,S.O5,s.H8,p.lW,v.P,Y._],pipes:[W.F],styles:[""],changeDetection:0}),n})();function Vn(n,a){if(1&n&&(e._UZ(0,"cw-item",14),e.ALo(1,"pluck")),2&n){const t=e.oxw();e.Q6J("itemVariant",e.xi3(1,7,t.trade.tradeItems[0],"itemVariant"))("customPrice",t.trade.tradeItems[0].customValue?t.trade.tradeItems[0].value:null)("banned",!1)("horizontal",!0)("allowOverlay",!1)("tradeItem",!0)("rarityRadialBackground",!0)}}function Hn(n,a){if(1&n&&(e._UZ(0,"cw-item-bundle",15),e.ALo(1,"pluck")),2&n){const t=e.oxw();e.Q6J("itemVariants",e.xi3(1,4,t.trade.tradeItems,"itemVariant"))("trade",t.trade)("horizontal",!0)("alwaysOpenBundle",!0)}}function Qn(n,a){1&n&&(e.TgZ(0,"p",16),e.tHW(1,17),e._UZ(2,"em"),e.N_p(),e.qZA())}let dn=(()=>{class n{constructor(t,i,r,T){this.data=t,this.dialogRef=i,this.tradeService=T;const{trades:C}=this.data,[k]=Array.isArray(C)?C:[C];this.trade=k,r.playSound("OFFER_PROCESSING")}ngOnInit(){this.expiredPercentage$=this.tradeService.getElapsedPercentage(this.trade)}close(){this.dialogRef.close()}showInventoryTrackingWarning(){return"INVENTORY"===this.trade.trackingType}}return n.dialogName="WITHDRAW_PROCESSING",n.\u0275fac=function(t){return new(t||n)(e.Y36(s.WI),e.Y36(s.so),e.Y36(c.yu5),e.Y36(c.Xxg))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cw-withdraw-processing-dialog"]],decls:20,vars:8,consts:function(){let a,t,i,r,T;return a=$localize`:␟12b1224ba2199f6b2745957e94ac29665696b087␟1111528497017216156:Incoming Trade Offer`,t=$localize`:␟fe0121759eaed0b26dabd1f08789c2f03a885f39␟1983927053288718110: ${"\ufffd0\ufffd"}:INTERPOLATION: has ${"\ufffd#8\ufffd"}:START_TAG_CW_COUNTDOWN:${"\ufffd/#8\ufffd"}:CLOSE_TAG_CW_COUNTDOWN:${"\ufffd#9\ufffd\ufffd/#9\ufffd"}:LINE_BREAK: to complete the trade. `,i=$localize`:␟582099da756d2b844442503ceed55baef58f9262␟3384817893095780705:Your withdrawal request has been confirmed by the other user. You should receive a trade offer on Steam shortly.`,r=$localize`:␟5617a095512c79cb356bd2ae5f4b8a01059f731b␟3816884790069869652: View Trade Offers`,T=$localize`:␟3c3f0a285ba017881d9d05f54ff409a6fae591ea␟4650618179631389242: Please do not change your inventory privacy settings or modify ${"\ufffd#2\ufffd"}:START_EMPHASISED_TEXT:any${"\ufffd/#2\ufffd"}:CLOSE_EMPHASISED_TEXT: of your Storage Units until the withdrawal is completed. You will automatically lose your balance if you do so. `,[["mat-dialog-title",""],a,[3,"itemVariant","customPrice","banned","horizontal","allowOverlay","tradeItem","rarityRadialBackground",4,"ngIf"],[3,"itemVariants","trade","horizontal","alwaysOpenBundle",4,"ngIf"],[1,"mb-3"],t,[1,"timer",3,"until"],["mode","determinate","color","accent",1,"mb-3",3,"value"],i,["class","text-danger mb-3",4,"ngIf"],["align","center"],["href","https://steamcommunity.com/my/tradeoffers","target","_blank","rel","noreferrer","mat-flat-button","","color","accent",1,"w-100","mat-button-3d","mat-button-lg","mb-3"],["inlineSVG","assets/icons/steam.svg"],r,[3,"itemVariant","customPrice","banned","horizontal","allowOverlay","tradeItem","rarityRadialBackground"],[3,"itemVariants","trade","horizontal","alwaysOpenBundle"],[1,"text-danger","mb-3"],T]},template:function(t,i){1&t&&(e.TgZ(0,"h1",0),e.SDv(1,1),e.qZA(),e.TgZ(2,"mat-dialog-content"),e.YNc(3,Vn,2,10,"cw-item",2),e.YNc(4,Hn,2,7,"cw-item-bundle",3),e._UZ(5,"hr"),e.TgZ(6,"p",4),e.tHW(7,5),e._UZ(8,"cw-countdown",6),e._UZ(9,"br"),e.N_p(),e.qZA(),e._UZ(10,"mat-progress-bar",7),e.ALo(11,"asyncInner"),e.TgZ(12,"p"),e.SDv(13,8),e.qZA(),e.YNc(14,Qn,3,0,"p",9),e.qZA(),e.TgZ(15,"mat-dialog-actions",10),e.TgZ(16,"a",11),e._UZ(17,"cw-icon",12),e.TgZ(18,"span"),e.SDv(19,13),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngIf",1===i.trade.tradeItems.length),e.xp6(1),e.Q6J("ngIf",i.trade.tradeItems.length>1),e.xp6(4),e.Q6J("until",i.trade.expiresAt),e.xp6(1),e.pQV(i.trade.depositor.steamDisplayName),e.QtT(7),e.xp6(1),e.Q6J("value",e.lcZ(11,6,i.expiredPercentage$)),e.xp6(4),e.Q6J("ngIf",i.showInventoryTrackingWarning()))},directives:[s.uh,s.xY,S.O5,we.M,Pe.pW,s.H8,p.zs,Z.o,X.d$,v.P,Y._],pipes:[Ne.d,W.F],styles:[""],changeDetection:0}),n})(),Lt=(()=>{class n{constructor(t,i,r,T,C,k,q,le){this.dialog=t,this.localStorage=i,this.tradeService=r,this.tradeDialogService=T,this.recaptchaService=C,this.recaptchaDialogService=k,this.userService=q,this.waxPeerDialogService=le,this.loading=!1,this.tradeService.userWithdrawals$.pipe((0,de.h)(Se=>!!Se),(0,j.U)(Se=>Se.sort((ge,ke)=>new Date(ge.createdAt)>new Date(ke.createdAt)?1:-1)),(0,Ee.O)([]),(0,ae.G)(),(0,j.U)(Se=>{const[ge,ke]=Se;return ke.filter(Bt=>{const Gt=ge.find(Ut=>Ut.id===Bt.id);return!Gt||!this.tradeDistinctUntilChanged(Gt,Bt)})})).subscribe(Se=>{Se.forEach(ge=>"CANCELLED"===ge.status&&"NO_CONFIRMATION"!==ge.cancelReason?window.setTimeout(()=>this.tradeDialogService.openDialog(ge,ln,{width:"300px"},!1,!0),6e4):"CANCELLED"===ge.status&&"NO_CONFIRMATION"===ge.cancelReason?this.tradeDialogService.openDialog(ge,on,{width:"300px"},!1,!0):"COMPLETED"===ge.status||"COMPLETED_PRIVATE"===ge.status||"COMPLETED_WITH_STORAGE_UNIT"===ge.status?this.tradeDialogService.openDialog(ge,an,{width:"300px"},!1,!0):"JOINED"===ge.status?this.openWithdrawJoinedDialog(ge,!1,!0):"PROCESSING"===ge.status?this.openWithdrawProcessingDialog(ge):"FROZEN"===ge.status?this.tradeDialogService.openFrozenDialog(ge,!1,!0):"COOLDOWN"===ge.status?this.openWithdrawCooldownDialog(ge):void 0)})}openWithdrawSteamUrlDialog(){return this.userService.allowedToWithdraw$.pipe((0,x.q)(1),(0,G.w)(t=>t?this.tradeDialogService.openSteamUrlDialog({isLoading:this.loading,obsToComplete$:[this.withdraw().pipe((0,G.w)(()=>this.waxPeerDialogService.withdrawWaxPeerItems()))]}).afterClosed():this.dialog.open(et.WithdrawalRequireDepositDialogComponent).afterClosed()))}openWithdrawCustomPriceWarningDialog(){return this.hasCheckedDialogAsDontShowAnymore("WITHDRAW_CUSTOM_PRICE_INFO")?(0,N.of)(null):this.dialog.open(sn).afterClosed()}withdraw(){return this.loading=!0,this.tradeService.selectedTrades$.pipe((0,x.q)(1),(0,G.w)(t=>{if(!t.length)return te.E;const i=t.map(r=>r.id);return this.recaptchaService.setRequest("joinTrades",{tradeIds:i})}),(0,G.w)(t=>this.tradeService.joinTrades(t).pipe(this.recaptchaDialogService.errorOp(i=>i?this.tradeService.joinTrades(Object.assign(Object.assign({},t),{visualRecaptcha:i})):te.E),(0,L.x)(()=>{t.tradeIds.forEach(i=>this.tradeService.tradeCollection.removeByKey("id",i))}))),(0,L.x)(()=>this.loading=!1))}openWithdrawJoinedDialog(t,i=!1,r=!1){return new Date(t.expiresAt)>new Date?this.tradeDialogService.openDialog(t,cn,{width:"300px"},i):new Date(t.expiresAt)<=new Date?this.tradeDialogService.openDialog(t,on,{width:"300px"},i,r):void 0}openWithdrawProcessingDialog(t,i=!1){return this.tradeDialogService.openDialog(t,dn,{width:"300px"},i)}openWithdrawCompleteDialog(t,i=!1,r=!1){return this.tradeDialogService.openDialog(t,an,{width:"300px"},!0)}openWithdrawCooldownDialog(t,i=!1){return this.tradeDialogService.openDialog(t,rn,{width:"300px"},i)}openWithdrawalSteamOfferAvailableDialog(t){this.dialog.open(et.WithdrawalSteamOfferAvailableDialogComponent,{width:"300px"}).componentInstance.userItem=t}openWithdrawalSteamOfferUnavailableDialog(t){this.dialog.open(et.WithdrawalSteamOfferUnavailableDialogComponent,{width:"500px"}).componentInstance.userItem=t}openWithdrawalSteamOfferDialog(t){this.dialog.open(et.WithdrawalSteamOfferDialogComponent,{width:"300px"}).componentInstance.steamOffer=t.steamOffer}openUserItemSellDialog(t){const i=this.dialog.open(ie.UserItemSellDialogComponent,{width:"500px"});return i.componentInstance.balanceTarget=t,i.afterClosed()}tradeDistinctUntilChanged(t,i){let r=!1;return t.id===i.id&&t.status!==i.status&&(r=!0),t.id===i.id&&t.status===i.status&&["JOINED","PROCESSING","COOLDOWN"].includes(i.status)&&new Date(i.expiresAt)<new Date&&(r=!0),t.id===i.id&&!1===r}hasCheckedDialogAsDontShowAnymore(t){const i=JSON.parse(this.localStorage.get(E.F.TRADE_DIALOGS_DONT_SHOW_ANYMORE));return!!Array.isArray(i)&&i.includes(t)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(s.uw),e.LFG(De.n2),e.LFG(c.Xxg),e.LFG(Te.a),e.LFG(c.KvH),e.LFG(M.fQ),e.LFG(c.KDu),e.LFG(Qe.kK))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function kn(n,a){1&n&&e.GkF(0)}function Kn(n,a){if(1&n&&(e.ynx(0),e.YNc(1,kn,1,0,"ng-container",14),e.BQk()),2&n){e.oxw(2);const t=e.MAs(14);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}function zn(n,a){if(1&n&&(e.ynx(0),e.YNc(1,Kn,2,1,"ng-container",10),e.BQk()),2&n){const t=e.oxw(),i=e.MAs(12);e.xp6(1),e.Q6J("ngIf",t.itemReady)("ngIfElse",i)}}function qn(n,a){if(1&n&&(e.TgZ(0,"p",15),e.tHW(1,16),e._UZ(2,"br"),e.TgZ(3,"small"),e._UZ(4,"cw-countdown",17),e.qZA(),e.N_p(),e.qZA()),2&n){const t=e.oxw();e.xp6(4),e.Q6J("until",t.userItem.steamOffer.availableAt)}}function jn(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"p",15),e.SDv(1,18),e.qZA(),e.TgZ(2,"button",19),e.NdJ("click",function(){return e.CHM(t),e.oxw().openDialog()}),e._UZ(3,"cw-icon",20),e.TgZ(4,"span"),e.SDv(5,21),e.qZA(),e.qZA()}}function ea(n,a){1&n&&(e.TgZ(0,"p",15),e.tHW(1,22),e._UZ(2,"br"),e._UZ(3,"small"),e.N_p(),e.qZA())}let In=(()=>{class n{constructor(t,i,r){this.dialogService=t,this.userItemService=i,this.changeRef=r,this.cancelling=!1,this.expired=!1,this.processing=!1}set userItem(t){t&&(this._userItem=t,this.isItemReady())}get userItem(){return this._userItem}openDialog(){var t;return this.userItem.steamOffer&&new Date(null===(t=this.userItem.steamOffer)||void 0===t?void 0:t.availableAt)<=new Date?this.dialogService.openWithdrawalSteamOfferDialog(this.userItem):this.userItem.steamOffer?this.dialogService.openWithdrawalSteamOfferAvailableDialog(this.userItem):this.dialogService.openWithdrawalSteamOfferUnavailableDialog(this.userItem)}isItemReady(){var t;return this.itemReady=this.userItem.steamOffer&&new Date(null===(t=this.userItem.steamOffer)||void 0===t?void 0:t.availableAt)<=new Date,this.changeRef.markForCheck(),this.itemReady}cancelRequest(){this.cancelling=!0,this.userItemService.update({userItemId:this.userItem.id,status:Sn.s0.AVAILABLE}).pipe((0,x.q)(1)).subscribe(()=>{this.cancelling=!1,this.changeRef.markForCheck()})}get availableIn(){const t=new Date;return(new Date(this.userItem.steamOffer?this.userItem.steamOffer.availableAt:null).getTime()-t.getTime())/1e3}getAvailableAt(){return(0,c.XwH)(this.availableIn)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Lt),e.Y36(c.mNQ),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cw-requested-user-item"]],inputs:{userItem:"userItem"},decls:17,vars:12,consts:function(){let a,t,i,r,T,C;return a=$localize`:␟3f7decfcf441dc9e5a5aaac0a8057f23ba7000f0␟6691810268713581510:Withdrawal`,t=$localize`:␟d7b35c384aecd25a516200d6921836374613dfe7␟2159130950882492111:Cancel`,i=$localize`:␟10d4930b7d64c8e24c37c88ebca4f8be26b1bc2d␟7482062603728099483: Your item is in escrow${"\ufffd#2\ufffd\ufffd/#2\ufffd"}:LINE_BREAK:${"\ufffd#3\ufffd"}:START_SMALL_TEXT:Approximate wait time: ${"\ufffd#4\ufffd"}:START_TAG_CW_COUNTDOWN:${"\ufffd/#4\ufffd"}:CLOSE_TAG_CW_COUNTDOWN:${"\ufffd/#3\ufffd"}:CLOSE_SMALL_TEXT:`,r=$localize`:␟933ea8494f76f5296d0d0415add6b74796ba8c0b␟3785699896786571375:Your item is ready`,T=$localize`:␟c0b903f04df818cd1d2850d6ee643c7f61ef3a4d␟1987529302574157179: Collect Item`,C=$localize`:␟243984531f95dbd8458835ad4d891d87dec9ea33␟6209197734423438757: Your item has been requested${"\ufffd#2\ufffd\ufffd/#2\ufffd"}:LINE_BREAK:${"\ufffd#3\ufffd"}:START_SMALL_TEXT:Approximate wait time: 8-30 days${"\ufffd/#3\ufffd"}:CLOSE_SMALL_TEXT:`,[["fxLayoutAlign","space-between center",1,"mb-3"],["fxLayoutAlign","center"],["color","warn",3,"loading","diameter"],["fxFlexAlign","center"],a,["mat-button","","color","primary",3,"disabled","click"],[3,"loading"],t,[1,"items","mb-2",3,"click"],[3,"itemVariant","allowOverlay","horizontal","banned","userOwned","rarityRadialBackground"],[4,"ngIf","ngIfElse"],["itemInEscrow",""],["itemAvailable",""],["itemRequested",""],[4,"ngTemplateOutlet"],[1,"message","mb-3"],i,[1,"timer","font-weight-bold",3,"until"],r,["mat-flat-button","","color","accent",1,"w-100","mb-3","mat-button-3d","mat-button-lg",3,"click"],["inlineSVG","assets/icons/steam.svg"],T,C]},template:function(t,i){if(1&t&&(e.TgZ(0,"header",0),e.TgZ(1,"div",1),e._UZ(2,"cw-loader",2),e.TgZ(3,"span",3),e.SDv(4,4),e.qZA(),e.qZA(),e.TgZ(5,"button",5),e.NdJ("click",function(){return i.cancelRequest()}),e.TgZ(6,"cw-loader",6),e.SDv(7,7),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"div",8),e.NdJ("click",function(){return i.openDialog()}),e._UZ(9,"cw-item",9),e.qZA(),e.YNc(10,zn,2,2,"ng-container",10),e.YNc(11,qn,5,1,"ng-template",null,11,e.W1O),e.YNc(13,jn,6,0,"ng-template",null,12,e.W1O),e.YNc(15,ea,4,0,"ng-template",null,13,e.W1O)),2&t){const r=e.MAs(16);e.xp6(2),e.Q6J("loading",!0)("diameter",16),e.xp6(3),e.Q6J("disabled",i.cancelling||i.processing),e.xp6(1),e.Q6J("loading",i.cancelling),e.xp6(3),e.Q6J("itemVariant",i.userItem.itemVariant)("allowOverlay",!1)("horizontal",!0)("banned",!1)("userOwned",!0)("rarityRadialBackground",!0),e.xp6(1),e.Q6J("ngIf",i.userItem.steamOffer)("ngIfElse",r)}},directives:[ue.Wh,b.R,ue.XD,p.lW,v.P,S.O5,S.tP,we.M,Z.o,X.d$],styles:["[_nghost-%COMP%]{display:block;padding:.75rem 1.25rem 1.25rem;cursor:pointer;transition:background 175ms ease-out}[_nghost-%COMP%]:nth-child(odd){background:#262a30}[_nghost-%COMP%]:nth-child(even){background:#21252b}[_nghost-%COMP%]:hover{background:#2c3037}cw-loader[_ngcontent-%COMP%]{display:inline-block;margin-right:.5rem}cw-user-item-simple[_ngcontent-%COMP%]{cursor:pointer}.message[_ngcontent-%COMP%]{font-size:.875rem;padding:0 1.5rem;text-align:center;margin-bottom:0}.timer[_ngcontent-%COMP%]{color:#ecce75;font-weight:700}"],changeDetection:0}),n})();var yt=o(93114),Dn=o(57994),We=o(39841),Wt=o(62557),pn=o(11365),ta=o(36129),na=o(966),An=o(17007),fn=o(10217),aa=o(32368);function oa(n,a){1&n&&e.GkF(0)}function ia(n,a){1&n&&(e.tHW(0,16,1),e.GkF(1),e.N_p())}function _a(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",13),e.ALo(2,"asyncInner"),e.TgZ(3,"button",14),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).withdraw()}),e.ALo(4,"asyncInner"),e.TgZ(5,"cw-loader",15),e.tHW(6,16),e.YNc(7,ia,2,0,"ng-container",17),e.N_p(),e.qZA(),e.qZA(),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(2),i=e.MAs(7),r=e.MAs(9);e.xp6(1),e.Q6J("ngbTooltip",e.lcZ(2,4,t.canWithdraw$)?"":i),e.xp6(2),e.Q6J("disabled",t.exchangeLoading||t.tradeLoading||t.waxPeerItemsLoading||!e.lcZ(4,6,t.canWithdraw$)),e.xp6(2),e.Q6J("loading",t.exchangeLoading||t.tradeLoading||t.waxPeerItemsLoading),e.xp6(2),e.Q6J("ngTemplateOutlet",r)}}function ra(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"cw-item",26),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit;return e.oxw(4).onDeselectTrade(r)}),e.ALo(1,"pluck"),e.qZA()}if(2&n){const t=e.oxw().$implicit;e.Q6J("itemVariant",e.xi3(1,8,t.tradeItems[0],"itemVariant"))("banned",!1)("horizontal",!0)("rarityRadialBackground",!0)("allowOverlay",!1)("customPrice",t.tradeItems[0].customValue?t.tradeItems[0].value:null)("tradeItem",!0)("showMenuLink",!1)}}function sa(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"cw-item-bundle",27),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit;return e.oxw(4).onDeselectTrade(r)}),e.ALo(1,"pluck"),e.qZA()}if(2&n){const t=e.oxw().$implicit;e.Q6J("itemVariants",e.xi3(1,3,t.tradeItems,"itemVariant"))("trade",t)("horizontal",!0)}}function la(n,a){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,ra,2,11,"cw-item",24),e.YNc(2,sa,2,6,"cw-item-bundle",25),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.Q6J("ngIf",1===t.tradeItems.length),e.xp6(1),e.Q6J("ngIf",t.tradeItems.length>1)}}function ca(n,a){if(1&n&&(e.TgZ(0,"div",30),e.tHW(1,31),e._UZ(2,"cw-countdown",32),e.N_p(),e.qZA()),2&n){const t=e.oxw().ngIf;e.xp6(2),e.Q6J("until",t)}}function da(n,a){if(1&n&&(e.ynx(0),e.YNc(1,ca,3,1,"div",29),e.BQk()),2&n){const t=a.ngIf;e.xp6(1),e.Q6J("ngIf",t)}}function ua(n,a){1&n&&(e.ynx(0),e.TgZ(1,"p",33),e._uU(2,"This item is no longer available"),e.qZA(),e.BQk())}function Ta(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"cw-item",28),e.NdJ("click",function(){const T=e.CHM(t).$implicit;return e.oxw(4).onDeselectExchangeItem(T)}),e.qZA(),e.YNc(2,da,2,1,"ng-container",11),e.YNc(3,ua,3,0,"ng-container",11),e.qZA()}if(2&n){const t=a.$implicit,i=a.index,r=e.oxw(4);e.xp6(1),e.Q6J("itemVariant",t)("banned",!1)("rarityRadialBackground",!0)("isDepleted",!r.isItemAvailable(t))("horizontal",!0)("allowOverlay",!1)("withRarityGlow",!0),e.xp6(1),e.Q6J("ngIf",r.availableInDates[i]),e.xp6(1),e.Q6J("ngIf",!r.isItemAvailable(t))}}function Ea(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"cw-item",34),e.NdJ("click",function(){const T=e.CHM(t).$implicit;return e.oxw(4).onDeselectWaxPeerItem(T)}),e.qZA(),e.qZA()}if(2&n){const t=a.$implicit;e.xp6(1),e.Q6J("itemVariant",t.itemVariant)("valueMultiplier",t.value/t.itemVariant.displayValue)("banned",!1)("horizontal",!0)("rarityRadialBackground",!0)("allowOverlay",!1)("externalIconUrl",t.iconUrl)}}function ga(n,a){if(1&n&&(e.TgZ(0,"div",19),e.TgZ(1,"cw-scroll",20),e.TgZ(2,"div",21),e.YNc(3,la,3,2,"div",22),e.YNc(4,Ta,4,9,"div",22),e.YNc(5,Ea,2,7,"div",23),e.qZA(),e.qZA(),e.qZA()),2&n){const t=e.oxw().ngIf,i=e.oxw(2);e.xp6(1),e.Q6J("scrollY",!0)("scrollOnRouteChange",!1),e.xp6(2),e.Q6J("ngForOf",t.trades),e.xp6(1),e.Q6J("ngForOf",t.itemVariants),e.xp6(1),e.Q6J("ngForOf",t.waxPeerItems)("ngForTrackBy",i.trackById)}}function ma(n,a){if(1&n&&(e.ynx(0),e.YNc(1,ga,6,6,"div",18),e.BQk()),2&n){const t=a.ngIf;e.xp6(1),e.Q6J("ngIf",t.trades.length||t.itemVariants.length||t.waxPeerItems.length)}}const Cn=function(n,a){return{totalItems:n,totalValue:a}};function Sa(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.YNc(1,oa,1,0,"ng-container",7),e.ALo(2,"asyncInner"),e.ALo(3,"asyncInner"),e.TgZ(4,"header",8),e.TgZ(5,"div",9),e._uU(6," You will spend "),e._UZ(7,"cw-pretty-balance",10),e.ALo(8,"asyncInner"),e.qZA(),e.YNc(9,_a,8,8,"ng-container",11),e.ALo(10,"asyncInner"),e.TgZ(11,"a",12),e.NdJ("click",function(){return e.CHM(t),e.oxw().updateTradeUrl()}),e._uU(12,"Update Steam trade URL / API Key"),e.qZA(),e.qZA(),e.YNc(13,ma,2,1,"ng-container",11),e.ALo(14,"asyncInner"),e.BQk()}if(2&n){const t=e.oxw(),i=e.MAs(5);e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.WLB(15,Cn,e.lcZ(2,5,t.totalCountSelected$),e.lcZ(3,7,t.totalValueSelected$))),e.xp6(6),e.Q6J("balance",e.lcZ(8,9,t.totalValueSelected$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(10,11,t.totalValueSelected$)),e.xp6(4),e.Q6J("ngIf",e.lcZ(14,13,t.selectedWithdrawCombined$))}}function Ia(n,a){1&n&&e.GkF(0)}function Da(n,a){if(1&n&&(e.TgZ(0,"small",40),e._uU(1),e.qZA()),2&n){const t=a.ngIf;e.xp6(1),e.Oqu(t)}}function pa(n,a){1&n&&(e.tHW(0,41,1),e.GkF(1),e.N_p())}const Rn=function(n){return{items:n}};function Aa(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div"),e.TgZ(2,"button",14),e.NdJ("click",function(){const T=e.CHM(t).$implicit,C=e.oxw().ngIf;return e.oxw(2).deposit(C,T)}),e.ALo(3,"asyncInner"),e.TgZ(4,"cw-loader",15),e.tHW(5,41),e.YNc(6,pa,2,0,"ng-container",7),e.N_p(),e.qZA(),e.qZA(),e.qZA(),e.BQk()}if(2&n){const t=e.oxw().ngIf,i=e.oxw(2),r=e.MAs(11);e.xp6(2),e.Q6J("disabled",i.loading||e.lcZ(3,4,i.disableDepositButton$)),e.xp6(2),e.Q6J("loading",i.loading),e.xp6(2),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(6,Rn,t))}}function fa(n,a){1&n&&(e.tHW(0,43,1),e.GkF(1),e.N_p())}function Ca(n,a){if(1&n&&(e.TgZ(0,"div",42),e.tHW(1,43),e.YNc(2,fa,2,0,"ng-container",7),e.N_p(),e.qZA()),2&n){const t=e.oxw().ngIf;e.oxw(2);const i=e.MAs(13);e.xp6(2),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.VKq(2,Rn,t))}}function Ra(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"cw-item",44),e.NdJ("click",function(){const T=e.CHM(t).$implicit;return e.oxw(4).onDeselectItem(T)})("customPriceEmitter",function(){const T=e.CHM(t).$implicit;return e.oxw(4).setCustomPrice(T)}),e.qZA(),e.qZA()}if(2&n){const t=a.$implicit;e.xp6(1),e.Q6J("itemVariant",t.itemVariant)("banned",!1)("horizontal",!0)("allowOverlay",!1)("customPrice",t.customPrice)("rarityRadialBackground",!0)("userOwned",!0)("canSetPrice",!0)("showDepositSpeed",!0)}}function Oa(n,a){if(1&n&&(e.TgZ(0,"div",19),e.TgZ(1,"cw-scroll",20),e.TgZ(2,"div",21),e.YNc(3,Ra,2,9,"div",22),e.qZA(),e.qZA(),e.qZA()),2&n){const t=e.oxw().ngIf;e.xp6(1),e.Q6J("scrollY",!0)("scrollOnRouteChange",!1),e.xp6(2),e.Q6J("ngForOf",t)}}function ha(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.YNc(1,Ia,1,0,"ng-container",7),e.ALo(2,"asyncInner"),e.TgZ(3,"header",8),e.TgZ(4,"div",9),e.TgZ(5,"div",35),e._uU(6," You will receive "),e._UZ(7,"cw-pretty-balance",36),e.ALo(8,"asyncInner"),e.qZA(),e.YNc(9,Da,2,1,"small",37),e.ALo(10,"asyncInner"),e.qZA(),e.YNc(11,Aa,7,8,"ng-container",38),e.TgZ(12,"a",12),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).updateTradeUrl()}),e._uU(13,"Update Steam trade URL / API Key"),e.qZA(),e.YNc(14,Ca,3,4,"div",39),e.qZA(),e.YNc(15,Oa,4,3,"div",18),e.BQk()}if(2&n){const t=a.ngIf,i=e.oxw(2),r=e.MAs(5);e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.WLB(13,Cn,t.length,e.lcZ(2,7,i.totalValueDepositWithBonus$))),e.xp6(6),e.Q6J("balance",e.lcZ(8,9,i.totalValueDepositWithBonus$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(10,11,i.promoCodeText$)),e.xp6(2),e.Q6J("rxLet",i.canCreateTrade$),e.xp6(3),e.Q6J("ngIf",t.length),e.xp6(1),e.Q6J("ngIf",t.length>0)}}function Pa(n,a){if(1&n&&(e.ynx(0),e.YNc(1,ha,16,16,"ng-container",11),e.ALo(2,"asyncInner"),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,t.selectedItemVariants$))}}function Fa(n,a){1&n&&(e.ynx(0),e._uU(1,"s"),e.BQk())}function La(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",45),e.TgZ(1,"span",46),e._UZ(2,"cw-icon",47),e.TgZ(3,"span",48),e._uU(4),e.YNc(5,Fa,2,0,"ng-container",11),e._uU(6," Selected"),e.qZA(),e.qZA(),e.TgZ(7,"button",49),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeSidenav()}),e._UZ(8,"cw-icon",50),e.qZA(),e.qZA()}if(2&n){const t=a.totalItems;e.xp6(4),e.hij("",t," Item"),e.xp6(1),e.Q6J("ngIf",1!==t)}}function Ma(n,a){1&n&&(e.TgZ(0,"div"),e._uU(1,"Trades are in maintainance."),e.qZA())}function Na(n,a){1&n&&(e.TgZ(0,"div"),e._uU(1," You do not have enough balance to withdraw the selected items. "),e.qZA())}function xa(n,a){1&n&&(e.TgZ(0,"div"),e._uU(1," Some of the selected items are no longer available to withdraw. "),e.qZA())}function wa(n,a){1&n&&(e.TgZ(0,"div"),e._uU(1," You can not withdraw a trade while you have at least one active trade without Steam API Key open. "),e.qZA())}function va(n,a){if(1&n&&(e.YNc(0,Ma,2,0,"div",11),e.ALo(1,"asyncInner"),e.YNc(2,Na,2,0,"div",11),e.ALo(3,"asyncInner"),e.YNc(4,xa,2,0,"div",11),e.ALo(5,"asyncInner"),e.ALo(6,"asyncInner"),e.YNc(7,wa,2,0,"div",11),e.ALo(8,"asyncInner"),e.ALo(9,"asyncInner")),2&n){const t=e.oxw();e.Q6J("ngIf",e.lcZ(1,4,t.maintenanceTradeEnabled$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(3,6,t.isTotalValueBiggerThanTotalUserValue$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(5,8,t.selectedContainsUnavailable$)||!e.lcZ(6,10,t.canWithdrawWaxPeerItems$)),e.xp6(3),e.Q6J("ngIf",e.lcZ(8,12,t.isUserInActiveNoApiKeyTrade$)&&!e.lcZ(9,14,t.canTradeMultiple$))}}function $a(n,a){1&n&&(e.ynx(0),e._uU(1,"Withdraw"),e.BQk())}function ya(n,a){1&n&&(e.ynx(0),e._uU(1,"Insufficient Balance"),e.BQk())}function Wa(n,a){1&n&&(e.ynx(0),e._uU(1,"Unavailable Items"),e.BQk())}function ba(n,a){1&n&&(e.ynx(0),e._uU(1,"P2P Trade Active"),e.BQk())}function Ba(n,a){if(1&n&&(e.YNc(0,ya,2,0,"ng-container",11),e.ALo(1,"asyncInner"),e.YNc(2,Wa,2,0,"ng-container",11),e.ALo(3,"asyncInner"),e.YNc(4,ba,2,0,"ng-container",11),e.ALo(5,"asyncInner"),e.ALo(6,"asyncInner")),2&n){const t=e.oxw(2);e.Q6J("ngIf",e.lcZ(1,3,t.isTotalValueBiggerThanTotalUserValue$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(3,5,t.selectedContainsUnavailable$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(5,7,t.isUserInActiveNoApiKeyTrade$)&&!e.lcZ(6,9,t.canTradeMultiple$))}}function Ga(n,a){if(1&n&&(e.YNc(0,$a,2,0,"ng-container",51),e.ALo(1,"asyncInner"),e.YNc(2,Ba,7,11,"ng-template",null,52,e.W1O)),2&n){const t=e.MAs(3),i=e.oxw();e.Q6J("ngIf",e.lcZ(1,2,i.canWithdraw$))("ngIfElse",t)}}function Za(n,a){1&n&&(e.ynx(0),e._uU(1," Deposit "),e.BQk())}function Ua(n,a){1&n&&(e.ynx(0),e._UZ(1,"cw-icon",53),e._uU(2," Fast Deposit "),e.BQk())}function Xa(n,a){1&n&&(e.ynx(0),e._UZ(1,"cw-icon",53),e._uU(2," Smart Deposit "),e.BQk())}function Ja(n,a){1&n&&e._uU(0,"Deposit")}function Ya(n,a){if(1&n&&(e.ynx(0),e.YNc(1,Xa,3,0,"ng-container",51),e.ALo(2,"asyncInner"),e.YNc(3,Ja,1,0,"ng-template",null,54,e.W1O),e.BQk()),2&n){const t=e.MAs(4),i=e.oxw().items,r=e.oxw();e.xp6(1),e.Q6J("ngIf",r.smartDepositCtrl.value&&e.lcZ(2,2,r.canSmartDeposit$)&&i.length>1)("ngIfElse",t)}}function Va(n,a){if(1&n&&(e.YNc(0,Za,2,0,"ng-container",11),e.YNc(1,Ua,3,0,"ng-container",11),e.YNc(2,Ya,5,4,"ng-container",11)),2&n){const t=a.items,i=e.oxw();e.Q6J("ngIf",!t.length),e.xp6(1),e.Q6J("ngIf",i.hasOnlyGoodPricedItems(t)),e.xp6(1),e.Q6J("ngIf",i.hasBadPricedItems(t))}}function Ha(n,a){if(1&n&&(e.ynx(0),e._uU(1," You have selected some "),e.TgZ(2,"span",64),e._uU(3),e.qZA(),e._uU(4,", these may take longer than usual to deposit. "),e.BQk()),2&n){const t=e.oxw(2).items,i=e.oxw();e.xp6(3),e.Oqu(i.hasUnpopularItems(t)?"unpopular items":"custom priced items")}}function Qa(n,a){if(1&n&&(e.TgZ(0,"div",65),e.TgZ(1,"mat-slide-toggle",66),e.tHW(2,67),e._UZ(3,"cw-icon",68),e.N_p(),e.qZA(),e.qZA()),2&n){e.oxw();const t=e.MAs(8),i=e.oxw(2);e.Q6J("ngbTooltip",t),e.xp6(1),e.Q6J("formControl",i.smartDepositCtrl)}}function ka(n,a){if(1&n&&(e.TgZ(0,"p",69),e.SDv(1,70),e.qZA(),e.TgZ(2,"p",71),e.tHW(3,72),e._UZ(4,"br"),e._UZ(5,"br"),e.N_p(),e.qZA()),2&n){const t=e.oxw(3);e.xp6(5),e.pQV(t.smartDepositCtrl.value?"disable":"enable"),e.QtT(3)}}function Ka(n,a){if(1&n&&(e.ynx(0),e._UZ(1,"cw-icon",61),e.YNc(2,Ha,5,1,"ng-container",51),e.ALo(3,"asyncInner"),e.ALo(4,"asyncInner"),e.YNc(5,Qa,4,2,"div",62),e.ALo(6,"asyncInner"),e.YNc(7,ka,6,1,"ng-template",null,63,e.W1O),e.BQk()),2&n){const t=e.oxw().items,i=e.MAs(11),r=e.oxw();e.xp6(1),e.Q6J("ngbTooltip",r.hasUnpopularItems(t)?"Unpopular Items":"Custom Priced Items"),e.xp6(1),e.Q6J("ngIf",e.lcZ(3,4,r.canDeposit$)&&e.lcZ(4,6,r.canCreateTrade$))("ngIfElse",i),e.xp6(3),e.Q6J("ngIf",r.allowBundles&&e.lcZ(6,8,r.canSmartDeposit$))}}function za(n,a){1&n&&(e.ynx(0),e._uU(1," Your have selected "),e.TgZ(2,"span",74),e._uU(3,"popular items"),e.qZA(),e._uU(4,", this deposit should take no longer than 5 minutes."),e._UZ(5,"br"),e.BQk())}function qa(n,a){if(1&n&&(e.ynx(0),e._UZ(1,"cw-icon",73),e.YNc(2,za,6,0,"ng-container",51),e.ALo(3,"asyncInner"),e.ALo(4,"asyncInner"),e.BQk()),2&n){e.oxw();const t=e.MAs(11),i=e.oxw();e.xp6(1),e.Q6J("ngbTooltip","Instant Deposit"),e.xp6(1),e.Q6J("ngIf",e.lcZ(3,3,i.canDeposit$)&&e.lcZ(4,5,i.canCreateTrade$))("ngIfElse",t)}}function ja(n,a){if(1&n&&(e.ynx(0),e._uU(1," CSGO Inventories are "),e.TgZ(2,"a",75),e._uU(3,"Critical"),e.qZA(),e._uU(4,"."),e._UZ(5,"br"),e._uU(6," You can't deposit "),e.TgZ(7,"span",64),e._uU(8),e.qZA(),e._uU(9," at this time. "),e.BQk()),2&n){const t=e.oxw(2).items,i=e.oxw();e.xp6(8),e.Oqu(i.hasUnpopularItems(t)?"unpopular items":"custom priced items")}}function eo(n,a){1&n&&(e.ynx(0),e._uU(1," You are restricted to one deposit at a time. "),e.BQk())}function to(n,a){if(1&n){const t=e.EpF();e.ynx(0),e._UZ(1,"br"),e._uU(2," To deposit without restrictions, please provide a "),e.TgZ(3,"a",76),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).updateTradeUrl()}),e._uU(4,"Steam API Key"),e.qZA(),e.BQk()}}function no(n,a){if(1&n&&(e.YNc(0,ja,10,1,"ng-container",11),e.ALo(1,"asyncInner"),e.YNc(2,eo,2,0,"ng-container",11),e.ALo(3,"asyncInner"),e.ALo(4,"asyncInner"),e.YNc(5,to,5,0,"ng-container",11),e.ALo(6,"asyncInner"),e.ALo(7,"asyncInner")),2&n){const t=e.oxw(2);e.Q6J("ngIf",!e.lcZ(1,3,t.canDepositCustomPriced$)),e.xp6(2),e.Q6J("ngIf",!e.lcZ(3,5,t.maintenanceTradeEnabled$)&&e.lcZ(4,7,t.isUserInActiveNoApiKeyTrade$)),e.xp6(3),e.Q6J("ngIf",e.lcZ(6,9,t.maintenanceTradeEnabled$)||e.lcZ(7,11,t.isUserInActiveNoApiKeyTrade$))}}function ao(n,a){if(1&n){const t=e.EpF();e.YNc(0,Ka,9,10,"ng-container",11),e.YNc(1,qa,5,7,"ng-container",11),e.TgZ(2,"div",55),e.TgZ(3,"mat-label",56),e.SDv(4,57),e.qZA(),e.TgZ(5,"mat-slider",58),e.NdJ("input",function(r){return e.CHM(t),e.oxw().customPriceMarkupCtrl.setValue(r.value)}),e.ALo(6,"asyncInner"),e.qZA(),e.TgZ(7,"button",59),e.NdJ("click",function(){return e.CHM(t),e.oxw().setCustomPriceToAll()}),e._uU(8),e.ALo(9,"asyncInner"),e.qZA(),e.qZA(),e.YNc(10,no,8,13,"ng-template",null,60,e.W1O)}if(2&n){const t=a.items,i=e.oxw();e.Q6J("ngIf",i.hasBadPricedItems(t)),e.xp6(1),e.Q6J("ngIf",i.hasOnlyGoodPricedItems(t)),e.xp6(4),e.Q6J("min",0)("max",e.lcZ(6,6,i.maxCustomPriceMarkUp$))("formControl",i.customPriceMarkupCtrl),e.xp6(3),e.hij(" Apply ",e.lcZ(9,8,i.customPriceMarkupCtrl.valueChanges)||i.customPriceMarkupCtrl.value,"% ")}}let Tt=class extends((0,yt.A)(yt.t)){constructor(a,t,i,r,T,C,k,q,le,Se,ge,ke,bt,Bt,Gt,Ut,ui){super(),this.changeRef=a,this.dialog=t,this.routeService=i,this.layoutService=r,this.tradeService=T,this.exchangeService=C,this.tradeDialogService=k,this.depositDialogService=q,this.withdrawDialogService=le,this.userItemService=Se,this.itemService=ge,this.settingService=ke,this.withdrawalService=bt,this.waxPeerDialogService=Bt,this.localStorage=Gt,this.userService=Ut,this.waxPeerTradeService=ui,this.loading=!1,this.tradeLoading=!1,this.exchangeLoading=!1,this.waxPeerItemsLoading=!1,this.smartDepositCtrl=new _.NI(this.getSmartDepositDefaultValue()),this.customPriceMarkupCtrl=new _.NI(+this.localStorage.get(E.F.TRADE_DEPOSIT_CUSTOM_PRICE_PERCENT)||0),this.maxCustomPriceMarkUp$=this.settingService.getSetting("trade:maximum_custom_value_percent_markup").pipe((0,j.U)(ce=>+(null==ce?void 0:ce.value))),this.primaryRouteName$=this.routeService.primaryRouteName$,this.selectedItemVariants$=this.tradeService.selectedItemVariants$,this.selectedTrades$=this.tradeService.selectedTrades$,this.selectedExchangeCollection=this.exchangeService.itemCollection,this.selectedExchangeItems$=this.selectedExchangeCollection.items$,this.selectedWaxPeerItems$=this.waxPeerTradeService.selectedWaxPeerItemCollection.items$,this.selectedWithdrawCombined$=(0,We.a)([this.selectedTrades$,this.selectedExchangeItems$,this.selectedWaxPeerItems$]).pipe((0,j.U)(([ce,Ae,tt])=>({trades:ce,itemVariants:Ae,waxPeerItems:tt}))),this.totalCountSelected$=this.selectedWithdrawCombined$.pipe((0,j.U)(ce=>ce.trades.length+ce.itemVariants.length+ce.waxPeerItems.length)),this.totalValueDeposit$=this.tradeService.totalValueDeposit$,this.totalValueTrades$=this.tradeService.totalValueTrades$,this.totalValueWaxPeerItems$=this.waxPeerTradeService.totalValueWaxPeerItemsSelected$,this.totalValueSelected$=(0,We.a)([this.tradeService.totalValueTrades$,this.exchangeService.itemTotal$,this.totalValueWaxPeerItems$]).pipe((0,j.U)(([ce,Ae,tt])=>ce+Ae+tt)),this.isTotalValueBiggerThanBalance$=(0,We.a)([this.totalValueSelected$,this.userService.balance$]).pipe((0,j.U)(([ce,Ae])=>ce>=Ae)),this.isTotalValueBiggerThanTotalUserValue$=(0,We.a)([this.totalValueSelected$,this.userService.totalUserValue$]).pipe((0,j.U)(([ce,Ae])=>ce>=Ae)),this.selectedAvailable$=this.selectedExchangeItems$.pipe((0,j.U)(ce=>ce.length?ce.map(Ae=>({item:Ae,available:this.isItemAvailable(Ae)})):[])),this.selectedContainsUnavailable$=this.selectedAvailable$.pipe((0,j.U)(ce=>ce.filter(({available:Ae})=>!1===Ae).length>0)),this.canCreateTrade$=this.tradeService.canCreateTrade$,this.isUserInActiveNoApiKeyTrade$=this.tradeService.isUserInActiveNonApiKeyTrade$,this.canTradeMultiple$=this.userService.canTradeMultiple$,this.canDeposit$=this.tradeService.canDeposit$,this.maintenanceTradeEnabled$=this.tradeService.maintenanceTradeEnabled$,this.disableDepositButton$=(0,We.a)([this.tradeService.canDeposit$,this.maintenanceTradeEnabled$]).pipe((0,j.U)(([ce,Ae])=>!1)),this.canDepositCustomPriced$=(0,We.a)([this.userService.user$,this.maintenanceTradeEnabled$]).pipe((0,j.U)(([ce,Ae])=>!(!(null==ce?void 0:ce.steamApiKey)&&Ae))),this.canWithdrawTrades$=this.tradeService.canWithdrawTrades$,this.canExchange$=this.exchangeService.canExchange$,this.canExchangeSelected$=(0,We.a)([this.canExchange$,this.selectedContainsUnavailable$]).pipe((0,j.U)(([ce,Ae])=>ce&&!Ae)),this.canWithdrawWaxPeerItems$=this.waxPeerTradeService.canWithdraw$,this.canWithdraw$=(0,We.a)([this.canWithdrawTrades$,this.canExchangeSelected$,this.canWithdrawWaxPeerItems$,this.selectedWithdrawCombined$,this.isTotalValueBiggerThanTotalUserValue$]).pipe((0,j.U)(([ce,Ae,tt,ot,Nt])=>!Nt&&(!ot.trades.length||ce)&&(!ot.itemVariants.length||Ae)&&(!ot.waxPeerItems.length||tt))),this.canSmartDeposit$=this.tradeService.canSmartDeposit$,this.allowBundles=this.tradeService.allowBundles,this.selectedExchangeItems$.pipe((0,j.U)(ce=>{if(!ce.length)return[];const Ae=[],tt={};return ce.forEach(ot=>{tt[ot.id]=tt[ot.id]?++tt[ot.id]:1;const Nt=ot.availableAssets[tt[ot.id]-1];(null==Nt?void 0:Nt.availableAt)&&new Date(Nt.availableAt).getTime()>Date.now()?Ae.push(new Date(Nt.availableAt)):Ae.push(null)}),Ae}),(0,R.t)(this)).subscribe(ce=>this.availableInDates=ce),this.promoCodeText$=Ut.promoCodeText$,this.totalValueDepositWithBonus$=(0,We.a)([this.totalValueDeposit$,Ut.promoCode$]).pipe((0,j.U)(([ce,Ae])=>(0,c.jSO)(ce,Ae))),this.smartDepositCtrl.valueChanges.pipe((0,R.t)(this)).subscribe(ce=>this.localStorage.set(E.F.TRADE_SMART_DEPOSIT,`${ce}`)),this.maxCustomPriceMarkUp$.pipe((0,R.t)(this)).subscribe(ce=>{this.customPriceMarkupCtrl.setValidators([_.kI.min(0),_.kI.max(ce)])})}onDeselectItem(a){this.tradeService.inventoryCollection.remove(a)}onDeselectExchangeItem(a){this.itemService.removeFromObservableCollection(this.selectedExchangeCollection,a)}onDeselectTrade(a){this.tradeService.tradeCollection.remove(a)}onDeselectWaxPeerItem(a){this.waxPeerTradeService.selectedWaxPeerItemCollection.remove(a)}withdrawWaxPeerItems(){return this.waxPeerItemsLoading=!0,(0,Wt.$)(this.selectedWaxPeerItems$,this.totalValueWaxPeerItems$,this.userService.getDailyWithdrawalRemainder(),this.userService.hasTradeUrlSet$,this.userService.allowedToWithdraw$,this.canWithdrawWaxPeerItems$,this.userService.balance$).pipe((0,x.q)(1),(0,G.w)(([a,t,i,r,T,C,k])=>a.length&&C?T?this.withdrawalService.hasSufficientWithdrawalAmount(i,t)?r?k<t?this.tradeDialogService.openUserItemSellDialog(t).pipe((0,pn.M)(this.userService.balance$),(0,G.w)(([q,le])=>le>=t?this.waxPeerDialogService.withdrawWaxPeerItems():te.E)):this.waxPeerDialogService.withdrawWaxPeerItems():this.withdrawDialogService.openWithdrawSteamUrlDialog():(0,We.a)(a.map((q,le)=>this.withdrawalService.increaseWithdrawalRequestAmount(q.value,q.id).pipe((0,j.U)(Se=>(0===le&&(this.dialog.open(et.WithdrawalRequestPendingDialogComponent).componentInstance.withdrawalRequest=Se),te.E))))).pipe((0,G.w)(()=>te.E)):(this.dialog.open(et.WithdrawalRequireDepositDialogComponent),te.E):te.E),(0,L.x)(()=>{this.waxPeerItemsLoading=!1,this.changeRef.markForCheck()})).subscribe()}setCustomPrice(a){this.depositDialogService.openDepositCustomPriceSetDialog(a.itemVariant).pipe((0,R.t)(this)).subscribe(t=>{(null==t?void 0:t.customPrice)&&(a.customPrice=t.customPrice===a.itemVariant.displayValue&&a.itemVariant.depositable?null:t.customPrice,this.tradeService.inventoryCollection.remove(a),this.tradeService.inventoryCollection.add(a))})}setCustomPriceToAll(){if(this.customPriceMarkupCtrl.invalid)return;const a=this.customPriceMarkupCtrl.value;this.tradeService.inventoryCollection.items$.pipe((0,x.q)(1)).subscribe(t=>{this.tradeService.inventoryCollection.set(t.map(i=>{const r=+(0,Dn.Big)(1).plus((0,Dn.Big)(a).div(100)).times(i.itemVariant.displayValue).toFixed(2);return i.customPrice=r===i.itemVariant.displayValue&&i.itemVariant.depositable?null:r,i})),this.localStorage.set(E.F.TRADE_DEPOSIT_CUSTOM_PRICE_PERCENT,`${a}`)})}withdrawTrades(){return this.tradeLoading=!0,(0,Wt.$)(this.selectedTrades$,this.totalValueTrades$,this.userService.getDailyWithdrawalRemainder(),this.userService.hasTradeUrlSet$,this.userService.allowedToWithdraw$,this.canWithdrawTrades$,this.userService.balance$).pipe((0,x.q)(1),(0,G.w)(([a,t,i,r,T,C,k])=>{if(!a.length||!C)return te.E;if(!T)return this.dialog.open(et.WithdrawalRequireDepositDialogComponent),te.E;if(!this.withdrawalService.hasSufficientWithdrawalAmount(i,t))return(0,We.a)(a.map((le,Se)=>this.withdrawalService.increaseWithdrawalRequestAmount(le.totalValue,le.id).pipe((0,j.U)(ge=>(Se||(this.dialog.open(et.WithdrawalRequestPendingDialogComponent).componentInstance.withdrawalRequest=ge),te.E))))).pipe((0,G.w)(()=>te.E));const q=()=>r?k<t?this.tradeDialogService.openUserItemSellDialog(t).pipe((0,pn.M)(this.userService.balance$),(0,G.w)(([le,Se])=>Se>=t?this.withdrawDialogService.withdraw():te.E)):this.withdrawDialogService.withdraw():this.withdrawDialogService.openWithdrawSteamUrlDialog();return this.hasCustomPricedTrades(a)?this.withdrawDialogService.openWithdrawCustomPriceWarningDialog().pipe((0,G.w)(()=>q())):q()}),(0,L.x)(()=>{this.tradeLoading=!1,this.changeRef.markForCheck()}),(0,R.t)(this)).subscribe()}updateTradeUrl(){this.tradeDialogService.openSteamUrlDialog()}deposit(a,t){this.loading=!0,(0,Wt.$)(this.userService.hasTradeUrlSet$,this.userService.hasTradeApiKeySet$,this.maintenanceTradeEnabled$,this.tradeService.inventoryCollection.items$,this.tradeService.canSmartDeposit$).pipe((0,x.q)(1),(0,G.w)(([i,r,T,C,k])=>{const q=()=>r?this.depositDialogService.deposit(this.smartDepositCtrl.value&&k):this.depositDialogService.openDepositSteamUrlDialog({smartDeposit:this.smartDepositCtrl.value&&k});return t?!r&&T&&this.hasCustomPricedItems(C)?this.depositDialogService.openDepositSteamUrlDialog({hideTradeUrlSection:i,tradesMaintenance:!0,smartDeposit:this.smartDepositCtrl.value&&k}):this.hasCustomPricedItems(a)?this.depositDialogService.openDepositCustomPriceInfoDialog().pipe((0,G.w)(()=>q())):q():this.tradeDialogService.openSteamEnforceApiKeyDialog({mustSupplyAnAPIKey:!0,disableClose:!1}).pipe((0,fe.b)(le=>{const{steamApiKeySubmitted:Se}=le||{steamApiKeySubmitted:!1};Se&&this.depositDialogService.deposit(this.smartDepositCtrl.value&&k)}))}),(0,L.x)(()=>this.finalize()),(0,R.t)(this)).subscribe()}withdrawExchange(){return this.exchangeLoading=!0,(0,Wt.$)(this.selectedExchangeItems$,this.exchangeService.itemTotal$,this.userService.allowedToWithdraw$,this.userService.getDailyWithdrawalRemainder(),this.canExchangeSelected$).pipe((0,x.q)(1),(0,G.w)(([a,t,i,r,T])=>a.length&&T?i?this.withdrawalService.hasSufficientWithdrawalAmount(r,t)?this.selectedAvailable$:(0,We.a)(a.map((C,k)=>this.withdrawalService.increaseWithdrawalRequestAmount(C.value,C.id).pipe((0,j.U)(q=>(k||(this.dialog.open(et.WithdrawalRequestPendingDialogComponent).componentInstance.withdrawalRequest=q),te.E))))).pipe((0,G.w)(()=>te.E)):(this.dialog.open(et.WithdrawalRequireDepositDialogComponent),te.E):te.E),(0,x.q)(1),(0,j.U)(a=>a.filter(t=>t.available).map(t=>t.item)),(0,ta.z)(a=>this.exchangeService.create({userItemIds:[],itemVariantIds:a.map(({id:t})=>t)})),(0,G.w)(a=>(0,Wt.$)(...a.newUserItems.edges.map(t=>this.userItemService.update({userItemId:t.node.id,status:Sn.s0.REQUESTED})))),(0,L.x)(()=>{this.exchangeLoading=!1,this.exchangeService.itemCollection.clear(),this.changeRef.markForCheck()}),(0,R.t)(this)).subscribe()}withdraw(){(0,Wt.$)(this.selectedTrades$,this.selectedExchangeItems$,this.selectedWaxPeerItems$).pipe((0,x.q)(1)).subscribe(([a,t,i])=>{a.length&&this.withdrawTrades(),t.length&&this.withdrawExchange(),i.length&&this.withdrawWaxPeerItems()})}closeSidenav(){return(0,F.mG)(this,void 0,void 0,function*(){yield this.layoutService.closeSidenavElement("trade")})}hasCustomPricedTrades(a){return this.tradeService.hasCustomPricedTrades(a)}hasCustomPricedItems(a){return this.tradeService.hasCustomPricedItems(a)}hasUnpopularItems(a){return this.tradeService.hasUnpopularItems(a)}hasGoodPricedItems(a){return this.tradeService.hasGoodPricedItems(a)}hasBadPricedItems(a){return this.tradeService.hasBadPricedItems(a)}hasOnlyGoodPricedItems(a){return this.tradeService.hasOnlyGoodPricedItems(a)}hasOnlyBadPricedItems(a){return this.tradeService.hasOnlyBadPricedItems(a)}isItemAvailable(a){return this.itemService.isItemAvailable(a)}finalize(){this.loading=!1,this.changeRef.markForCheck()}getSmartDepositDefaultValue(){return!!this.allowBundles&&"false"!==this.localStorage.get(E.F.TRADE_SMART_DEPOSIT)}};Tt.\u0275fac=function(a){return new(a||Tt)(e.Y36(e.sBO),e.Y36(s.uw),e.Y36(c.MZ0),e.Y36(c.Pb3),e.Y36(c.Xxg),e.Y36(Ue.Oq),e.Y36(Te.a),e.Y36(ye),e.Y36(Lt),e.Y36(c.mNQ),e.Y36(Ue.en),e.Y36(c.RCL),e.Y36(c.tQx),e.Y36(Qe.kK),e.Y36(De.n2),e.Y36(c.KDu),e.Y36(Qe.Fb))},Tt.\u0275cmp=e.Xpm({type:Tt,selectors:[["cw-selected-sidebar-items"]],features:[e.qOj],decls:14,vars:5,consts:function(){let n,a,t,i,r,T,C,k;return n=$localize`:␟2e3c92f64a4d743541a5d39b34f7bcc78956014e␟777290093272319417:${"\ufffd*7:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_NG_CONTAINER:${"\ufffd/#1:1\ufffd\ufffd/*7:1\ufffd"}:CLOSE_TAG_NG_CONTAINER:`,a=$localize`:␟0c48dfc2f94e5c453a5dde45427321a21c5036b2␟770755773265342343: Available in ${"\ufffd#2\ufffd"}:START_TAG_CW_COUNTDOWN:${"\ufffd/#2\ufffd"}:CLOSE_TAG_CW_COUNTDOWN:`,t=$localize`:␟5da87b4b2d7cb4971e1ebc95c4793a27c1490ac2␟4848417076628698550:${"\ufffd*6:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_NG_CONTAINER:${"\ufffd/#1:1\ufffd\ufffd/*6:1\ufffd"}:CLOSE_TAG_NG_CONTAINER:`,i=$localize`:␟2aa567585af677993cdd5db61a6daa5364e57aed␟5718544322877939518:${"\ufffd*2:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_NG_CONTAINER:${"\ufffd/#1:1\ufffd\ufffd/*2:1\ufffd"}:CLOSE_TAG_NG_CONTAINER:`,r=$localize`:␟665e0d184e0b46a5c05ced08438f9542f990bba0␟3341031195136858731:Set Markup On All Items`,T=$localize`:␟7081751093e50e7d082cba8b06c23ca8ebb25fd1␟6206624854756063620:Smart Deposit ${"\ufffd#3\ufffd"}:START_TAG_CW_ICON:${"\ufffd/#3\ufffd"}:CLOSE_TAG_CW_ICON:`,C=$localize`:␟a307cf7b63546b7880b1285cf1c29d8deac60651␟762580874524351449:Smart Deposit Feature`,k=$localize`:␟8a77bffac3fd02e0bac41ca155162a486a02e657␟1516690767361997763: This feature will speed up your deposits by splitting them up based on item popularity.${"[\ufffd#4\ufffd\ufffd/#4\ufffd|\ufffd#5\ufffd\ufffd/#5\ufffd]"}:LINE_BREAK:${"[\ufffd#4\ufffd\ufffd/#4\ufffd|\ufffd#5\ufffd\ufffd/#5\ufffd]"}:LINE_BREAK: You can ${"\ufffd0\ufffd"}:INTERPOLATION: it by using the toggle below. `,k=e.Zx4(k),[[3,"ngSwitch"],[4,"ngSwitchCase"],["summary",""],["userCantWithdraw",""],["withdrawButtonText",""],["depositButtonText",""],["depositStatusSection",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"sidebar-header"],[1,"message-block"],[1,"negative",3,"balance"],[4,"ngIf"],[1,"trade-url-link",3,"click"],[3,"ngbTooltip"],["type","button","mat-flat-button","","color","accent",1,"w-100","mat-button-3d","mat-button-lg",3,"disabled","click"],[3,"loading"],n,[4,"ngTemplateOutlet"],["class","item-list",4,"ngIf"],[1,"item-list"],[3,"scrollY","scrollOnRouteChange"],["gdGap","8px","gdColumns","repeat(auto-fill, minmax(100%, .5fr))"],[4,"ngFor","ngForOf"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"itemVariant","banned","horizontal","rarityRadialBackground","allowOverlay","customPrice","tradeItem","showMenuLink","click",4,"ngIf"],[3,"itemVariants","trade","horizontal","click",4,"ngIf"],[3,"itemVariant","banned","horizontal","rarityRadialBackground","allowOverlay","customPrice","tradeItem","showMenuLink","click"],[3,"itemVariants","trade","horizontal","click"],[3,"itemVariant","banned","rarityRadialBackground","isDepleted","horizontal","allowOverlay","withRarityGlow","click"],["class","text-center",4,"ngIf"],[1,"text-center"],a,[1,"timer","font-weight-bold",3,"until"],[1,"text-center","text-warning","item-unavailable"],[3,"itemVariant","valueMultiplier","banned","horizontal","rarityRadialBackground","allowOverlay","externalIconUrl","click"],[1,"inner"],[1,"positive",3,"balance"],["class","d-block text-white mt-1",4,"ngIf"],[4,"rxLet"],["class","deposit-status",4,"ngIf"],[1,"d-block","text-white","mt-1"],t,[1,"deposit-status"],i,[3,"itemVariant","banned","horizontal","allowOverlay","customPrice","rarityRadialBackground","userOwned","canSetPrice","showDepositSpeed","click","customPriceEmitter"],["fxLayout","row","fxLayoutAlign","space-between center",1,"summary"],[1,"items-amount"],["inlineSVG","assets/icons/gun.svg",1,"mr-2","text-warning"],[1,"num-items"],["type","button","mat-icon-button","",3,"click"],["inlineSVG","assets/icons/close.svg"],[4,"ngIf","ngIfElse"],["cant",""],["inlineSVG","assets/icons/flash.svg"],["stdDeposit",""],[1,"mt-2"],[1,"custom-price-label"],r,["thumbLabel","","color","primary","step","0.1",1,"w-100",3,"min","max","formControl","input"],["mat-flat-button","","color","primary",1,"w-100",3,"click"],["cantDeposit",""],["inlineSVG","assets/icons/flash.svg","placement","left","container","body",1,"text-warning",3,"ngbTooltip"],["class","mt-1","placement","top",3,"ngbTooltip",4,"ngIf"],["smartDepositTooltip",""],[1,"text-warning"],["placement","top",1,"mt-1",3,"ngbTooltip"],[3,"formControl"],T,["inlineSVG","assets/icons/information.svg",1,"mb-1"],[1,"mb-1","text-warning"],C,[1,"mb-1"],k,["inlineSVG","assets/icons/flash.svg","placement","left","container","body",1,"text-success",3,"ngbTooltip"],[1,"text-success"],["rel","noreferrer","target","_blank","href","https://steamstat.us/"],["tabindex","-1",1,"pointer",3,"click"]]},template:function(a,t){1&a&&(e.ynx(0,0),e.ALo(1,"asyncInner"),e.YNc(2,Sa,15,18,"ng-container",1),e.YNc(3,Pa,3,3,"ng-container",1),e.BQk(),e.YNc(4,La,9,2,"ng-template",null,2,e.W1O),e.YNc(6,va,10,16,"ng-template",null,3,e.W1O),e.YNc(8,Ga,4,4,"ng-template",null,4,e.W1O),e.YNc(10,Va,3,3,"ng-template",null,5,e.W1O),e.YNc(12,ao,12,10,"ng-template",null,6,e.W1O)),2&a&&(e.Q6J("ngSwitch",e.lcZ(1,3,t.primaryRouteName$)),e.xp6(2),e.Q6J("ngSwitchCase","WITHDRAW_INSTANT"),e.xp6(1),e.Q6J("ngSwitchCase","DEPOSIT_TRADE"))},directives:[S.RF,S.n9,S.tP,y.q,S.O5,na._L,p.lW,b.R,An.l,fn.Gx,fn.A0,S.sg,v.P,Y._,we.M,nt.e,ue.xw,ue.Wh,Z.o,X.d$,Ze.hX,rt.pH,_.JJ,_.oH,aa.Rr],pipes:[Ne.d,W.F],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;flex:1}.message-block[_ngcontent-%COMP%]{padding:.375rem .5rem;background:#1a1e23;border-radius:.5rem;text-align:center;font-size:.875rem;margin-bottom:.75rem;-webkit-user-select:none;user-select:none}.message-block[_ngcontent-%COMP%]   cw-pretty-balance[_ngcontent-%COMP%]{margin-left:10px}.message-block[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.sidebar-header[_ngcontent-%COMP%]{background:#21252b;padding:1rem 1.5rem}.trade-url-link[_ngcontent-%COMP%]{display:block;font-size:.7125rem;text-align:center;text-decoration:underline!important;margin:.5rem 0;cursor:pointer;opacity:.8}.trade-url-link[_ngcontent-%COMP%]:hover{opacity:1}cw-pretty-balance[_ngcontent-%COMP%]{color:#fff}cw-pretty-balance.negative[_ngcontent-%COMP%]{color:#ff5548}cw-pretty-balance.positive[_ngcontent-%COMP%]{color:#00e258}.summary[_ngcontent-%COMP%]{padding-left:1.5rem;padding-right:.3rem;background:#1a1e23;-webkit-user-select:none;user-select:none}.summary[_ngcontent-%COMP%]   cw-icon[_ngcontent-%COMP%]{transform:translateY(1px)}.summary[_ngcontent-%COMP%]   .items-amount[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.num-items[_ngcontent-%COMP%]{color:#fff;font-size:.8125rem;font-weight:500}.item-list[_ngcontent-%COMP%]{padding:1.25rem 1.5rem .5rem;flex:1;display:flex}@media only screen and (min-width: 600px){.hide-close[_ngcontent-%COMP%]{visibility:hidden}}.timer[_ngcontent-%COMP%]{color:#ecce75}cw-item[_ngcontent-%COMP%], cw-item-bundle[_ngcontent-%COMP%]{cursor:pointer;-webkit-user-select:none;user-select:none;transition:transform .2s,opacity .2s}cw-item[_ngcontent-%COMP%]:hover, cw-item-bundle[_ngcontent-%COMP%]:hover{transform:translateY(2px);opacity:.5}cw-item[_ngcontent-%COMP%]  .bg-img{background-position:-14%!important}.deposit-status[_ngcontent-%COMP%]{text-align:center;font-size:.7125rem;margin-top:.5rem}.item-unavailable[_ngcontent-%COMP%]{font-size:.75rem}.custom-price-label[_ngcontent-%COMP%]{font-size:.75rem;font-weight:500;color:#fff}"],changeDetection:0}),Tt=(0,F.gn)([(0,R.c)(),(0,F.w6)("design:paramtypes",[e.sBO,s.uw,c.MZ0,c.Pb3,c.Xxg,Ue.Oq,Te.a,ye,Lt,c.mNQ,Ue.en,c.RCL,c.tQx,Qe.kK,De.n2,c.KDu,Qe.Fb])],Tt),o(71970),o(94431);var _o=o(23086),ro=o(71884);function so(n,a){1&n&&e.SDv(0,4,1)}function lo(n,a){1&n&&e.SDv(0,4,2)}function co(n,a){1&n&&e._UZ(0,"cw-deposit-joined",19),2&n&&e.Q6J("trade",a.$implicit)}function uo(n,a){if(1&n&&(e.ynx(0),e.YNc(1,co,1,1,"cw-deposit-joined",18),e.BQk()),2&n){const t=e.oxw(2).$implicit,i=e.oxw(4);e.xp6(1),e.Q6J("ngForOf",t.data)("ngForTrackBy",i.trackById)}}function To(n,a){1&n&&e._UZ(0,"cw-withdraw-joined",19),2&n&&e.Q6J("trade",a.$implicit)}function Eo(n,a){if(1&n&&e.YNc(0,To,1,1,"cw-withdraw-joined",18),2&n){const t=e.oxw(2).$implicit,i=e.oxw(4);e.Q6J("ngForOf",t.data)("ngForTrackBy",i.trackById)}}function go(n,a){if(1&n&&(e.ynx(0),e.YNc(1,uo,2,2,"ng-container",16),e.YNc(2,Eo,1,2,"ng-template",null,17,e.W1O),e.BQk()),2&n){const t=e.MAs(3),i=e.oxw().$implicit,r=e.oxw(4);e.xp6(1),e.Q6J("ngIf",i.type===r.TradeType.DEPOSIT)("ngIfElse",t)}}function mo(n,a){1&n&&e._UZ(0,"cw-deposit-cooldown",19),2&n&&e.Q6J("trade",a.$implicit)}function So(n,a){if(1&n&&(e.ynx(0),e.YNc(1,mo,1,1,"cw-deposit-cooldown",18),e.BQk()),2&n){const t=e.oxw(2).$implicit,i=e.oxw(4);e.xp6(1),e.Q6J("ngForOf",t.data)("ngForTrackBy",i.trackById)}}function Io(n,a){1&n&&e._UZ(0,"cw-withdraw-cooldown",19),2&n&&e.Q6J("trade",a.$implicit)}function Do(n,a){if(1&n&&e.YNc(0,Io,1,1,"cw-withdraw-cooldown",18),2&n){const t=e.oxw(2).$implicit,i=e.oxw(4);e.Q6J("ngForOf",t.data)("ngForTrackBy",i.trackById)}}function po(n,a){if(1&n&&(e.ynx(0),e.YNc(1,So,2,2,"ng-container",16),e.YNc(2,Do,1,2,"ng-template",null,20,e.W1O),e.BQk()),2&n){const t=e.MAs(3),i=e.oxw().$implicit,r=e.oxw(4);e.xp6(1),e.Q6J("ngIf",i.type===r.TradeType.DEPOSIT)("ngIfElse",t)}}function Ao(n,a){1&n&&e._UZ(0,"cw-deposit-processing",19),2&n&&e.Q6J("trade",a.$implicit)}function fo(n,a){if(1&n&&(e.ynx(0),e.YNc(1,Ao,1,1,"cw-deposit-processing",18),e.BQk()),2&n){const t=e.oxw(2).$implicit,i=e.oxw(4);e.xp6(1),e.Q6J("ngForOf",t.data)("ngForTrackBy",i.trackById)}}function Co(n,a){1&n&&e._UZ(0,"cw-withdraw-processing",19),2&n&&e.Q6J("trade",a.$implicit)}function Ro(n,a){if(1&n&&(e.ynx(0),e.YNc(1,Co,1,1,"cw-withdraw-processing",18),e.BQk()),2&n){const t=e.oxw(3).$implicit,i=e.oxw(4);e.xp6(1),e.Q6J("ngForOf",t.data)("ngForTrackBy",i.trackById)}}function Oo(n,a){1&n&&e._UZ(0,"cw-withdraw-wax-peer-trade-processing",24),2&n&&e.Q6J("waxPeerTrade",a.$implicit)}function ho(n,a){if(1&n&&e.YNc(0,Oo,1,1,"cw-withdraw-wax-peer-trade-processing",23),2&n){const t=e.oxw(3).$implicit,i=e.oxw(4);e.Q6J("ngForOf",t.data)("ngForTrackBy",i.trackById)}}function Po(n,a){if(1&n&&(e.YNc(0,Ro,2,2,"ng-container",16),e.YNc(1,ho,1,2,"ng-template",null,22,e.W1O)),2&n){const t=e.MAs(2),i=e.oxw(2).$implicit,r=e.oxw(4);e.Q6J("ngIf",i.withdrawType===r.WithdrawTradeType.TRADE)("ngIfElse",t)}}function Fo(n,a){if(1&n&&(e.ynx(0),e.YNc(1,fo,2,2,"ng-container",16),e.YNc(2,Po,3,2,"ng-template",null,21,e.W1O),e.BQk()),2&n){const t=e.MAs(3),i=e.oxw().$implicit,r=e.oxw(4);e.xp6(1),e.Q6J("ngIf",i.type===r.TradeType.DEPOSIT)("ngIfElse",t)}}function Lo(n,a){1&n&&e._UZ(0,"cw-deposit-listed",19),2&n&&e.Q6J("trade",a.$implicit)}function Mo(n,a){if(1&n&&(e.ynx(0),e.YNc(1,Lo,1,1,"cw-deposit-listed",18),e.BQk()),2&n){const t=e.oxw().$implicit,i=e.oxw(4);e.xp6(1),e.Q6J("ngForOf",t.data)("ngForTrackBy",i.trackById)}}function No(n,a){if(1&n&&(e.ynx(0),e.ynx(1,14),e.YNc(2,go,4,2,"ng-container",15),e.YNc(3,po,4,2,"ng-container",15),e.YNc(4,Fo,4,2,"ng-container",15),e.YNc(5,Mo,2,2,"ng-container",15),e.BQk(),e.BQk()),2&n){const t=a.$implicit;e.xp6(1),e.Q6J("ngSwitch",t.status),e.xp6(1),e.Q6J("ngSwitchCase","JOINED"),e.xp6(1),e.Q6J("ngSwitchCase","COOLDOWN"),e.xp6(1),e.Q6J("ngSwitchCase","PROCESSING"),e.xp6(1),e.Q6J("ngSwitchCase","LISTED")}}function xo(n,a){1&n&&e._UZ(0,"cw-requested-user-item",26),2&n&&e.Q6J("userItem",a.$implicit)}function wo(n,a){if(1&n&&(e.ynx(0),e.YNc(1,xo,1,1,"cw-requested-user-item",25),e.BQk()),2&n){const t=a.$implicit,i=e.oxw(4);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",i.trackById)}}function vo(n,a){if(1&n&&(e.TgZ(0,"cw-scroll",11),e.YNc(1,No,6,5,"ng-container",12),e.YNc(2,wo,2,2,"ng-container",13),e.qZA()),2&n){const t=a.$implicit,i=e.oxw(3);e.Q6J("scrollY",!0)("scrollOnRouteChange",!1),e.xp6(1),e.Q6J("ngForOf",t),e.xp6(1),e.Q6J("rxLet",i.requestedSteamUserItems$)}}function $o(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",1),e.TgZ(2,"span"),e._UZ(3,"cw-icon",2),e.TgZ(4,"span",3),e.tHW(5,4),e.ALo(6,"push"),e.ALo(7,"push"),e.YNc(8,so,1,0,"ng-template",5),e.YNc(9,lo,1,0,"ng-template",6),e.N_p(),e.qZA(),e.qZA(),e.TgZ(10,"button",7),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).closeTradeSidebar()}),e._UZ(11,"cw-icon",8),e.qZA(),e.qZA(),e.TgZ(12,"div",9),e.YNc(13,vo,3,4,"cw-scroll",10),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(2);e.xp6(4),e.Q6J("ngPlural",e.lcZ(6,3,t.pendingTrades$)||0),e.xp6(5),e.pQV(e.lcZ(7,5,t.pendingTrades$)),e.QtT(5),e.xp6(4),e.Q6J("rxLet",t.tradeSidebar$)}}function yo(n,a){1&n&&e._UZ(0,"cw-selected-sidebar-items")}function Wo(n,a){if(1&n&&(e.ynx(0),e.YNc(1,$o,14,7,"ng-container",0),e.ALo(2,"push"),e.ALo(3,"push"),e.ALo(4,"push"),e.YNc(5,yo,1,0,"cw-selected-sidebar-items",0),e.ALo(6,"push"),e.ALo(7,"push"),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!e.lcZ(2,2,t.isOnTradePage$)||e.lcZ(3,4,t.hasPendingTrades$)&&!e.lcZ(4,6,t.hasSelectedItems$)),e.xp6(4),e.Q6J("ngIf",!e.lcZ(6,8,t.hasPendingTrades$)||e.lcZ(7,10,t.hasSelectedItems$))}}var Xe=(()=>{return(n=Xe||(Xe={}))[n.WITHDRAW=0]="WITHDRAW",n[n.DEPOSIT=1]="DEPOSIT",Xe;var n})(),Mt=(()=>{return(n=Mt||(Mt={}))[n.TRADE=0]="TRADE",n[n.WAX_PEER_TRADE=1]="WAX_PEER_TRADE",Mt;var n})();let un=(()=>{class n extends((0,yt.A)(yt.t)){constructor(t,i,r,T,C,k){super(),this.userService=t,this.layoutService=i,this.tradeService=r,this.exchangeService=T,this.routeService=C,this.waxPeerTradeService=k,this.userWithdrawalsJoined$=(0,We.a)([this.tradeService.userWithdrawalsJoined$,this.tradeService.withdrawalJoinedHiddenCollection.items$]).pipe((0,j.U)(([q,le])=>q.filter(Se=>le.findIndex(ge=>ge.id===Se.id)<0))),this.userWithdrawalsProcessing$=this.tradeService.userWithdrawalsProcessing$,this.userDepositsListed$=this.tradeService.userDepositsListed$,this.userDepositsJoined$=this.tradeService.userDepositsJoined$,this.userDepositsProcessing$=this.tradeService.userDepositsProcessing$,this.userDepositsCooldown$=this.tradeService.userDepositsCooldown$,this.userWithdrawalsCooldown$=this.tradeService.userWithdrawalsCooldown$,this.joinedUserWaxPeerTrades$=this.waxPeerTradeService.joinedUserData$,this.tradeSidebar$=(0,We.a)([this.userDepositsJoined$,this.userWithdrawalsJoined$,this.userDepositsProcessing$,this.userWithdrawalsProcessing$,this.userDepositsListed$,this.userDepositsCooldown$,this.userWithdrawalsCooldown$,this.joinedUserWaxPeerTrades$]).pipe((0,j.U)(([q,le,Se,ge,ke,bt,Bt,Gt])=>[{status:"JOINED",type:Xe.DEPOSIT,data:q},{status:"JOINED",type:Xe.WITHDRAW,data:le},{status:"PROCESSING",type:Xe.DEPOSIT,data:Se},{status:"PROCESSING",type:Xe.WITHDRAW,data:ge,withdrawType:Mt.TRADE},{status:"COOLDOWN",type:Xe.DEPOSIT,data:bt},{status:"COOLDOWN",type:Xe.WITHDRAW,data:Bt},{status:_o.yL.PROCESSING,type:Xe.WITHDRAW,data:Gt,withdrawType:Mt.WAX_PEER_TRADE},{status:"LISTED",type:Xe.DEPOSIT,data:ke}])),this.isOnTradePage$=this.routeService.isOnTradePage$,this.requestedSteamUserItems$=this.tradeService.requestedSteamUserItems$,this.selectedItemVariants$=this.tradeService.selectedItemVariants$,this.selectedTrades$=this.tradeService.selectedTrades$,this.selectedExchangeItems$=this.exchangeService.itemCollection.items$,this.selectedWaxPeerItems$=this.waxPeerTradeService.selectedWaxPeerItemCollection.items$,this.TradeType=Xe,this.WithdrawTradeType=Mt,this.user$=this.userService.user$,this.pendingTrades$=(0,We.a)([this.userDepositsListed$,this.userDepositsJoined$,this.userDepositsProcessing$,this.userWithdrawalsJoined$,this.userWithdrawalsProcessing$,this.userDepositsCooldown$,this.userWithdrawalsCooldown$,this.requestedSteamUserItems$,this.joinedUserWaxPeerTrades$]).pipe((0,j.U)(q=>q.map(le=>le.length).reduce((le,Se)=>le+Se,0))),this.hasPendingTrades$=this.pendingTrades$.pipe((0,j.U)(q=>q>0),(0,ro.x)()),this.hasSelectedItems$=(0,We.a)([this.selectedItemVariants$,this.selectedTrades$,this.selectedExchangeItems$,this.selectedWaxPeerItems$]).pipe((0,j.U)(([...q])=>q.some(le=>le.length)))}closeTradeSidebar(){this.layoutService.closeSidenavElement("trade")}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(c.KDu),e.Y36(c.Pb3),e.Y36(c.Xxg),e.Y36(Ue.Oq),e.Y36(c.MZ0),e.Y36(Qe.Fb))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cw-trade-sidebar"]],features:[e.qOj],decls:2,vars:3,consts:function(){let a;return a=$localize`:␟87b458bd9821b5fa8afef4e86e7c66057c999a7c␟2507920507633498013: ${"\ufffd0\ufffd"}:INTERPOLATION: Pending ${"\ufffd*8:1\ufffd"}:START_TAG_NG_TEMPLATE: Trade${"[\ufffd/*8:1\ufffd|\ufffd/*9:2\ufffd]"}:CLOSE_TAG_NG_TEMPLATE:${"\ufffd*9:2\ufffd"}:START_TAG_NG_TEMPLATE_1: Trades${"[\ufffd/*8:1\ufffd|\ufffd/*9:2\ufffd]"}:CLOSE_TAG_NG_TEMPLATE:`,a=e.Zx4(a),[[4,"ngIf"],["fxLayout","row","fxLayoutAlign","space-between center",1,"summary"],["inlineSVG","assets/icons/swap.svg",1,"mr-2","text-warning"],[1,"num-trades",3,"ngPlural"],a,["ngPluralCase","one"],["ngPluralCase","other"],["mat-icon-button","",3,"click"],["inlineSVG","assets/icons/close.svg"],[1,"trade-list"],[3,"scrollY","scrollOnRouteChange",4,"rxLet"],[3,"scrollY","scrollOnRouteChange"],[4,"ngFor","ngForOf"],[4,"rxLet"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngIf","ngIfElse"],["wJoined",""],[3,"trade",4,"ngFor","ngForOf","ngForTrackBy"],[3,"trade"],["wCooldown",""],["wProc",""],["waxPeerTrade",""],[3,"waxPeerTrade",4,"ngFor","ngForOf","ngForTrackBy"],[3,"waxPeerTrade"],[3,"userItem",4,"ngFor","ngForOf","ngForTrackBy"],[3,"userItem"]]},template:function(t,i){1&t&&(e.YNc(0,Wo,8,12,"ng-container",0),e.ALo(1,"push")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.user$))},styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;min-height:100%;background:var(--main-elements-bg)}.summary[_ngcontent-%COMP%]{padding-left:1.5rem;padding-right:.3rem;background:#1a1e23}.num-trades[_ngcontent-%COMP%]{font-size:.8125rem;font-weight:500;color:#fff}.trade-list[_ngcontent-%COMP%]{flex:1;display:flex}"],changeDetection:0}),n})(),Tn=(()=>{class n{constructor(t,i){this.steamService=t,this.dialogService=i}getProfileTradeOffersUrl(){var t;return this.steamService.getProfileTradeOffersUrl(null===(t=this.trade.withdrawer)||void 0===t?void 0:t.steamId)}openDialog(){this.dialogService.openWithdrawCooldownDialog(this.trade,!0)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(c.qe3),e.Y36(Lt))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cw-withdraw-cooldown"]],inputs:{trade:"trade"},decls:9,vars:6,consts:function(){let a,t;return a=$localize`:␟b6c3b5e0c649b424ec5c1c14d091ee86cf38f3ad␟9021345601898239211:Withdrawal Cooldown`,t=$localize`:␟ac0b59a4ea73d5dcdc55b6eca6088d3cd5b357d4␟8192584944173889029: Trade went into cooldown. ${"\ufffd#7\ufffd\ufffd/#7\ufffd"}:LINE_BREAK:If you have received ${"\ufffd#8\ufffd"}:START_LINK:trade offer on Steam${"\ufffd/#8\ufffd"}:CLOSE_LINK:, please cancel it.
`,[["fxLayoutAlign","start center",1,"mb-3"],["color","warn",1,"mr-2",3,"loading","diameter"],["fxFlexAlign","center"],a,[1,"mb-3",3,"trade","horizontal","rarityRadialBackground","click"],[1,"message","mb-3"],t,["target","_blank",3,"href"]]},template:function(t,i){1&t&&(e.TgZ(0,"header",0),e._UZ(1,"cw-loader",1),e.TgZ(2,"span",2),e.SDv(3,3),e.qZA(),e.qZA(),e.TgZ(4,"cw-trade",4),e.NdJ("click",function(){return i.openDialog()}),e.qZA(),e.TgZ(5,"p",5),e.tHW(6,6),e._UZ(7,"br"),e._UZ(8,"a",7),e.N_p(),e.qZA()),2&t&&(e.xp6(1),e.Q6J("loading",!0)("diameter",16),e.xp6(3),e.Q6J("trade",i.trade)("horizontal",!0)("rarityRadialBackground",!0),e.xp6(4),e.Q6J("href",i.getProfileTradeOffersUrl(),e.LSH))},directives:[ue.Wh,b.R,ue.XD,I.L],styles:["[_nghost-%COMP%]{display:block;padding:.75rem 1.25rem 1.25rem;cursor:pointer;transition:background 175ms ease-out}[_nghost-%COMP%]:nth-child(odd){background:#262a30}[_nghost-%COMP%]:nth-child(even){background:#21252b}[_nghost-%COMP%]:hover{background:#2c3037}.message[_ngcontent-%COMP%]{font-size:.875rem;padding:0 1.5rem;text-align:center}"],changeDetection:0}),n})();function bo(n,a){if(1&n&&(e._UZ(0,"cw-item",8),e.ALo(1,"pluck")),2&n){const t=e.oxw();e.Q6J("itemVariant",e.xi3(1,7,t.trade.tradeItems[0],"itemVariant"))("customPrice",t.trade.tradeItems[0].customValue?t.trade.tradeItems[0].value:null)("banned",!1)("horizontal",!0)("allowOverlay",!1)("tradeItem",!0)("rarityRadialBackground",!0)}}function Bo(n,a){if(1&n&&(e._UZ(0,"cw-item-bundle",9),e.ALo(1,"pluck")),2&n){const t=e.oxw();e.Q6J("itemVariants",e.xi3(1,3,t.trade.tradeItems,"itemVariant"))("trade",t.trade)("horizontal",!0)}}function Go(n,a){if(1&n){const t=e.EpF();e.ynx(0),e._UZ(1,"mat-progress-bar",10),e.ALo(2,"asyncInner"),e.TgZ(3,"p",11),e.tHW(4,12),e.TgZ(5,"cw-countdown",13),e.NdJ("finished",function(){return e.CHM(t),e.oxw().setExpired()}),e.qZA(),e.N_p(),e.qZA(),e.BQk()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("value",e.lcZ(2,2,t.expiredPercentage$)),e.xp6(4),e.Q6J("until",t.trade.expiresAt)}}function Zo(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"p",14),e.SDv(2,15),e.qZA(),e.TgZ(3,"div",16),e.TgZ(4,"button",17),e.NdJ("click",function(){return e.CHM(t),e.oxw().hideExpiredFromSidebar()}),e._uU(5,"Dismiss"),e.qZA(),e.qZA(),e.qZA()}}let En=(()=>{class n{constructor(t,i){this.tradeService=t,this.dialogService=i,this.expired=!1}ngOnInit(){this.expiredPercentage$=this.tradeService.getElapsedPercentage(this.trade)}openWithdrawJoinedDialog(){this.dialogService.openWithdrawJoinedDialog(this.trade,!0)}setExpired(t=!0){this.expired=t}hideExpiredFromSidebar(){this.tradeService.withdrawalJoinedHiddenCollection.add(this.trade)}ngOnDestroy(){}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(c.Xxg),e.Y36(Lt))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cw-withdraw-joined"]],inputs:{trade:"trade"},decls:11,vars:10,consts:function(){let a,t,i;return a=$localize`:␟3f7decfcf441dc9e5a5aaac0a8057f23ba7000f0␟6691810268713581510:Withdrawal`,t=$localize`:␟065b8bdac061390cd4ba95bdcbac62366c0509cd␟5079244886459800518: The other user has ${"\ufffd#5\ufffd"}:START_TAG_CW_COUNTDOWN:${"\ufffd/#5\ufffd"}:CLOSE_TAG_CW_COUNTDOWN: to confirm the trade. `,i=$localize`:␟dec461dda4cdc864fbe19ef39d0fb5d082135427␟1258833575980216932:This trade has expired`,[["fxLayoutAlign","start center",1,"mb-3"],["color","warn",3,"loading","diameter"],["fxFlexAlign","center"],a,[1,"items","mb-3",3,"click"],[3,"itemVariant","customPrice","banned","horizontal","allowOverlay","tradeItem","rarityRadialBackground",4,"ngIf"],[3,"itemVariants","trade","horizontal",4,"ngIf"],[4,"ngIf"],[3,"itemVariant","customPrice","banned","horizontal","allowOverlay","tradeItem","rarityRadialBackground"],[3,"itemVariants","trade","horizontal"],["mode","determinate","color","accent",1,"mb-3",3,"value"],[1,"message"],t,[1,"timer",3,"until","finished"],[1,"message","text-danger"],i,[1,"text-center","mt-3"],["mat-flat-button","","type","button","color","primary",3,"click"]]},template:function(t,i){1&t&&(e.TgZ(0,"header",0),e._UZ(1,"cw-loader",1),e.TgZ(2,"span",2),e.SDv(3,3),e.qZA(),e.qZA(),e.TgZ(4,"div",4),e.NdJ("click",function(){return i.openWithdrawJoinedDialog()}),e.YNc(5,bo,2,10,"cw-item",5),e.YNc(6,Bo,2,6,"cw-item-bundle",6),e.qZA(),e.YNc(7,Go,6,4,"ng-container",7),e.ALo(8,"timeUntil"),e.YNc(9,Zo,6,0,"div",7),e.ALo(10,"timeUntil")),2&t&&(e.xp6(1),e.Q6J("loading",!0)("diameter",16),e.xp6(4),e.Q6J("ngIf",1===i.trade.tradeItems.length),e.xp6(1),e.Q6J("ngIf",i.trade.tradeItems.length>1),e.xp6(1),e.Q6J("ngIf",!i.expired||e.lcZ(8,6,i.trade.expiresAt)>0),e.xp6(2),e.Q6J("ngIf",i.expired||e.lcZ(10,8,i.trade.expiresAt)<=0))},directives:[ue.Wh,b.R,ue.XD,S.O5,v.P,Y._,Pe.pW,we.M,p.lW],pipes:[dt.c,W.F,Ne.d],styles:["[_nghost-%COMP%]{display:block;padding:.75rem 1.25rem 1.25rem;cursor:pointer;transition:background 175ms ease-out}[_nghost-%COMP%]:nth-child(odd){background:#262a30}[_nghost-%COMP%]:nth-child(even){background:#21252b}[_nghost-%COMP%]:hover{background:#2c3037}cw-loader[_ngcontent-%COMP%]{display:inline-block;margin-right:.5rem}cw-item[_ngcontent-%COMP%], cw-item-bundle[_ngcontent-%COMP%]{cursor:pointer}.mat-progress-bar[_ngcontent-%COMP%]{width:auto}.timer[_ngcontent-%COMP%]{font-weight:500;color:#ecce75}.message[_ngcontent-%COMP%]{font-size:.875rem;padding:0 1.5rem;text-align:center;margin-bottom:0}"],changeDetection:0}),n})();function Uo(n,a){if(1&n&&(e._UZ(0,"cw-item",9),e.ALo(1,"pluck")),2&n){const t=e.oxw();e.Q6J("itemVariant",e.xi3(1,7,t.trade.tradeItems[0],"itemVariant"))("customPrice",t.trade.tradeItems[0].customValue?t.trade.tradeItems[0].value:null)("banned",!1)("horizontal",!0)("allowOverlay",!1)("tradeItem",!0)("rarityRadialBackground",!0)}}function Xo(n,a){if(1&n&&(e._UZ(0,"cw-item-bundle",10),e.ALo(1,"pluck")),2&n){const t=e.oxw();e.Q6J("itemVariants",e.xi3(1,3,t.trade.tradeItems,"itemVariant"))("trade",t.trade)("horizontal",!0)}}function Jo(n,a){if(1&n&&(e.ynx(0),e._UZ(1,"mat-progress-bar",11),e.ALo(2,"asyncInner"),e.TgZ(3,"p",12),e.tHW(4,13),e._UZ(5,"cw-countdown",14),e.N_p(),e.qZA(),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("value",e.lcZ(2,2,t.expiredPercentage$)),e.xp6(4),e.Q6J("until",t.trade.expiresAt)}}function Yo(n,a){1&n&&(e.TgZ(0,"p",15),e.SDv(1,16),e.qZA())}let gn=(()=>{class n{constructor(t,i){this.tradeService=t,this.dialogService=i,this.expired=!1}ngOnInit(){this.expiredPercentage$=this.tradeService.getElapsedPercentage(this.trade)}openWithdrawProcessingDialog(){this.dialogService.openWithdrawProcessingDialog(this.trade,!0)}setExpired(t=!0){this.expired=t}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(c.Xxg),e.Y36(Lt))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cw-withdraw-processing"]],inputs:{trade:"trade"},decls:11,vars:8,consts:function(){let a,t,i;return a=$localize`:␟3f7decfcf441dc9e5a5aaac0a8057f23ba7000f0␟6691810268713581510:Withdrawal`,t=$localize`:␟f3b481ac5340ec1d8bdd3d255cc9575e0b332514␟2130213358876287123: The other user has ${"\ufffd#5\ufffd"}:START_TAG_CW_COUNTDOWN:${"\ufffd/#5\ufffd"}:CLOSE_TAG_CW_COUNTDOWN: to complete the trade. `,i=$localize`:␟dec461dda4cdc864fbe19ef39d0fb5d082135427␟1258833575980216932:This trade has expired`,[["fxLayoutAlign","start center",1,"mb-3"],["color","warn",3,"loading","diameter"],["fxFlexAlign","center"],a,[1,"items","mb-3",3,"click"],[3,"itemVariant","customPrice","banned","horizontal","allowOverlay","tradeItem","rarityRadialBackground",4,"ngIf"],[3,"itemVariants","trade","horizontal",4,"ngIf"],[4,"ngIf","ngIfElse"],["expired",""],[3,"itemVariant","customPrice","banned","horizontal","allowOverlay","tradeItem","rarityRadialBackground"],[3,"itemVariants","trade","horizontal"],["mode","determinate","color","accent",1,"mb-2",3,"value"],[1,"message"],t,[1,"timer",3,"until"],[1,"message","text-danger"],i]},template:function(t,i){if(1&t&&(e.TgZ(0,"header",0),e._UZ(1,"cw-loader",1),e.TgZ(2,"span",2),e.SDv(3,3),e.qZA(),e.qZA(),e.TgZ(4,"div",4),e.NdJ("click",function(){return i.openWithdrawProcessingDialog()}),e.YNc(5,Uo,2,10,"cw-item",5),e.YNc(6,Xo,2,6,"cw-item-bundle",6),e.qZA(),e.YNc(7,Jo,6,4,"ng-container",7),e.ALo(8,"asyncInner"),e.YNc(9,Yo,2,0,"ng-template",null,8,e.W1O)),2&t){const r=e.MAs(10);e.xp6(1),e.Q6J("loading",!0)("diameter",16),e.xp6(4),e.Q6J("ngIf",1===i.trade.tradeItems.length),e.xp6(1),e.Q6J("ngIf",i.trade.tradeItems.length>1),e.xp6(1),e.Q6J("ngIf",e.lcZ(8,6,i.expiredPercentage$)<100)("ngIfElse",r)}},directives:[ue.Wh,b.R,ue.XD,S.O5,v.P,Y._,Pe.pW,we.M],pipes:[Ne.d,W.F],styles:["[_nghost-%COMP%]{display:block;padding:.75rem 1.25rem 1.25rem;cursor:pointer;transition:background 175ms ease-out}[_nghost-%COMP%]:nth-child(odd){background:#262a30}[_nghost-%COMP%]:nth-child(even){background:#21252b}[_nghost-%COMP%]:hover{background:#2c3037}cw-loader[_ngcontent-%COMP%]{display:inline-block;margin-right:.5rem}cw-item[_ngcontent-%COMP%], cw-item-bundle[_ngcontent-%COMP%]{cursor:pointer}.mat-progress-bar[_ngcontent-%COMP%]{width:auto}.timer[_ngcontent-%COMP%]{color:#ecce75;font-weight:500}.message[_ngcontent-%COMP%]{font-size:.875rem;padding:0 1.5rem;text-align:center;margin-bottom:0}.items[_ngcontent-%COMP%]{cursor:pointer}"],changeDetection:0}),n})();var Vo=o(49750),Ho=o(97443),Qo=o(66026),ko=o(89979),Ko=o(93900),zo=o(43631),qo=o(36656),jo=o(1094);function ei(n,a){if(1&n&&e._UZ(0,"cw-select-navigator",5),2&n){const t=e.oxw();e.Q6J("navListItems",t.navListItems)}}function ti(n,a){if(1&n&&(e._UZ(0,"cw-icon",14),e.TgZ(1,"div",15),e._uU(2),e.qZA()),2&n){const t=a.$implicit,i=e.oxw(3).$implicit;e.Q6J("inlineSVG",i.iconPath),e.xp6(2),e.Oqu(t[0]+" "+t[1])}}const ni=function(n){return{$implicit:n}};function ai(n,a){if(1&n&&(e.TgZ(0,"a",11),e.YNc(1,ti,3,2,"ng-template",12,13,e.W1O),e.qZA()),2&n){const t=e.MAs(2),i=e.oxw(2),r=i.$implicit,T=i.index,C=e.oxw(2);e.Tol((r.class||"")+" nav-link"),e.ekj("first",!T)("last",T===C.navListItems.length-1),e.Q6J("routerLink",r.routerLink),e.xp6(1),e.Q6J("ngTemplateOutlet",t)("ngTemplateOutletContext",e.VKq(9,ni,C.splitLabel(r.label)))}}function oi(n,a){if(1&n&&(e.TgZ(0,"li",9),e.YNc(1,ai,3,11,"a",10),e.ALo(2,"async"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",!e.lcZ(2,1,t.hideItem$))}}function ii(n,a){if(1&n&&(e.ynx(0),e.YNc(1,oi,3,3,"li",8),e.BQk()),2&n){const t=a.$implicit;e.xp6(1),e.Q6J("cwRoleIf",t.role)}}function _i(n,a){if(1&n&&(e.TgZ(0,"ul",6),e.YNc(1,ii,2,1,"ng-container",7),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.navListItems)("ngForTrackBy",t.trackByIndex)}}let Et=class extends((0,yt.A)(yt.t)){constructor(a,t,i,r,T){super(),this.exchangeService=a,this.localStorage=t,this.userService=i,this.settingsService=r,this.itemCollection=this.exchangeService.itemCollection,this.isWaxPeerInMaintenance$=this.settingsService.getSetting("maintenance:wax_peer").pipe((0,j.U)(C=>null==C?void 0:C.value)),this.tradeAllowedItemTypes$=this.settingsService.getSetting("trade:allowed_item_types").pipe((0,x.q)(1),(0,j.U)(C=>null==C?void 0:C.value)),this.navListItems=[],this.tradeAllowedItemTypes$.subscribe(C=>{C.includes("CSGO")&&this.navListItems.push({label:"P2P",iconPath:"assets/icons/csgo.svg",routerLink:["../../csgo/p2p"]},{label:"Our Stock",iconPath:"assets/icons/csgo.svg",routerLink:["../../csgo/our-stock"]},{label:"3rd Party",iconPath:"assets/icons/csgo.svg",routerLink:["../../csgo/third-party"],hideItem$:this.isWaxPeerInMaintenance$},{label:"All",iconPath:"assets/icons/csgo.svg",routerLink:["../../csgo/all"],role:Ho.i.USER}),C.includes("DOTA2")&&this.navListItems.push({label:"",class:"dota2",iconPath:"assets/icons/dota2.svg",routerLink:["../../dota2/all"]})}),this.steamAppName$=T.paramMap.pipe((0,j.U)(C=>C.get("steamAppName").toUpperCase()||Vo.o.CSGO),(0,fe.b)(C=>this.localStorage.set(E.F.TRADE_WITHDRAW_STEAM_APP_NAME,C))),this.withdrawType$=T.paramMap.pipe((0,j.U)(C=>C.get("withdrawType").toUpperCase().replace(/\-/g,"_")||Qo.o.P2P),(0,fe.b)(C=>this.localStorage.set(E.F.TRADE_WITHDRAW_TYPE,C)))}splitLabel(a){const t=a.split(" ");return[t[0],t.slice(1).reduce((i,r)=>`${i} ${r}`,"")]}};Et.\u0275fac=function(a){return new(a||Et)(e.Y36(Ue.Oq),e.Y36(c.Vtq),e.Y36(c.KDu),e.Y36(c.RCL),e.Y36(je.gz))},Et.\u0275cmp=e.Xpm({type:Et,selectors:[["cw-withdraw"]],features:[e.qOj],decls:12,vars:30,consts:[["ngClass.gt-xs","mb-4","ngClass.lt-sm","mb-1"],[3,"navListItems",4,"cwMediaIf"],["class","nav nav-pills",4,"cwMediaIf"],[3,"allowOverlay","banned","selectedItemVariantCollection","showStockDetails","purchasableItems","includeAvailableAssetsOrder","user","steamAppName","canTradeMultiple","withdrawType"],[3,"tradesCount","totalValue","currency","action"],[3,"navListItems"],[1,"nav","nav-pills"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","nav-item",4,"cwRoleIf"],[1,"nav-item"],["routerLinkActive","active",3,"class","first","last","routerLink",4,"ngIf"],["routerLinkActive","active",3,"routerLink"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["label",""],[3,"inlineSVG"],[1,"app-name"]],template:function(a,t){1&a&&(e.TgZ(0,"nav",0),e.YNc(1,ei,1,1,"cw-select-navigator",1),e.YNc(2,_i,2,2,"ul",2),e.qZA(),e._UZ(3,"cw-withdraw-search-grid",3),e.ALo(4,"asyncInner"),e.ALo(5,"asyncInner"),e.ALo(6,"asyncInner"),e.ALo(7,"asyncInner"),e._UZ(8,"cw-trade-footer",4),e.ALo(9,"asyncInner"),e.ALo(10,"asyncInner"),e.ALo(11,"asyncInner")),2&a&&(e.xp6(1),e.Q6J("cwMediaIf","lt-md"),e.xp6(1),e.Q6J("cwMediaIf","gt-sm"),e.xp6(1),e.Q6J("allowOverlay",!1)("banned",!1)("selectedItemVariantCollection",t.itemCollection)("showStockDetails",!0)("purchasableItems",!0)("includeAvailableAssetsOrder",!0)("user",e.lcZ(4,16,t.userService.user$))("steamAppName",e.lcZ(5,18,t.steamAppName$))("canTradeMultiple",e.lcZ(6,20,t.userService.canTradeMultiple$))("withdrawType",e.lcZ(7,22,t.withdrawType$)),e.xp6(5),e.Q6J("tradesCount",e.lcZ(9,24,t.itemCollection.items$).length)("totalValue",e.lcZ(10,26,t.exchangeService.itemTotal$))("currency",e.lcZ(11,28,t.userService.currency$))("action","Withdraw"))},directives:[ct.oO,ko.h,Ko.D,zo.G,qo.l,S.sg,jo.P,S.O5,je.yS,je.Od,S.tP,Z.o,X.d$],pipes:[Ne.d,S.Ov],styles:["cw-withdraw-search-grid[_ngcontent-%COMP%]{min-height:100vh}.nav-pills[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{padding:0;margin-right:.0625rem}.nav-pills[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   a.nav-link[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:25px 0;width:7rem;border-radius:0;height:2.5rem;background-color:#262a30!important}.nav-pills[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   a.nav-link.first[_ngcontent-%COMP%]{border-radius:6px 0 0 6px}.nav-pills[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   a.nav-link.last[_ngcontent-%COMP%]{border-radius:0 6px 6px 0}.nav-pills[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   a.nav-link[_ngcontent-%COMP%]:hover{opacity:.9}.nav-pills[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   a.nav-link[_ngcontent-%COMP%]   cw-icon[_ngcontent-%COMP%]{height:1.25rem;width:100%}.nav-pills[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   a.nav-link.dota2[_ngcontent-%COMP%]{border-radius:6px;margin-left:8px}.nav-pills[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   a.nav-link.dota2[_ngcontent-%COMP%]   cw-icon[_ngcontent-%COMP%]{height:1.5rem}.nav-pills[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   a.nav-link[_ngcontent-%COMP%]   .app-name[_ngcontent-%COMP%]{text-align:center;text-transform:capitalize;font-weight:500;font-size:10px}.nav-pills[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   a.nav-link.active[_ngcontent-%COMP%]{background-color:#2d323b!important}.nav-pills[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   a.nav-link.active[_ngcontent-%COMP%]   cw-icon[_ngcontent-%COMP%]{color:#ffe063}.nav-pills[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   a.nav-link.active[_ngcontent-%COMP%]   .app-name[_ngcontent-%COMP%]{color:#fff}.nav-pills[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   a.nav-link[_ngcontent-%COMP%]:not(.active)   cw-icon[_ngcontent-%COMP%], .nav-pills[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   a.nav-link[_ngcontent-%COMP%]:not(.active)   .app-name[_ngcontent-%COMP%]{color:#8e8e99}"],changeDetection:0}),Et=(0,F.gn)([(0,R.c)(),(0,F.w6)("design:paramtypes",[Ue.Oq,c.Vtq,c.KDu,c.RCL,je.gz])],Et);const ri=[$t.vY,Pe.Cv,xt.rl,Ue.$M,vt.KD,wt.oz,Qe._4];let mn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[ri,$t.vY,Pe.Cv,xt.rl,Ue.$M,vt.KD,wt.oz,Qe._4]}),n})();o(8990);var li=o(93860);const ci=[$t.vY,Pe.Cv,xt.rl,Ue.$M,vt.KD,wt.oz,_n,mn,Qe._4];let di=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[ci,$t.vY,Pe.Cv,xt.rl,Ue.$M,vt.KD,wt.oz,_n,mn,Qe._4]}),n})();e.B6R(un,[S.O5,ue.xw,ue.Wh,Z.o,X.d$,S.iq,S.zE,p.lW,nt.e,An.l,S.sg,S.RF,S.n9,Je,En,at,Tn,Ve,gn,li.D,Ye,In,Tt],[$e.f])},8990:(Ie,ee,o)=>{o.d(ee,{r:()=>ae});var s=o(70655),e=o(93075),l=o(48966),p=o(23600),w=o(62650),c=o(6233),y=o(44987),P=o(61135),F=o(5963),R=o(54004),L=o(95698),S=o(28746),J=o(18505),_=o(5e3),b=o(69808),v=o(81125),Y=o(47423),W=o(67322),U=o(95871),D=o(77446),O=o(20975),I=o(43343);function f(N,x){1&N&&(_.TgZ(0,"mat-error"),_.SDv(1,10),_.qZA())}function E(N,x){1&N&&(_._uU(0," We cannot send trade offers and we cannot log into your account with your API key. The API key only allows us to monitor your trade history, and allows us to cancel trades on your behalf. "),_._UZ(1,"br"),_._UZ(2,"br"),_._uU(3," One of the biggest myths out there is that if someone has your API Key they can do absolutely anything they like from your Steam account. But this isn\u2019t true at all, as your API Key is confined to a very specific set of actions. The API Key doesn\u2019t allow a user to do much at all actually. For example, if someone had your API Key, they would never be able to meddle with your account like reset your password, change the email address, send or accept trade offers, disable 2-factor authentication, or view sensitive payment information. "),_._UZ(4,"br"),_._UZ(5,"br"),_._uU(6),_.ALo(7,"appConfig")),2&N&&(_.xp6(6),_.hij(" We adhere to strict and secure programming standards to protect your API Keys and maintain a high level of security. Your Steam API Key on ",_.lcZ(7,1,"APP_NAME")," is stored securely and encrypted within our database. "))}function M(N,x){1&N&&(_._uU(0," Most of these scams are done with a specific method which is very dangerous and difficult to prevent. Even if you are very cautious, it's still very possible to fall for this scam. This is how the scam works: "),_._UZ(1,"br"),_._UZ(2,"br"),_.TgZ(3,"ol"),_.TgZ(4,"li"),_._uU(5),_.ALo(6,"appConfig"),_.ALo(7,"appConfig"),_.qZA(),_.TgZ(8,"li"),_._uU(9," You enter your Steam login credentials and 2FA code on the fake steamcommunity.com website. The phishers will collect this information and instantly log into your account. "),_.qZA(),_.TgZ(10,"li"),_._uU(11),_.ALo(12,"appConfig"),_.qZA(),_.TgZ(13,"li"),_._uU(14," The hacker is still logged into your account. They use a script to INSTANTLY cancel that trade offer and they will send an identical trade offer to an identical-looking second account. All of this happens in a matter of seconds and it's very hard to notice. "),_.qZA(),_.TgZ(15,"li"),_._uU(16," You go to your mobile app to confirm the trade. You think that you're sending the item to the correct account but actually you're sending it to a fake account that is owned by the scammers. "),_.qZA(),_.qZA(),_._uU(17," Here is our advice for preventing this: "),_._UZ(18,"br"),_._UZ(19,"br"),_.TgZ(20,"ol",11),_.TgZ(21,"li"),_._uU(22," Highly recommended: Enter your API key when depositing. We are working on a system which will automatically detect if an item is being sent to the wrong person, and will automatically cancel the trade offer and notify you that your account has been compromised. "),_.qZA(),_.TgZ(23,"li"),_._uU(24," When you send the trade offer, always take note of the registration date and the Steam level of the other player. When you are about to confirm the trade offer on your mobile app make sure that the date and level match. "),_.qZA(),_.TgZ(25,"li"),_._uU(26," When logging into any websites with your Steam account make sure that the login link is correct (steamcommunity.com) and that the login window is an actual real browser window and not a fake window built on top of a phishing site. "),_.qZA(),_.TgZ(27,"li"),_._uU(28," If you believe that you may have logged into a phishing website unknowingly, you should check your Steam login history at "),_.TgZ(29,"a",12),_._uU(30," https://help.steampowered.com/en/accountdata/SteamLoginHistory "),_.qZA(),_._uU(31,". "),_.qZA(),_.qZA()),2&N&&(_.xp6(5),_.AsE(' You log into a phishing site. For example, you could Google for "',_.lcZ(6,3,"APP_NAME"),'" and you click on one of the ads at the top. This takes you to a phishing website which looks very similar to ',_.lcZ(7,5,"APP_URL"),", but the domain name is slightly different. "),_.xp6(6),_.hij(" Because of 2FA, the hacker cannot steal your items straight away. They will wait until you try to make a deposit on ",_.lcZ(12,7,"APP_NAME"),". "))}function ie(N,x){if(1&N&&(_.ynx(0),_._UZ(1,"cw-steam-api-key-edit-form",13),_.TgZ(2,"p",14),_.tHW(3,15),_._UZ(4,"br"),_._UZ(5,"br"),_.N_p(),_.qZA(),_.BQk()),2&N){const G=x.$implicit;_.xp6(1),_.Q6J("user",G)("showConfirmButton",!1)}}function de(N,x){1&N&&(_.TgZ(0,"mat-error",16),_.SDv(1,17),_.qZA())}function j(N,x){if(1&N&&(_.ynx(0),_.TgZ(1,"span"),_._uU(2),_.ALo(3,"date"),_.qZA(),_.BQk()),2&N){const G=x.ngIf;_.xp6(2),_.hij(" ( ",_.xi3(3,1,G,"mm:ss")," ) ")}}function Ee(N,x){if(1&N){const G=_.EpF();_.ynx(0),_.TgZ(1,"div",18),_.TgZ(2,"span"),_._uU(3,"OR"),_.qZA(),_.qZA(),_.TgZ(4,"button",19),_.NdJ("click",function(){return _.CHM(G),_.oxw().onSkip()}),_.ALo(5,"push"),_.TgZ(6,"span"),_.SDv(7,20),_.qZA(),_.YNc(8,j,4,4,"ng-container",1),_.ALo(9,"push"),_.qZA(),_.TgZ(10,"div",21),_.TgZ(11,"span"),_._uU(12," You must wait 2 minutes to get familiar with the information above before selecting this option. We apologise for the inconvenience, however we feel that this is an important matter. "),_.qZA(),_.qZA(),_.TgZ(13,"div",22),_.TgZ(14,"mat-checkbox",23),_.SDv(15,24),_.qZA(),_.qZA(),_.BQk()}if(2&N){const G=_.oxw();_.xp6(4),_.Q6J("disabled",!1===_.lcZ(5,3,G.hasCountdownFinished$)),_.xp6(4),_.Q6J("ngIf",_.lcZ(9,5,G.countdownDateTimer$)),_.xp6(6),_.Q6J("formControl",G.dontShowAgainFormControl)}}let ae=class{constructor(x,G,ne,te,Oe){var Re;this.dialogRef=x,this.recaptchaService=G,this.userService=ne,this.localWebStorageService=te,this.data=Oe,this.user$=this.userService.user$,this.hasCountdownFinished$=new P.X(!1),this.isSubmitError$=new P.X(!1),this.mustSupplyAnAPIKey$=new P.X(!1),this.dontShowAgainFormControl=new e.NI(!1),this.recaptchaService.preload(),!0===(null===(Re=this.data)||void 0===Re?void 0:Re.mustSupplyAnAPIKey)&&this.mustSupplyAnAPIKey$.next(!0)}ngOnInit(){const G=(0,F.H)(0,1e3).pipe((0,R.U)(ne=>120-ne),(0,L.q)(121),(0,S.x)(()=>this.hasCountdownFinished$.next(!0)));this.countdownDateTimer$=G.pipe((0,R.U)(ne=>{const te=new Date;return te.setHours(0,Math.floor(ne/60),ne%60),te}))}onSubmit(){this.isSubmitError$.next(!1),this.steamApiKeyEditFormComponent?this.steamApiKeyEditFormComponent.onSubmit(!1).pipe((0,y.t)(this),(0,J.b)(x=>{this.hasCountdownFinished$.getValue()||x?this.close(x):this.isSubmitError$.next(!0)},()=>{this.isSubmitError$.next(!0)})).subscribe():this.onSkip()}onSkip(){!this.hasCountdownFinished$.getValue()||this.close(!1)}close(x){!0===this.dontShowAgainFormControl.value&&this.localWebStorageService.set(w.F.TRADE_DEPOSIT_STEAM_API_KEY_DONT_SHOW_ANYMORE,!0),this.dialogRef.close({steamApiKeySubmitted:x})}};ae.\u0275fac=function(x){return new(x||ae)(_.Y36(l.so),_.Y36(p.KvH),_.Y36(p.KDu),_.Y36(p.Vtq),_.Y36(l.WI))},ae.\u0275cmp=_.Xpm({type:ae,selectors:[["cw-steam-enforce-api-key-dialog"]],viewQuery:function(x,G){if(1&x&&_.Gf(c.Cn,5),2&x){let ne;_.iGM(ne=_.CRH())&&(G.steamApiKeyEditFormComponent=ne.first)}},decls:31,vars:12,consts:function(){let N,x,G,ne,te,Oe,Re,pe,Me,be;return N=$localize`:␟39bbf69700255ad5a6041f03d45489c0c222fa92␟7948275982659106124:Please enter your API key`,x=$localize`:␟d898c109a757959fa447c1ee1bc68d5d5d64d0ca␟1116473055627191098:We strongly advise that you enter your Steam API key for your own security!`,G=$localize`:␟ab861c0237ce83973c082f9de823227a83a1cc51␟6970026782088629434:Entering you API key is risk free`,ne=$localize`:␟71b9ad061d68e3c77d83b552b3e9142746303f82␟7732934083367128125:Phishing scams do not work when API key is entered.`,te=$localize`:␟a839dadebe8cf81268b0e3c6d96a94f8b67ff906␟7181524858666135268:Submit your API key`,Oe=$localize`:␟683453387e5ee7524d6d373e25e0644e4ca1433c␟4835764854653825763:You must supply an API Key to deposit more than one item at a time`,Re=$localize`:␟bc7575657c65a1fcc5750b980a5072d7de6bbc41␟3378525770704244285: Domain can be anything, we recommend "localhost".${"[\ufffd#4\ufffd\ufffd/#4\ufffd|\ufffd#5\ufffd\ufffd/#5\ufffd]"}:LINE_BREAK: Do not share this API key with anyone else, not even our staff.${"[\ufffd#4\ufffd\ufffd/#4\ufffd|\ufffd#5\ufffd\ufffd/#5\ufffd]"}:LINE_BREAK: Do not revoke your API key during a trade, doing so will forfeit the trade. `,Re=_.Zx4(Re),pe=$localize`:␟61fd65d1746e8f2fc8c9e57ab47103e48d92f3af␟3524746455353058703: Invalid API key`,Me=$localize`:␟ccb5d825986a0ccfe34a0cbf088dc84ab3a0f4e8␟427262185911079846:Continue without API key`,be=$localize`:␟90abbfcd6de6019cfcc6cbcb4d777495a564f4bb␟5840837358071907321:Don't show again `,[N,[4,"ngIf"],x,[1,"mb-2"],G,["matExpansionPanelContent",""],ne,["mat-flat-button","","type","button","color","accent",1,"mr-2","mt-3",3,"click"],te,["class","text-center mt-1",4,"ngIf"],Oe,[1,"advice-ordered-list"],["href","https://help.steampowered.com/en/accountdata/SteamLoginHistory","target","_blank","rel","noreferrer"],[3,"user","showConfirmButton"],[1,"ml-1","mt-2"],Re,[1,"text-center","mt-1"],pe,[1,"text-center","my-2"],["mat-stroked-button","","type","button","color","primary",1,"mr-2",3,"disabled","click"],Me,[1,"text-center","my-1"],[1,"text-center","mt-3"],["color","primary",1,"ml-3","mt-2",3,"formControl"],be]},template:function(x,G){1&x&&(_.TgZ(0,"mat-dialog-content"),_.TgZ(1,"h4"),_.SDv(2,0),_.qZA(),_.YNc(3,f,2,0,"mat-error",1),_.ALo(4,"push"),_.TgZ(5,"p"),_.SDv(6,2),_.qZA(),_.TgZ(7,"div",3),_.TgZ(8,"mat-accordion"),_.TgZ(9,"mat-expansion-panel"),_.TgZ(10,"mat-expansion-panel-header"),_.TgZ(11,"mat-panel-title"),_.TgZ(12,"strong"),_.SDv(13,4),_.qZA(),_.qZA(),_.qZA(),_.YNc(14,E,8,3,"ng-template",5),_.qZA(),_.TgZ(15,"mat-expansion-panel"),_.TgZ(16,"mat-expansion-panel-header"),_.TgZ(17,"mat-panel-title"),_.TgZ(18,"strong"),_.SDv(19,6),_.qZA(),_.qZA(),_.qZA(),_.YNc(20,M,32,9,"ng-template",5),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(21,"mat-dialog-actions"),_.TgZ(22,"div",3),_.YNc(23,ie,6,2,"ng-container",1),_.ALo(24,"push"),_.qZA(),_.TgZ(25,"button",7),_.NdJ("click",function(){return G.onSubmit()}),_.SDv(26,8),_.qZA(),_.YNc(27,de,2,0,"mat-error",9),_.ALo(28,"push"),_.YNc(29,Ee,16,7,"ng-container",1),_.ALo(30,"push"),_.qZA()),2&x&&(_.xp6(3),_.Q6J("ngIf",_.lcZ(4,4,G.mustSupplyAnAPIKey$)),_.xp6(20),_.Q6J("ngIf",_.lcZ(24,6,G.user$)),_.xp6(4),_.Q6J("ngIf",_.lcZ(28,8,G.isSubmitError$)),_.xp6(2),_.Q6J("ngIf",!1===_.lcZ(30,10,G.mustSupplyAnAPIKey$)))},directives:[l.xY,b.O5,v.pp,v.ib,v.yz,v.yK,v.HS,l.H8,Y.lW,W.TO,U.C,D.oG,e.JJ,e.oH],pipes:[O.f,I.O,b.uU],styles:["mat-dialog-actions[_ngcontent-%COMP%]{margin-bottom:.5rem}mat-dialog-actions[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%}.advice-ordered-list[_ngcontent-%COMP%]{list-style:upper-latin}  .cdk-overlay-pane{overflow-y:auto}"],changeDetection:0}),ae=(0,s.gn)([(0,y.c)(),(0,s.w6)("design:paramtypes",[l.so,p.KvH,p.KDu,p.Vtq,Object])],ae)},71970:(Ie,ee,o)=>{o.d(ee,{C:()=>Ee});var s=o(70655),e=o(48966),l=o(23600),p=o(62650),w=o(6233),c=o(8990),y=o(44987),P=o(61135),F=o(39646),R=o(54004),L=o(4128),S=o(63900),J=o(18505),_=o(5e3),b=o(69808),v=o(47423),Y=o(65391),W=o(966),U=o(35357),D=o(95871),O=o(88634);function I(ae,N){if(1&ae&&(_.ynx(0),_.TgZ(1,"h4"),_.SDv(2,7),_.qZA(),_.TgZ(3,"p"),_.SDv(4,8),_.qZA(),_._UZ(5,"cw-steam-trade-url-edit-form",9),_.ALo(6,"asyncInner"),_.BQk()),2&ae){const x=_.oxw().$implicit,G=_.oxw();_.xp6(5),_.Q6J("saving",_.lcZ(6,3,G.isLoading$))("user",x)("showConfirmButton",!1)}}function f(ae,N){1&ae&&(_.TgZ(0,"p",19),_.tHW(1,20),_._UZ(2,"a",21),_.N_p(),_.qZA())}function E(ae,N){1&ae&&(_.tHW(0,11,1),_.GkF(1),_.N_p())}const M=function(){return["/info/faq"]};function ie(ae,N){if(1&ae&&(_.ynx(0),_.TgZ(1,"h4"),_._uU(2,"Steam API Key"),_.qZA(),_.YNc(3,f,3,0,"p",10),_.TgZ(4,"p"),_.tHW(5,11),_.YNc(6,E,2,0,"ng-container",0),_._UZ(7,"a",12),_._UZ(8,"br"),_._UZ(9,"a",13),_.N_p(),_.qZA(),_._UZ(10,"cw-steam-api-key-edit-form",14),_.ALo(11,"asyncInner"),_.TgZ(12,"p",15),_.tHW(13,16),_._UZ(14,"br"),_._UZ(15,"br"),_.N_p(),_.qZA(),_.TgZ(16,"p"),_.tHW(17,17),_._UZ(18,"strong"),_.N_p(),_.qZA(),_.TgZ(19,"ul"),_.TgZ(20,"li"),_._uU(21,"View your sent and received Steam trade offers"),_.qZA(),_.qZA(),_.TgZ(22,"p"),_.tHW(23,18),_._UZ(24,"strong"),_.N_p(),_.qZA(),_.TgZ(25,"ul"),_.TgZ(26,"li"),_._uU(27,"Send any Steam trade offers on your behalf"),_.qZA(),_.TgZ(28,"li"),_._uU(29,"Accept any Steam trade offers on your behalf"),_.qZA(),_.TgZ(30,"li"),_._uU(31,"View your Steam password or any other sensitive information"),_.qZA(),_.qZA(),_.BQk()),2&ae){const x=_.oxw().$implicit,G=_.oxw(),ne=_.MAs(3);_.xp6(3),_.Q6J("ngIf",G.tradesMaintenance),_.xp6(3),_.Q6J("ngIf",!G.allowBundles),_.xp6(1),_.Q6J("ngbTooltip",ne)("placement",G.hideTradeUrlSection?"bottom":"top"),_.xp6(2),_.Q6J("routerLink",_.DdM(10,M)),_.xp6(1),_.Q6J("saving",_.lcZ(11,8,G.isLoading$))("user",x)("showConfirmButton",!1)}}function de(ae,N){if(1&ae){const x=_.EpF();_.ynx(0),_.TgZ(1,"mat-dialog-content"),_.YNc(2,I,7,5,"ng-container",0),_.YNc(3,ie,32,11,"ng-container",0),_.qZA(),_.TgZ(4,"mat-dialog-actions",2),_.TgZ(5,"button",3),_.NdJ("click",function(){return _.CHM(x),_.oxw().onSubmit()}),_.SDv(6,4),_.ALo(7,"asyncInner"),_.qZA(),_.TgZ(8,"button",5),_.SDv(9,6),_.ALo(10,"asyncInner"),_.qZA(),_.qZA(),_.BQk()}if(2&ae){const x=_.oxw();_.xp6(2),_.Q6J("ngIf",!x.hideTradeUrlSection),_.xp6(1),_.Q6J("ngIf",!x.hideTradeApiKeySection),_.xp6(2),_.Q6J("disabled",_.lcZ(7,4,x.isLoading$)),_.xp6(3),_.Q6J("disabled",_.lcZ(10,6,x.isLoading$))}}function j(ae,N){1&ae&&(_.TgZ(0,"p"),_.SDv(1,22),_.qZA(),_.TgZ(2,"p"),_.tHW(3,23),_._UZ(4,"i"),_.N_p(),_.qZA(),_.TgZ(5,"p"),_.SDv(6,24),_.qZA())}let Ee=class{constructor(N,x,G,ne,te,Oe,Re){var pe;this.appConfig=N,this.data=x,this.dialogRef=G,this.recaptchaService=ne,this.userService=te,this.matDialog=Oe,this.localWebStorageService=Re,this.tradesMaintenance=!1,this.hideTradeUrlSection=!1,this.hideTradeApiKeySection=!1,this.user$=this.userService.user$,this.isLoading$=new P.X(!0),this.allowBundles=!!(null===(pe=this.appConfig.trading)||void 0===pe?void 0:pe.allowBundles),this.isLoading$.next(this.data.isLoading),this.recaptchaService.preload()}onSubmit(){this.isLoading$.next(!0),(0,L.D)([(()=>this.steamTradeUrlEditFormComponent?this.steamTradeUrlEditFormComponent.onSubmit(!1):(0,F.of)(!0))(),(()=>this.steamApiKeyEditFormComponent?this.steamApiKeyEditFormComponent.onSubmit(!1):(0,F.of)(!0))()]).pipe((0,y.t)(this),(0,S.w)(ne=>{const[te,Oe]=ne,Re=this.localWebStorageService.get(p.F.TRADE_DEPOSIT_STEAM_API_KEY_DONT_SHOW_ANYMORE);return te&&!Oe&&!0!==Re?this.matDialog.open(c.r,{width:"580px",disableClose:!0}).beforeClosed().pipe((0,R.U)(Me=>[te,Me])):(0,F.of)(ne)}),(0,S.w)(ne=>{const[te]=ne;return this.data.obsToComplete$.length&&te?(0,L.D)(this.data.obsToComplete$).pipe((0,R.U)(Oe=>[...ne,...Oe])):(0,F.of)(ne)}),(0,J.b)(([ne,te])=>{this.isLoading$.next(!1),ne&&this.dialogRef.close({steamTradeUrlSubmitted:ne,steamApiKeySubmitted:te})},()=>this.isLoading$.next(!1))).subscribe()}};Ee.\u0275fac=function(N){return new(N||Ee)(_.Y36(l.qBz),_.Y36(e.WI),_.Y36(e.so),_.Y36(l.KvH),_.Y36(l.KDu),_.Y36(e.uw),_.Y36(l.Vtq))},Ee.\u0275cmp=_.Xpm({type:Ee,selectors:[["cw-steam-url-dialog"]],viewQuery:function(N,x){if(1&N&&(_.Gf(w.Fv,5),_.Gf(w.Cn,5)),2&N){let G;_.iGM(G=_.CRH())&&(x.steamTradeUrlEditFormComponent=G.first),_.iGM(G=_.CRH())&&(x.steamApiKeyEditFormComponent=G.first)}},inputs:{tradesMaintenance:"tradesMaintenance",hideTradeUrlSection:"hideTradeUrlSection",hideTradeApiKeySection:"hideTradeApiKeySection"},decls:4,vars:3,consts:function(){let ae,N,x,G,ne,te,Oe,Re,pe,Me,be,fe;return ae=$localize`:␟f67b7d4f5da8c5e3b9baf2af577d5b264a05b3b6␟4819389223227515138: Confirm `,N=$localize`:␟da44efc7b658c318651866454d258bbbe57ff21c␟4598124915768290146: Cancel `,x=$localize`:␟db6a59d49a71fd05dfbf68f5f87f34e5b04c3970␟6534739768860899207:Steam trade URL`,G=$localize`:␟18f6ce37c1417e1e2546b7672828b4bd070bbaad␟4655717521141709287:Please confirm your Steam Trade URL to continue.`,ne=$localize`:␟bc7575657c65a1fcc5750b980a5072d7de6bbc41␟3378525770704244285: Domain can be anything, we recommend "localhost".${"[\ufffd#14\ufffd\ufffd/#14\ufffd|\ufffd#15\ufffd\ufffd/#15\ufffd]"}:LINE_BREAK: Do not share this API key with anyone else, not even our staff.${"[\ufffd#14\ufffd\ufffd/#14\ufffd|\ufffd#15\ufffd\ufffd/#15\ufffd]"}:LINE_BREAK: Do not revoke your API key during a trade, doing so will forfeit the trade. `,ne=_.Zx4(ne),te=$localize`:␟483aaa48a541bbf3d3592722841f4b62a7b8d550␟929020749668086391:By sharing your Steam API Key, CSGORoll ${"\ufffd#18\ufffd"}:START_TAG_STRONG:will be able${"\ufffd/#18\ufffd"}:CLOSE_TAG_STRONG: to:`,Oe=$localize`:␟ae93d7be656a1ede8415ac59edaf19ab76475383␟2466453613186413195:CSGORoll ${"\ufffd#24\ufffd"}:START_TAG_STRONG:will not be able${"\ufffd/#24\ufffd"}:CLOSE_TAG_STRONG: to:`,Re=$localize`:␟290200796042928f3f379f89704971b7ae7c1d65␟3029938284610472404: CSGO Inventories are ${"\ufffd#2\ufffd"}:START_LINK:Critical${"\ufffd/#2\ufffd"}:CLOSE_LINK:, to continue depositing: `,pe=$localize`:␟0ff9fe698055fc0a19d3afa76cc006042211d54d␟5151288424875361122: Please enter your Steam API Key ${"\ufffd*6:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_NG_CONTAINER: to list more than one item${"\ufffd/#1:1\ufffd\ufffd/*6:1\ufffd"}:CLOSE_TAG_NG_CONTAINER:${"\ufffd#7\ufffd"}:START_LINK:(Optional)${"[\ufffd/#7\ufffd|\ufffd/#9\ufffd]"}:CLOSE_LINK:${"\ufffd#8\ufffd\ufffd/#8\ufffd"}:LINE_BREAK:${"\ufffd#9\ufffd"}:START_LINK_1:Learn more${"[\ufffd/#7\ufffd|\ufffd/#9\ufffd]"}:CLOSE_LINK:`,pe=_.Zx4(pe),Me=$localize`:␟7fcc7625556307fdf23e528f862f4c383ba3b791␟6731369409903110633:Providing your Steam API Key ensures the smoothest experience possible from start to finish.`,be=$localize`:␟65e1d6558d2bd72d87d6f7c94bd97032eb00002f␟5738983440550398587:Make deposits and withdrawals 24/7 ${"\ufffd#4\ufffd"}:START_ITALIC_TEXT:(even when Steam is having issues)${"\ufffd/#4\ufffd"}:CLOSE_ITALIC_TEXT:`,fe=$localize`:␟5414ca2e28bd23759d839cd3e6d7b5e29f3e6020␟5120057341056025811:Avoid any potential issues or delays when we process your transaction`,[[4,"ngIf"],["steamApiKeyTooltip",""],["align","end"],["type","button","mat-flat-button","","color","accent",1,"mr-2",3,"disabled","click"],ae,["type","button","mat-stroked-button","","color","warn",1,"mr-2",3,"mat-dialog-close","disabled"],N,x,G,[1,"d-block","mb-4",3,"saving","user","showConfirmButton"],["class","mb-1",4,"ngIf"],pe,["tabindex","-1",1,"font-italic","pointer",3,"ngbTooltip","placement"],["target","_blank",3,"routerLink"],[3,"saving","user","showConfirmButton"],[1,"mt-2"],ne,te,Oe,[1,"mb-1"],Re,["rel","noreferrer","target","_blank","href","https://steamstat.us/",1,"text-warning"],Me,be,fe]},template:function(N,x){1&N&&(_.YNc(0,de,11,8,"ng-container",0),_.ALo(1,"asyncInner"),_.YNc(2,j,7,0,"ng-template",null,1,_.W1O)),2&N&&_.Q6J("ngIf",_.lcZ(1,1,x.user$))},directives:[b.O5,e.xY,e.H8,v.lW,e.ZT,Y.F,W._L,U.yS,D.C],pipes:[O.d],styles:[""],changeDetection:0}),Ee=(0,s.gn)([(0,y.c)(),(0,s.w6)("design:paramtypes",[Object,Object,e.so,l.KvH,l.KDu,e.uw,l.Vtq])],Ee)},41999:(Ie,ee,o)=>{o.d(ee,{a:()=>L});var s=o(70655),e=o(23600),l=o(8990),p=o(5396),w=o(95698),c=o(71970),y=o(94431),P=o(5e3),F=o(48966),R=o(87254);let L=(()=>{class S{constructor(_,b,v){this.dialog=_,this.localStorage=b,this.dialogService=v,this.loading=!1,this.openedTradeLikeDialogs=[]}openSteamUrlDialog(_){var b;const v=this.dialog.open(c.C,{width:"580px",data:{isLoading:(null==_?void 0:_.isLoading)||!1,obsToComplete$:(null===(b=null==_?void 0:_.obsToComplete$)||void 0===b?void 0:b.length)>0?_.obsToComplete$:[]}});return void 0!==(null==_?void 0:_.hideTradeUrlSection)&&(v.componentInstance.hideTradeUrlSection=_.hideTradeUrlSection),void 0!==(null==_?void 0:_.hideTradeApiKeySection)&&(v.componentInstance.hideTradeApiKeySection=_.hideTradeApiKeySection),void 0!==(null==_?void 0:_.tradesMaintenance)&&(v.componentInstance.tradesMaintenance=_.tradesMaintenance),v}openSteamEnforceApiKeyDialog(_={mustSupplyAnAPIKey:!1,disableClose:!1}){const{disableClose:b}=_,v=(0,s._T)(_,["disableClose"]);return this.dialog.open(l.r,{width:"580px",disableClose:b,data:v}).beforeClosed()}openCloseSteamUrlDialog(_){return this.openSteamUrlDialog(_).afterClosed()}openFrozenDialog(_,b=!1,v=!1){return this.openDialog(_,y.P,{width:"300px"},b,v)}openUserItemSellDialog(_){const b=this.dialog.open(p.UserItemSellDialogComponent,{width:"500px"});return b.componentInstance.balanceTarget=_,b.afterClosed()}openDialog(_,b,v,Y=!1,W=!1){const U=Array.isArray(_)?_:[_];if(U.every(I=>this.dialogService.hasSeenDialog(I.id,b.dialogName))&&!1===Y)return;if(U.forEach(I=>this.dialogService.markDialogSeen(I.id,b.dialogName)),W){const I=new Date;if(I.setHours(I.getHours()-6),U.every(f=>new Date(f.expiresAt).getTime()<I.getTime()))return}const D=this.openedTradeLikeDialogs.filter(I=>U.find(({id:f})=>I.id===f));if(D.length)try{D.reduce((I,{ref:f})=>I.includes(f)?I:[...I,f],[]).forEach(I=>{I.close()})}catch(I){}const O=this.dialog.open(b,Object.assign(Object.assign({},v),{backdropClass:this.dialog.openDialogs.length>0?"background-unset":"",data:{trades:_}}));return this.openedTradeLikeDialogs=[...this.openedTradeLikeDialogs,...U.map(({id:I})=>({id:I,ref:O}))],O.afterClosed().pipe((0,w.q)(1)).subscribe(()=>this.openedTradeLikeDialogs=this.openedTradeLikeDialogs.filter(I=>I.ref!==O)),O}}return S.\u0275fac=function(_){return new(_||S)(P.LFG(F.uw),P.LFG(R.n2),P.LFG(e.xAy))},S.\u0275prov=P.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})()},94431:(Ie,ee,o)=>{o.d(ee,{P:()=>w});var s=o(48966),e=o(23600),l=o(5e3),p=o(47423);let w=(()=>{class c{constructor(P,F,R){this.data=P,this.dialogRef=F,this.tradeService=R;const{trades:L}=this.data,[S]=Array.isArray(L)?L:[L];this.trade=S}onClose(){this.dialogRef.close()}ngOnDestroy(){this.tradeService.tradeCollection.clear()}}return c.dialogName="TRADE_FROZEN",c.\u0275fac=function(P){return new(P||c)(l.Y36(s.WI),l.Y36(s.so),l.Y36(e.Xxg))},c.\u0275cmp=l.Xpm({type:c,selectors:[["cw-trade-frozen-dialog"]],decls:14,vars:1,consts:function(){let y,P,F,R,L;return y=$localize`:␟5dee14c7b8c5c991d6f509957a8b6b27a930d41a␟8301603053156374860:Trade Frozen`,P=$localize`:␟b83715c2c13efb67ac9e39cf0909858a39d2477d␟1692255397432867483:This trade has been frozen as some strange behaviour was detected, a staff member will check it out shortly.`,F=$localize`:␟4165cbaf77985f6cd60af05c036ef00dfb786882␟4903483261360590422:Any balance used to join this trade will be held until the trade has been reviewed by a member of staff.`,R=$localize`:␟2dd1e9d5d4ec939bc6569e63eb714b8c54804916␟3785278272469085468: If you would like to contact support to speed up the process, you should include a reference to this trade ID: ${"\ufffd#9\ufffd"}:START_TAG_STRONG:${"\ufffd0\ufffd"}:INTERPOLATION:${"\ufffd/#9\ufffd"}:CLOSE_TAG_STRONG:`,L=$localize`:␟f4e529ae5ffd73001d1ff4bbdeeb0a72e342e5c8␟7819314041543176992:Close`,[["mat-dialog-title",""],y,P,F,R,["align","center"],["mat-flat-button","","color","warn",1,"w-100","mat-button-3d","mat-button-lg",3,"click"],L]},template:function(P,F){1&P&&(l.TgZ(0,"h1",0),l.SDv(1,1),l.qZA(),l.TgZ(2,"mat-dialog-content"),l.TgZ(3,"p"),l.SDv(4,2),l.qZA(),l.TgZ(5,"p"),l.SDv(6,3),l.qZA(),l.TgZ(7,"p"),l.tHW(8,4),l._UZ(9,"strong"),l.N_p(),l.qZA(),l.qZA(),l.TgZ(10,"mat-dialog-actions",5),l.TgZ(11,"button",6),l.NdJ("click",function(){return F.onClose()}),l.TgZ(12,"span"),l.SDv(13,7),l.qZA(),l.qZA(),l.qZA()),2&P&&(l.xp6(9),l.pQV(F.trade.id),l.QtT(8))},directives:[s.uh,s.xY,s.H8,p.lW],styles:[""],changeDetection:0}),c})()},35588:(Ie,ee,o)=>{o.d(ee,{KD:()=>l.K}),o(53409),o(43631);var l=o(5439)},43631:(Ie,ee,o)=>{o.d(ee,{G:()=>L});var s=o(23600),e=o(5e3),l=o(89979),p=o(77093),w=o(31495),c=o(96298),y=o(89847),P=o(47423),F=o(79586);function R(S,J){if(1&S){const _=e.EpF();e.TgZ(0,"footer",1),e.NdJ("click",function(){return e.CHM(_),e.oxw().layoutService.toggleSidenavElement("trade")}),e.TgZ(1,"span"),e._UZ(2,"cw-icon",2),e._uU(3),e.qZA(),e._UZ(4,"cw-pretty-balance",3),e.TgZ(5,"button",4),e.TgZ(6,"cw-loader"),e.SDv(7,5),e.qZA(),e.qZA(),e.qZA()}if(2&S){const _=e.oxw();e.xp6(3),e.hij(" ",_.tradesCount," "),e.xp6(1),e.Q6J("balance",_.totalValue)("currency",_.currency),e.xp6(3),e.pQV(_.action),e.QtT(7)}}let L=(()=>{class S{constructor(_){this.layoutService=_}}return S.\u0275fac=function(_){return new(_||S)(e.Y36(s.Pb3))},S.\u0275cmp=e.Xpm({type:S,selectors:[["cw-trade-footer"]],inputs:{tradesCount:"tradesCount",totalValue:"totalValue",currency:"currency",action:"action"},decls:1,vars:1,consts:function(){let J;return J=$localize`:␟270a185f179774aa3cee3120ed4f5650e8816b9f␟5618843729716980110:${"\ufffd0\ufffd"}:INTERPOLATION:`,[["class","toggle-sidebar","fxLayout","row","fxLayoutAlign","space-between center",3,"click",4,"cwMediaIf"],["fxLayout","row","fxLayoutAlign","space-between center",1,"toggle-sidebar",3,"click"],["inlineSVG","assets/icons/gun.svg"],[3,"balance","currency"],["type","button","mat-flat-button","","color","accent",1,"mat-button-3d"],J]},template:function(_,b){1&_&&e.YNc(0,R,8,4,"footer",0),2&_&&e.Q6J("cwMediaIf","lt-md")},directives:[l.h,p.xw,p.Wh,w.o,c.d$,y.q,P.lW,F.R],styles:[".toggle-sidebar[_ngcontent-%COMP%]{cursor:pointer;position:fixed;background-color:#1a1e23;bottom:0;left:0;right:0;padding:1rem 1.5rem;width:100%;height:70px;z-index:9999;box-shadow:0 -10px 20px #0003}"],changeDetection:0}),S})()},5439:(Ie,ee,o)=>{o.d(ee,{K:()=>P});var s=o(99623),e=o(45990),w=(o(43631),o(53409),o(5e3));const c=[e.vY,s.$M];let P=(()=>{class F{}return F.\u0275fac=function(L){return new(L||F)},F.\u0275mod=w.oAB({type:F}),F.\u0275inj=w.cJS({imports:[c,e.vY,s.$M]}),F})()},53409:(Ie,ee,o)=>{o.d(ee,{L:()=>D});var s=o(5e3),e=o(23600),l=o(97443),p=o(28746),w=o(1094),c=o(69808),y=o(92181),P=o(35357),F=o(31495),R=o(96298),L=o(46907),S=o(48194),J=o(5634),_=o(17150);const b=function(){return["/admin/trades"]},v=function(O){return{tradeId:O}};function Y(O,I){if(1&O){const f=s.EpF();s.TgZ(0,"div",5),s.TgZ(1,"a",6),s.NdJ("click",function(M){return M.stopPropagation()}),s._UZ(2,"img",7),s.qZA(),s.TgZ(3,"mat-menu",null,8),s.TgZ(5,"a",9),s._uU(6,"Trades"),s.qZA(),s.TgZ(7,"a",10),s.NdJ("click",function(){s.CHM(f);const M=s.oxw();return M.onAutoJoin(M.trade)}),s._uU(8,"Call a bot "),s._UZ(9,"cw-icon",11),s.qZA(),s.qZA(),s.qZA()}if(2&O){const f=s.MAs(4),E=s.oxw();s.xp6(1),s.Q6J("matMenuTriggerFor",f),s.xp6(4),s.Q6J("routerLink",s.DdM(3,b))("queryParams",s.VKq(4,v,E.trade.id))}}function W(O,I){if(1&O&&(s._UZ(0,"cw-item",12),s.ALo(1,"pluck")),2&O){const f=s.oxw();s.Q6J("itemVariant",s.xi3(1,11,f.trade.tradeItems[0],"itemVariant"))("customPrice",f.trade.tradeItems[0].customValue?f.trade.tradeItems[0].value:null)("banned",!1)("allowOverlay",!1)("tradeItem",!0)("showMenuLink",!1)("showAvailableAtDetails",!0)("isTradeDeposited",!0)("selectable",f.selectable)("horizontal",f.horizontal)("rarityRadialBackground",!0)}}function U(O,I){if(1&O){const f=s.EpF();s.TgZ(0,"cw-item-bundle",13),s.NdJ("selectTrade",function(){s.CHM(f);const M=s.oxw();return M.selectTrade.next(M.trade)}),s.ALo(1,"pluck"),s.qZA()}if(2&O){const f=s.oxw();s.Q6J("itemVariants",s.xi3(1,6,f.trade.tradeItems,"itemVariant"))("trade",f.trade)("alwaysOpenBundle",!0)("selectFromOpenBundle",!0)("showAvailableAtDetails",!0)("isTradeDeposited",!0)}}let D=(()=>{class O{constructor(f,E){this.changeRef=f,this.tradeService=E,this.selectable=!1,this.horizontal=!1,this.rarityRadialBackground=!1,this.selectTrade=new s.vpe,this.UserRole=l.i}onAutoJoin(f){return this.tradeService.autoJoinTrade(f.id).pipe((0,p.x)(()=>{this.changeRef.markForCheck()})).subscribe()}}return O.\u0275fac=function(f){return new(f||O)(s.Y36(s.sBO),s.Y36(e.Xxg))},O.\u0275cmp=s.Xpm({type:O,selectors:[["cw-trade"]],inputs:{trade:"trade",selectable:"selectable",horizontal:"horizontal",rarityRadialBackground:"rarityRadialBackground"},outputs:{selectTrade:"selectTrade"},decls:8,vars:6,consts:[[1,"item-like","position-relative"],["class","icons",4,"cwRoleIf"],[3,"itemVariant","customPrice","banned","allowOverlay","tradeItem","showMenuLink","showAvailableAtDetails","isTradeDeposited","selectable","horizontal","rarityRadialBackground",4,"ngIf"],[3,"itemVariants","trade","alwaysOpenBundle","selectFromOpenBundle","showAvailableAtDetails","isTradeDeposited","selectTrade",4,"ngIf"],[1,"time-ago","text-center"],[1,"icons"],[3,"matMenuTriggerFor","click"],["src","assets/icons/dots-vertical.svg"],["itemMenu","matMenu"],["mat-menu-item","",3,"routerLink","queryParams"],["mat-menu-item","",3,"click"],["inlineSVG","assets/icons/robot.svg"],[3,"itemVariant","customPrice","banned","allowOverlay","tradeItem","showMenuLink","showAvailableAtDetails","isTradeDeposited","selectable","horizontal","rarityRadialBackground"],[3,"itemVariants","trade","alwaysOpenBundle","selectFromOpenBundle","showAvailableAtDetails","isTradeDeposited","selectTrade"]],template:function(f,E){1&f&&(s.TgZ(0,"div",0),s.YNc(1,Y,10,6,"div",1),s.YNc(2,W,2,14,"cw-item",2),s.YNc(3,U,2,9,"cw-item-bundle",3),s.qZA(),s.TgZ(4,"div",4),s.TgZ(5,"small"),s._uU(6),s.ALo(7,"timeAgo"),s.qZA(),s.qZA()),2&f&&(s.xp6(1),s.Q6J("cwRoleIf",E.UserRole.MANAGER),s.xp6(1),s.Q6J("ngIf",1===E.trade.tradeItems.length&&E.trade.tradeItems[0].itemVariant),s.xp6(1),s.Q6J("ngIf",E.trade.tradeItems.length>1),s.xp6(3),s.Oqu(s.lcZ(7,4,"COOLDOWN"===E.trade.status?E.trade.joinedAt:E.trade.createdAt)))},directives:[w.P,c.O5,y.p6,y.VK,P.yS,y.OP,F.o,R.d$,L.P,S._],pipes:[J.e,_.F],styles:[".item-like[_ngcontent-%COMP%]{cursor:pointer;height:calc(100% - 1.25rem)}.time-ago[_ngcontent-%COMP%]{height:1.25rem;-webkit-user-select:none;user-select:none}cw-item[_ngcontent-%COMP%]{height:100%}.icons[_ngcontent-%COMP%]{z-index:4;position:absolute;top:0;right:0}.icons[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:18px}"],changeDetection:0}),O})()},66026:(Ie,ee,o)=>{o.d(ee,{o:()=>s});var s=(()=>{return(e=s||(s={})).ALL="ALL",e.OUR_STOCK="OUR_STOCK",e.P2P="P2P",e.THIRD_PARTY="THIRD_PARTY",s;var e})()},72201:(Ie,ee,o)=>{o.d(ee,{kK:()=>s.k,_4:()=>b,Fb:()=>Y.F});var s=o(46474),e=o(69808),l=o(88279),p=o(99623),w=o(45990),S=(o(14469),o(79671),o(6258),o(75307),o(11420),o(93860),o(5e3));const J=[e.ez,w.vY,p.$M,l.p0];let b=(()=>{class U{}return U.\u0275fac=function(O){return new(O||U)},U.\u0275mod=S.oAB({type:U}),U.\u0275inj=S.cJS({imports:[J,e.ez,w.vY,p.$M,l.p0]}),U})();o(14223);var Y=o(53005)},46474:(Ie,ee,o)=>{o.d(ee,{k:()=>f});var s=o(23600),e=(()=>{return(E=e||(e={})).UNAUTHENTICATED="UNAUTHENTICATED",E.RECAPTCHA="RECAPTCHA",E.VISUAL_RECAPTCHA="VISUAL_RECAPTCHA",e;var E})(),l=o(23086),p=o(72755),w=o(39300),c=o(68675),y=o(11520),P=o(54004),F=o(95698),R=o(63900),L=o(97272),S=o(70262),J=o(60515),_=o(28746),b=o(39646),v=o(53005),Y=o(79671),W=o(6258),U=o(75307),D=o(11420),O=o(5e3),I=o(48966);let f=(()=>{class E{constructor(ie,de,j,Ee){this.dialog=ie,this.dialogService=de,this.waxPeerTradeService=j,this.recaptchaDialogService=Ee,this.loading=!1,this.waxPeerTradeService.userData$.pipe((0,w.h)(ae=>!!ae),(0,c.O)([]),(0,y.G)(),(0,P.U)(ae=>{const[N,x]=ae;return x.filter(ne=>{const te=N.find(Oe=>Oe.id===ne.id);return te?te.status!==ne.status||te.status===l.yL.PROCESSING&&(!te.expiresAt&&ne.expiresAt||Date.now()>Date.parse(ne.expiresAt)):ne.status!==l.yL.PROCESSING||!!ne.expiresAt})})).subscribe(ae=>{ae.forEach(N=>N.status===l.yL.PROCESSING?this.openWithdrawalWaxPeerTradeProcessingDialog(N):N.status===l.yL.COMPLETED?this.openWaxPeerTradeDialog(N,Y.l):N.status===l.yL.FAILED?this.openWaxPeerTradeDialog(N,U.X):void 0)})}withdrawWaxPeerItems(){return this.loading=!0,this.waxPeerTradeService.selectedWaxPeerItemCollection.items$.pipe((0,F.q)(1),(0,R.w)(ie=>ie.length?(0,L.z)(...ie.map(de=>this.waxPeerTradeService.withdrawItem(de).pipe((0,F.q)(1),(0,S.K)(j=>{var Ee;return(null===(Ee=null==j?void 0:j.graphQLErrors[0].extensions)||void 0===Ee?void 0:Ee.code)===e.RECAPTCHA?this.recaptchaDialogService.open().pipe((0,R.w)(N=>this.waxPeerTradeService.withdrawItem(de,N))):J.E}),(0,_.x)(()=>this.waxPeerTradeService.selectedWaxPeerItemCollection.removeByKey("id",de.id))))):(0,b.of)(null)),(0,_.x)(()=>this.loading=!1))}openWithdrawalWaxPeerTradeProcessingDialog(ie,de=!1){return Date.parse(ie.expiresAt)<=Date.now()?this.openWaxPeerTradeDialog(ie,W.p,null,de):this.openWaxPeerTradeDialog(ie,D.s,null,de)}openWaxPeerTradeDialog(ie,de,j,Ee=!1){this.dialogService.hasSeenDialog(ie.id,de.dialogName)&&!Ee||(this.dialog.open(de,j||{width:"300px"}).componentInstance.waxPeerTrade=ie,Ee||this.dialogService.markDialogSeen(ie.id,de.dialogName))}}return E.\u0275fac=function(ie){return new(ie||E)(O.LFG(I.uw),O.LFG(s.xAy),O.LFG(v.F),O.LFG(p.fQ))},E.\u0275prov=O.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})()},14469:(Ie,ee,o)=>{o.d(ee,{_:()=>se});var s=o(70655),e=o(5e3),l=o(93075),p=o(35357),w=o(93114),c=o(97443),y=o(23086),P=o(45990),F=o(44987),R=o(54004),L=o(95698),S=o(70262),J=o(39646),_=o(14223),b=o(53005),v=o(69808),Y=o(88279),W=o(97550),U=o(20773),D=o(77093),O=o(1094),I=o(67322),f=o(74107),E=o(90508),M=o(47423),ie=o(79586),de=o(31495),j=o(96298),Ee=o(98833),ae=o(78644),N=o(6908),x=o(966),G=o(46907),ne=o(20975),te=o(29016);function Oe(d,m){1&d&&e._UZ(0,"mat-spinner",25),2&d&&e.Q6J("diameter",160)}function Re(d,m){1&d&&(e.TgZ(0,"mat-form-field",28),e.TgZ(1,"mat-label"),e.tHW(2,42),e._UZ(3,"cw-icon",43),e.N_p(),e.qZA(),e._UZ(4,"input",44),e.qZA())}function pe(d,m){1&d&&(e.TgZ(0,"mat-form-field",28),e.TgZ(1,"mat-label"),e.tHW(2,45),e._UZ(3,"cw-icon",43),e.N_p(),e.qZA(),e._UZ(4,"input",46),e.qZA())}function Me(d,m){1&d&&(e.TgZ(0,"mat-form-field",28),e.TgZ(1,"mat-label"),e.tHW(2,47),e._UZ(3,"cw-icon",43),e.N_p(),e.qZA(),e._UZ(4,"input",48),e.qZA())}function be(d,m){1&d&&(e.TgZ(0,"mat-form-field",28),e.TgZ(1,"mat-label"),e.tHW(2,49),e._UZ(3,"cw-icon",43),e.N_p(),e.qZA(),e._UZ(4,"input",50),e.qZA())}function fe(d,m){if(1&d&&(e.TgZ(0,"mat-option",51),e.SDv(1,52),e.ALo(2,"enumTitlecase"),e.qZA()),2&d){const g=m.$implicit;e.Q6J("value",g),e.xp6(2),e.pQV(e.lcZ(2,2,g)),e.QtT(1)}}function he(d,m){if(1&d&&(e.TgZ(0,"mat-option",51),e.SDv(1,55),e.ALo(2,"enumTitlecase"),e.qZA()),2&d){const g=m.$implicit;e.Q6J("value",g),e.xp6(2),e.pQV(e.lcZ(2,2,g)),e.QtT(1)}}function gt(d,m){if(1&d&&(e.TgZ(0,"mat-form-field",28),e.TgZ(1,"mat-label"),e.SDv(2,53),e.qZA(),e.TgZ(3,"mat-select",54),e.TgZ(4,"mat-option",31),e._uU(5,"All"),e.qZA(),e.YNc(6,he,3,4,"mat-option",32),e.qZA(),e.qZA()),2&d){const g=e.oxw(2);e.xp6(4),e.Q6J("value",null),e.xp6(2),e.Q6J("ngForOf",g.waxPeerTradeExternalStatusList)}}function it(d,m){if(1&d){const g=e.EpF();e.TgZ(0,"form",26),e.NdJ("ngSubmit",function(){return e.CHM(g),e.oxw().filter()}),e.YNc(1,Re,5,0,"mat-form-field",27),e.YNc(2,pe,5,0,"mat-form-field",27),e.YNc(3,Me,5,0,"mat-form-field",27),e.YNc(4,be,5,0,"mat-form-field",27),e.TgZ(5,"mat-form-field",28),e.TgZ(6,"mat-label"),e.SDv(7,29),e.qZA(),e.TgZ(8,"mat-select",30),e.TgZ(9,"mat-option",31),e._uU(10,"All"),e.qZA(),e.YNc(11,fe,3,4,"mat-option",32),e.qZA(),e.qZA(),e.YNc(12,gt,7,2,"mat-form-field",27),e.TgZ(13,"mat-form-field",28),e.TgZ(14,"mat-label"),e.SDv(15,33),e.qZA(),e.TgZ(16,"mat-select",34),e.TgZ(17,"mat-option",31),e.SDv(18,35),e.qZA(),e.TgZ(19,"mat-option",31),e.SDv(20,36),e.qZA(),e.TgZ(21,"mat-option",31),e.SDv(22,37),e.qZA(),e.TgZ(23,"mat-option",31),e.SDv(24,38),e.qZA(),e.qZA(),e.qZA(),e.TgZ(25,"button",39),e.ALo(26,"push"),e.TgZ(27,"cw-loader",40),e.SDv(28,41),e.ALo(29,"push"),e.qZA(),e.qZA(),e.qZA()}if(2&d){const g=e.oxw();e.Q6J("formGroup",g.form),e.xp6(1),e.Q6J("cwRoleIf",g.UserRole.MANAGER),e.xp6(1),e.Q6J("cwRoleIf",g.UserRole.MANAGER),e.xp6(1),e.Q6J("cwRoleIf",g.UserRole.MANAGER),e.xp6(1),e.Q6J("cwRoleIf",g.UserRole.MANAGER),e.xp6(5),e.Q6J("value",null),e.xp6(2),e.Q6J("ngForOf",g.waxPeerTradeStatusList),e.xp6(1),e.Q6J("cwRoleIf",g.UserRole.MANAGER),e.xp6(5),e.Q6J("value",g.WaxPeerTradeOrderBy.VALUE_DESC),e.xp6(2),e.Q6J("value",g.WaxPeerTradeOrderBy.VALUE),e.xp6(2),e.Q6J("value",g.WaxPeerTradeOrderBy.ID_DESC),e.xp6(2),e.Q6J("value",g.WaxPeerTradeOrderBy.ID),e.xp6(2),e.Q6J("disabled",e.lcZ(26,14,g.dataSource.loading$)),e.xp6(2),e.Q6J("loading",e.lcZ(29,16,g.dataSource.loading$))}}function ue(d,m){1&d&&(e.TgZ(0,"th",56),e._uU(1,"ID"),e.qZA())}const Ze=function(){return["/admin/wax-peer-trades"]},nt=function(d){return{waxPeerTradeId:d}};function _t(d,m){if(1&d&&(e.TgZ(0,"a",60),e.SDv(1,61),e.qZA()),2&d){const g=e.oxw().$implicit;e.Q6J("routerLink",e.DdM(2,Ze))("queryParams",e.VKq(3,nt,g.id))}}function Ke(d,m){if(1&d&&(e.TgZ(0,"td",57),e._UZ(1,"cw-id-field",58),e.YNc(2,_t,2,5,"a",59),e.qZA()),2&d){const g=m.$implicit,V=e.oxw();e.xp6(1),e.Q6J("id",g.id),e.xp6(1),e.Q6J("cwRoleIf",V.UserRole.MANAGER)}}function rt(d,m){1&d&&(e.TgZ(0,"th",56),e.SDv(1,62),e.qZA())}function mt(d,m){if(1&d&&(e.TgZ(0,"td",57),e._UZ(1,"cw-username-row-view",63),e.qZA()),2&d){const g=m.$implicit;e.xp6(1),e.Q6J("user",g.user)("link",!0)("showId",!0)}}function St(d,m){1&d&&(e.TgZ(0,"th",56),e._uU(1,"Item"),e.qZA())}function It(d,m){if(1&d&&e._UZ(0,"img",68),2&d){const g=e.oxw(3).$implicit;e.Q6J("ngbTooltip",g.itemVariant.externalId)("src",g.iconUrl||g.itemVariant.iconUrl,e.LSH)}}function Be(d,m){if(1&d&&(e.ynx(0),e.YNc(1,It,1,2,"img",67),e.BQk()),2&d){const g=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngIf",g.itemVariant)}}function Dt(d,m){if(1&d&&e._UZ(0,"cw-item",69),2&d){const g=e.oxw(2).$implicit,V=e.oxw();e.Q6J("horizontal",!0)("itemVariant",g.itemVariant)("allowOverlay",!1)("customPrice",V.isCustomPriced(g)?g.value:null)("tradeItem",!0)("externalIconUrl",g.iconUrl)("rarityRadialBackground",!0)}}function pt(d,m){if(1&d&&(e.ynx(0),e.YNc(1,Be,2,1,"ng-container",65),e.YNc(2,Dt,1,7,"ng-template",null,66,e.W1O),e.BQk()),2&d){const g=e.MAs(3),V=e.oxw(2);e.xp6(1),e.Q6J("ngIf",V.user.roles.includes(V.UserRole.MODERATOR))("ngIfElse",g)}}function st(d,m){if(1&d&&(e.TgZ(0,"td",57),e.YNc(1,pt,4,2,"ng-container",64),e.qZA()),2&d){const g=m.$implicit;e.xp6(1),e.Q6J("ngIf",g.itemVariant)}}function At(d,m){1&d&&(e.TgZ(0,"th",56),e.SDv(1,70),e.qZA())}function ft(d,m){1&d&&e._UZ(0,"cw-icon",72)}function xe(d,m){if(1&d&&(e.TgZ(0,"td",57),e._uU(1),e.ALo(2,"number"),e.YNc(3,ft,1,0,"cw-icon",71),e.qZA()),2&d){const g=m.$implicit,V=e.oxw();e.xp6(1),e.hij(" ",e.xi3(2,2,g.value,"1.2-2")," "),e.xp6(2),e.Q6J("ngIf",V.user.roles.includes(V.UserRole.USER))}}function Ct(d,m){1&d&&(e.TgZ(0,"th",56),e.SDv(1,73),e.qZA())}function we(d,m){if(1&d&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&d){const g=m.$implicit;e.ekj("text-success",g>0)("text-danger",g<0),e.xp6(1),e.hij(" \xa0(",g,") ")}}const Pe=function(d){return{$implicit:d}};function Ne(d,m){if(1&d&&(e.ynx(0),e.TgZ(1,"span"),e._uU(2),e.ALo(3,"number"),e.qZA(),e.YNc(4,we,2,5,"ng-template",74,75,e.W1O),e.ALo(6,"number"),e.BQk()),2&d){const g=e.MAs(5),V=e.oxw().$implicit,Te=e.oxw();e.xp6(2),e.Oqu(e.xi3(3,3,V.valuePaid,"1.2-2")),e.xp6(2),e.Q6J("ngTemplateOutletContext",e.VKq(9,Pe,e.xi3(6,6,Te.getValueDiff(V),"1.2-2")))("ngTemplateOutlet",g)}}function Rt(d,m){if(1&d&&(e.TgZ(0,"td",57),e.YNc(1,Ne,7,11,"ng-container",64),e.qZA()),2&d){const g=m.$implicit;e.xp6(1),e.Q6J("ngIf",null!==g.valuePaid)}}function Ot(d,m){1&d&&(e.TgZ(0,"th",56),e._uU(1,"Status"),e.qZA())}function ve(d,m){1&d&&(e.TgZ(0,"a",77),e._UZ(1,"cw-icon",78),e.TgZ(2,"span"),e.SDv(3,79),e.qZA(),e.qZA())}function ht(d,m){if(1&d&&(e.TgZ(0,"td",57),e.TgZ(1,"span"),e._uU(2),e.ALo(3,"enumTitlecase"),e.qZA(),e._uU(4," \xa0 "),e.YNc(5,ve,4,0,"a",76),e.qZA()),2&d){const g=m.$implicit,V=e.oxw();e.xp6(1),e.ekj("text-success",g.status===V.WaxPeerTradeStatus.COMPLETED)("text-danger",g.status===V.WaxPeerTradeStatus.FAILED),e.xp6(1),e.hij(" ",e.lcZ(3,6,g.status)," "),e.xp6(3),e.Q6J("ngIf",V.user.id===g.userId&&g.status===V.WaxPeerTradeStatus.PROCESSING)}}function Pt(d,m){1&d&&(e.TgZ(0,"th",56),e.SDv(1,80),e.qZA())}function ze(d,m){if(1&d&&(e.TgZ(0,"td",57),e._uU(1),e.ALo(2,"enumTitlecase"),e.qZA()),2&d){const g=m.$implicit,V=e.oxw();e.ekj("text-success",g.externalStatus===V.WaxPeerTradeExternalStatus.COMPLETED)("text-danger",g.externalStatus===V.WaxPeerTradeExternalStatus.DECLINED_AND_REFUNDED)("text-warning",g.externalStatus===V.WaxPeerTradeExternalStatus.EXCEPTION),e.xp6(1),e.hij(" ",e.lcZ(2,7,g.externalStatus)," ")}}function qe(d,m){1&d&&(e.TgZ(0,"th",56),e.SDv(1,81),e.qZA())}function lt(d,m){if(1&d&&(e.TgZ(0,"td",57),e._uU(1),e.qZA()),2&d){const g=m.$implicit;e.xp6(1),e.hij(" ",g.externalId," ")}}function ct(d,m){1&d&&(e.TgZ(0,"th",56),e.SDv(1,82),e.qZA())}function $e(d,m){if(1&d&&(e.TgZ(0,"td",57),e._uU(1),e.qZA()),2&d){const g=m.$implicit;e.xp6(1),e.hij(" ",g.tradeOfferId," ")}}function K(d,m){1&d&&(e.TgZ(0,"th",83),e.tHW(1,84),e._UZ(2,"div",85),e.N_p(),e.qZA()),2&d&&(e.xp6(2),e.Q6J("ngbTooltip","This is a message about what is going on with the trade on WAXPeer, not very trustworthy"))}function $(d,m){if(1&d&&(e.TgZ(0,"td",57),e._uU(1),e.qZA()),2&d){const g=m.$implicit;e.xp6(1),e.hij(" ",g.externalMessage," ")}}function B(d,m){1&d&&(e.TgZ(0,"th",56),e._uU(1,"Created At"),e.qZA())}function _e(d,m){if(1&d&&(e.TgZ(0,"td",57),e._uU(1),e.ALo(2,"date"),e.qZA()),2&d){const g=m.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,g.createdAt,"medium")," ")}}function Fe(d,m){1&d&&(e.TgZ(0,"th",56),e.SDv(1,86),e.qZA())}function Ge(d,m){if(1&d&&(e.TgZ(0,"td",57),e._uU(1),e.qZA()),2&d){const g=m.$implicit;e.xp6(1),e.hij(" ",g.partner," ")}}function Le(d,m){1&d&&(e.TgZ(0,"th",56),e.SDv(1,87),e.qZA())}function h(d,m){if(1&d&&(e.TgZ(0,"td",57),e._uU(1),e.qZA()),2&d){const g=m.$implicit;e.xp6(1),e.hij(" ",g.token," ")}}function A(d,m){1&d&&(e.TgZ(0,"th",56),e.SDv(1,88),e.qZA())}function u(d,m){if(1&d){const g=e.EpF();e.TgZ(0,"button",91),e.NdJ("click",function(){e.CHM(g);const Te=e.oxw(2).$implicit;return e.oxw().track(Te)}),e.TgZ(1,"cw-loader",40),e.SDv(2,92),e.qZA(),e.qZA()}if(2&d){const g=e.oxw(2).$implicit,V=e.oxw();e.xp6(1),e.Q6J("loading",V.trackLoading===g.id)}}const H=function(){return["/support"]};function z(d,m){1&d&&(e.TgZ(0,"button",93),e._uU(1," Contact Support "),e.qZA()),2&d&&e.Q6J("routerLink",e.DdM(1,H))}function oe(d,m){if(1&d&&(e.ynx(0),e.YNc(1,u,3,1,"button",89),e.YNc(2,z,2,2,"button",90),e.BQk()),2&d){const g=e.oxw().$implicit,V=e.oxw();e.xp6(1),e.Q6J("ngIf",V.user.roles.includes(V.UserRole.SUPPORT_PLUS)),e.xp6(1),e.Q6J("ngIf",g.userId===V.user.id&&V.isExpired(g))}}function Q(d,m){if(1&d&&(e.TgZ(0,"td",57),e.YNc(1,oe,3,2,"ng-container",64),e.qZA()),2&d){const g=m.$implicit,V=e.oxw();e.xp6(1),e.Q6J("ngIf",!V.isInFinalStatus(g))}}function Z(d,m){1&d&&e._UZ(0,"tr",94)}function X(d,m){1&d&&e._UZ(0,"tr",95)}function re(d,m){1&d&&e._UZ(0,"cw-loader",40),2&d&&e.Q6J("loading",!0)}let se=class extends((0,w.A)(w.t)){constructor(m,g,V,Te,De){super(),this.changeRef=m,this.fb=g,this.route=V,this.router=Te,this.waxPeerTradeService=De,this.showFilters=!1,this.limit=50,this.trackLoading=null,this.fetchingMore=!1,this.UserRole=c.i,this.WaxPeerTradeOrderBy=y.xU,this.WaxPeerTradeStatus=y.yL,this.WaxPeerTradeExternalStatus=y.OC,this.waxPeerTradeStatusList=Object.keys(y.yL),this.waxPeerTradeExternalStatusList=Object.keys(y.OC)}ngOnInit(){if(this.form=this.fb.group({externalId:null,externalStatus:null,itemVariantId:null,orderBy:y.xU.ID_DESC,status:null,userId:null,waxPeerTradeId:null}),this.userIdFilter&&this.form.patchValue({userId:this.userIdFilter}),this.user.roles.includes(c.i.MANAGER)){const{waxPeerTradeId:g,userId:V,itemVariantId:Te,externalId:De}=this.route.snapshot.queryParams;g&&this.form.patchValue({waxPeerTradeId:g}),V&&this.form.patchValue({userId:V}),Te&&this.form.patchValue({itemVariantId:Te}),De&&this.form.patchValue({externalId:De})}const m=(0,_.Mz)();this.columns=m.filter(g=>this.user.roles.includes(g.role)&&!g.hide).map(g=>g.field),this.dataSource=this.waxPeerTradeService.getDataSource(this.getVariables()),this.data$=this.dataSource.connect().pipe((0,R.U)(g=>this.waxPeerTradeService.filterAndSort(this.getVariables(),g))),this.waxPeerTradeService.created$.pipe((0,F.t)(this)).subscribe(g=>this.dataSource.queryRef.updateQuery(V=>this.waxPeerTradeService.insertOrUpdateRowToResponse(V,g))),this.waxPeerTradeService.updated$.pipe((0,F.t)(this)).subscribe(g=>this.dataSource.queryRef.updateQuery(V=>this.waxPeerTradeService.insertOrUpdateRowToResponse(V,g)))}filter(){const m=this.getVariables();this.dataSource.filter(m),this.user.roles.includes(c.i.MANAGER)&&this.router.navigate([],{relativeTo:this.route,queryParams:{waxPeerTradeId:m.waxPeerTradeId,userId:m.userId,itemVariantId:m.itemVariantId,externalId:m.externalId}})}fetchMore(m){m===P.Ro.VISIBLE&&!this.fetchingMore&&(this.fetchingMore=!0,this.dataSource.fetchMore().finally(()=>this.fetchingMore=!1).catch(()=>this.fetchingMore=!1))}getValueDiff(m){return m.value-m.valuePaid}getVariables(){const m=this.form.getRawValue();return Object.assign({first:this.limit},m)}isCustomPriced(m){return this.waxPeerTradeService.isWaxPeerCustomPriced(m)}track(m){return this.trackLoading=m.id,this.changeRef.markForCheck(),this.waxPeerTradeService.track({waxPeerTradeId:m.id}).pipe((0,L.q)(1),(0,S.K)(()=>(0,J.of)(null))).subscribe(g=>{this.trackLoading=null,this.changeRef.markForCheck()})}isInFinalStatus(m){return this.waxPeerTradeService.isInFinalStatus(m)}isExpired(m){return this.waxPeerTradeService.getTimerExpiryDate(m)<new Date}};se.\u0275fac=function(m){return new(m||se)(e.Y36(e.sBO),e.Y36(l.qu),e.Y36(p.gz),e.Y36(p.F0),e.Y36(b.F))},se.\u0275cmp=e.Xpm({type:se,selectors:[["cw-wax-peer-trade-table"]],inputs:{user:"user",showFilters:"showFilters",userIdFilter:"userIdFilter",limit:"limit"},features:[e.qOj],decls:55,vars:18,consts:function(){let d,m,g,V,Te,De,ye,at,dt,Ft,Ce,Xt,Jt,Je,Yt,Vt,Ye,Ht,Qt,kt,Kt,Ve,je,zt,qt,jt,He,Zt,en,tn,nn;return d=$localize`:␟81b97b8ea996ad1e4f9fca8415021850214884b1␟5611592591303869712:Status`,m=$localize`:␟400c30183b9b6cf5b3decf8491a929e10fa21a3b␟3951121764366844614:Order by`,g=$localize`:␟db113da64df7af9bdba3d2d8fcf6b44710016e84␟9012846548492768301:Highest value first`,V=$localize`:␟8ae0436285692c70d3a5ae1853bda2d871436738␟7493222552535253158:Lowest value first`,Te=$localize`:␟e7f88c481ecdda90467acd3f4dbe934465cee30f␟2317673285989169654:Newest first`,De=$localize`:␟58843dffadc1ddeeddb217ee89b66611fbcd5a64␟7788789394151316565:Oldest first`,ye=$localize`:␟5ca707824ab93066c7d9b44e1b8bf216725c2c22␟8829497237648100098:Filter`,at=$localize`:␟493c43ca61bd4e20f7dbcd48acc6a030aa118a12␟444156502708221623:${"\ufffd#3\ufffd"}:START_TAG_CW_ICON:${"\ufffd/#3\ufffd"}:CLOSE_TAG_CW_ICON: Trade ID `,dt=$localize`:␟9f894884f5776dc18f0187d7eeef5efa2840ffbe␟8903307670670068590:V2F4UGVlclRyYWRlOjE= or 1`,Ft=$localize`:␟8c30b44a3533f2c2b4dece44faa71b640d926f9d␟5815570417982466067:${"\ufffd#3\ufffd"}:START_TAG_CW_ICON:${"\ufffd/#3\ufffd"}:CLOSE_TAG_CW_ICON: External ID `,Ce=$localize`:␟4f3e86e5e9e2eabd635e10a6db769bc0403eb85d␟4863371103643861248:1`,Xt=$localize`:␟eb1983437d0413119ada56a480a5b3d78316f910␟6130668890624089248:${"\ufffd#3\ufffd"}:START_TAG_CW_ICON:${"\ufffd/#3\ufffd"}:CLOSE_TAG_CW_ICON: ItemVariant ID `,Jt=$localize`:␟13d0bd761fa6f4286508ebd75f84d763024a289b␟6876270787388265514:SXRlbVZhcmlhbnQ6MQ== or 1`,Je=$localize`:␟b3875cdf51a644689a950c82ad5ee67fdee4c152␟5164419783663797282:${"\ufffd#3\ufffd"}:START_TAG_CW_ICON:${"\ufffd/#3\ufffd"}:CLOSE_TAG_CW_ICON: User ID `,Yt=$localize`:␟eee0ffe01fd8c3f50ef18ba3e923efae0382d5f8␟8543535162971154127:VXNlcjox or 1`,Vt=$localize`:␟890aeadcf47e20bb12a46fbc992716c86607aa99␟6851856352087104328:${"\ufffd0\ufffd"}:INTERPOLATION:`,Ye=$localize`:␟a908610814bbfb7784f55f0d0885f8a264f77aa8␟9076221964022993693:External Status`,Ht=$localize`:␟890aeadcf47e20bb12a46fbc992716c86607aa99␟6851856352087104328:${"\ufffd0\ufffd"}:INTERPOLATION:`,Qt=$localize`:␟043e6b3e0a1db602a89155b03d0fa3291c90cbcc␟6270198167972055147: Link to trade `,kt=$localize`:␟e08a77594f3d89311cdf6da5090044270909c194␟2392488717875840729:User`,Kt=$localize`:␟5049e204c14c648691ac775a64fb504467aeb549␟6555318547274416232:Value`,Ve=$localize`:␟3a9c21f45548783156d220aabfd04ee7006c5bd4␟3382679773998440669:Value Paid`,je=$localize`:␟c2dc6e4e90461a5e9a587291f2fabf3a2c8729cd␟4204362661828083705: View Trade Offers `,zt=$localize`:␟a908610814bbfb7784f55f0d0885f8a264f77aa8␟9076221964022993693:External Status`,qt=$localize`:␟da3920def6835f1db6f05a24423b47d2d84e2a7c␟4817001867075378183:External ID`,jt=$localize`:␟556f169a47451a67218049e831ffede7bd67b838␟4498627973813500513:Trade Offer ID`,He=$localize`:␟4b9a2ad3731ef982087c89d397b7859d83edaf6e␟5821087469382642279:${"\ufffd#2\ufffd"}:START_TAG_DIV: External Message ${"\ufffd/#2\ufffd"}:CLOSE_TAG_DIV:`,Zt=$localize`:␟8d19003ae52130e11fbc2ef8e28566518f207738␟4293427291184093000:Partner`,en=$localize`:␟1edc1fc6cfbbb22353050ad6788508b3ed584f53␟3039940756451018621:Token`,tn=$localize`:␟030b4423b92167200e39519599f9b863b4f7c62c␟3193976279273491157:Actions`,nn=$localize`:␟769a48a4280ce4aabe88d36cdec48f2ea7ec9258␟2599899512877501871: Track `,[[3,"diameter",4,"ngIf"],["fxLayout","row wrap","fxLayoutAlign","start center","fxLayoutAlign.lt-md","center center","fxLayoutGap",".5rem",3,"formGroup","ngSubmit",4,"ngIf"],["mat-table","",1,"w-100",3,"dataSource","trackBy"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","user"],["matColumnDef","itemVariant"],["matColumnDef","value"],["matColumnDef","valuePaid"],["matColumnDef","status"],["matColumnDef","externalStatus"],["mat-cell","",3,"text-success","text-danger","text-warning",4,"matCellDef"],["matColumnDef","externalId"],["matColumnDef","tradeOfferId"],["matColumnDef","externalMessage"],["mat-header-cell","","class","w-10",4,"matHeaderCellDef"],["matColumnDef","createdAt"],["matColumnDef","partner"],["matColumnDef","token"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["cwIntersectionObserver","",1,"text-center",3,"intersectionRootMargin","intersectionDebounce","intersectionSkipWhile","visibilityChange"],[3,"loading",4,"ngIf"],[3,"diameter"],["fxLayout","row wrap","fxLayoutAlign","start center","fxLayoutAlign.lt-md","center center","fxLayoutGap",".5rem",3,"formGroup","ngSubmit"],["fxFlex","0 1 auto","fxFlex.lt-md","1 1 calc(50% - 0.5rem)",4,"cwRoleIf"],["fxFlex","0 1 auto","fxFlex.lt-md","1 1 calc(50% - 0.5rem)"],d,["formControlName","status"],[3,"value"],["class","text-titlecase",3,"value",4,"ngFor","ngForOf"],m,["formControlName","orderBy"],g,V,Te,De,["fxFlex","0 1","type","submit","mat-flat-button","","color","primary",1,"mb-3",3,"disabled"],[3,"loading"],ye,at,["inlineSVG","assets/icons/search.svg"],["matInput","","type","search","autocomplete","off","placeholder",dt,"formControlName","waxPeerTradeId"],Ft,["matInput","","type","search","autocomplete","off","placeholder",Ce,"formControlName","externalId"],Xt,["matInput","","type","search","autocomplete","off","placeholder",Jt,"formControlName","itemVariantId"],Je,["matInput","","type","search","autocomplete","off","placeholder",Yt,"formControlName","userId"],[1,"text-titlecase",3,"value"],Vt,Ye,["formControlName","externalStatus"],Ht,["mat-header-cell",""],["mat-cell",""],[3,"id"],[3,"routerLink","queryParams",4,"cwRoleIf"],[3,"routerLink","queryParams"],Qt,kt,[3,"user","link","showId"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["userRef",""],["loading","lazy","class","item-variant",3,"ngbTooltip","src",4,"ngIf"],["loading","lazy",1,"item-variant",3,"ngbTooltip","src"],[3,"horizontal","itemVariant","allowOverlay","customPrice","tradeItem","externalIconUrl","rarityRadialBackground"],Kt,["inlineSVG","assets/icons/coins.svg",4,"ngIf"],["inlineSVG","assets/icons/coins.svg"],Ve,[3,"ngTemplateOutletContext","ngTemplateOutlet"],["diff",""],["href","https://steamcommunity.com/my/tradeoffers","target","_blank","rel","noreferrer",4,"ngIf"],["href","https://steamcommunity.com/my/tradeoffers","target","_blank","rel","noreferrer"],["inlineSVG","assets/icons/steam.svg"],je,zt,qt,jt,["mat-header-cell","",1,"w-10"],He,[3,"ngbTooltip"],Zt,en,tn,["mat-flat-button","","color","accent",3,"click",4,"ngIf"],["mat-flat-button","","class","mat-button-3d","color","primary",3,"routerLink",4,"ngIf"],["mat-flat-button","","color","accent",3,"click"],nn,["mat-flat-button","","color","primary",1,"mat-button-3d",3,"routerLink"],["mat-header-row",""],["mat-row",""]]},template:function(m,g){1&m&&(e.YNc(0,Oe,1,1,"mat-spinner",0),e.ALo(1,"push"),e.YNc(2,it,30,18,"form",1),e.TgZ(3,"table",2),e.ALo(4,"async"),e.ynx(5,3),e.YNc(6,ue,2,0,"th",4),e.YNc(7,Ke,3,2,"td",5),e.BQk(),e.ynx(8,6),e.YNc(9,rt,2,0,"th",4),e.YNc(10,mt,2,3,"td",5),e.BQk(),e.ynx(11,7),e.YNc(12,St,2,0,"th",4),e.YNc(13,st,2,1,"td",5),e.BQk(),e.ynx(14,8),e.YNc(15,At,2,0,"th",4),e.YNc(16,xe,4,5,"td",5),e.BQk(),e.ynx(17,9),e.YNc(18,Ct,2,0,"th",4),e.YNc(19,Rt,2,1,"td",5),e.BQk(),e.ynx(20,10),e.YNc(21,Ot,2,0,"th",4),e.YNc(22,ht,6,8,"td",5),e.BQk(),e.ynx(23,11),e.YNc(24,Pt,2,0,"th",4),e.YNc(25,ze,3,9,"td",12),e.BQk(),e.ynx(26,13),e.YNc(27,qe,2,0,"th",4),e.YNc(28,lt,2,1,"td",5),e.BQk(),e.ynx(29,14),e.YNc(30,ct,2,0,"th",4),e.YNc(31,$e,2,1,"td",5),e.BQk(),e.ynx(32,15),e.YNc(33,K,3,1,"th",16),e.YNc(34,$,2,1,"td",5),e.BQk(),e.ynx(35,17),e.YNc(36,B,2,0,"th",4),e.YNc(37,_e,3,4,"td",5),e.BQk(),e.ynx(38,18),e.YNc(39,Fe,2,0,"th",4),e.YNc(40,Ge,2,1,"td",5),e.BQk(),e.ynx(41,19),e.YNc(42,Le,2,0,"th",4),e.YNc(43,h,2,1,"td",5),e.BQk(),e.ynx(44,20),e.YNc(45,A,2,0,"th",4),e.YNc(46,Q,2,1,"td",5),e.BQk(),e.YNc(47,Z,1,0,"tr",21),e.YNc(48,X,1,0,"tr",22),e.qZA(),e.TgZ(49,"section",23),e.NdJ("visibilityChange",function(Te){return g.fetchMore(Te)}),e.ALo(50,"push"),e._uU(51," \xa0"),e.YNc(52,re,1,1,"cw-loader",24),e.ALo(53,"push"),e._uU(54,"\xa0\n"),e.qZA()),2&m&&(e.Q6J("ngIf",e.lcZ(1,10,g.dataSource.loading$)),e.xp6(2),e.Q6J("ngIf",g.showFilters),e.xp6(1),e.Q6J("dataSource",e.lcZ(4,12,g.data$))("trackBy",g.trackById),e.xp6(44),e.Q6J("matHeaderRowDef",g.columns),e.xp6(1),e.Q6J("matRowDefColumns",g.columns),e.xp6(1),e.Q6J("intersectionRootMargin","0px")("intersectionDebounce",0)("intersectionSkipWhile",e.lcZ(50,14,g.dataSource.loading$)),e.xp6(3),e.Q6J("ngIf",e.lcZ(53,16,g.dataSource.loading$)))},directives:[v.O5,Y.BZ,Y.w1,Y.fO,Y.Dz,Y.as,Y.nj,W.Z,U.$g,l._Y,l.JL,D.xw,D.Wh,D.SQ,l.sg,O.P,I.KE,D.yH,I.hX,f.gD,l.JJ,l.u,E.ey,v.sg,M.lW,ie.R,de.o,j.d$,Ee.Nt,l.Fj,Y.ge,Y.ev,ae.m,p.yS,N.M,x._L,G.P,v.tP,p.rH,Y.XQ,Y.Gk],pipes:[ne.f,v.Ov,te.X,v.JJ,v.uU],styles:["mat-spinner[_ngcontent-%COMP%]{position:absolute;margin-left:calc(50% - 80px)}.item-variant[_ngcontent-%COMP%]{width:2rem}table[mat-table][_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table[mat-table][_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center}"],changeDetection:0}),se=(0,s.gn)([(0,F.c)(),(0,s.w6)("design:paramtypes",[e.sBO,l.qu,p.gz,p.F0,b.F])],se)},14223:(Ie,ee,o)=>{o.d(ee,{dU:()=>w,x8:()=>c,Eh:()=>y,m4:()=>P,Ul:()=>F,zK:()=>R,Mz:()=>S});var s=o(97443),e=o(39478),l=o(23600);const p=e.Ps`
  fragment WaxPeerTradeDefault on WaxPeerTrade {
    id
    itemVariantId
    itemVariant {
      ...ItemVariant
    }
    userId
    user {
      ...UserPublic
    }
    value
    valuePaid
    status
    partner
    token
    externalId
    externalStatus
    tradeOfferId
    externalMessage
    externalItemId
    float
    iconUrl
    isOfferSent
    createdAt
    updatedAt
    expiresAt
  }

  ${l.xp8}
  ${l.YAb}
`,w=(J=p)=>e.Ps`
  query WaxPeerTradeList(
    $after: String
    $first: PaginationAmount
    $before: String
    $last: PaginationAmount
    $orderBy: [WaxPeerTradeOrderBy]
    $externalId: String
    $externalStatus: WaxPeerTradeExternalStatus
    $itemVariantId: ID
    $status: WaxPeerTradeStatus
    $userId: ID
    $waxPeerTradeId: ID
  ) {
    waxPeerTrades(
      after: $after
      first: $first
      before: $before
      last: $last
      orderBy: $orderBy
      externalId: $externalId
      externalStatus: $externalStatus
      itemVariantId: $itemVariantId
      status: $status
      userId: $userId
      waxPeerTradeId: $waxPeerTradeId
    ) {
      pageInfo {
        hasNextPage
        endCursor
      }
      edges {
        node {
          ...${J.definitions[0].name.value}
        }
      }
    }
  }
  ${J}
`,c=e.Ps`
  mutation CreateWaxPeerTrade($input: CreateWaxPeerTradeInput!) {
    createWaxPeerTrade(input: $input) {
      waxPeerTrade {
        ...WaxPeerTradeDefault
      }
    }
  }

  ${p}
`,y=e.Ps`
  mutation TrackWaxPeerTrade($input: TrackWaxPeerTradeInput!) {
    trackWaxPeerTrade(input: $input) {
      success
    }
  }
`,P=e.Ps`
  subscription OnCreateWaxPeerTrade {
    createWaxPeerTrade {
      waxPeerTrade {
        ...WaxPeerTradeDefault
      }
    }
  }

  ${p}
`,F=e.Ps`
  subscription OnUpdateWaxPeerTrade {
    updateWaxPeerTrade {
      waxPeerTrade {
        ...WaxPeerTradeDefault
      }
    }
  }

  ${p}
`,R=e.Ps`
  query WaxPeerItems(
    $after: String
    $discount: Int
    $first: PaginationAmount
    $from: Float
    $marketHashName: String
    $markup: Int
    $maxValue: Float
    $minValue: Float
    $orderBy: WaxPeerItemOrderBy
  ) {
    waxPeerItems(
      after: $after
      discount: $discount
      first: $first
      from: $from
      marketHashName: $marketHashName
      markup: $markup
      maxValue: $maxValue
      minValue: $minValue
      orderBy: $orderBy
    ) {
      pageInfo {
        hasNextPage
        endCursor
      }
      edges {
        node {
          id
          itemVariant {
            ...ItemVariant
          }
          value
          float
          iconUrl
        }
      }
    }
  }
  ${l.xp8}
`,L=(J,_,b=!1)=>({field:J,role:_,hide:b}),S=()=>[L("id",s.i.USER),L("user",s.i.MODERATOR),L("itemVariant",s.i.USER),L("value",s.i.USER),L("valuePaid",s.i.DEVELOPER),L("status",s.i.USER),L("externalStatus",s.i.MANAGER),L("externalId",s.i.MANAGER),L("externalMessage",s.i.MANAGER),L("tradeOfferId",s.i.MANAGER),L("createdAt",s.i.USER),L("partner",s.i.MODERATOR),L("token",s.i.MODERATOR),L("actions",s.i.USER)]},53005:(Ie,ee,o)=>{o.d(ee,{F:()=>Y});var s=o(23600),e=o(23086),l=o(57994),w=o(77579),c=o(54004),y=o(71884),P=o(34782),F=o(63900),R=o(39646),L=o(5963),S=o(22529),J=o(75223),_=o(14223),b=o(5e3),v=o(13302);let Y=(()=>{class W{constructor(D,O,I,f){this.apollo=D,this.recaptchaService=O,this.settingService=I,this.userService=f,this.createdSubject$=new w.x,this.updatedSubject$=new w.x,this.created$=this.createdSubject$.asObservable(),this.updated$=this.updatedSubject$.asObservable(),this.expiryMinutes=30,this.selectedWaxPeerItemCollection=new s.Vnp,this.totalValueWaxPeerItemsSelected$=this.selectedWaxPeerItemCollection.items$.pipe((0,c.U)(E=>+(0,l.Big)(E.reduce((M,ie)=>M+ie.value,0)).toFixed(6))),this.maintainanceEnabled$=this.settingService.getSetting("maintenance:wax_peer").pipe((0,c.U)(({value:E})=>E),(0,y.x)(),(0,P.d)(1)),this.canWithdraw$=this.maintainanceEnabled$.pipe((0,c.U)(E=>!E)),this.userData$=this.userService.user$.pipe((0,c.U)(E=>null==E?void 0:E.id),(0,y.x)(),(0,F.w)(E=>E?(this.userDataSource=this.getDataSource({userId:E}),this.apollo.subscribe({query:_.m4}).pipe((0,c.U)(({data:M})=>M.createWaxPeerTrade.waxPeerTrade)).subscribe(M=>{E===M.userId&&this.userDataSource.queryRef.updateQuery(ie=>this.insertOrUpdateRowToResponse(ie,M)),this.createdSubject$.next(M)}),this.apollo.subscribe({query:_.Ul}).pipe((0,c.U)(({data:M})=>M.updateWaxPeerTrade.waxPeerTrade)).subscribe(M=>{E===M.userId&&this.userDataSource.queryRef.updateQuery(ie=>this.insertOrUpdateRowToResponse(ie,M)),this.updatedSubject$.next(M)}),this.userDataSource.connect()):(0,R.of)([])),(0,P.d)(1)),this.joinedUserData$=this.userData$.pipe((0,c.U)(E=>E.filter(M=>M.status===e.yL.PROCESSING)))}create(D){return this.apollo.mutate({mutation:_.x8,variables:{input:D}}).pipe((0,c.U)(({data:O})=>O.createWaxPeerTrade.waxPeerTrade))}track(D){return this.apollo.mutate({mutation:_.Eh,variables:{input:D}}).pipe((0,c.U)(({data:O})=>O.success))}getDataSource(D){return new s.g3E(this.apollo,{query:(0,_.dU)(),field:"waxPeerTrades",variables:D})}getItemsDataSource(D){return new s.g3E(this.apollo,{query:_.zK,field:"waxPeerItems",variables:D})}withdrawItem(D,O){return this.recaptchaService.setRequest("createWaxPeerTrade",{visualRecaptcha:O}).pipe((0,F.w)(f=>this.create(Object.assign(Object.assign({},f),{waxPeerItemId:D.id,itemVariantId:D.itemVariant.id,value:D.value,float:D.float,iconUrl:D.iconUrl}))))}insertOrUpdateRowToResponse(D,O){const I=D.waxPeerTrades.edges.findIndex(E=>E.node.id===O.id);if(I>-1)return D.waxPeerTrades.edges[I]=Object.assign(Object.assign({},D.waxPeerTrades.edges[I]),{node:O}),Object.assign({},D,{waxPeerTrades:Object.assign(Object.assign({},D.waxPeerTrades),{edges:[...D.waxPeerTrades.edges]})});const f={__typename:"WaxPeerTradeEdge",node:O};return Object.assign({},D,{waxPeerTrades:Object.assign(Object.assign({},D.waxPeerTrades),{edges:[...D.waxPeerTrades.edges,f]})})}filterAndSort(D,O){D=this.transformVariablesToBase64(D);const I=O.filter(E=>!(D.status&&E.status!==D.status||D.externalStatus&&E.externalStatus!==D.externalStatus||D.externalId&&E.externalId!==D.externalId||D.waxPeerTradeId&&E.id!==D.waxPeerTradeId||D.userId&&E.userId!==D.userId||D.itemVariantId&&E.itemVariantId!==D.itemVariantId));switch(D.orderBy){case e.xU.ID:case e.xU.CREATED_AT:return I.sort((E,M)=>E.createdAt.localeCompare(M.createdAt));case e.xU.ID_DESC:case e.xU.CREATED_AT_DESC:return I.sort((E,M)=>M.createdAt.localeCompare(E.createdAt));case e.xU.VALUE:return I.sort((E,M)=>E.value-M.value);case e.xU.VALUE_DESC:return I.sort((E,M)=>M.value-E.value);default:return I}}getExpiredPercentage(D){const O=Date.parse(D.createdAt),I=Date.parse(this.getTimerExpiryDate(D))-O;return(0,L.H)(0,1e3).pipe((0,c.U)(()=>(Date.now()-O)/I*100),(0,S.o)(f=>f<=100&&f>0),(0,J.l)(100))}isWaxPeerCustomPriced(D){return!(D.itemVariant.depositable&&D.value===D.itemVariant.value)}getTimerExpiryDate(D){return new Date(Date.parse(D.createdAt)+60*this.expiryMinutes*1e3)}isInFinalStatus(D){return[e.yL.COMPLETED,e.yL.FAILED].includes(D.status)}filterWaxPeerItems(D,O){const I=new RegExp(`.*(${(O.marketHashName||"").replace(" ",".*")}).*`,"i");return D.filter(f=>!(O.minValue&&f.value<O.minValue||O.maxValue&&f.value>O.maxValue||O.marketHashName&&!I.test(f.itemVariant.externalId)))}sortWaxPeerItems(D,O){switch(O){case e.H5.BEST_DEALS_ASC:return D.sort((I,f)=>I.value/I.itemVariant.displayValue-f.value/f.itemVariant.displayValue);case e.H5.BEST_DEALS_DESC:return D.sort((I,f)=>f.value/f.itemVariant.displayValue-I.value/I.itemVariant.displayValue);case e.H5.PRICE_ASC:return D.sort((I,f)=>I.value-f.value);default:return D.sort((I,f)=>f.value-I.value)}}filterAndSortWaxPeerItems(D,O){const I=this.filterWaxPeerItems(D,O);return this.sortWaxPeerItems(I,O.orderBy)}transformVariablesToBase64(D){return D.waxPeerTradeId&&(D.waxPeerTradeId=parseInt(D.waxPeerTradeId,10)?btoa(`WaxPeerTrade:${D.waxPeerTradeId}`).replace(/=/g,""):D.waxPeerTradeId),D.userId&&(D.userId=parseInt(D.userId,10)?btoa(`User:${D.userId}`).replace(/=/g,""):D.userId),D.itemVariantId&&(D.itemVariantId=parseInt(D.itemVariantId,10)?btoa(`ItemVariant:${D.itemVariantId}`).replace(/=/g,""):D.itemVariantId),D}}return W.\u0275fac=function(D){return new(D||W)(b.LFG(v._M),b.LFG(s.KvH),b.LFG(s.RCL),b.LFG(s.KDu))},W.\u0275prov=b.Yz7({token:W,factory:W.\u0275fac,providedIn:"root"}),W})()},79671:(Ie,ee,o)=>{o.d(ee,{l:()=>y});var s=o(53005),e=o(5e3),l=o(48966),p=o(46907),w=o(47423),c=o(17150);let y=(()=>{class P{constructor(R,L){this.dialogRef=R,this.waxPeerTradeService=L}isCustomPriced(){return this.waxPeerTradeService.isWaxPeerCustomPriced(this.waxPeerTrade)}}return P.dialogName="WITHDRAW_WAX_PEER_TRADE_COMPLETED",P.\u0275fac=function(R){return new(R||P)(e.Y36(l.so),e.Y36(s.F))},P.\u0275cmp=e.Xpm({type:P,selectors:[["cw-withdraw-wax-peer-trade-completed-dialog"]],inputs:{waxPeerTrade:"waxPeerTrade"},decls:11,vars:11,consts:function(){let F,R,L;return F=$localize`:␟61f3cba2247fd09266f231a715fb5b56075dca84␟2779396616831776185:Trade Complete`,R=$localize`:␟3f620f6a5ddd54e2747e261fde0d2f318a232627␟3433894944110166154:You received:`,L=$localize`:␟f4e529ae5ffd73001d1ff4bbdeeb0a72e342e5c8␟7819314041543176992:Close`,[["mat-dialog-title",""],F,R,[3,"itemVariant","horizontal","allowOverlay","customPrice","tradeItem","externalIconUrl","rarityRadialBackground"],["align","center"],["mat-flat-button","","color","accent",1,"w-100","mat-button-3d","mat-button-lg","mb-3",3,"mat-dialog-close"],L]},template:function(R,L){1&R&&(e.TgZ(0,"h1",0),e.SDv(1,1),e.qZA(),e.TgZ(2,"h6"),e.SDv(3,2),e.qZA(),e.TgZ(4,"mat-dialog-content"),e._UZ(5,"cw-item",3),e.ALo(6,"pluck"),e.qZA(),e.TgZ(7,"mat-dialog-actions",4),e.TgZ(8,"button",5),e.TgZ(9,"span"),e.SDv(10,6),e.qZA(),e.qZA(),e.qZA()),2&R&&(e.xp6(5),e.Q6J("itemVariant",e.xi3(6,8,L.waxPeerTrade,"itemVariant"))("horizontal",!0)("allowOverlay",!1)("customPrice",L.isCustomPriced()?L.waxPeerTrade.value:null)("tradeItem",!0)("externalIconUrl",L.waxPeerTrade.iconUrl)("rarityRadialBackground",!0),e.xp6(3),e.Q6J("mat-dialog-close",!0))},directives:[l.uh,l.xY,p.P,l.H8,w.lW,l.ZT],pipes:[c.F],styles:[""],changeDetection:0}),P})()},6258:(Ie,ee,o)=>{o.d(ee,{p:()=>F});var s=o(53005),e=o(5e3),l=o(48966),p=o(46907),w=o(47423),c=o(35357),y=o(17150);const P=function(){return["/support"]};let F=(()=>{class R{constructor(S,J){this.dialogRef=S,this.waxPeerTradeService=J}isCustomPriced(){return this.waxPeerTradeService.isWaxPeerCustomPriced(this.waxPeerTrade)}}return R.dialogName="WITHDRAW_WAX_PEER_TRADE_EXPIRED",R.\u0275fac=function(S){return new(S||R)(e.Y36(l.so),e.Y36(s.F))},R.\u0275cmp=e.Xpm({type:R,selectors:[["cw-withdraw-wax-peer-trade-expired-dialog"]],inputs:{waxPeerTrade:"waxPeerTrade"},decls:15,vars:14,consts:function(){let L,S,J,_;return L=$localize`:␟71c5a2d85870556e50fb868c43cb7946cff2a77a␟3830545533208110206:Warning!`,S=$localize`:␟6475851d01e75ee9ec86d658cd07870434d99a77␟3063303220319299979:This trade has expired.`,J=$localize`:␟a76e8295d320b3d078ecb6ac5a674e8d5bf4646b␟7828472295650321107: Contact support`,_=$localize`:␟f4e529ae5ffd73001d1ff4bbdeeb0a72e342e5c8␟7819314041543176992:Close`,[["mat-dialog-title","",1,"text-center"],L,[3,"itemVariant","horizontal","allowOverlay","customPrice","tradeItem","externalIconUrl","rarityRadialBackground"],[1,"mb-3"],S,["align","center"],["rel","noreferrer","mat-flat-button","","color","primary",1,"mat-button-3d","mb-3",3,"routerLink","mat-dialog-close"],J,["mat-flat-button","","color","warn",1,"w-100","mat-button-3d","mat-button-lg","mb-3",3,"mat-dialog-close"],_]},template:function(S,J){1&S&&(e.TgZ(0,"h1",0),e.SDv(1,1),e.qZA(),e.TgZ(2,"mat-dialog-content"),e._UZ(3,"cw-item",2),e.ALo(4,"pluck"),e._UZ(5,"hr"),e.TgZ(6,"p",3),e.SDv(7,4),e.qZA(),e.qZA(),e.TgZ(8,"mat-dialog-actions",5),e.TgZ(9,"a",6),e.TgZ(10,"span"),e.SDv(11,7),e.qZA(),e.qZA(),e.TgZ(12,"button",8),e.TgZ(13,"span"),e.SDv(14,9),e.qZA(),e.qZA(),e.qZA()),2&S&&(e.xp6(3),e.Q6J("itemVariant",e.xi3(4,10,J.waxPeerTrade,"itemVariant"))("horizontal",!0)("allowOverlay",!1)("customPrice",J.isCustomPriced()?J.waxPeerTrade.value:null)("tradeItem",!0)("externalIconUrl",J.waxPeerTrade.iconUrl)("rarityRadialBackground",!0),e.xp6(6),e.Q6J("routerLink",e.DdM(13,P))("mat-dialog-close",!0),e.xp6(3),e.Q6J("mat-dialog-close",!0))},directives:[l.uh,l.xY,p.P,l.H8,w.zs,c.yS,l.ZT,w.lW],pipes:[y.F],styles:[""],changeDetection:0}),R})()},75307:(Ie,ee,o)=>{o.d(ee,{X:()=>y});var s=o(53005),e=o(5e3),l=o(48966),p=o(46907),w=o(47423),c=o(17150);let y=(()=>{class P{constructor(R,L){this.dialogRef=R,this.waxPeerTradeService=L}isCustomPriced(){return this.waxPeerTradeService.isWaxPeerCustomPriced(this.waxPeerTrade)}}return P.dialogName="WITHDRAW_WAX_PEER_TRADE_FAILED",P.\u0275fac=function(R){return new(R||P)(e.Y36(l.so),e.Y36(s.F))},P.\u0275cmp=e.Xpm({type:P,selectors:[["cw-withdraw-wax-peer-trade-failed-dialog"]],inputs:{waxPeerTrade:"waxPeerTrade"},decls:12,vars:11,consts:function(){let F,R,L;return F=$localize`:␟cb3a1af02ebece45f835f072dd73fbe7d88fe6f1␟4328815712322777742:Trade Failed`,R=$localize`:␟26b5a31bb1a519f99e67f59c84f4123960561184␟300668205560769084:Your withdrawal has failed.`,L=$localize`:␟f4e529ae5ffd73001d1ff4bbdeeb0a72e342e5c8␟7819314041543176992:Close`,[["mat-dialog-title",""],F,[3,"itemVariant","horizontal","allowOverlay","customPrice","tradeItem","externalIconUrl","rarityRadialBackground"],[1,"text-danger","mb-3"],R,["mat-flat-button","","color","warn",1,"w-100","mat-button-3d","mat-button-lg","mb-3",3,"mat-dialog-close"],L]},template:function(R,L){1&R&&(e.TgZ(0,"h1",0),e.SDv(1,1),e.qZA(),e.TgZ(2,"mat-dialog-content"),e._UZ(3,"cw-item",2),e.ALo(4,"pluck"),e._UZ(5,"hr"),e.TgZ(6,"p",3),e.SDv(7,4),e.qZA(),e.qZA(),e.TgZ(8,"mat-dialog-actions"),e.TgZ(9,"button",5),e.TgZ(10,"span"),e.SDv(11,6),e.qZA(),e.qZA(),e.qZA()),2&R&&(e.xp6(3),e.Q6J("itemVariant",e.xi3(4,8,L.waxPeerTrade,"itemVariant"))("horizontal",!0)("allowOverlay",!1)("customPrice",L.isCustomPriced()?L.waxPeerTrade.value:null)("tradeItem",!0)("externalIconUrl",L.waxPeerTrade.iconUrl)("rarityRadialBackground",!0),e.xp6(6),e.Q6J("mat-dialog-close",!0))},directives:[l.uh,l.xY,p.P,l.H8,w.lW,l.ZT],pipes:[c.F],styles:[""],changeDetection:0}),P})()},11420:(Ie,ee,o)=>{o.d(ee,{s:()=>b});var s=o(53005),e=o(5e3),l=o(48966),p=o(69808),w=o(46907),c=o(57963),y=o(47423),P=o(31495),F=o(96298),R=o(17150);function L(v,Y){1&v&&(e.tHW(0,5,1),e.GkF(1),e.N_p())}function S(v,Y){if(1&v&&(e.tHW(0,5,2),e._UZ(1,"br"),e._UZ(2,"cw-countdown",8),e.N_p()),2&v){const W=e.oxw(2);e.xp6(2),e.Q6J("until",W.timer)}}function J(v,Y){if(1&v&&(e.TgZ(0,"mat-dialog-content"),e._UZ(1,"cw-item",3),e.ALo(2,"pluck"),e._UZ(3,"hr"),e.TgZ(4,"p",4),e.tHW(5,5),e.YNc(6,L,2,0,"ng-container",6),e.YNc(7,S,3,1,"ng-template",null,7,e.W1O),e.N_p(),e.qZA(),e.qZA()),2&v){const W=e.MAs(8),U=e.oxw();e.xp6(1),e.Q6J("itemVariant",e.xi3(2,9,U.waxPeerTrade,"itemVariant"))("horizontal",!0)("allowOverlay",!1)("customPrice",U.isCustomPriced()?U.waxPeerTrade.value:null)("tradeItem",!0)("externalIconUrl",U.waxPeerTrade.iconUrl)("rarityRadialBackground",!0),e.xp6(5),e.Q6J("ngIf",U.waxPeerTrade.isOfferSent)("ngIfElse",W)}}function _(v,Y){1&v&&(e.TgZ(0,"mat-dialog-actions"),e.TgZ(1,"a",9),e._UZ(2,"cw-icon",10),e.TgZ(3,"span"),e.SDv(4,11),e.qZA(),e.qZA(),e.qZA()),2&v&&(e.xp6(1),e.Q6J("mat-dialog-close",!0))}let b=(()=>{class v{constructor(W,U){this.dialogRef=W,this.waxPeerTradeService=U}set waxPeerTrade(W){this._waxPeerTrade=W,this.expiredPercentage$=this.waxPeerTradeService.getExpiredPercentage(W),this.timer=this.waxPeerTradeService.getTimerExpiryDate(W)}get waxPeerTrade(){return this._waxPeerTrade}isCustomPriced(){return this.waxPeerTradeService.isWaxPeerCustomPriced(this.waxPeerTrade)}}return v.dialogName="WITHDRAW_WAX_PEER_TRADE_PROCESSING",v.\u0275fac=function(W){return new(W||v)(e.Y36(l.so),e.Y36(s.F))},v.\u0275cmp=e.Xpm({type:v,selectors:[["cw-withdraw-wax-peer-trade-processing-dialog"]],inputs:{waxPeerTrade:"waxPeerTrade"},decls:4,vars:2,consts:function(){let Y,W,U;return Y=$localize`:␟12b1224ba2199f6b2745957e94ac29665696b087␟1111528497017216156:Incoming Trade Offer`,W=$localize`:␟c422a708e75152e4824eed49177f0a0230499fc3␟3009267826295039737:${"\ufffd*6:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_NG_CONTAINER: The trade offer has been sent ${"\ufffd/#1:1\ufffd\ufffd/*6:1\ufffd"}:CLOSE_TAG_NG_CONTAINER:${"\ufffd*7:2\ufffd"}:START_TAG_NG_TEMPLATE: Waiting for the other user to send the trade offer, we will notify you when your withdrawal is ready.${"\ufffd#1:2\ufffd\ufffd/#1:2\ufffd"}:LINE_BREAK:${"\ufffd#2:2\ufffd"}:START_TAG_CW_COUNTDOWN:${"\ufffd/#2:2\ufffd"}:CLOSE_TAG_CW_COUNTDOWN:${"\ufffd/*7:2\ufffd"}:CLOSE_TAG_NG_TEMPLATE:`,U=$localize`:␟5617a095512c79cb356bd2ae5f4b8a01059f731b␟3816884790069869652: View Trade Offers`,[["mat-dialog-title",""],Y,[4,"ngIf"],[3,"itemVariant","horizontal","allowOverlay","customPrice","tradeItem","externalIconUrl","rarityRadialBackground"],[1,"mb-3"],W,[4,"ngIf","ngIfElse"],["waiting",""],[1,"timer",3,"until"],["href","https://steamcommunity.com/my/tradeoffers","target","_blank","rel","noreferrer","mat-flat-button","","color","accent",1,"w-100","mat-button-3d","mat-button-lg","mb-3",3,"mat-dialog-close"],["inlineSVG","assets/icons/steam.svg"],U]},template:function(W,U){1&W&&(e.TgZ(0,"h1",0),e.SDv(1,1),e.qZA(),e.YNc(2,J,9,12,"mat-dialog-content",2),e.YNc(3,_,5,1,"mat-dialog-actions",2)),2&W&&(e.xp6(2),e.Q6J("ngIf",U.waxPeerTrade),e.xp6(1),e.Q6J("ngIf",U.waxPeerTrade.isOfferSent))},directives:[l.uh,p.O5,l.xY,w.P,c.M,l.H8,y.zs,l.ZT,P.o,F.d$],pipes:[R.F],styles:[".timer[_ngcontent-%COMP%]{color:#ecce75;font-weight:500}"],changeDetection:0}),v})()},93860:(Ie,ee,o)=>{o.d(ee,{D:()=>O});var s=o(46474),e=o(53005),l=o(5e3),p=o(77093),w=o(79586),c=o(46907),y=o(69808),P=o(47423),F=o(31495),R=o(96298),L=o(57963),S=o(35357),J=o(17150);function _(I,f){1&I&&(l.ynx(0),l.TgZ(1,"p",11),l.SDv(2,12),l.qZA(),l.TgZ(3,"a",13),l._UZ(4,"cw-icon",14),l.TgZ(5,"span"),l.SDv(6,15),l.qZA(),l.qZA(),l.BQk())}function b(I,f){if(1&I&&(l.TgZ(0,"p",16),l.tHW(1,17),l._UZ(2,"br"),l._UZ(3,"cw-countdown",18),l.N_p(),l.qZA()),2&I){const E=l.oxw(3);l.xp6(3),l.Q6J("until",E.timer)}}function v(I,f){if(1&I&&(l.ynx(0),l.YNc(1,_,7,0,"ng-container",8),l.YNc(2,b,4,1,"ng-template",null,10,l.W1O),l.BQk()),2&I){const E=l.MAs(3),M=l.oxw(2);l.xp6(1),l.Q6J("ngIf",M.waxPeerTrade.isOfferSent)("ngIfElse",E)}}const Y=function(){return["/support"]};function W(I,f){1&I&&(l.TgZ(0,"p",19),l.SDv(1,20),l.qZA(),l.TgZ(2,"a",21),l.TgZ(3,"span"),l.SDv(4,22),l.qZA(),l.qZA()),2&I&&(l.xp6(2),l.Q6J("routerLink",l.DdM(1,Y)))}function U(I,f){if(1&I&&(l.YNc(0,v,4,2,"ng-container",8),l.YNc(1,W,5,2,"ng-template",null,9,l.W1O)),2&I){const E=f.$implicit,M=l.MAs(2);l.Q6J("ngIf",E<100)("ngIfElse",M)}}const D=function(I){return{$implicit:I}};let O=(()=>{class I{constructor(E,M){this.waxPeerTradeService=E,this.waxPeerDialogService=M}set waxPeerTrade(E){E&&(this._waxPeerTrade=E,this.expiredPercentage$=this.waxPeerTradeService.getExpiredPercentage(E),this.timer=this.waxPeerTradeService.getTimerExpiryDate(E))}get waxPeerTrade(){return this._waxPeerTrade}openDialog(){this.waxPeerDialogService.openWithdrawalWaxPeerTradeProcessingDialog(this.waxPeerTrade,!0)}isCustomPriced(){return this.waxPeerTradeService.isWaxPeerCustomPriced(this.waxPeerTrade)}}return I.\u0275fac=function(E){return new(E||I)(l.Y36(e.F),l.Y36(s.k))},I.\u0275cmp=l.Xpm({type:I,selectors:[["cw-withdraw-wax-peer-trade-processing"]],inputs:{waxPeerTrade:"waxPeerTrade"},decls:10,vars:18,consts:function(){let f,E,M,ie,de,j;return f=$localize`:␟3f7decfcf441dc9e5a5aaac0a8057f23ba7000f0␟6691810268713581510:Withdrawal`,E=$localize`:␟6ffc71ee36304e4e3defa698e377db03d922c22a␟3139435193310268585:The trade offer has been sent`,M=$localize`:␟5617a095512c79cb356bd2ae5f4b8a01059f731b␟3816884790069869652: View Trade Offers`,ie=$localize`:␟aaba28b88fccb759ef373eb30225705d8e702c45␟5414336087634691229: Waiting for the other user to send the trade offer, we will notify you when your withdrawal is ready.${"\ufffd#2\ufffd\ufffd/#2\ufffd"}:LINE_BREAK:${"\ufffd#3\ufffd"}:START_TAG_CW_COUNTDOWN:${"\ufffd/#3\ufffd"}:CLOSE_TAG_CW_COUNTDOWN:`,de=$localize`:␟dec461dda4cdc864fbe19ef39d0fb5d082135427␟1258833575980216932:This trade has expired`,j=$localize`:␟a76e8295d320b3d078ecb6ac5a674e8d5bf4646b␟7828472295650321107: Contact support`,[["fxLayoutAlign","start center",1,"mb-3"],["color","warn",3,"loading","diameter"],["fxFlexAlign","center"],f,[1,"items","pointer","mb-3",3,"click"],[3,"itemVariant","horizontal","allowOverlay","customPrice","tradeItem","externalIconUrl","rarityRadialBackground"],[3,"ngTemplateOutletContext","ngTemplateOutlet"],["expiredPercentage",""],[4,"ngIf","ngIfElse"],["expired",""],["waiting",""],[1,"text-center"],E,["href","https://steamcommunity.com/my/tradeoffers","target","_blank","rel","noreferrer","mat-flat-button","","color","accent",1,"w-100","mat-button-3d","mat-button-lg"],["inlineSVG","assets/icons/steam.svg"],M,[1,"message"],ie,[1,"timer",3,"until"],[1,"text-danger","message"],de,["rel","noreferrer","mat-flat-button","","color","primary",1,"w-100","mat-button-3d","mat-button-lg","mt-3",3,"routerLink"],j]},template:function(E,M){if(1&E&&(l.TgZ(0,"header",0),l._UZ(1,"cw-loader",1),l.TgZ(2,"span",2),l.SDv(3,3),l.qZA(),l.qZA(),l.TgZ(4,"div",4),l.NdJ("click",function(){return M.openDialog()}),l._UZ(5,"cw-item",5),l.ALo(6,"pluck"),l.qZA(),l.YNc(7,U,3,2,"ng-template",6,7,l.W1O),l.ALo(9,"async")),2&E){const ie=l.MAs(8);l.xp6(1),l.Q6J("loading",!0)("diameter",16),l.xp6(4),l.Q6J("itemVariant",l.xi3(6,11,M.waxPeerTrade,"itemVariant"))("horizontal",!0)("allowOverlay",!1)("customPrice",M.isCustomPriced()?M.waxPeerTrade.value:null)("tradeItem",!0)("externalIconUrl",M.waxPeerTrade.iconUrl)("rarityRadialBackground",!0),l.xp6(2),l.Q6J("ngTemplateOutletContext",l.VKq(16,D,l.lcZ(9,14,M.expiredPercentage$)))("ngTemplateOutlet",ie)}},directives:[p.Wh,w.R,p.XD,c.P,y.tP,y.O5,P.zs,F.o,R.d$,L.M,S.yS],pipes:[J.F,y.Ov],styles:["[_nghost-%COMP%]{display:block;padding:.75rem 1.25rem 1.25rem;cursor:pointer;transition:background 175ms ease-out}[_nghost-%COMP%]:nth-child(odd){background:#262a30}[_nghost-%COMP%]:nth-child(even){background:#21252b}[_nghost-%COMP%]:hover{background:#2c3037}cw-loader[_ngcontent-%COMP%]{display:inline-block;margin-right:.5rem}.message[_ngcontent-%COMP%]{font-size:.875rem;padding:0 .5rem;text-align:center;margin-bottom:0}.timer[_ngcontent-%COMP%]{color:#ecce75;font-weight:500}"],changeDetection:0}),I})()}}]);